{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","app/index.js","sr.js","app/components/aggregate-details.jsx","app/components/aggregate-editor-extended-options.jsx","app/components/aggregate-editor-options.jsx","app/components/aggregate-editor.jsx","app/components/aggregate-summary.jsx","app/components/app.jsx","app/components/button.jsx","app/components/capacity-tooltip.jsx","app/components/cluster-details.jsx","app/components/cluster-list.jsx","app/components/common/option-row.jsx","app/components/common/spinner.jsx","app/components/constants.js","app/components/drive-summary.jsx","app/components/faglyph.jsx","app/components/flash-pool.jsx","app/components/footer.jsx","app/components/glyph.jsx","app/components/hardware.jsx","app/components/hw-shelf-drive-group.jsx","app/components/installation-list.jsx","app/components/layout/action-link.jsx","app/components/layout/column-header.jsx","app/components/layout/column.jsx","app/components/layout/scrollable-region.jsx","app/components/masthead.jsx","app/components/motd.jsx","app/components/placeholder.jsx","app/components/product-configs.jsx","app/components/product-lines.jsx","app/components/project-list.jsx","app/components/project.jsx","app/components/repeat.jsx","app/components/reports.jsx","app/components/separated-list.jsx","app/components/session-expiration-overlay.jsx","app/components/shelf-details.jsx","app/components/shelf-list.jsx","app/components/system-list.jsx","app/components/system-listed.jsx","app/components/system-overview.jsx","app/components/system-policies.jsx","app/components/system-summary.jsx","app/components/tooltip.jsx","app/components/version-list.jsx","app/pages/portfolio.jsx","app/pages/project.jsx","app/pages/releasenotes.jsx","app/retitle.js","app/usual-props.js","lib/add-query-api.js","lib/client-cache.js","lib/clip/describe.js","lib/clip/device-info.js","lib/clip/distill.js","lib/clip/reduce.js","lib/clip/repair/encrypted-table.js","lib/clip/repair/fp-table.js","lib/clip/repair/index.js","lib/clip/repair/rpm-table.js","lib/clip/repair/rsgb-table.js","lib/clip/repair/shelves.js","lib/clip/util.js","lib/constants.js","lib/counting-bag.js","lib/debounce.js","lib/dispatcher.js","lib/dump.js","lib/enforce.js","lib/feature-toggles.js","lib/lcprop.js","lib/log-api.js","lib/model/aggregates/aggregate-types.js","lib/model/aggregates/aggregateLimitFinder.js","lib/model/aggregates/aggregateReporter.js","lib/model/aggregates/component-builder.js","lib/model/aggregates/manual-aggregate-builder.js","lib/model/aggregates/planner.js","lib/model/aggregates/plans/propose-abstract.js","lib/model/aggregates/plans/propose-data.js","lib/model/aggregates/plans/propose-ddp.js","lib/model/aggregates/plans/propose-root-sliced.js","lib/model/aggregates/plans/propose-root-unsliced.js","lib/model/aggregates/raid-limits.js","lib/model/aggregates/raid-types.js","lib/model/aggregates/systemSummary.js","lib/model/build/adp.js","lib/model/build/flash-pool-assignment.js","lib/model/build/storage-pools.js","lib/model/build/trace.js","lib/model/builder.js","lib/model/guard.js","lib/model/inspect/aggregate.js","lib/model/inspect/cluster.js","lib/model/inspect/controller.js","lib/model/inspect/environmental-summary.js","lib/model/inspect/hagroup.js","lib/model/inspect/index.js","lib/model/inspect/lookup.js","lib/model/inspect/shelf.js","lib/model/map.js","lib/model/spec.js","lib/model/util.js","lib/object-walker.js","lib/policies.js","lib/prodinfo/config-group.js","lib/prodinfo/config.js","lib/prodinfo/index.js","lib/prodinfo/matrix.js","lib/prodinfo/tables/spares.js","lib/request-queue.js","lib/stores/event-journal.js","lib/stores/hardware.js","lib/stores/logger.js","lib/stores/motd.js","lib/stores/portfolio.js","lib/stores/prodinfo.js","lib/stores/project.js","lib/stores/store.js","lib/stores/user-preferences.js","lib/stores/user-session.js","lib/units.js","lib/xform.js","lib/xhr.js","node_modules/async/lib/async.js","node_modules/browserify/node_modules/assert/assert.js","node_modules/browserify/node_modules/events/events.js","node_modules/browserify/node_modules/inherits/inherits_browser.js","node_modules/browserify/node_modules/process/browser.js","node_modules/browserify/node_modules/util/support/isBufferBrowser.js","node_modules/browserify/node_modules/util/util.js","node_modules/lz-string/libs/lz-string.js","node_modules/moment/moment.js","node_modules/react-router/lib/Cancellation.js","node_modules/react-router/lib/Configuration.js","node_modules/react-router/lib/History.js","node_modules/react-router/lib/Match.js","node_modules/react-router/lib/Navigation.js","node_modules/react-router/lib/NavigationContext.js","node_modules/react-router/lib/PathUtils.js","node_modules/react-router/lib/PropTypes.js","node_modules/react-router/lib/Redirect.js","node_modules/react-router/lib/Route.js","node_modules/react-router/lib/RouteHandlerMixin.js","node_modules/react-router/lib/ScrollHistory.js","node_modules/react-router/lib/State.js","node_modules/react-router/lib/StateContext.js","node_modules/react-router/lib/Transition.js","node_modules/react-router/lib/actions/LocationActions.js","node_modules/react-router/lib/behaviors/ImitateBrowserBehavior.js","node_modules/react-router/lib/behaviors/ScrollToTopBehavior.js","node_modules/react-router/lib/components/DefaultRoute.js","node_modules/react-router/lib/components/Link.js","node_modules/react-router/lib/components/NotFoundRoute.js","node_modules/react-router/lib/components/Redirect.js","node_modules/react-router/lib/components/Route.js","node_modules/react-router/lib/components/RouteHandler.js","node_modules/react-router/lib/createRouter.js","node_modules/react-router/lib/createRoutesFromReactChildren.js","node_modules/react-router/lib/getWindowScrollPosition.js","node_modules/react-router/lib/index.js","node_modules/react-router/lib/isReactChildren.js","node_modules/react-router/lib/locations/HashLocation.js","node_modules/react-router/lib/locations/HistoryLocation.js","node_modules/react-router/lib/locations/RefreshLocation.js","node_modules/react-router/lib/locations/StaticLocation.js","node_modules/react-router/lib/runRouter.js","node_modules/react-router/lib/supportsHistory.js","node_modules/react-router/node_modules/qs/index.js","node_modules/react-router/node_modules/qs/lib/index.js","node_modules/react-router/node_modules/qs/lib/parse.js","node_modules/react-router/node_modules/qs/lib/stringify.js","node_modules/react-router/node_modules/qs/lib/utils.js","node_modules/react/lib/ExecutionEnvironment.js","node_modules/react/lib/Object.assign.js","node_modules/react/lib/cx.js","node_modules/react/lib/emptyFunction.js","node_modules/react/lib/invariant.js","node_modules/react/lib/warning.js","node_modules/setimmediate/setImmediate.js","node_modules/uuid/rng-browser.js","node_modules/uuid/uuid.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","assert","async","_","window","App","constants","Dispatcher","EventJournalStore","HardwareStore","LogApiHost","LogStore","MOTDStore","PortfolioPage","PortfolioStore","ProductInfoStore","ProjectPage","ProjectStore","React","ReleaseNotesPage","Router","UserPreferencesStore","UserSessionStore","xhr","Route","createFactory","DefaultRoute","setImmediate","launch","auto","logger","create","log","createLoggingAPI","steal","portfolio","productInfo","project","journal","motd","userSession","userPreferences","hardware","stores","getStoreGuards","dispatcher","DispatcherShim","routes","asyncify","makeRoutes","fire","makeFireMethod","getApp","afterConstruction","err","app","whine","debug","eachSeries","render","openLogSpigot","makeFire","callWithApp","afterLaunch","fn","callback","equal","this","launchErr","err1","console","error","err2","action","fireSync","_name","logStore","options","bind","apiHost","forEach","grabStores","value","key","isStore","getGuard","v","act","getState","watch","unwatch","values","handler","name","path","run","HistoryLocation","Handler","state","factory","globalProps","params","query","document","getElementById","on","drain","drainLogs","entries","CLIENT_LOG_PATH","payload","Constructor","depKeys","toArray","arguments","slice","createAsync","createSync","concat","results","pick","result","stealAsync","makeArgs","makeNoArgs","asyncificated","undefined","apply","../lib/constants","../lib/dispatcher","../lib/log-api","../lib/stores/event-journal","../lib/stores/hardware","../lib/stores/logger","../lib/stores/motd","../lib/stores/portfolio","../lib/stores/prodinfo","../lib/stores/project","../lib/stores/user-preferences","../lib/stores/user-session","../lib/xhr","./components/app","./pages/portfolio","./pages/project","./pages/releasenotes","react-router","setimmediate",2,"Repeat","FAGlyph","CapacityTooltip","Unit","AggregateReporter","cnst","usual","AggregateDevice","createClass","displayName","propTypes","aggregateDevice","PropTypes","object","isRequired","props","faglyph","driveSpeed","rpm","toString","rawPhysicalCapacity","physicalRawCapacityGB","makeHappyFriendly","isVirtualDevice","rightSizedCapacityGB","to","createElement","className","count","replace","Aggregate","merge","aggregate","systems","array","select","func","isEditModeManualAggregates","bool","displayCapacityInBase","string","aggregateDisplayLanguage","selectDetails","selectAggregate","event","stopPropagation","preventDefault","selector","controller","_id","_controller","manualAggregates","UI_SELECT_ADD_CHANGE_AGGREGATE","deleteAggregate","_systemId","_getDeviceCapacity","deviceSpecs","_raid_groups","__deviceSpecs","spec","rawgb","_getRaidSize","_devices","_getSystemThatOwnsThisAggregate","aggregateInQuestion","systemsToLookIn","Array","first","where","system","aggregateIds","flatten","map","controllers","aggregates","contains","_isSelected","selectedAggregate","aggregateName","controllerName","_controllerName","isDedicatedRoot","is_root_aggregate","owningSystem","hagi","inspect","reporter","aggregateReport","createAggregateReport","aggregateSummary","summary","usableCapacityValue","rootCapacity","usableCapacity","usableCapacityUnit","friendly","substring","partial","aggregateDevices","keys","driveSpecSummary","keySummary","isVirtual","virtualDeviceType","virtualPartitionType","rsgb","deleteSpanDom","_manual","onClick","aggregateCSS","addons","classSet","row-list-item","selectable","selected","flashPoolSize","displayIsHybrid","cacheDevice","isEmpty","cacheSize","cacheCapacity","dispUnit","useBase10Yields","unit","unitRepr","title","inputUnit","is_hybrid","seq","prop","AggregateDetails","clearSelection","toggleAggregatesMode","nextEditModeIsManualAggregates","setState","_getAllAggregatesAndDecorate","fromSystems","clonedAggregates","cloneDeep","push","_sortByRootAggregate","sortBy","addAggregate","aggregateLanguage","toLowerCase","aggregateLanguageCapitalizedSingular","aggregateLanguageSingular","autoAggregates","policies","_policies","aggregatePolicy","Aggregates","manualAggregatesPolicy","manual","addAggregateTableRowClasses","addNewAggregateDom","__spread","../../lib/model/aggregates/aggregateReporter","../../lib/units.js","../usual-props","./capacity-tooltip","./constants","./faglyph","./repeat",3,"OptionRow","AggregateSummary","FlashPoolEditor","AggregateEditorExtendedOptions","extendedOption","aggregateBuilder","updateModel","hagroups","readOnly","displayType","setExtendedOption","report","close","extendedOptionDisplay","DriveSelector","RaidSelector","base10YieldsPreference","systemLimits","limits","raidType","raid_type","isESeries","_this","aggregateDeviceSummary","deviceSummary","dataSpec","data","currentDriveSpec","getDriveSpecDisplay","drives","availableDeviceGroupsForAggregate","availableDrives","drive","selectDriveSpec","selectDriveForAggregate","driveSpec","optionName","optionValue","type","countDisplay","getVirtualDeviceSize","currentRaidType","raidTypes","availableRaidTypes","selectRaidType","selectRaidTypeForAggregate","setRaidType","./aggregate-summary","./common/option-row","./flash-pool",4,"RaidTypes","AggregateEditorOptions","changeRaidSize","requestedRaidSize","number","hagroup","getHagroup","aggregateDeviceLimits","deviceLimits","aggregateRaidSizeLimits","raidSizeLimits","currentRaidSize","getActualRaidSize","canSelectController","canEditDevices","containsVirtualDevices","canEditRaidSize","renderFasConfigurationOptions","openFlashPoolEditor","getFlashPoolDisplayName","maxValue","max","minValue","min","setSnapReserveProportion","getAggregateSnapReserveAsPercentage","hide","isManualAggregatePolicyEnabled","setAggregateName","setToPrimaryController","isAggregateOnPrimaryController","setToPartnerController","openRaidSelector","setDriveCount","_applyDdpReserve","driveRoleSummary","reserve","getMaxDdpReserveCount","total","DDP","openDriveSelector","Math","round","_snapreserve_proportion","getBuilder","capacityGiB","displayPreference","unitDisplay","totalDriveCount","builder","getRequestedRaidSize","setName","target","setDeviceAndCount","percentage","proportion","setSnapReserve","last","setController","../../lib/model/aggregates/raid-types",5,"ColumnHeader","ActionLink","ScrollableRegion","ManualAggregateBuilder","AggregateEditor","selection","selectedItem","onClose","platformConfig","installations","getInitialState","componentWillReceiveProps","nextProps","checkPropsAndInitializeState","componentWillMount","productLineIsESeries","isProductLineESeries","columnTitle","makeHagi","canAddAggregate","isToggle","enabled","AggregateEditorPane","newSize","setRaidSize","isAggregateSpecifiedInSelection","propsToCheck","newAggregate","clone","uuid","col2View","col3View","../../lib/model/aggregates/manual-aggregate-builder","./aggregate-editor-extended-options","./aggregate-editor-options","./layout/action-link","./layout/column-header","./layout/scrollable-region",6,"scaleModifier","StorageContainerSummary","CapacitySummaryChartWithSnapReserve","DriveCountsSummaryChartWithParity","driveCountSummaryDisplay","DriveCountsSummaryChartWithReserve","showTotalToMaxRatio","CapacitySummaryChartForESeries","capacity","capacityText","maxCapacityUnit","capacity_gb","maxCapacityGiB","reserveScaled","capacityScaled","width","height","y","x","totalCapacity","snapReserveCapacity","snapReserveScaled","aggr","size_64_tb","snapReserveCapacityUnit","maxDrives","driveSummary","totalParityDrives","parity","dparity","totalDrives","parityDrivesScaled","dataDrivesScaled",7,"RouteHandler","id",8,"Glyph","Button","glyph","spin","alignRight","_glyph","_allClasses","classes","btn","btn-default","extraClasses","extra","split","Object","_renderInside","children","_handleKeyUp","tabIndex","onKeyUp","./glyph",9,"Tooltip","inputValue","displayUnitsFrom","position","titleClassName","formatUnit","toFixed","./tooltip",10,"SystemRow","guard","editingName","newControllerName1","newControllerName2","_editName","refs","controllerNameInput1","getDOMNode","_saveNewName","_cancelEditName","_captureNewControllerName1","search","_captureNewControllerName2","_deleteSystem","version","cluster","_getControllerPairName","controllerPairName","join","_getRawCapacity","rawCapacity","reduce","shelves","shelf","drive_specs","_x_bom","shelfCapacity","bom","quantity","_renderNameCells","items","ref","placeholder","onChange","btn-success","no-border","btn-danger","addingTo","replacing","assign","delConfigs","deletingSystem","deleteSystemConfig","newVersion","delAction","NodeCountRow","model","ModelGroup","modelGroup","_getNodeCounts","nodeCounts","before","after","_renderRows","ClusterDetails","newClusterName","clusterNameInput","_captureNewName","_delete","_renderNameOrNameInput","add","productLine","PRODUCTLINE_FAS","productSubLine","PRODUCTLINE_SUBTYPE_CDOT","UI_SELECT_ADD_CHANGE_SYSTEMS","modelGroups","groupBy","enableAddSystem","any","addSystemRowClass","new","disabled","addSystemTextClass","row-list-cell","row-list-cell-middle","text-muted","addClick","versionPolicy","pin","inspector","installation","./button",11,"SystemSummary","ClusterList","clusters","currentSelection","Cluster","isSelected","isClusterMatch","selectedCluster","has","selectCluster","selectClusterGroup","parent","_model","classNames","isGrouped","./system-summary",12,"Spinner","optionTypeDisplay","ExtendedOption","RadioOption","SpinnerOption","TextOption","row-list-item-option","hideIfUnnamed","applyValue","editMode","handleKeyUp","closeEditMode","openEditMode","textInput","../button","../faglyph","./spinner",13,"Infinity","decrementValue","no-pad-right","setValue","incrementValue","no-pad-left","newValue","rangeCheckedNewValue","increment",14,"PRODUCTLINE_PERF","PRODUCTLINE_FLASH","PRODUCTLINE_SUBTYPE_7MODE","PRODUCTLINE_SUBTYPE_MCC","PRODUCTLINE_SUBTYPE_MC","UI_SELECT_ADD_CHANGE_SHELF_DRIVE_LIST",15,"DEFAULT_TITLE","DriveEntry","p","glyphClass","tlist","cap","rounded","mainClass","dclassCSS","rawtb","abs","dclass","mir","iir","invis","hideCapacity","hideIfZero","DriveSummary","SSD","performance",16,"fa","fa-spin","fa-fw",17,"toggles","MAX_SLICE_WIDTH_DEVICES","MIN_SLICE_WIDTH_DEVICES","AGGREGATE_EDITING_PROPS","AggregateFlashPoolEditor","devices","allPhysicalDevices","qualifiedSSDsPresent","fp_support","aggregateSpecs","aggregateHDD","filter","isHDD","aggregateUnqual","all","isSSD","AggregateFlashPoolEditorDisabled","rawSizes","rawGB","oxford","AggregateFlashPoolEditorEnabled","strings","notEqual","pop","element","SingleCellOrganism","FlashPools","warnIfNone","adding","addClassName","option-header-link","_canAdd","addText","NewPoolDriveSelector","isOpen","cancel","_close","hook","omit","href","_toggle","FEATURE_FP_MANUAL_ENABLED","hookedFn","hookFn","hooked","_findAvailableFlashPoolDeviceSpecs","available","unlockedPhysicalDevices","allFpSSD","isFpSSD","availFpSSD","_cancel","flashPoolDeviceSpecs","FlashPoolDriveRow","colSpan","ds","deviceSpec","_addStoragePool","deviceCount","poolDeviceCount","RAID_DP","RAID_4","rowClasses","pools","olds","cache","noVirtuals","rg","firstSpec","sliced","_slice_name","getId","AppropriateRow","ob","AllocationUnit","allocation","_getAggregateName","_type","ownerId","aggr_id","ownerName","claimed","mine","sliceCSS","fp-allocation-slice-claimed-manual","fp-allocation-slice-claimed-unclaimed","fp-allocation-slice-claimed-current","fp-allocation-slice-claimed-auto","fp-allocation-slice","AllocationClaimer","allocations","isSliced","blockCSS","allocationSlices","_props","PoolAdjuster","item","canExpand","canShrink","expand","shrink","driveRepr","_expand","_noop","_shrink","isSlicedCSS","fa-toggle-on","slicedBlock","PoolDeleter","allocationType","deleteMe","_deletePool","PoolRow","pool","RaidGroupRow","raidGroup","insp","fp-allocation-unsliced","_deleteMe","_canExpand","_canShrink","_anyMoreOfTheseDrivesAvailable","_allocations","poolWidth","newPoolWidth","../../lib/feature-toggles",18,"Footer",19,"glyphicon",20,"Column","InstallationList","Placeholder","ProductConfigs","ProductLines","Reports","ShelfList","SystemOverview","VersionList","Hardware","defaults","projectId","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","which","closeCol3","currentSelector","resolveCol2Selection","resolveSelection","resolveCol3Selection","col2Items","col3Items","isShowingCol3","expanded","lightTheme","expandedWidth","collapsedWidth","zIndex","DetailsLevel2","DetailsLevel3","closeSelf","view","selectHardware","base","newSelector","isSameCol3","isSameHardware","isEqual","selectCol2View","col2Tab","hardwareSelector","handleClose","./aggregate-editor","./cluster-details","./installation-list","./layout/column","./placeholder","./product-configs","./product-lines","./reports","./shelf-list","./system-overview","./version-list",21,"ShelfDriveGroupSummary","driveGroup","fpSupport","shelfCount","_shortenedCapacityString","size","_iconForDriveType","combo","_classNameForDriveType","d","encrypted","supportsFlashPool",22,"SystemList","selectSystems","addSystem","Installation","selectInstallation","isStandAlone","./cluster-list","./system-list",23,"action-link","toggle","hide-contracted","hideContracted",24,25,"expandedClass","collapsedClass","column","contracted-view","expanded-view","column-light","styles","style",26,"top",27,"Version","branch","revision","dirty","datetime","Link","Masthead","store","_onChange","_title","BetaStrip","UserInfoStrip","firstName","src","alt",28,"MOTD","fetching","pull-right","_content","message","content",29,"info",30,"CONFIG_GROUPS","showEoa","configFilters","isSellable","isHA","FilterFasMultiNodeCluster","setAttribute","filterESeriesDuplex","_filterConfigs","configs","constraint","_fixSelectionAfterAdd","config","specs","buildSpec","groupId","isCluster","changeSystem","configModel","_showDetails","systemConfig","currentSystemHover","isConfigChange","renderProductLineFilters","showDetails","clusterSelector","hagroupSelector","renderClusteredFilters","renderFasFilters","renderEFSeriesFilters","renderESeriesFilters","sampleSystem","configGroup","getConfigGroup","FAS_CMODE_NORMAL","FAS_7MODE_NORMAL","E_NORMAL","EF_NORMAL","addingSystem","filteredConfigs","enabledConfigs","isEnabled","disabledConfigs","enabledConfigList","c","onMouseOver","disabledConfigList","disabledTooltip","conflicts","conflict","attribute","toUpperCase","limit_type","LIMIT_TYPES","limit_reason","LIMIT_REASONS","noOpFilter","disableSingleNodeClusterChoice","disableSingleNodeFilter","_chainFilters","htmlFor","_filterShowEoa","toggled","_filterHideEoa","isEmbedded","_applyFiltersAndSetState","newConfigs","filters","../../lib/constants.js",31,"getConfigGroups","ProductLine","line","trim","subtitle","formattedSubtitle","EnabledLineEntry","image","img","subGroups","lineId","DisabledLineEntry","groups","ProductSubLine","subLine","EnabledSubLineEntry",32,"moment","SeparatedList","PH_FETCH","PH_NORMAL","PORTFOLIO_DEFAULT_NAME","ProjectAutoDesc","_toModelEntries","modelToCount","_renderModelEntry","entry","_renderModels","headText","head","_renderGood","desc","nodes","_renderBad","_x_autodesc","modes","AUTOTAG_EXCLUSIONS","AUTOTAG_EXCLUDE_DESC_KEYS","ProjectEntry","inEditMode","newName","_x_project_name","projectNameInput","_filterAutoTag","tag","idx","match","idx2","_gatherTags","autoTags","_x_autotags","tags","_x_usertags","sort","_renderTag","_archiveProject","archivingProject","_confirmArchiveProject","_uuid","_version","_cancelArchiveProject","_renderStateGlyph","_X_STATE","adjusting","_renderArchiveProjectOverlay","fullName","unix","_x_original_timestamp","calendar","_timestamp","ProjectList","projects","projectIdsInEditMode","_addButtonClick","renderProject","_x_archived","ProjectListPanel","fetched","projectSearchDOM","projectSearch","focus","_searchChange","_searchClear","pad1em","searchHolder","./drive-summary","./separated-list",33,"retitle","Project","_getUpdatedStateFromStores","_requestLoad","plain","rehydrate","../retitle","./hardware",34,"oneOfType","_getKeyExtractor","keyProp","isArray","original","extractKey","kids","member","extras","cloneWithProps",35,"EnvironmentalSummary","DriveTypeRow","driveType","GroupedCapacitySummary","performanceSummary","capacitySummary","ssdSummary","totalSummary","displayInUnitBase","scope","ExpandedCapacitySummary","driveCapacitySummaryByType","CapacitySummary","grouped","EnvironmentalSummaryView","env","sum","mainsVoltage","voltageDisplay","powerSpec","power_spec","format","typical","amps","worst","powerWattsToVoltAmps","watts","BTU","powerWattsToKWhPerYear","rack_units","max_psu","weightGtoLbs","weight_g","weightGtoKg","completeStatsAvailable","decimal","fractionDigits","physical","spare","root","virtual","_showSolutionView","currentSystemsView","_showCurrentView","_groupAll","collapseCapacity","_expandAll","_showUnitBase2","_showUnitBase10","_setMainsVoltageTo_v_100","_setMainsVoltageTo_v_200","_getHaGroups","canShowSelected","selectedHaPairs","accumulate","prototype","createSystemSummary","firstInstallation","generateWordBtn","results-subheading-button","generateVisioBtn","../../lib/model/aggregates/systemSummary.js","../../lib/model/inspect/environmental-summary",36,"renderSeparatedList","renderOne","renderSeparator","_renderSeparator","sep","tail",37,"SessionExpirationOverlay","getSessionData","interval","setInterval","clearInterval","reloadPage","location","reload","isExpired",38,"modelUtil","ShelfDetails","_getWrappedSystems","isGroupedSystems","wrappedSystems","selectShelf","_isembedded","addSelectorConstraint","addShelf","_isAddNewSelected","groupShelves","shelfGroupEditors","k","safeShelf","find","isNotUsedInManual","isUsedByManualAggregate","ShelfGroupEditor","addNewCSS","showLimitReason","limitReasonToDisplay","_getByMatchingShelfCount","matching","shelfDriveComboEquals","_addShelf","_deleteShelf","systemsByMatchingShelfCount","maxCountOfShelves","targetSystems","is_clustered","_displayLimitReason","DRIVE_TOTAL","selectedShelf","currentShelf","matrix","imageUrl","drivesDisplay","compat","checkVersionShelfDrive","fp_support_drive","shelfCSS","addingShelf","addShelfConfig","isConfigForShelf","countDom","deletingShelf","deleteShelfConfig","deleteDom","delReason","showReason","shelfHeadroom","warningMsg","AGGR_MANUAL","../../lib/model/util","./hw-shelf-drive-group",39,"ShelfSpecRow","fireOnClick","d2c","d2m","d2i","cssClassName","ssp-selected","disabled-selection","dnB","dcssB","dcB","dtB","dmB","doB","dfB","deB","sm","dnA","dcssA","dcA","dtA","dmA","dfA","deA","doA","speedFilter","modelFilter","FilterSpeedNone","FilterModelNone","_getShelfDriveCombos","shelfConfigs","allShelfDriveCombos","shelfConfig","drive1","drive1Quantity","drive2","drive2Quantity","shelfModel","d1Model","drive1Compat","d2Model","drive2Compat","_isSellable","sellable","isMixed","drive1DriveType","drive1MarketingCapacity","marketing","drive1Model","drive1Speed","speed","drive1Encrypted","drive1FlashPool","drive1Sellable","drive2DriveType","drive2MarketingCapacity","drive2Model","drive2Speed","drive2Encrypted","drive2FlashPool","drive2Sellable","uniq","JSON","stringify","reverse","_stop","_filterSpeedChange","checked","_filterChange","_filterChangeModel","_applyFilter","_applyFilterWithProps","isShelf","checkSellable","checkModel","checkSpeed","checkEmbedding","Number","shelfDriveCombo","_renderShelfFilter","eSeriesShelfModels","fasShelfModels","shelfFilter","filterChangeModel","renderFilter","shelfmodel","inputId","index","fasModel","allCombos","filteredCombos","enabledItems","disabledItems","renderCombo","dgA","disable-tag","dgB","mode","displayShelfSlotFilterStyle","removeShelfLink","display","disabledItemsList",40,"ListedSystem","./system-listed",41,"clipUtil","isHagroupMatch","selectedHagroup","cid","hid","selectSystem","nodeCount","driveDescriptions","getDriveDescriptionsFromXboms","compact","../../lib/clip/util",42,"SystemPolicies","HardwareDisplay","_addSystem","sampledSystem","_getFirstSystem","_removeSystem","changeVersion","currentConfig","selectedConfig","renderEmbeddedShelfSummary","embeddedShelf","fireChangeEmbeddedDiskShelf","systemsCount","shelfDriveGroupSummaries","system_model","names","displayVersion","getFullNameForVersion","modelWithoutSpaces","imageModel","sampledConfigs","sampledConfig","embeddedShelfSummary","controllerClassName","row-list-item-group-next","automaticOSVersionDisplay","selectOSVersionDisplay","osVersionDisplayCSS","AggregatesDisplay","CurrentTabDisplay","currentTab","aggregateTabName","currentTabName","_convertViewtoTabUntilWeRefactor","_aggregateTabName","_changeTabHardware","_changeTabAggregates","systemsAreESeriesMap","allSystemsAreESeries","every","_changeTabPolicies","systemTitle","policyTitle","tab","./aggregate-details","./shelf-details","./system-policies",43,"currentPolicies","policyOptions","enabledOptions","groupedOptions","components","createPolicyGroup","optionGroup","PolicyGroup","createPolicyContainer","option","PolicyContainer","policy","label","defaultValue","invertedToggle","inverted","impactsCluster","allowedValues","currentScope","currentPolicy","hasMultipleValues","SelectPolicy","handleClick","BooleanPolicy","sampleHagroup","firePolicyChange","handleAutoVersion","proposals","changingVersion","versionConfig","fireVersionChange","allowedValuesList","createAllowedValueComponent","allowedValue","SelectOption","Policy","rowItemStyle","row-list-item-loose","checkStyle","suppressClick","toggleOn","toggleOff","toggleStyle",44,"GroupedSystemList","_renderNodeCount","selectGroup",45,"POSITION_FIXES","left","fixLeft","self","fixTop","checkPosition","propName","updatePosition","parentNode","_onMouseEnterParent","_onMouseLeaveParent","selfPos","getBoundingClientRect","parentPos","fixer","pos","visible","popover","titleClasses","popover-title","mainStyle","visibility","each","_class","lineBreak","raw","cooked",46,"Proposal","selectedVersion","getCurrentVersion","handleSelect","handleVersionChange","proposal","proposalCSS","selectedCheck",47,"SessionExpireOverlay","_onPortfolioFetch","../components/footer","../components/masthead","../components/motd","../components/project-list","../components/session-expiration-overlay",48,"queueStatus","../components/project",49,50,"SUFFIX","SEPARATOR",51,"xform","ModelMap","SPEC","optional","instance","checkFn","propCheck","defineProperty","get","getReactValidatorsAsRequired","mapValues","makeRequired","validator","propChecked","kpath","arity","Class","reactPropCheck","../lib/model/map","../lib/xform",52,"lcprop","LODASH_TERMINATORS","LODASH_CHAINERS","ARRAY_CHAINERS","addQueryAPI","andMode","constant","enumerable","configurable","addLodashTerminator","addLodashChainer","addArrayChainer","addFilter","keepFilters","newFilters","feedExtraArgumentsAndChainFrom","filtered","_arguments","args","./lcprop",53,"util","ClientCache","_init","_get","_set","poisoned","init","constructor","onCompletion","supported","err3","err4","onValue","noop","set","remove","_remove","NullCache","ok","inherits","LocalStorageCache","sentinel","Date","storage","localStorage","setItem","getItem","removeItem","repr","parse","ENGINES","getClientCache","remaining","engine","Engine","onInit","tryNext","rest",54,"classifyDrive","byClassification","_count","describe","countBy","qatts","att","matches","uniques","versions",55,"SLICE_EXTRACT","sliceUsedBlocksToRSGB","memoize","usedBlocks","mult","value_gb","deviceInfoFromHagroup","infoByDeviceId","deviceInfosFromShelves","deviceInfosFromRootDataSlices","deviceInfosFromStoragePoolSlices","recordConsumptionByControllerAggregates","DEVICE_FILTERS","recordConsumptionByAggregate","aggrInfo","_root","raidGroups","recordConsumptionByRaidGroupLikeObject","recordConsumption","consumer","direct","consumers","parentId","deviceInfosFromShelf","shelfResults","members","drive_spec_members","midx","deviceInfosFromRootDataSliceAssignedTo","_assigned_storage","deviceInfosFromRootDataSlice","sliceDetails","deviceInfoFromRootDataSliceMember","unslice","mkInfoForSlice","used_blocks","sliceType","deviceInfosFromStoragePoolSlicesOn","storage_pools","deviceInfosFromStoragePool","deviceInfosFromAllocation","deviceInfoFromDeviceInAllocation","why","controllerId","parentInfo","partialSpec","_from_parent","_for_controller","deviceId","used","unused","locked","notroot","unlocked","storagepool","from","../add-query-api","../units.js",56,"CountingBag","ObjectWalker","tagDrivesFromShelfBom","_shelf","_driveSpecs","maybe","exists","_driveSpec","tagShelf","tagShelves","_shelves","tagHaGroups","nodeModel","nodeMode","nodeVersion","mustMatchIfBothPresent","path1","path2","isWrapped","m1","m2","_hagroup","isPlainObject","_sum","num","distill","clip","bag","synergy_model","dump","atts","pluck","../counting-bag","../object-walker",57,"repairClip","Constants","arrayOf","checker","checkEntry","REMOVED","DEFAULT","setdefault","CONST","UUID","checkUUID","OPTIONAL_UUID","FIXBOOL","null","yes","no","true","false","contact","serial_number","rdb_uuid","_platformIndex","_configurationIndex","_family","_number","_config","_dedicated_root_aggregate","_spare_allocation_strategy","_messages","cards","card_model","description","_shelfIndex","_drive1Index","_drive2Index","_code","drive1count","drive1model","drive1rawgb","drive2count","drive2model","drive2rawgb","_description","ADP","prohibitedByUser","ssdsForFlashPool","auto_fill","spare_allocation","enforce","POLICIES","SPARES","sys_version","_strategy","block_type","cache_raid_type","is_mirrored","_ddpreserve","_cache_storage_pool_id","plex_number","slice_details","bay_count","channel_name","shelf_number","shelf_rack_number","shelf_rack_position","envelope","../constants","../xform","./repair",58,"encryptedByModel","E-X4021A","E-X4021B","E-X4022A","E-X4022B","E-X4023A","E-X4023B","E-X4024A","E-X4024B","E-X4025A","E-X4025B","E-X4026A","E-X4026B","E-X4027A","E-X4028A","E-X4030A","E-X4034A","E-X4034B","E-X4035A","E-X4035B","E-X4036A","E-X4036B","E-X4037B","E-X4038A","E-X4038B","E-X4039A","E-X4039B","E-X4041B","E-X4043B","E-X4044B","E-X4045A","E-X4046A","E-X4047A","E-X4048A","E-X4049B","E-X4051B","E-X4052B","E-X4053B","E-X4054B","E-X4055B","E-X4057A","E-X4058A","E-X4059A","E-X4060A","E-X4061A","E-X4062A","X233A","X233B","X234A","X234B","X235A","X235B","X236A","X262A","X262B","X266A","X266B","X267A","X268A","X269A","X270A","X271A","X272A","X272B","X273A","X273B","X274A","X274B","X275A","X276A","X278A","X279A","X280B","X282B","X283B","X286A","X287A","X289A","X290A","X291A","X292A","X294A","X298A","X299A","X302A","X306A","X308A","X309A","X310A","X315A","X316A","X410A","X411A","X412A","X414A","X415A","X416A","X417A","X421A","X422A","X423A","X425A","X431A","X432A","X433A","X435A","X438A","X439A","X440A","X441A","X442A","X446A","X446B","X447A","X448A","X449A","X477A","X478A","X480A","X486A","X487A","X488A","X489A","X494A","X495A","X575A","X576A",59,"FpByModel",60,"repairShelves","correctLegacyModelPosition","repairIsClusteredType","repairIsClustered","repairClusterMembership","defaultOrAssertSame","tkey","source","skey","updateBomDriveDetail","detailsByModel","inhale","exhale","shelfgroup","details1","details2","renameProp","key1","key2","what","hasOwnProperty","renameShelfProperties","fixShelfProperties","shelf_type","renameShelfXbomProperties","xbom","renameDriveProperties","fixDriveProperties","repairController","volumes","repairControllerName","controllerNamesfromXbom","repairVersion","repairVersionNumber","parts","repairPolicies","repairHaGroup","repairShelvesXboms","repairCluster","repair","../../constants","./shelves",61,"rpmByModel",62,"rsgbByModel",63,"fpByModel","_parseShelfDescriptionToXbom","drivesStrings","quantitySplit","driveModel","_fixShelvesMissingXbomFromShelfDescription","RawGBCacheFromMainBOM","cacheDriveSizes","correctBetaXbom","assignShelfIdIfMissing","populateDriveSpecMembersIfMissing","buildMembersForSpecs","owningShelfId","driveSpecs","buildResults","currentCarrierSlot","range","fixShelvesXbomsGivenDrives","findShelfByNumber","capCache","reportedShelfProblems","disk_model","disk_type","repairShelvesXbomByLookup","./encrypted-table","./fp-table","./rpm-table","./rsgb-table",64,"_wrapSystems","fake","distillSystems","distillSystem","describeSystems","describeSystem","driveRpm","classification","parseInt","./describe","./distill",65,"PROJECT_LIST_PATH","PROJECT_LOAD_PATH","PROJECT_ADJUST_PATH","PROJECT_REPLACE_PATH","PROJECT_INFO_PATH","PROJECT_INFO_CONCURRENCY","SERVER_READ_CONCURRENCY","SERVER_WRITE_CONCURRENCY","PLATFORM_OPTIONS_GET_PATH","UNWANTED_METADATA","FAS","FAS_CMODE_MCC","FAS_7MODE_MC","FAS_VSERIES","E","ENABLED","VERSION","NAS_NODES","CAPACITY_GB","EMBEDDED","DRIVE_SATA","DRIVE_FC","DRIVE_SAS","DRIVE_SSD","EXT_SHELVES","AGGR_SIZE_64_TB","AGGR_MIN_FP_DRIVES","CACHE_NO_FLASH","PRODUCTLINE","HARDWARE_SHELF","DRIVE_NSE","ALLOWED",66,"_contents","_counts","_makeStableClone","isNumber",67,"debounce","asyncFunction","scopeToStatusMap","getScopeStatus","scopeStatus","debounced","arg","ourCallback","shift","next_arg","skipped",68,"events","CHANGE_EVENT_NAME","_stores","EventEmitter","listenTo","storeChanged","emit","everHandled","actionArguments","forwardTo","handled","removeListener",69,"process","stack","depth","colors","stderr","isTTY","customInspect","_process",70,"TYPE","FIX","copyOrSetDefault",71,"TOGGLES","boolify","freeze",72,"addLazyCachedProp","getter","tried","once",73,"global","logfn","getLimitedConsole","tagrep","warn","_addLevelHandler","level","warned","_console","logAtLevel","warnFirst",74,"aggregateTypes","AGGR_32_BIT","AGGR_64_BIT","VOL_GROUP",75,"RaidLimits","AggregateTypes","AggregateLimitFinder","_hagi","_limits","_raidTypes","_raidLimits","maxDataDevices","aggrType","raidSize","effectiveRaidSize","_determineEstimatedRaidSize","limit","_aggrLimitTBUnit","_deviceLimit","maxCacheDevices","_aggrCacheLimitTBUnit","aggregateType","RAID_5","RAID_6","dataDrivesPerRg","_numberOfEstimatedDataDrivesPerRg","numberOfRaidGroups","floor","typeOfAggregateLimitTb","perRaidGroupCapacityInGb","_estimatedCapacityFASPerRaidGroupInGB","howManyRaidGroups","lookup","lowestOverheadRaidSize","tbSize","size_32_tb","currentCacheCapacity","_currentSystemCacheCapacity","platformCacheLimit","cache_with_flash","delta","subtract","aggregateReporter","versionNumber","capacities","cacheCapacityForAggr","estimatedRaidSize","driveRolesForRaidType","dataDeviceCount","waflModifier","fixedOverhead","diskCapacity","perDriveCapacityUnit","../../units","./aggregate-types","./aggregateReporter","./raid-limits","./raid-types",76,"owningHagi","_addAggregateForComputing","aggregateId","_buildSummary","_packageAggregateReport","_removeAggregateBecauseDone","aggregateCapacitySummary","isRootAggregate","cacheData","usableCapacityByType","_addRaidGroupSummaryToAggregateCapacitySummary","_raidTypeFor","raidGroupDeviceCount","ddpReserve","driveRoles","_handleDDPReserveDrivesIfNecessary","lcdSpec","_lowestCommonDenominatorDriveSpecForRaidGroup","snapReserveProportion","raidGroupYield","_getRaidGroupYield","_getUsableCapacityFromDeviceSpec","lcdSpecIsVirtual","lcdDriveType","doesDataSliceExist","_isPartitionPresentInRaidGroup","doesRootSliceExist","partitionType","device","deviceIsVirtual","_for_storage_pool","_findStoragesPoolWithAggregateId","allStoragePools","storagePools","storagePoolOwnershipMap","storagePool","aggrIds","without","storagePoolWithAggrMap","ownership","driveRolesFromRaidType","ddpReserveCount","drivesInVolGroup","newReserveDrives","_getDdpReserveRecommendation","partition","sortedDeviceList","_getRawCapacityFromDeviceSpec","rawCapacityPerDisk","isCache","perDiskYield","_determinePerDataDiskYield","mirrorDivider","snapReserve","_getESeriesVolumeGroupYield","_perDiskYieldESeries","totalYield","isMirrored","driveCount","reserveCount","stripeWidth","maxStripes","pieceSizeBlocks","userBlockPerStripe","diskCapBlocks","diskCapMinusReserve","diskCapExtents","driveCountErrorCode","_getESeriesDriveCountErrorCode","driveCapacityErrorCode","_getESeriesDDPDiskErrorCode","percentError","_getESeriesPercentError","totalStripesNoError","totalStripesWithErrorDecimal","totalStripesWithError","reservedSpaceStripes","userSpaceStripes","userSpaceBlocks","spaceAvailableInGiBUnit","eSeriesErrorCalcCode","_perDiskYieldFAS","_capacityAfterDACOverheadsESeries","isSantricity82","indexOf","_nullToZero","val",77,"mutil","ComponentBuilder","_specById","_get_specById","makeAggregate","deviceGroup","defaultProps","defaultAggrProps","makeRaidGroups","callerRaidSize","_defaultRaidSize","raidCount","ceil","deficiencies","soFar","group","lastSpec","lastSpecEntry","effRaidSize","thisSize","theseDevices","splice","pushDevice","raidSpec","rpmToEffectiveDriveType","_type_faked","GSBI","deviceInfo","../../dump","../util",78,"currentAggregate","_requestedRaidSize","_componentBuilder","_makeAggregateBoilerplate","_setRaidSizeIfMissing","bestPracticeRaidSize","bestPracticeDDPReserve","reserveRecommendationForDDP","newRaidType","forCache","_respondToMutation","setBlockType","newBlockType","availableBlockTypes","_isDeviceGroup","_deviceGroupForSpec","_rebuildRaidGroups","newRaidSize","setDDPReserve","newDdpReserve","newController","newSnapReserveProportion","_availableAggrDeviceGroups","dataDeviceGroups","_currentAggrDeviceGroups","cacheDeviceGroups","dataDeviceGroup","safeSpecAndCount","cacheDeviceGroup","possibleRaidTypes","possibleAggrTypes","availableControllers","containerLanguage","_actualRaidSize","activeDevice","_activeDeviceForAggregate","_currentRaidType","activeCount","minForRaidType","_absoluteMinRaidSize","maxToLimit","maxAggrDataDeviceCount","raidLimits","hardMinimum","maximumSize","deviceCountInRaidGroup","currentAggregateDeviceGroups","sortedDeviceGroups","sortByCapacity","_transform","transformDriveInfoSequence","unusedDevices","_unusedAggrDevices","currentDevices","_currentAggrDevices","latestDeviceInfo","and","allDevices","ownedByAggregate","forAggregate","_filterCacheDevices","containsId","roleMap","buildRoleMap","filterForCache","mapRaidGroup","addDeviceToMap","minRaidSize","makeBoilerplate","_defaultController","_defaultName","_makeDefaultRaidGroups","forAggr","defaultDeviceGroup","_defaultRaidGroupDeviceGroup","defaultRaidType","totalDefaultDevices","prefferedRaidType","systemRaidTypes","enoughDevicesForType","rank","availableDevices","deviceIfADPMeetsMin","sortedDevices","defaultController","defaultName","language","deviceGroups","specMatchesSearch","withSpecificDeviceGroup","havingCount","aggregateDataDeviceGroups","cacheRaidGroups","isCacheRg","newRaidGroups","buildRaidGroupsForDevice","groupCount","obj","isObject","hasSpec","hasDevices","specIsObject","devicesIsArray","./component-builder",79,"SlicedRootAggregateProposer","UnlicedRootAggregateProposer","DataAggregateProposer","ESeriesDrivePoolProposer","PROPOSERS","AggregatePlanner","proposers","bestPlan","availableDevicesGroupedByUtility","preserved","attempts","makeAttempts","sortedAttempts","scoreAttempt","winner","newAggregates","attempt","aggrByController","yieldsByController","_estimateAggrsDataYield","yields","aggrCountPenaltyFactor","aggrs","_estimateAggrDataYield","usableGiB","minRootMiB","root_aggr_size_mib","minRootGiB","minCount","minimalRootAggregateDriveCount","isDedicated","makeProposers","Proposer","propose","newTails","pushNewTails","proposalsFromTail","proposeAgain","proposer","checkProposal","remainingDeviceGroups","filterDeviceGroupsRemovingDevicesUsedBy","allAggregates","resultsStartingHere","accsum","consumedDevices","wasConsumed","zipObject","filterDeviceGroupsByConstraint","not","adjustDeviceGroup","newDevices","avoidFPSSD","getFPSSDAvoidance","availableBySpecKey","useful","minimalSpecKey","unpack","unSliced","sliceOrUnSliced","avoidedSSD","infos","fpParticipants","fpOK","fpLikely","aggrPolicies","planAggregates","worker","./plans/propose-data","./plans/propose-ddp","./plans/propose-root-sliced","./plans/propose-root-unsliced",80,"AggregateProposer","_get_controllerIds","_get_controllersWithoutRoot","_get_isFAS","_get_knownAggregatesInHagroupIncludingProposed","_get_rootSliceCountForSystem","componentBuilder","getNonConflictingAggregateName","ANIT","suffix","findControllerDespiteAmbiguousReference","cleanPrefix","startingWith","knownAggregatesInHagroupIncludingProposed","isTaken","FCDAR","isMissingRootAggregateFor","MRAF","some","liveDevicesForSpecAndController","getSpecById","specById","sparesFor","situation","sparesLevel","_getSparesPolicy","MAX_VALUE","expectedSpares","_getShelvesCount","FCWR","GKAIHIP","other","otherHagi","_get_infoById","GIBI","GCI","GRSCFS","isRootSlice","isFAS","parentGroup","../../../dump","../../../lcprop","../component-builder",81,"controllersWithoutRoot","minSize","minAggrDeviceCount","minRequired","controllerIds","raiseMinRequiredForSparesAndMinReq","live","isFirst","extrasForThisController","consider","maxSize","rgSizeAtMax","overflow","maxRound","priorDevices","restoreDevices","attempt0","unsplit","isString","liveForController","liveCounts","bothSpares","bothExcess","excess","WINDBACK_LIMIT","ids","count0","windBackForSpares","makeDataAggregate","count1","spares","aggrSize","strategy","./propose-abstract",82,"trySizes","sizeOptions","getSizesToTry","devicesBefore",83,"deviceGroupsToSatisfyNeedyController","rootSlicesDeviceGroupsFor","makeNewRootAggregateFrom","rootDeviceGroup","OVERRIDES","matchesController",84,"UnslicedRootAggregateProposer","_sawSlices","unsatisfiedControllers","rankDriveTypeForRootAggregate","minReq","whatif","make","makeNewRootAggregateForFirstUnsatisified","requiredDeviceCount","getLiveCount","liveCountsPer","sparesPer","sparesIncludingMinReq","newDriveCount","MNRAF",85,"findLimits","selectedRaidType","numberOfDevices","osVersion","devicesToFindLimitsFor","_findLimitsForESeries","_findLimitsForFAS","raidLimitResult","raidLimitsForDevice","deviceQuantity","effectiveDeviceQuantity","RAID_1","_packageResult","RAID_0","RAID_3","RAID_10","_applyUpdatedValueToDeviceLimits","defaultSize","lowestSize","_FASRaid0Limits","_FASRaid4Limits","_FASRaidDPLimits","highestSize","container","useMin","existingValue","_fixDriveType","_FASRaidDPLimitsForCapacityDrives","deviceCapacity","hardMax","getEffectiveRaidSize","withDeviceSpecs","numberOfDevicesForAggregate","effectiveRaidLimits","lastRaidGroupSize","finalRaidSize","raidSizeRange","raidOverheadMap","proposedRaidSize","fullGroups","lastGroupSize","driveRolesPerRg","overheadPerRg","totalRaidGroups","overheadDrives","sortedOverheadMap","maxTotalDrivesGivenDriveSpecAndAggrMaxUnit","maxAggregateCapacityUnit","driveSizeUnit","maxDataDrivesByAggregateMaxCapacity","totalDrivesGivenDataDriveCountAndRaidTypeForEffectiveRaidSize","dataDriveCount","parityDriveCountNeededGivenDataDriveCountAndRaidType","preTotal","getParityCountForRaidType","maxRaidSize","parityDriveCountNeededGivenDataDriveCount","parityDrivesPerRaidGroup","raidGroupCountGivenDataDriveCount","minDrivesNeededForDedicatedRootAggregate","minRootAggrSizeMib","minRootAggrSizeUnit","driveUnit","drivesRequired","minDrivesForRaidType",86,"extend","requestedRaidType","_fixOldRaidTypeIfRequired","RAID_2","firstDriveRoles","_raidMaps","drivesInRaidGroup","parityCount","_howManyOfThisRoleForRaidType","dparityCount","_intRaidTypeToString","_isInt","typeToIntMap","role","rolesForRaidType","driveRole",87,"_selectedHaGroups","spareCount","physicalDevices","physicalSpares","virtualSpares","_populateSystemSummaryWithPhysicalDevices","_updateSystemSummaryUsingGivenAggregate","howManyOfTheseDevices","totalRawCapacityForDevice","physicalDeviceType","isDeviceSSD","isDevicePerformance","isDeviceTypePerformance","_updateDeviceClassRawSummary","deviceClassSummary","deviceTotalRawCapacityContribution","existingDeviceSummary","summaryByType","existingIndex","aggrDeviceType","usableCapacityForType","./aggregateReporter.js",88,"MAX_ROOT_SLICE_DEVICES","Builder","_applyADPAndAddAggregates","_makeNewMap","stripAutomaticStoragePools","stripAutomaticAggregates","stripAssignedStorage","makeAssignmentsForADP","_buildAggregates","BLOCKS_PER_MiB","BLOCKS_PER_GiB","GB_PER_GiB","BLOCKS_PER_GB","DRIVE_LABEL_BLOCKS","SLICE_PAD_BLOCKS","adp","adpSpec","getADPDriveSpec","adpDevicesWithinSpec","blocksPerDrive","rootSliceBlocksTotal","rootSliceCounts","getRootSliceCounts","dataCount","unalignedRootSliceBlocks","rootSliceBlocks","alignBlockCount","dataSliceBlocks","rootDevices","makeSliceId","dataDevices","assignRootSlices","assignDataSlices","sliceNumber","sliceBlocks","blockCount","validDeviceCounts","ofDrives","allShelves","firstShelf","allShelvesAreSSDOnly","isSSDOnly","matchesFirstShelf","specsMatch","allShelvesMatch","isSuspectedAllFlashFAS","singleSpecEmbedded","isSingleSpecEmbedded","embeddedSpecIsSSD","isEmbeddedSSDOnly","candidateShelves","exampleShelf","exampleDrive","compatInfo","root_slicing","isSingleSpec","shelf1","shelf2",89,"MIN_DISKS_FP","MIN_DISK_WIDTH_SP","MAX_DISK_WIDTH_SP","SLICES_PER_SP","assignFlashPoolWhereAvailable","isFlashRay","isFullsteamPlus","_isFullsteamPlus","buildFlashPool","_buildStoragePools","_buildClassicFPRaidGroups","availablePhysicalDevices","availableFPDevices","_filterDevicesForFlashPool","haveAvailableSSDs","existingDataAggregates","_existingDataAggregates","userWantsFlashPools","_flashPoolPolicy","minimumFPDevicesForAggregate","dataAggregates","_determineFPStoragePoolAllocation","fpStoragePoolIds","storagePoolCount","numberOfAggregates","willServeAggregates","take","_findControllerWhoOwnsAggregate","devicesPerPool","devicesPerStoragePool","effectiveRaidType","_raidTypeGivenDeviceConstraints","newStoragePoolId","addStoragePool","physicalDeviceSpec","_takeSlicesForAggregates","aggrDelta","difference","_determineFPRaidGroupAllocation","fpRaidGroupIds","devicesPerAggregate","leftovers","newRaidGroupId","addFlashPoolRaidGroupToAggregate","preferredRaidType","prohibitedRaidTypes","raidTypeMinimumsMap","minimum","raidTypesWithConstraint","raidTypeItem","storagePoolId","_findStoragePoolById","newAggrAssignments","aggrIdsToAssign","_fullyUtilizeStoragePoolGivenAggregates","sliceIndex","aggrIdToAssign","storagePoolRaidType","spRaidWidth","spRaidGroupDeviceSpec","newSpRaidGroup","_deviceSpecFromAllocationUnit","sliceName","allocationUnit","storagePoolDeviceSpec","sliceCapacityGb","clonedDeviceSpec","aggregatesToAssign","leftoverSlices","aggrIndex","extraAllocations","leftoverIndex","spAllocations","allAggregateIds","_totalNumberOfDevices","fpAllocationForDevice","_devicesPerFPStoragePool","packaged","_mergeAndPackageFPAllocationForDevice","rgAllocations","_devicesPerFPRaidGroupAggregate","totalAggregates","totalDevices","proportionOfDevices","howManyAggregatesToServe","deviceCountPerSP","perAggregateAllocation","floatVersion","parseFloat","aggregateDriveDetail","allSupportFlashPool","uniqueDriveTypes","areNotJustSSDs","notJustSSDs","_isManual","mappedCounts","_availableDevicesForFlashPool","../aggregates/raid-types",90,"SLICES_PER_DRIVE","STORAGE_POOL","isManual","_findSystemByControllerId","_findController","newStoragePool","_buildStoragePool","rebuildAutoAggregates","except","spinningDriveAggregates","claimAllocationUnit","aggrID","poolID","storage_pool","au","raidID","releaseAllocationUnit","containsAUMembers","intersection","deleteFlashPoolRaidGroupFromAggregate","deleteStoragePool","pleaseReleaseMeLetMeGo","resizeStoragePool","newDeviceCount","context","oldDeviceCount","unique","toRemove","_removeDevices","makeSurvivalCheck","fixAggr","removeDevicesFromAggregate","flow","functions","idWillSurviveFn","removeDevices","expandDeviceSpecs","tupSurvives","tups","zip","collapseDeviceSpecs","changeTo","expandDeviceSpec","repeat","notSSD","ownerAggregate","_findAggregateById","ownerSystem","_systemThatContainsAggregate","newRaidGroupName","_newUniqueCacheRaidGroupName","newRaidGroup","_buildFlashPoolRaidGroup","raidGroupId","owningAggregate","_findAggregateWithRaidGroup","storagePoolName","_newUniqueStoragePoolName","blocksPerSlice","_usedBlocksPerSlice","_physicalDevicesMatchingSpec","_buildAllocationsForNewStoragePool","raidGroupName","availableStoragePoolDevices","deviceIds","_deviceIdsGivenAvailableSpecAndCount","nextNumber","_nextNumberInNamingSequence","owningHagroup","collection","numbers","sortedNumbers","partitions","newAllocation","virtualDeviceSpec","packagedVirtualDeviceSpec","matchingDevices","deviceMatches","sample","fixed","rsCapacity","overhead","totalOverhead","capacityAfterOverhead","perSliceCapacity","divide","perSliceBlocks","controllerMap","_mapControllerOwnership","mapWithAggregateSearch","controllerItem","aggregateMap","hagroupId","owningControllerSearch","owningControllerIndex","owningController","_findControllerById","_findControllerWithStoragePool","owningSystemSearch","raidGroupIds","aggregateSearch","aggregateItem","owningAggregateId","ownershipOfType","controllerIndex","ownedThingIds","ownedThing",91,"disableTracing","_tracingEnabled","pure","spam","enableTracing","_tracingSetUp","lastCache","trap","beforeCall","afterCall","detectChanges","indented","fname","localstack","msg","nextCache","lastAlertKey","alert","status","walk","capture","emitter","__bindData__","wrap","wrapped","by",92,"BuildADP","BuildStoragePools","BuildFlashPoolAssignments","TraceBuilds","_productInfo","bindAll","buildSystem","addSystemToCluster","clusterId","isClustered","isPinnedVersion","maxClusterName","_getMaxAutoNamedCluster","clusterName","findClusterName","setClusterVersion","changeSystems","_getSystemByIdFromClip","existingId","platformModel","buildShelves","controllerCount","maxAutonamed","_getMaxAutoNamedSystemCount","buildControllers","getConfig","removeSystem","systemId","findIndex","deleteShelf","targetHaGroup","shelfIndex","isEmbeddedMatch","deleteAllShelves","buildAutoAggregates","deleteOptions","deleteAutoAggregates","deallocateFlashPoolSlice","alloc","deleteAllAggregates","clearControllerAggregates","allAutoMustDie","clearControllerAutoAggregates","shouldSurvive","nameSystem","name1","name2","nameCluster","setSystemPolicy","setClusterPolicy","setPolicy","checkCompatibility","isCompatible","isCompatibleWithVersion","determineDriveFlashPoolSupport","shelfCompat","startingCount","namePrefix","shelvesSpec","shelfNumber","buildShelf","newId","buildDrives","stats","max_drive","shelfId","withSpecs","withShelfModel","driveContainer","specsAndMembers","buildSpecsAndMembers","driveSpecWithMembers","flashPoolSupport","driveConfig","_drives","rsUnit","right_sized","newDriveSpec","_getDeviceIdForDrive","forceVersion","setSystemVersion","carrierSlot","_findSystemId","maxAutonamedCluster","h","exec","cn","maxAutonamedSystemNaming","maxAutonamedController","_isPureEmbeddedSystem","hasOnlyOneShelf","onlyShelfIsEmbedded","plannedAggregates","attachAggregatesToControllers","addManualAggregate","aggregatesToAttach","withoutAggregatesWeAreAdding","../units","./aggregates/planner","./build/adp","./build/flash-pool-assignment","./build/storage-pools","./build/trace","./map","./util",93,"Spec","Policies","Guard","_map","_addingTo","_addingToHagroups","_getHagroups","_impactedHagroups","_getImpactedHagroups","_options","_proposals","resolvedReplacing","_resolveReplacing","replacingHagroups","configGroups","_getUniqueConfigGroups","nodeSummary","versionLimits","versionRange","_buildSystemOptions","_applyAggregateLimits","_applyConfigLimits","_applyClusterLimits","_applyHagroupLimits","_applyHardwareLimits","addingToHagroups","ejecting","getEjecting","remainingHagroups","commonVersionLimits","isNotReplacing","systemRange","_buildVersionOptions","_applyVersionChangeLimits","pinned","_buildShelfOptions","_applyEmbeddedLimits","ejectingShelves","usedByManual","isUsedByManual","_disable","_buildPolicyOptions","_applyPolicyLimits","buildProposal","clonedConfig","vRange","_getDefaultEmbeddedShelf","shelfVersions","_getLatestVersion","getLimitsForVersion","makeBuildMethod","build","effects","node","newLimits","newEmbeddedShelf","getShelfConfigs","clonedShelf","resolved","embedded","hagroupInspector","isNewConfig","externalShelves","encryptionLimit","isEncrypted","getEmbeddedConfigs","hardwareOptions","matchesEncryption","sorted","isShelfEoa","inVersionRange","embeddedShelves","shelfPresets","hasEncryptedDrive","isEncryptedDrive","areDrivesEncrypted","isDriveEncrypted","isShelfSellable","areDrivesSellable","isDriveSellable","subSet","common","combined","combineLimits","applyLimits","candidate","addingLine","existingLine","_sampleProductLine","enforceLimits","_enforceConfigLimit","_enforceEmbeddedShelf","_enforceNodeLimit","_enforceVersionLimit","_getEncryptionLimit","_enforceEncryptionLimit","shelfDriveSummary","_addEmbeddedCounts","_enforceAggregateLimit","_enforceCapacityLimit","_enforceDriveLimit","_enforceShelfLimit","getExternalShelfConfigs","checkShelves","hasBadShelf","noMatches","noMatchingShelfConfig","chooseClosestShelfConfig","_enforceEmbeddedLimit","productLines","checkImpactedHagroups","assertLimits","forOwn","ext_shelves","external","cacheLimit","cache_no_flash","totalCacheCapacity","_getTotalCacheCapacity","_enforceFpSize","_enforceAggrSize","counts","driveTotal","fc","sas","sata","ssd","usableLimit","driveMin","min_fp_drives","checkManualAggregateLimits","checkLimits","effectiveLimit","effectiveLimitGB","actualUsableGB","cacheDataDrives","actualCacheGB","fpLimit","fpLimitGB","constraints","totalCache","sumController","fp","sumAggregate","aggregateCache","fpAggregate","searchInstallation","searchCluster","isEncryptedSpec","_remainingShelves","peerLimit","nas","candidateLimit","nas_nodes","peerCount","candidateCount","capacityGb","_normalizeDriveType","existing","isSystemCandidate","newShelves","newTotal","checkEmbedded","../lcprop","../policies","./aggregates/aggregateReporter.js","./spec",94,"PROPFUNCS","AggregateInspector",95,"ClusterInspector","nasLimit","sanLimit","_remainingHagroups","summarize","nasNodes","sanNodes","san_nodes","san","shelfRange","shelfVersionRange","isEjectingHagroup",96,"ControllerInspector","devicesConsumedByAggregates","DCBA","excludeAutoNonRoot","aggrDevices","manualAndAutoRootAggregatesOnly","safeGetDevices","deviceHolder","storagePoolDevices","storagePoolPhysicalSpec","isPhysical","storagePoolVirtualSpec","rsgbPerDevice","_waflBlocksToGb","rsGBPerDevice","assignedStorageSlices","controllerStorage","assignedStorage","assignedStorageSizeGb","owningControllerId","waflBlocksPerDevice","waflBlocks","waflCapacityUnit","../../units.js",97,"_initSummary","v_100","v_200","haGroupInspector","_addController","_addPartPowerSpec","part","power","_addPowerSpecsToSummary","_addSpecsToSummary","weight","_updateCompleteStatsAvailable","_addPowerSpecs","b","_addPowerSpecVoltages","_addPowerSpecCase","weightG","powerFactor",98,"Lookup","HagroupInspector","determineConfigGroup","getProductLine","getLimits","isEseries","extractVersionNumber","fullVersion","indexOfSeperator","findEmbeddedShelf","_get_controllers","_get_aggregates","_get_deviceInfo","AGGR_FILTERS","CONTROLLER_FILTERS","arrays","lastFp","specsByFp","devicesByFp","fingerprint","fpStatusByDriveModel","countByType","_impactedShelves","availableDeviceIdsForSpec","deviceIdsForSpec","withSpec","findSpecForDeviceId","_getShelfIdForGivenDeviceId","_getDeviceSpecGivenShelfIdAndDeviceId","shelfStartsWith","shelvesLike","driveSpecIndexOnShelf","_findDeviceSpecIndexInShelfGivenDeviceId","driveSpecMembers","driveSpecIndex","../../add-query-api","../../clip/device-info","../../lcprop","./lookup",99,"GenericInspector","CONSTRUCTORS","raidgroup","DESCEND","Inspector","_installations","_info","_locs","inspectCluster","inspectHaGroup","inspectController","inspectShelf","partOrType","_find","contextualize","_indexTo","bucket","coords","locs","indexInstallation","parentCoords","child","childType","shove","indexDeeper","grandChildren","./aggregate","./cluster","./controller","./hagroup","./shelf",100,"RAID_LIMITS","RAID_TYPES","AGGR_TYPES","getExpectedSpares","_versionNumber","_isFAS","_ALF","_get_possibleRaidTypes","_get_possibleAggrTypes","_get_minFPDevicesFromLimits","_perfDeviceTypes","_capacityDeviceTypes","deviceType","reverseEngineerTypeFromRotationSpeedIfRequired","maxAggrCacheDeviceCount","maxAggrDeviceCount","maximumDriveCountGiven","isOneShelf","isEmbeddedShelfOnly","../../prodinfo/tables/spares","../aggregates/aggregate-types","../aggregates/aggregateLimitFinder","../aggregates/raid-limits",101,"ShelfInspector","prefix","haveManualAggregatesUsingShelf","isManualAggregateUsingShelf","isRaidGroupUsingShelf","isDeviceFromShelf","fallback","chooseMatchingShelfConfig","devicesForShelf","shelfBom","shelfDriveSpec",102,"prodinfo","_prodinfo","_moveToInstallation","_moveClusteredToClusters","cmap","unclustered","moveToCluster","getOrCreate","def","installs","_where","_searchInstallations","rehydrateInstallation","_rehydrateClustered","_rehydrateNonClustered","rehydrateCluster","_rehydrateAggregateMetaInfo","deviceAndSpecMap","_createDeviceAndSpecMapping","fixRaidGroupsInController","fixStoragePool","_withoutEjected","fixAggregate","_withoutOrphanedAggregates","_populateDeviceSpecsForRaidGroup","shouldWeKeepThisAggregate","__eject","PDSFRG","specToDevice","hasDevicesIsSatisfied","deviceSpecsAreOkay","needsUpdatedDeviceSpecs","_updateDeviceIdsAfterRebuild","specHashForDevice","specHash","UDIIRGAR","specMap","hashes","hasDevicesNeedsDevices","hash","_createDeviceSpecHash","rgDeviceSpec","matchingDeviceIds","newDeviceIds","consumeDeviceIds","deleteSpecMapProp","deviceSpecMap","valueForKey","stringifiedKeyValue","subSelector","_searchClusters","_searchHagroups","_searchHardware","_searchShelves","_searchDrives","_searchControllers","subSelect","_searchAggregates","driveSelectors","isMatchingShelf","isMatchingDrive","criterion","./guard","./inspect",103,"guardOption","_guardOption","_handleCreatingBuildSpecsFor","_addCurrentInstallationToSelector","_resolveSystemSelectorUsingMap","scaledSelector","_resolveSelectorUsingMap","resolvedSelector","selectedOption","resolvedAddingTo","isAddingToExisting","_isSelectorConfigGroup","_determineVersionWithSelection","_determineLimitsWithSelection","_selectionToArrayOfSystems","_createSpecsForSystemGroup","newSystem","_createBaseBuildSpecFor","defaultShelf","_defaultShelfOptionForConfig","filteredHagroups","_createBuildSpecForHagroup","howManyNewSystems","existingSpecs","oldExternalShelves","_determineExistingId","detail","_determineCompleteDetailForBuildSpec","_getShelfSummaryFromExistingSystem","isShelfOption","newShelfSpec","_shelfOptionToBuildSpec","isDriveOption","isSystemOption","resolvedSystemAddingTo","optionWrapper","noOption","_determineConfigFromSystemSelection","shelfOption","shelfBuildSpec","rawShelves","withoutIdMap","withoutShelf","_determineConfigGroupFromSelection","haGroupMapping","systemSelection","optionalConfigGroup","configGroupForSystem","systemModelName","_getSystemSelectionModel","firstSelection",104,"findDrivesBelongingToShelf","belongings","driveModels","_normalizeShelfDriveComboDescription","_checkDriveEqual","ignoreQuantity","isModelEqual","isQuantityEqual","_checkShelfDriveEquality","specA","specB","sortedAxbom","sortedBxbom","_getShelfConfig","fallbackWithoutQuantityMatch","mockDrive","mockShelf",105,"AbsentObjectWalker","_value","_cache","_path","defineProperties","assertType","_maybe","segs","seg","next","because","missing","_because","NO","writable","newPath",106,"buildPolicies",107,"Config","ConfigGroup","makeSubLine","partialRight","overrides","_configs","_configsByModel","inhaleRawSystem","gcbm","rawSystem","controllerModel","getConfigByModel","getConfigs","getSubGroup","./config",108,"CompatibilityMatrix","chassis_count","controller_per_chassis","configDesc","embedded_shelves","./matrix",109,"ProductInfo","rawConfigData","_initConfigGroups","_rawConfigData","_inhaled","_configGroups","subid","availableGroups","haGroupModelName","availableGroup","subgroup","is_metrocluster","rawTasks","_inhaleLimits","_inhaleReleases","_inhaleShelves","_inhaleDrives","_inhaleShelfPresets","_inhaleCards","_inhalePlatforms","tasks","cookTask","series","afterInhalation","_task","task","_callback","families","_inhaleReleaseFamilies","seen","cookAndLinkRelease","rawRelease","longVersion","release","family","getShortVersion","cMode","clustered","release_status","releases","_releases","os_releases","segments","cookFamily","rawFamily","_families","os_families","fixDrive","_cards","_shelfPresets","presets","shelfPreset","shelfDrives","primary","secondary","shelfDrive","_systemConfigs","rawPlatforms","platforms","inhalePlatform","_inhalePlatform","callbacklater","delay","rawPlatform","groupID","_getPrimaryConfigGroupIDGivenEpicFamily","primaryConfigGroup","inhaleModelIntoPrimaryConfigGroup","_inhaleModel","models","rawModel","platform","inhaleSystem","_inhaleSystem","hardwareTables","os_limits","limitBlock","firstRelease","os","isCmode","subGroupID","_getSubGroupGivenEpicData","subGroup","releaseIndex","_index","inhaleRelease","inhaleHardware","fail","isMetro","isMCC","isEF","getDriveByModel","delayed","later","asyncFn","returnValue","./config-group",110,"rbi","rik","sv","dR","rsd","sR","getVersions","finalize","_showEnvStatChecks","_envStatChecks","sysVersion","familyName","incompatibility","compatible","fp_slicing","tables","driveIndex","_mkRSDspec","canSliceAccordingTo","table","blocks","systemHardware","systemStats","_bindHardware","_reverseIndexes","_lockDown","hwt","lockdown","nope","_cacheEntries","_bindShelves","_bindShelfPresets","_bindCards","_outputEnvStatChecks","cacheShelfHardwareTableEntry","cacheDriveHardwareTableEntry","ri","si","di","systemShelfPresets","systemEmbeddedShelves","embeddedShelfPool","systemEmbeddedShelf","resolvedPresets","systemShelfPreset","preset","_mapRawOsIntoReleaseVersions","_checkEnvironmentalStats","embeddedOption","embedded_only","systemShelves","systemDrives","systemShelfPool","systemDrivesToUse","systemDrive","denormalizedShelves","weightStats","with_internal","powerStats","drive_slots","drives_per_carrier","indexObject","addEnvCheckMessage","systemCards","platformCards","denormalizedCards","systemCard","cardOption","card","assignments","assignment","slots","rawOsArray","osKey","_getReleaseIfInTable","_osAgnosticIsEqual","objb","limitKeys","limitComp","_safeArrayConcat","array1","array2","safeArray","measure","tot","end","beginning","span","hrtime","sec","measured","toPrecision","beg","res","FNAMES","SR_MEASURE_MATRIX",111,"SITUATION_SPEC","checkSparesLevel","checkDeviceCount","LEVELS","balanced","maximum","HUGE","LARGE","ENTRY","SINGLE","MEDIUM","../../enforce",112,"RequestQueue","readQueue","queue","writeQueue","method","basePath","buildUrl","url","statusCode","body","pauseReadQueue","pause","paused","pauseWriteQueue","resumeReadQueue","resume","resumeWriteQueue","pushToReadQueue","request","pushToWriteQueue","readQueueLength","readQueueRunning","running","readQueuePaused","writeQueueLength","writeQueueRunning","writeQueuePaused",113,"Store","open","_act","applied","changed","EVENTJOURNAL_CLEAR","./store",114,"getCache","restoreCacheState","HARDWARE_CLEAR","clear","saveToLocalStorage","HARDWARE_SELECT","getSelection","isValidSelection","../client-cache",115,"DEFAULT_ENTRY_LIMIT","entryLimit","_entries","_confirmed","_overflowed","_draining","_sessionId","confirmed","overflowed","draining","postFunction","unconfirmed","drop","sessionId","now","expandEntry","makeEntryFromString","makeEntryFromError","makeEntry","timestamp",116,"MOTDStoreBackEnd","baseURL","fetch","backEnd","MOTD_FETCH","onList","../xhr",117,"getUuid","PORTFOLIO_NEW_NAME","requestQueue","debouncedRead","debouncedWrite","allProjects","matchingProjects","adjustingProjects","errorProjects","projectMap","projectUuidsBeingEdited","PORTFOLIO_SEARCH","term","updateMatches","PORTFOLIO_ADD_NEW","addNew","requestId","getTime","PORTFOLIO_ADJUST","PORTFOLIO_SET_NAME","PORTFOLIO_FETCH","PORTFOLIO_ARCHIVE","archive","adjust","adjustments","oldClip","onAdjust","findExisting","updateLocalStorageProjects","updateProjectsBeingEdited","list","nameMatch","uuidMatch","tagMatch","CHECKS","check","filteredClips","archivedFilter","storeProject","isNewProject","pushProjects","../debounce","../request-queue",118,"lzString","TAG","ProductInfoStoreBackEnd","getRawProdInfo","getCacheEngine","cached","getCachedResult","served","getServedResult","pickWinner","recached","updateCache","withCacheEngine","withCacheContents","hasCache","previous","digest","parseErr","isPreHit","isHit","platformConfigData","PRODUCTINFO_FETCH","fetchConfig","onFetch","timing","elapsed","extracted","decompressFromBase64","parsed","cookErr1","../prodinfo","lz-string",119,"reduceClip","ProjectStoreBackEnd","load","productInfoStore","_unload","actions","_modelMap","_builder","_clearCaches","_save","clipToSave","PROJECT_UNLOAD","unload","PROJECT_LOAD","onLoad","PROJECT_ADD_STANDALONE","addStandalone","PROJECT_ADD_CLUSTER","addCluster","PROJECT_EXPAND_CLUSTER","expandCluster","PROJECT_CHANGE_SYSTEMS","PROJECT_REMOVE_SYSTEM","removeStandalone","PROJECT_NAME_CLUSTER","PROJECT_NAME_CONTROLLERS","nameControllers","PROJECT_DELETE_SHELF","PROJECT_DELETE_SHELVES","deleteShelves","PROJECT_REBUILD_AUTO_AGGREGATES","PROJECT_ADD_MANUAL_AGGREGATE","callbackWithNewAggregate","PROJECT_DELETE_AGGREGATE","PROJECT_DELETE_ALL_AGGREGATES","PROJECT_SET_SYSTEM_POLICY","PROJECT_SET_CLUSTER_POLICY","PROJECT_FP_ADD_POOL","addFP","controllerID","PROJECT_FP_RESIZE_POOL","claimAU","storagePoolID","PROJECT_FP_CLAIM","aggrId","PROJECT_FP_RELEASE","PROJECT_FP_DEL_POOL","PROJECT_FP_ADD_AGGR_RG","PROJECT_FP_DEL_AGGR_RG","removeFPRG","raidId","PROJECT_SET_CLUSTER_VERSION","PROJECT_SET_SYSTEM_VERSION","../clip/reduce","../model/builder","../model/map",120,"SecurityGuard","shifted","_guard","_prefix","_emitter",121,"DEFAULTS","collapseClusters","KEYS","CACHE_KEY","prefs","USER_PREFERENCES_ADJUST","unknown","updateLocalStoragePrefs","userPrefs",122,"UserSessionStoreBackEnd","sessionExpirationUTC","authenticatedServerTimeUTC","authenticatedClientTimeUTC","currentClientTimeUTC","timestampDelta","expires","clientTime","serverTime","calculateTimestampDelta","USER_SESSION_FETCH",123,"unitType","modifier","destUnit","_findUnitType","_packageUnit","pow","_inGb","conversion","_convert","unitToAdd","_assertIsUnitObject","newVal","_packAndReturnArithmeticResult","unitToSubtract","multiplier","divider","toPlaces","useName","optFormatString","finalUnit","likeUnits","TYPES","likeUnit","newUnit","formatString","roundToPlaces","useFullUnit","pluralModifier","types","unitObject","unitTypeObject","toType","ratio","gbType",124,"_xform","kspec","memberSpec","expectedType","fromFunction","fromValue","_constant",125,"headers","req","XMLHttpRequest","typ","setRequestHeader","ontimeout","onreadystatechange","readyState","responseText","bodyType","responseType","getAllResponseHeaders","send",126,"previous_async","noConflict","only_once","called","_toString","_isArray","_each","arr","iterator","_reduce","memo","_keys","nextTick","setTimeout","completed","done","iterate","forEachSeries","eachLimit","_eachLimit","forEachLimit","started","replenish","doParallel","doParallelLimit","doSeries","_asyncMap","eachfn","mapSeries","mapLimit","_mapLimit","inject","foldl","reduceRight","reversed","foldr","_filter","filterSeries","selectSeries","_reject","reject","rejectSeries","_detect","main_callback","detect","detectSeries","criteria","right","remainingTasks","listeners","addListener","unshift","taskComplete","theCallback","taskCallback","safeResults","rkey","requires","ready","listener","retry","times","DEFAULT_TIMES","wrappedTask","wrappedCallback","wrappedResults","retryAttempt","finalAttempt","seriesCallback","waterfall","wrapIterator","_parallel","parallel","parallelLimit","makeCallback","_concat","cb","concatSeries","whilst","test","doWhilst","until","doUntil","concurrency","_insert","q","saturated","workers","empty","kill","idle","priorityQueue","_compareTasks","priority","_binarySearch","sequence","compare","mid","cargo","working","drained","ts","_console_fn","dir","hasher","queues","memoized","unmemoized","unmemoize","counter","timesSeries","fns","that","newargs","nextargs","compose","_applyEach","go","applyEach","applyEachSeries","forever","define","amd",127,"pSlice","hasOwn","AssertionError","actual","expected","operator","generatedMessage","getMessage","stackStartFunction","captureStackTrace","out","fn_name","next_line","replacer","isUndefined","isFinite","isFunction","isRegExp","truncate","deepEqual","_deepEqual","isBuffer","isDate","multiline","lastIndex","ignoreCase","objEquiv","isArguments","isNullOrUndefined","isPrimitive","aIsArgs","bIsArgs","ka","objectKeys","kb","notDeepEqual","strictEqual","notStrictEqual","expectedException","_throws","shouldThrow","block","throws","doesNotThrow","ifError","util/",128,"_events","_maxListeners","defaultMaxListeners","setMaxListeners","isNaN","TypeError","er","len","m","newListener","trace","fired","g","removeAllListeners","ret","listenerCount",129,"ctor","superCtor","super_","TempCtor",130,"drainQueue","currentQueue","fun","browser","argv","off","binding","cwd","chdir","umask",131,"copy","fill","readUInt8",132,"formatRegExp","objects","str","String","isNull","deprecate","noDeprecation","deprecated","throwDeprecation","traceDeprecation","debugs","debugEnviron","debuglog","NODE_DEBUG","RegExp","pid","opts","ctx","stylize","stylizeNoColor","isBoolean","showHidden","_extend","stylizeWithColor","formatValue","bold","italic","underline","inverse","white","grey","black","blue","cyan","green","magenta","red","yellow","special","boolean","date","regexp","styleType","arrayToHash","recurseTimes","primitive","formatPrimitive","visibleKeys","getOwnPropertyNames","isError","formatError","braces","toUTCString","output","formatArray","formatProperty","reduceToSingleString","simple","getOwnPropertyDescriptor","substr","numLinesEst","prev","cur","ar","isSymbol","re","objectToString","pad","months","time","getHours","getMinutes","getSeconds","getDate","getMonth","origin","./support/isBuffer",133,"LZString","_keyStr","_f","fromCharCode","compressToBase64","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","compress","charCodeAt","NaN","charAt","ol","output_","decompress","compressToUTF16","current","decompressFromUTF16","compressToUint8Array","uncompressed","compressed","buf","Uint8Array","TotalLen","current_value","decompressFromUint8Array","compressToEncodedURIComponent","decompressFromEncodedURIComponent","context_dictionary","context_dictionaryToCreate","context_c","context_wc","context_w","context_enlargeIn","context_dictSize","context_numBits","context_data_string","context_data_val","context_data_position","ii","dictionary","enlargeIn","dictSize","numBits","w","bits","resb","maxpower",134,"globalScope","oldGlobalMoment","YEAR","MONTH","DATE","HOUR","MINUTE","SECOND","MILLISECOND","locales","momentProperties","hasModule","aspNetJsonRegex","aspNetTimeSpanJsonRegex","isoDurationRegex","formattingTokens","localFormattingTokens","parseTokenOneOrTwoDigits","parseTokenOneToThreeDigits","parseTokenOneToFourDigits","parseTokenOneToSixDigits","parseTokenDigits","parseTokenWord","parseTokenTimezone","parseTokenT","parseTokenOffsetMs","parseTokenTimestampMs","parseTokenOneDigit","parseTokenTwoDigits","parseTokenThreeDigits","parseTokenFourDigits","parseTokenSixDigits","parseTokenSignedNumber","isoRegex","isoFormat","isoDates","isoTimes","parseTimezoneChunker","proxyGettersAndSetters","unitMillisecondFactors","Milliseconds","Seconds","Minutes","Hours","Days","Months","Years","unitAliases","ms","D","W","M","Q","DDD","gg","GG","camelFunctions","dayofyear","isoweekday","isoweek","weekyear","isoweekyear","formatFunctions","relativeTimeThresholds","ordinalizeTokens","paddedTokens","formatTokenFunctions","month","MMM","localeData","monthsShort","MMMM","dayOfYear","day","dd","weekdaysMin","ddd","weekdaysShort","dddd","weekdays","week","isoWeek","YY","leftZeroFill","year","YYYY","YYYYY","YYYYYY","sign","weekYear","gggg","ggggg","isoWeekYear","GGGG","GGGGG","weekday","isoWeekday","meridiem","hours","minutes","A","H","seconds","S","toInt","milliseconds","SS","SSS","SSSS","Z","utcOffset","ZZ","z","zoneAbbr","zz","zoneName","valueOf","X","quarter","deprecations","lists","updateInProgress","dfl","hasOwnProp","defaultParsingFlags","unusedTokens","unusedInput","charsLeftOver","nullInput","invalidMonth","invalidFormat","userInvalidated","iso","printMsg","suppressDeprecationWarnings","firstTime","deprecateSimple","padToken","ordinalizeToken","period","ordinal","monthDiff","wholeMonthDiff","anchor","anchor2","DDDD","meridiemFixWrap","locale","hour","isPm","meridiemHour","isPM","Locale","Moment","skipOverflow","checkOverflow","copyConfig","_d","updateOffset","Duration","duration","normalizedInput","normalizeObjectUnits","years","quarters","weeks","days","minute","second","millisecond","_milliseconds","_days","_months","_data","_locale","_bubble","_isAMomentObject","_i","_l","_strict","_tzm","_isUTC","_offset","_pf","absRound","targetLength","forceSign","positiveMomentsDifference","isAfter","momentsDifference","makeAs","isBefore","createAdder","direction","dur","tmp","addOrSubtractDurationFromMoment","mom","isAdding","setTime","rawSetter","rawGetter","rawMonthSetter","compareArrays","dontConvert","lengthDiff","diffs","normalizeUnits","units","lowered","inputObject","normalizedProp","makeList","field","setter","utc","argumentForCoercion","coercedNumber","daysInMonth","UTC","getUTCDate","weeksInYear","dow","doy","weekOfYear","daysInYear","isLeapYear","_a","_overflowDayOfYear","isValid","_isValid","bigHour","normalizeLocale","chooseLocale","j","loadLocale","oldLocale","diff","isMoment","local","_ordinalParseLenient","_ordinalParse","_monthsShort","monthsParse","monthName","strict","regex","_monthsParse","_longMonthsParse","_shortMonthsParse","_weekdays","_weekdaysShort","_weekdaysMin","weekdaysParse","weekdayName","_weekdaysParse","_longDateFormat","LTS","LT","L","LL","LLL","LLLL","longDateFormat","_meridiemParse","isLower","_calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","_relativeTime","future","past","mm","hh","MM","yy","relativeTime","withoutSuffix","isFuture","pastFuture","_ordinal","preparse","postformat","_week","firstDayOfWeek","firstDayOfYear","_invalidDate","invalidDate","removeFormattingTokens","makeFormatFunction","Function","formatMoment","expandFormat","replaceLongDateFormatTokens","getParseRegexForToken","token","regexpEscape","unescapeFormat","utcOffsetFromString","possibleTzMatches","tzChunk","addTimeToArrayFromToken","datePartArray","_dayOfYear","parseTwoDigitYear","_meridiem","_useUTC","_w","invalidWeekday","dayOfYearFromWeekInfo","temp","dayOfYearFromWeeks","dateFromConfig","currentDate","yearToUse","currentDateArray","makeUTCDate","getUTCMonth","_nextDay","makeDate","setUTCMinutes","getUTCMinutes","dateFromObject","getUTCFullYear","getFullYear","makeDateFromStringAndFormat","ISO_8601","parseISO","parsedInput","tokens","stringLength","totalParsedInputLength","matched","p1","p2","p3","p4","makeDateFromStringAndArray","tempConfig","bestMoment","scoreToBeat","currentScore","score","makeDateFromString","createFromInputFallback","makeDateFromInput","setFullYear","setUTCFullYear","parseWeekday","substituteTimeAgo","posNegDuration","as","firstDayOfWeekOfYear","daysToDayOfWeek","adjustedMoment","getUTCDay","daysToAdd","makeMoment","invalid","pickBy","moments","parseIso","diffRes","isDuration","inp","defaultFormat","relativeTimeThreshold","threshold","lang","defineLocale","_abbr","abbr","langData","flags","parseZone","toDate","toISOString","isDSTShifted","parsingFlags","invalidAt","keepLocalTime","_dateUtcOffset","inputString","asFloat","zoneDiff","daysAdjust","humanize","fromNow","sod","startOf","isDST","getDay","makeAccessor","endOf","inputMs","isBetween","isSame","zone","offset","localAdjust","_changeInProgress","isLocal","isUtcOffset","isUtc","hasAlignedHourOffset","isoWeeksInYear","weekInfo","newLocaleData","getTimezoneOffset","dayOfMonth","keepTime","dates","isoWeeks","toJSON","isUTC","daysToYears","yearsToDays","withSuffix","toIsoString","asSeconds","makeDurationGetter","asMilliseconds","asMinutes","asHours","asDays","asWeeks","asMonths","asYears","ordinalParse","makeGlobal","shouldDeprecate","ender","noGlobal",135,"Cancellation",136,"warning","invariant","checkPropTypes","componentName","Configuration","statics","validateProps","react/lib/invariant","react/lib/warning",137,"canUseDOM","History","back","history","react/lib/ExecutionEnvironment",138,"_prototypeProperties","staticProps","instanceProps","_classCallCheck","PathUtils","deepSearch","route","pathname","childRoutes","childRoute","isDefault","isNotFound","defaultRoute","extractParams","Match","notFoundRoute","findMatch","withoutQuery","extractQuery","./PathUtils",139,"Navigation","contextTypes","makePath","makeHref","transitionTo","replaceWith","goBack","./PropTypes",140,"NavigationContext","childContextTypes","getChildContext",141,"qs","paramCompileMatcher","paramInjectMatcher","paramInjectTrailingSlashMatcher","queryMatcher","_compiledPatterns","compilePattern","pattern","paramNames","paramName","matcher","isAbsolute","extractParamNames","_compilePattern","injectParams","splatIndex","segment","withQuery","existingQuery","queryString","indices","qs/lib/utils",142,"ReactPropTypes","falsy","react/lib/Object.assign",143,"Redirect",144,"_currentRoute","ignoreScrollBehavior","onEnter","onLeave","createRoute","parentRoute","appendChild","currentRoute","createDefaultRoute","createNotFoundRoute","createRedirect","transition","redirect",145,"REF_NAME","RouteHandlerMixin","getRouteAtDepth","setRouteComponentAtDepth","routeHandlers","_updateRouteComponent","componentDidUpdate","component","getRouteDepth","createChildRouteHandler",146,"getWindowScrollPosition","shouldUpdateScroll","prevState","prevRoutes","sharedAncestorRoutes","ScrollHistory","recordScrollPosition","scrollHistory","getScrollPosition","getScrollBehavior","_updateScroll","prevProps","scrollBehavior","updateScrollPosition","./getWindowScrollPosition",147,"State","getCurrentPath","getCurrentRoutes","getCurrentPathname","getCurrentParams","getCurrentQuery","isActive","getPath","getRoutes","getPathname","getParams","getQuery",148,"routeIsActive","activeRoutes","routeName","paramsAreActive","activeParams","property","queryIsActive","activeQuery","StateContext",149,"Transition","abortReason","abort","reason","./Cancellation","./Redirect",150,"LocationActions","PUSH","REPLACE","POP",151,"ImitateBrowserBehavior","actionType","scrollTo","../actions/LocationActions",152,"ScrollToTopBehavior",153,"mixins","../Configuration","../PropTypes",154,"isLeftClickEvent","button","isModifiedEvent","metaKey","altKey","ctrlKey","shiftKey","activeClassName","instanceOf","activeStyle","getDefaultProps","allowTransition","clickResult","defaultPrevented","getHref","getClassName","getActiveState","DOM","../Navigation","../Route","../State","react/lib/cx",155,"NotFoundRoute",156,157,"./RouteHandler",158,"../RouteHandlerMixin",159,"HashLocation","RefreshLocation","StaticLocation","createRoutesFromReactChildren","isReactChildren","supportsHistory","DEFAULT_LOCATION","DEFAULT_SCROLL_BEHAVIOR","hasProperties","properties","propertyName","hasMatch","prevParams","nextParams","prevQuery","nextQuery","addRoutesToNamedRoutes","namedRoutes","createRouter","mountedComponents","nextState","pendingTransition","dispatchHandler","NODE_ENV","needsDOM","isRunning","cancelPendingTransition","clearAllRoutes","addRoutes","replaceRoutes","refresh","handleAbort","onAbort","handleError","onError","handleLocationChange","change","dispatch","prevPath","isRefreshing","nextRoutes","fromRoutes","toRoutes","fromComponents","newState","addChangeListener","stop","removeChangeListener","getLocation","./History","./Match","./NavigationContext","./Route","./ScrollHistory","./StateContext","./Transition","./actions/LocationActions","./behaviors/ImitateBrowserBehavior","./createRoutesFromReactChildren","./isReactChildren","./locations/HashLocation","./locations/HistoryLocation","./locations/RefreshLocation","./locations/StaticLocation","./supportsHistory",160,"DefaultRouteType","NotFoundRouteType","RedirectType","createRouteOptions","willTransitionTo","willTransitionFrom","createRouteFromReactElement","isValidElement","Children","./components/DefaultRoute","./components/NotFoundRoute","./components/Redirect",161,"pageXOffset","documentElement","scrollLeft","pageYOffset","scrollTop",162,"./Navigation","./RouteHandlerMixin","./State","./behaviors/ScrollToTopBehavior","./components/Link","./components/Route","./components/RouteHandler","./createRouter","./runRouter",163,"isValidChild",164,"getHashPath","decodeURI","_actionType","ensureSlash","_changeListeners","notifyChange","_isListening","onHashChange","attachEvent","removeEvent","../History",165,"getWindowPath","onPopState","pushState","replaceState",166,"./HistoryLocation",167,"throwCannotModify",168,"runRouter","router",169,"ua","navigator","userAgent",170,"./lib/",171,"Stringify","Parse","internals","./parse","./stringify",172,"Utils","delimiter","arrayLimit","parameterLimit","parseValues","il","decode","parseObject","chain","cleanRoot","indexString","parseKeys","tempObj","newObj","./utils",173,"encodeURIComponent","objKeys",174,"arrayToObject","kl","decodeURIComponent","compacted",175,"ExecutionEnvironment","canUseWorkers","Worker","canUseEventListeners","canUseViewport","screen","isInWorker",176,"sources","nextIndex","nextSource",177,"cx",178,"makeEmptyFunction","emptyFunction","thatReturns","thatReturnsFalse","thatReturnsTrue","thatReturnsNull","thatReturnsThis","thatReturnsArgument",179,"condition","argIndex","framesToPop",180,"$__0","$__1","./emptyFunction",181,"nextHandle","tasksByHandle","currentlyRunningATask","doc","addFromSetImmediateArguments","partiallyApplied","runIfPresent","handle","clearImmediate","installNextTickImplementation","canUsePostMessage","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","installPostMessageImplementation","messagePrefix","random","onGlobalMessage","installMessageChannelImplementation","channel","MessageChannel","port1","port2","installReadyStateChangeImplementation","html","script","removeChild","installSetTimeoutImplementation","attachTo","getPrototypeOf",182,"rng","crypto","getRandomValues","_rnds8","whatwgRNG","_rnds",183,"_rng","_byteToHex","_hexToByte","oct","unparse","bth","_seedBytes","_nodeId","_clockseq","_lastMSecs","_lastNSecs","v1","clockseq","msecs","nsecs","dt","tl","tmh","v4","rnds","./rng"],"mappings":"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","file":"sr.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nvar assert = require('assert'),\n    async = require('async'),\n    _ = require('lodash'),\n    App = require('./components/app'),\n    constants = require('../lib/constants'),\n    Dispatcher = require('../lib/dispatcher'),\n    EventJournalStore = require('../lib/stores/event-journal'),\n    HardwareStore = require('../lib/stores/hardware'),\n    LogApiHost = require('../lib/log-api'),\n    LogStore = require('../lib/stores/logger'),\n    MOTDStore = require('../lib/stores/motd'),\n    PortfolioPage = require('./pages/portfolio'),\n    PortfolioStore = require('../lib/stores/portfolio'),\n    ProductInfoStore = require('../lib/stores/prodinfo'),\n    ProjectPage = require('./pages/project'),\n    ProjectStore = require('../lib/stores/project'),\n    React = require('react'),\n    ReleaseNotesPage = require('./pages/releasenotes'),\n    Router = require('react-router'),\n    UserPreferencesStore = require('../lib/stores/user-preferences'),\n    UserSessionStore = require('../lib/stores/user-session'),\n    xhr = require('../lib/xhr');\n\nvar Route = React.createFactory(Router.Route),\n    DefaultRoute = React.createFactory(Router.DefaultRoute);\n\nrequire('setimmediate'); // injects global\nsetImmediate(launch);\n\n/**\n * Launch the application.\n */\n\nfunction launch() {\n    // READ THIS BEFORE CONDUCTING MAINTENANCE:\n    // https://github.com/caolan/async#auto\n    //\n    // Each key maps to either an async function, or an array starting\n    // with the names of other keys to perform first and ending with an\n    // async function.\n    //\n    // create(Constructor, deps...) returns an array starting with the\n    // deps and ending with an async function which calls the constructor\n    // with an object created by selecting the deps from the results so far.\n    //\n    // steal(x) returns an async function which calls back with x.\n    //\n    // Taking it slow at first...\n    async.auto({\n        // Reminder: create returns an async function closed around its\n        // arguments. The creation doesn't happen until it's this task's\n        // turn, as decided by its dependencies.\n        //\n        // That said, this is roughly equivalent to its comment:\n        logger: create(LogStore), // app.logger = new LogStore()\n\n        // app.log = createBoundLogFn(app.logger)\n        log: [\n            'logger',\n            createLoggingAPI\n        ],\n\n        // app.xhr = xhr\n        xhr: steal(xhr),\n\n        // app.portfolio = new PortfolioStore({ xhr: app.xhr });\n        portfolio: create(PortfolioStore, 'xhr'),\n\n        // ... and you should have it by now, so:\n        productInfo: create(ProductInfoStore, 'xhr', 'log'),\n        project: create(ProjectStore, 'xhr', 'productInfo'),\n        journal: create(EventJournalStore),\n        motd: create(MOTDStore),\n        userSession: create(UserSessionStore),\n        userPreferences: create(UserPreferencesStore, 'log'),\n        hardware: create(HardwareStore),\n\n        // Back to the usual async.auto way of describing tasks with deps:\n        stores: [\n            'hardware',\n            'journal',\n            'motd',\n            'portfolio',\n            'productInfo',\n            'project',\n            'project',\n            'userPreferences',\n            'userSession',\n            getStoreGuards\n        ],\n\n        // DispatcherShim adapts the Dispatcher constructor API to resemble\n        // the Store constructor API enough to succeed:\n        dispatcher: create(DispatcherShim, 'log', 'stores'),\n\n        routes: asyncify(makeRoutes),\n\n        fire: [\n            'dispatcher',\n            asyncify(makeFireMethod, getApp)\n        ],\n    }, afterConstruction);\n\n    function afterConstruction(err, app) {\n        if (err) {\n            return whine(err, app);\n        }\n\n        app.log.debug('constructed and rendered');\n\n        // After construction, we hook up the JSX, start logging, and\n        // fire some events at the stores to kick things off. All this\n        // should be reasonably obvious from the series:\n        async.eachSeries([\n            // array of sync functions called by callWithApp\n            render,\n            openLogSpigot,\n            makeFire('PORTFOLIO_FETCH'),\n            makeFire('MOTD_FETCH'),\n            makeFire('USER_SESSION_FETCH'),\n            makeFire('PRODUCTINFO_FETCH'),\n        ], callWithApp, afterLaunch);\n\n        function callWithApp(fn, callback) {\n            assert.equal(typeof fn, 'function', '77c98c62');\n            assert.equal(typeof callback, 'function', '52b5bfcd');\n\n            try {\n                // jshint -W040\n                fn.call(this, app);\n                setImmediate(callback, null);\n            } catch (err) {\n                setImmediate(callback, err);\n            }\n        }\n\n        function afterLaunch(launchErr) {\n            if (launchErr) {\n                return whine(launchErr, app);\n            }\n\n            app.log.debug('launched');\n        }\n    }\n\n    function whine(err, app) {\n        try {\n            return app.log([ 'launch-fatal' ], err);\n        } catch (err1) {\n            try {\n                return console.error(err);\n            } catch (err2) {\n                return; // give up\n            }\n        }\n    }\n}\n\n/**\n * Make a synchronous fireAction(app) method closed around action.\n */\n\nfunction makeFire(action) {\n    assert.equal(typeof action, 'string', 'fa8553d2');\n    fireSync._name = action;\n    return fireSync;\n\n    function fireSync(app) {\n        assert.equal(typeof app, 'object', '4ec5a7b1');\n        app.fire(action);\n    }\n}\n\n/**\n * Create the logging API, returning its log method with log.info,\n * log.error, etc helper methods.\n */\n\nfunction createLoggingAPI(callback, app) {\n    var logStore = app.logger,\n        options = { bind: logStore },\n        apiHost = new LogApiHost(logStore.log, options);\n    callback(null, apiHost.log);\n}\n\n/**\n * Find the stores in app; get their guards; return the object we'll\n * end up passing down to pages and many components as the stores prop.\n */\n\nfunction getStoreGuards(callback, app) {\n    var stores = {};\n    _.forEach(app, function grabStores(value, key) {\n        if (isStore(value)) {\n            stores[key] = value.getGuard();\n        }\n    });\n    callback(null, stores);\n}\n\nfunction isStore(v) {\n    return typeof v === 'object' && v.act && v.getState && v.watch && v.unwatch;\n}\n\n/**\n * Adapt the Dispatcher constructor API to the usual store constructor API\n * so we can use it with create below.\n */\n\nfunction DispatcherShim(app) {\n    var stores = _.values(app.stores),\n        log = app.log;\n    return new Dispatcher(stores, log);\n}\n\n/**\n * Make the router.\n */\n\nfunction makeRoutes() {\n    // jshint newcap: false\n    return Route({ handler: App },\n        DefaultRoute({\n            name: 'portfolio',\n            handler: PortfolioPage\n        }),\n        Route({\n            name: 'project',\n            path: '/v/:uuid',\n            handler: ProjectPage,\n        }),\n        Route({\n            name: 'releasenotes',\n            path: '/releasenotes',\n            handler: ReleaseNotesPage,\n        })\n    );\n}\n\n/**\n * Make the fire method we'll pass to components as props.\n */\n\nfunction makeFireMethod(app) {\n    var dispatcher = app.dispatcher;\n\n    return dispatcher.act.bind(dispatcher);\n}\n\n/**\n * Render the router into the target element.\n */\n\nfunction render(app) {\n    app.log.debug('rendering...');\n\n    var routes = app.routes,\n        stores = app.stores,\n        fire = app.fire;\n\n    Router.run(routes, Router.HistoryLocation, function (Handler, state) {\n        var factory = React.createFactory(Handler),\n            globalProps = {\n                // required by all page handlers\n                stores: stores,\n                fire: fire,\n                log: app.log,\n                // required by all route handlers\n                params: state.params,\n                query: state.query\n            };\n        React.render(factory(globalProps), document.getElementById('container'));\n    });\n}\n\n/**\n * Start log draining to the server.\n */\n\nfunction openLogSpigot(app) {\n    app.log.debug('starting log drainer...');\n\n    app.dispatcher.on('dispatched', function (/* event */) {\n        app.logger.drain(drainLogs);\n    });\n\n    function drainLogs(entries, callback) {\n        xhr('POST', constants.CLIENT_LOG_PATH, { payload: entries }, callback);\n    }\n}\n\n/**\n * Wrap Constructor in an async function suitable for async.auto. Returns\n * an array starting with the deps for async.auto. Picks those deps from\n * the async.auto results object (i.e. our app object) into an options\n * argument for Constructor.\n *\n * The async fn result calls back with the new object or, if it threw an\n * error, the error.\n */\n\nfunction create(Constructor /*, dep1, dep2, dep3... */) {\n    var depKeys = _.toArray(arguments).slice(1),\n        createAsync = asyncify(createSync, getApp);\n\n    return depKeys.concat([ createAsync ]);\n\n    function createSync(results) {\n        if (depKeys.length) {\n            return new Constructor(_.pick(results, depKeys));\n        } else {\n            return new Constructor();\n        }\n    }\n}\n\n/**\n * Wrap result in an async function suitable for async.auto.\n */\n\nfunction steal(result) {\n    return stealAsync;\n\n    function stealAsync(callback /*, results */) {\n        callback(null, result);\n    }\n}\n\n/**\n * Wrap fn in an async function suitable for async.auto. Uses makeArgs to\n * transform the results object from async.auto (i.e. our app object) into\n * arguments for fn.\n *\n * The async fn result calls back with fn's return value or, if it threw an\n * error, the error.\n */\n\nfunction asyncify(fn, makeArgs) {\n    assert.equal(typeof fn, 'function', 'can\\'t asyncify ' + typeof fn);\n    makeArgs = makeArgs || makeNoArgs;\n    asyncificated._name = fn._name || fn.name || undefined;\n    return asyncificated;\n\n    function asyncificated(callback, results) {\n        assert.equal(typeof callback, 'function', 'async fn needs callback');\n        var result;\n\n        try {\n            // jshint -W040\n            result = fn.apply(this, makeArgs(results));\n        } catch (err) {\n            setImmediate(callback, err);\n        }\n\n        setImmediate(callback, null, result);\n    }\n\n    function makeNoArgs() {\n        return [];\n    }\n}\n\n/**\n * Asyncify argument processor, passing the async.auto results object\n * as the first argument.\n */\n\nfunction getApp(results) {\n    return [ results ];\n}\n",null,"'use strict';\n\nvar React = require('react'),\n    Repeat = require('./repeat'),\n    FAGlyph = require('./faglyph'),\n    CapacityTooltip = require('./capacity-tooltip'),\n    Unit = require('../../lib/units.js'),\n    _ = require('lodash'),\n    AggregateReporter = require('../../lib/model/aggregates/aggregateReporter'),\n    cnst = require('./constants'),\n    usual = require('../usual-props');\n\nvar AggregateDevice = React.createClass({\n    propTypes: {\n        aggregateDevice: React.PropTypes.object.isRequired\n    },\n\n    render: function() {\n        var aggregateDevice = this.props.aggregateDevice;\n        /*\n            isVirtualDevice: keySummary.isVirtual,\n            virtualDeviceType: keySummary.virtualPartitionType,\n            physicalRawCapacityGB: keySummary.rawgb,\n            rightSizedCapacityGB: keySummary.rsgb,\n            count: keySummary.count\n        */\n\n        var faglyph = 'hdd-o',\n            driveSpeed = aggregateDevice.rpm.toString(),\n            rawPhysicalCapacity = new Unit(aggregateDevice.physicalRawCapacityGB, 'GB').makeHappyFriendly(null, null, '%d%s');\n\n        if (aggregateDevice.isVirtualDevice) {\n            rawPhysicalCapacity = new Unit(aggregateDevice.rightSizedCapacityGB, 'GB').to('GiB').makeHappyFriendly();\n            faglyph = 'pie-chart';\n        }\n\n        return (\n            <div className=\"count-icon-grouping hide-contracted no-overflow\">\n                <span className=\"count\">{ aggregateDevice.count }</span>\n                <span className={ \"icon drive-speed-\" + driveSpeed.replace(\".\",\"p\") }>\n                    <FAGlyph name={ faglyph } />\n                </span>\n                <span className=\"item\">\n                    { rawPhysicalCapacity }\n                </span>\n            </div>\n        );\n    }\n});\n\n// TODO: Current mock only has one drive entry so just use the first one for now\n// TODO: Indicate dedicated root aggregate in addition to flash pool\nvar Aggregate = React.createClass({\n    propTypes: _.merge({\n        aggregate: React.PropTypes.object.isRequired,\n        systems: React.PropTypes.array.isRequired,\n        select: React.PropTypes.func.isRequired,\n        isEditModeManualAggregates: React.PropTypes.bool.isRequired,\n        displayCapacityInBase: React.PropTypes.string.isRequired,\n        aggregateDisplayLanguage: React.PropTypes.string.isRequired,\n        selectDetails: React.PropTypes.object.isRequired,\n        userPreferences: React.PropTypes.object.isRequired,\n    }, usual.isRequired),\n\n    selectAggregate: function(aggregate, event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        var selector = {\n                controller: { _id: aggregate._controller },\n                aggregate: { _id: aggregate._id },\n                'manualAggregates': this.props.isEditModeManualAggregates\n            };\n\n        this.props.select(selector, cnst.UI_SELECT_ADD_CHANGE_AGGREGATE);\n    },\n\n    deleteAggregate: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        ////var selector = { aggregate: { _id: this.aggregate._id } };\n        this.props.fire('PROJECT_DELETE_AGGREGATE', this.props.aggregate._systemId, this.props.aggregate);\n        this.props.select(); // clear col3\n    },\n\n    // TODO: handle more than one deviceSpec[0], reduce evy by adding to AggregateReporter\n    _getDeviceCapacity: function() {\n        var deviceSpecs = this.props.aggregate._raid_groups[0].__deviceSpecs;\n\n        return (deviceSpecs && deviceSpecs[0].spec) ? deviceSpecs[0].spec.rawgb : 0;\n    },\n\n    _getRaidSize: function() {\n        return this.props.aggregate._raid_groups[0]._devices.length;\n    },\n\n    _getSystemThatOwnsThisAggregate: function(aggregateInQuestion) {\n        var systemsToLookIn = this.props.systems;\n\n        if (!(systemsToLookIn instanceof Array)) {\n            systemsToLookIn = [systemsToLookIn];\n        }\n\n        return _.first(_.where(systemsToLookIn, function(system) {\n            var aggregateIds = _.flatten(_.map(system.controllers, function(controller) {\n                return _.map(controller.aggregates, function(aggregate) {\n                    return aggregate._id;\n                });\n            }));\n\n            return _.contains(aggregateIds, aggregateInQuestion._id);\n        }));\n    },\n\n    _isSelected: function() {\n        var selectedAggregate = this.props.selectDetails.aggregate;\n\n        if (selectedAggregate) {\n            if (selectedAggregate._id === this.props.aggregate._id) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    render: function() {\n        var aggregateName = this.props.aggregate.name || 'un-named',\n            controllerName = this.props.aggregate._controllerName,\n            isDedicatedRoot = this.props.aggregate.is_root_aggregate,\n            owningSystem = this._getSystemThatOwnsThisAggregate(this.props.aggregate),\n            hagi = this.props.map.inspect(owningSystem),\n            reporter = new AggregateReporter(hagi),\n            aggregateReport = reporter.createAggregateReport(this.props.aggregate),\n            aggregateSummary = aggregateReport.summary,\n            usableCapacityValue = isDedicatedRoot ? aggregateSummary.rootCapacity : aggregateSummary.usableCapacity,\n            usableCapacityUnit = new Unit(usableCapacityValue, 'GiB'),\n            usableCapacity = usableCapacityUnit.to(this.props.displayCapacityInBase).friendly(2);\n\n        // TODO: The current aggregate names that are automatically generated need to be shortened due to width.\n        // TODO: They are too long at the moment. In the meantime, truncate to 15 characters.\n        aggregateName = aggregateName.substring(0,15);\n\n        // TODO: dont need to pass in this.aggregate since here we have a whole ReactClass dedicated to the one aggregate\n        var selectAggregate = _.partial(this.selectAggregate, this.props.aggregate),\n            aggregateDevices = _.map(_.keys(aggregateSummary.driveSpecSummary), function(key) {\n                var keySummary = aggregateSummary.driveSpecSummary[key];\n\n                return {\n                    isVirtualDevice: keySummary.isVirtual,\n                    virtualDeviceType: keySummary.virtualPartitionType,\n                    physicalRawCapacityGB: keySummary.rawgb,\n                    rightSizedCapacityGB: keySummary.rsgb,\n                    rpm: keySummary.rpm,\n                    count: keySummary.count\n                };\n            });\n\n        var deleteSpanDom = isDedicatedRoot || (!this.props.isEditModeManualAggregates && !this.props.aggregate._manual) ?\n            (isDedicatedRoot ? (<span className=\"badge\">root</span>) : (<div/>)) :\n            (<span className=\"fa fa-fw fa-trash\" onClick={ this.deleteAggregate }></span>);\n\n        var aggregateCSS = React.addons.classSet({\n            'row-list-item': true,\n            'selectable': true,\n            'selected': this._isSelected(),\n        });\n\n        var flashPoolSize,\n            displayIsHybrid,\n            cacheDevice = _.where(aggregateDevices, { virtualDeviceType: 'cache' });\n\n        if (!_.isEmpty(cacheDevice)) {\n            var cacheSize = aggregateSummary.cacheCapacity,\n                dispUnit = this.props.userPreferences.useBase10Yields ? 'GB' : 'GiB',\n                unit = new Unit(cacheSize, 'GiB'),\n                unitRepr = unit.to(dispUnit).friendly(2);\n\n            flashPoolSize = (\n                <div>\n                    { unitRepr }\n                    <CapacityTooltip title={ 'Flash Pool Capacity (' + this.props.aggregateDisplayLanguage + ')' } inputUnit={ unit } />\n                </div>\n            );\n\n            displayIsHybrid = (\n                <div>\n                    <div>\n                        <br/>\n                    </div>\n                    <div>\n                        <span className={ this.props.aggregate.is_hybrid ? \"fa fa-fw fa-flash hide-contracted\" : \"hide-contracted\"}></span>\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <div className={ aggregateCSS } onClick={ selectAggregate } >\n                <div className=\"row-list-cell row-list-cell-aggr-icon\">\n                    {deleteSpanDom}\n                </div>\n                <div className=\"row-list-cell row-list-cell-aggr-name\">\n                    <span className=\"emphasize\">{ aggregateName }</span>\n                </div>\n                <div className=\"row-list-cell row-list-cell-aggr-controller\">\n                    <span>{ controllerName }</span>\n                </div>\n                <div className=\"row-list-cell row-list-cell-aggr-devices\">\n                    <Repeat seq={ aggregateDevices }\n                            prop=\"aggregateDevice\">\n                        <AggregateDevice />\n                    </Repeat>\n                </div>\n                <div className=\"row-list-cell row-list-cell-aggr-size numeric\">\n                    <div className=\"hide-contracted no-overflow hover\">\n                        <div>\n                            { usableCapacity }\n                            <CapacityTooltip title={ 'Usable Capacity (' + this.props.aggregateDisplayLanguage + ')' } inputUnit={ usableCapacityUnit } />\n                        </div>\n                        { flashPoolSize }\n                    </div>\n                </div>\n                <div className=\"row-list-cell hide-contracted\">\n                    { displayIsHybrid }\n                </div>\n                <span className=\"chevron\">\n                    <span className=\"fa fa-fw fa-chevron-right\"></span>\n                </span>\n            </div>\n        );\n    }\n});\n\nvar AggregateDetails = React.createClass({\n    propTypes: _.merge({\n        systems: React.PropTypes.array.isRequired,\n        aggregateDisplayLanguage: React.PropTypes.string.isRequired,\n        select: React.PropTypes.func.isRequired,\n        clearSelection: React.PropTypes.func,\n        selectDetails: React.PropTypes.object.isRequired,\n        userPreferences: React.PropTypes.object.isRequired,\n    }, usual.isRequired),\n\n    toggleAggregatesMode: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n        var props = this.props,\n            systems = props.systems instanceof Array ? props.systems : [props.systems];\n\n        var nextEditModeIsManualAggregates = !this.state.isEditModeManualAggregates;\n        if (nextEditModeIsManualAggregates) {\n            // keep: _(systems).forEach(function (s) { props.fire('PROJECT_DELETE_ALL_AGGREGATES', s._id); });\n        } else {\n            _(systems).forEach(function (s) { props.fire('PROJECT_REBUILD_AUTO_AGGREGATES', s._id); });\n        }\n\n        this.setState({ isEditModeManualAggregates: nextEditModeIsManualAggregates });\n    },\n\n    _getAllAggregatesAndDecorate: function(fromSystems) {\n        var aggregates = [],\n            systems = fromSystems || this.props.systems;\n\n        if (!(systems instanceof Array)) {\n            systems = [systems];\n        }\n\n        _.forEach(systems, function(system) {\n            _.forEach(system.controllers, function(controller) {\n                var clonedAggregates = _.cloneDeep(controller.aggregates);\n\n                _.forEach(clonedAggregates, function(aggregate) {\n                    aggregate._controllerName = controller.name || 'un-named';\n                    aggregate._systemId = system._id;\n                });\n\n                aggregates.push(clonedAggregates);\n            });\n        });\n\n        return _.flatten(aggregates);\n    },\n\n    _sortByRootAggregate: function(aggregates) {\n        return _.sortBy(aggregates, function(aggregate) {\n            return !aggregate.is_root_aggregate;\n        });\n    },\n\n    addAggregate: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        this.props.select({ }, cnst.UI_SELECT_ADD_CHANGE_AGGREGATE);\n    },\n\n    render: function () {\n        var aggregates = this._sortByRootAggregate(this._getAllAggregatesAndDecorate()),\n            aggregateDisplayLanguage = this.props.aggregateDisplayLanguage,\n            aggregateLanguage = aggregateDisplayLanguage.toLowerCase(),\n            aggregateLanguageCapitalizedSingular = aggregateDisplayLanguage.substring(0, aggregateDisplayLanguage.length - 1),\n            aggregateLanguageSingular = aggregateLanguageCapitalizedSingular.toLowerCase(),\n            autoAggregates = _.where(aggregates, function(aggregate) { return !aggregate._manual; }),\n            manualAggregates = _.where(aggregates, function(aggregate) { return aggregate._manual; });\n\n        var policies = this.props.systems._policies || {},\n            aggregatePolicy = policies.Aggregates || {},\n            displayCapacityInBase = this.props.userPreferences.useBase10Yields ? 'TB' : 'TiB';\n\n        var manualAggregatesPolicy = aggregatePolicy.manual ? true : false;\n\n        var addAggregateTableRowClasses = \"row-list-item selectable new\";\n\n        var addNewAggregateDom = manualAggregatesPolicy ?\n            (\n                <div className={addAggregateTableRowClasses} onClick={ this.addAggregate }>\n                    <div className=\"row-list-cell row-list-cell-aggr-icon\">\n                    </div>\n                    <div className=\"row-list-cell\">\n                        Add a new { aggregateLanguageSingular }\n                    </div>\n                    <span className=\"chevron\">\n                        <span className=\"fa fa-fw fa-plus\"></span>\n                    </span>\n                </div>\n            ) :\n            (<div/>);\n\n        return(\n            <div>\n                <div className=\"row-list-item-grouping\">\n                    <div className=\"row-list\">\n                        <div className=\"row-list-item row-list-item-aggregate-header\">\n                            <div className=\"row-list-cell row-list-cell-aggr-icon\">\n                            </div>\n                            <div className=\"row-list-cell\">\n                                <div className=\"aggregate-type-header no-overflow\">\n                                    Manually created { aggregateLanguage }\n                                </div>\n                            </div>\n                        </div>\n                        {addNewAggregateDom}\n                        <Repeat seq={ manualAggregates }\n                                prop=\"aggregate\">\n                            <Aggregate\n                                isEditModeManualAggregates={ manualAggregatesPolicy }\n                                systems={ this.props.systems }\n                                select={ this.props.select }\n                                selectDetails={ this.props.selectDetails }\n                                displayCapacityInBase={ displayCapacityInBase }\n                                aggregateDisplayLanguage={ aggregateLanguageCapitalizedSingular }\n                                userPreferences={ this.props.userPreferences }\n                                { ... usual(this.props) } />\n                        </Repeat>\n                    </div>\n                </div>\n                <div className=\"row-list-item-grouping\">\n                    <div className=\"row-list\">\n                        <div className=\"row-list-item row-list-item-aggregate-header\">\n                            <div className=\"row-list-cell row-list-cell-aggr-icon\">\n                            </div>\n                            <div className=\"row-list-cell\">\n                                <div className=\"aggregate-type-header no-overflow\">\n                                    Automatically created { aggregateLanguage }\n                                </div>\n                            </div>\n                        </div>\n                        <Repeat seq={ autoAggregates }\n                                prop=\"aggregate\">\n                            <Aggregate\n                                isEditModeManualAggregates={ manualAggregatesPolicy }\n                                systems={ this.props.systems }\n                                select={ this.props.select }\n                                selectDetails={ this.props.selectDetails }\n                                displayCapacityInBase={ displayCapacityInBase }\n                                aggregateDisplayLanguage={ aggregateLanguageCapitalizedSingular }\n                                userPreferences={ this.props.userPreferences }\n                                { ... usual(this.props) } />\n                        </Repeat>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n});\n\nmodule.exports = AggregateDetails;\n","'use strict';\n\nvar _ = require('lodash'),\n\tReact = require('react'),\n\tOptionRow = require('./common/option-row'),\n\tAggregateSummary = require('./aggregate-summary'),\n\tFlashPoolEditor = require('./flash-pool'),\n\tUnit = require('../../lib/units.js'),\n\tusual = require('../usual-props');\n\nvar AggregateEditorExtendedOptions = React.createClass({\n\tpropTypes: _.merge({\n\t\textendedOption: React.PropTypes.string,\n        aggregateBuilder: React.PropTypes.object.isRequired,\n        selected: React.PropTypes.object,\n        updateModel: React.PropTypes.func,\n        hagi: React.PropTypes.object.isRequired,\n        hagroups: React.PropTypes.array.isRequired,\n        readOnly: React.PropTypes.bool.isRequired,\n        displayType: React.PropTypes.string,\n        setExtendedOption: React.PropTypes.func.isRequired,\n        report: React.PropTypes.object.isRequired,\n        userPreferences: React.PropTypes.object.isRequired,\n        close: React.PropTypes.func.isRequired,\n    }, usual.isRequired),\n\n    render: function() {\n    \tvar extendedOptionDisplay;\n\n    \tswitch (this.props.extendedOption) {\n    \t\tcase 'driveSelector':\n    \t\t\textendedOptionDisplay = (\n\t\t\t\t\t<DriveSelector\n\t\t\t\t\t\taggregateBuilder={ this.props.aggregateBuilder }\n\t\t\t\t\t\tdisplayType={ this.props.displayType }\n\t\t\t\t\t\tupdateModel={ this.props.updateModel }\n                        close={ this.props.close } />\n\t\t\t\t);\n    \t\tbreak;\n    \t\tcase 'flashPoolEditor':\n    \t\t\textendedOptionDisplay = (\n    \t\t\t\t<div className=\"aggregate-editor-extended-options\">\n\t\t\t\t\t\t<FlashPoolEditor\n\t                        aggregate={ this.props.aggregateBuilder.aggregate }\n\t                        hagi={ this.props.hagi }\n\t                        { ... _.pick(this.props, 'fire', 'log') } />\n                    </div>\n\t\t\t\t);\n    \t\tbreak;\n    \t\tcase 'raidSelector':\n    \t\t\textendedOptionDisplay = (\n\t\t\t\t\t<RaidSelector\n\t\t\t\t\t\taggregateBuilder={ this.props.aggregateBuilder }\n\t\t\t\t\t\tupdateModel={ this.props.updateModel }\n                        close={ this.props.close } />\n\t\t\t\t);\n    \t\tbreak;\n    \t\tdefault:\n\t    \t\tvar base10YieldsPreference = this.props.userPreferences.useBase10Yields ? 'TB' : 'TiB',\n\t    \t\t\taggregate = this.props.aggregateBuilder.aggregate,\n\t    \t\t\tsystemLimits = this.props.aggregateBuilder.systemLimits();\n\n\t    \t\textendedOptionDisplay = (\n\t    \t\t\t<AggregateSummary\n                        report={ this.props.report }\n                        limits={ systemLimits }\n                        base10YieldsPreference={ base10YieldsPreference }\n                        raidType={ aggregate.raid_type }\n                        isESeries={ this.props.hagi.isESeries } />\n    \t\t\t);\n\t\t\tbreak;\n    \t}\n\n    \treturn extendedOptionDisplay;\n\t}\n});\n\nvar DriveSelector = React.createClass({\n\tpropTypes: {\n        aggregateBuilder: React.PropTypes.object.isRequired,\n        displayType: React.PropTypes.string.isRequired,\n        updateModel: React.PropTypes.func.isRequired,\n        close: React.PropTypes.func.isRequired,\n    },\n\n\trender: function() {\n\t\tvar props = this.props,\n\t\t\t_this = this,\n\t\t\taggregateDeviceSummary = props.aggregateBuilder.deviceSummary(),\n            dataSpec = aggregateDeviceSummary.data.spec,\n\t\t\tcurrentDriveSpec = this.getDriveSpecDisplay(dataSpec),\n\t\t\tdrives = props.aggregateBuilder.availableDeviceGroupsForAggregate();\n\n\t\tvar availableDrives = _(drives).map(function(drive) {\n\t\t\tvar selectDriveSpec = _.partial(_this.selectDriveForAggregate, drive.spec, drive.count),\n\t\t\t\tdriveSpec = _this.getDriveSpecDisplay(drive.spec, drive.count);\n\n            return (\n            \t<OptionRow\n            \t\taction={ selectDriveSpec }\n                    readOnly={ false }\n                    optionName={ driveSpec }\n                    optionValue={ driveSpec === currentDriveSpec }\n            \t\ttype=\"radio\" />\n            );\n\t\t});\n\n\t\treturn (\n\t\t\t<div className=\"aggregate-editor-extended-options\">\n                <div className=\"row-list-item-option-header\">\n                    Select { this.props.displayType } Disk\n                </div>\n                { availableDrives }\n            </div>\n\t\t);\n\t},\n\n\tgetDriveSpecDisplay: function(driveSpec, count) {\n        var countDisplay;\n\n        if (count) {\n        \tcountDisplay = '(' + count + ')';\n        } else {\n            countDisplay = '';\n        }\n\n        if (driveSpec) {\n        \tif (driveSpec.slice) {\n        \t\treturn this.getVirtualDeviceSize(driveSpec);\n        \t} else {\n        \t\treturn driveSpec.rawgb + 'GB ' + driveSpec.type + ' ' + countDisplay;\n        \t}\n        } else {\n        \treturn 'none';\n        }\n    },\n\n    getVirtualDeviceSize: function(driveSpec) {\n    \treturn new Unit(driveSpec.rsgb, 'GB').to('GiB').makeHappyFriendly();\n    },\n\n    selectDriveForAggregate: function(event) {\n    \tconsole.log('event', event);\n    \tthis.props.close();\n    }\n});\n\nvar RaidSelector = React.createClass({\n\tpropTypes: {\n        aggregateBuilder: React.PropTypes.object.isRequired,\n        updateModel: React.PropTypes.func.isRequired,\n        close: React.PropTypes.func.isRequired,\n    },\n\n\trender: function() {\n\t\tvar props = this.props,\n\t\t\t_this = this,\n\t\t\tcurrentRaidType = props.aggregateBuilder.aggregate.raid_type,\n\t\t\traidTypes = props.aggregateBuilder.availableRaidTypes();\n\n\t\tvar availableRaidTypes = _(raidTypes).map(function(raidType) {\n\t\t\tvar selectRaidType = _.partial(_this.selectRaidTypeForAggregate, raidType);\n\n            return (\n            \t<OptionRow\n            \t\taction={ selectRaidType }\n                    readOnly={ false }\n                    optionName={ raidType.replace('_', ' ') }\n                    optionValue={ raidType === currentRaidType }\n            \t\ttype=\"radio\" />\n            );\n\t\t});\n\n\t\treturn (\n\t\t\t<div className=\"aggregate-editor-extended-options\">\n                <div className=\"row-list-item-option-header\">\n                    Select RAID Type\n                </div>\n                { availableRaidTypes }\n            </div>\n\t\t);\n\t},\n\n\tselectRaidTypeForAggregate: function(raidType) {\n\t\tthis.props.aggregateBuilder.setRaidType(raidType);\n\t\tthis.props.updateModel();\n        this.props.close();\n\t}\n});\n\nmodule.exports = AggregateEditorExtendedOptions;\n","'use strict';\n\nvar _ = require('lodash'),\n\tReact = require('react'),\n    OptionRow = require('./common/option-row'),\n    RaidTypes = require('../../lib/model/aggregates/raid-types'),\n    Unit = require('../../lib/units.js'),\n\tusual = require('../usual-props');\n\nvar AggregateEditorOptions = React.createClass({\n    propTypes: _.merge({\n        aggregateBuilder: React.PropTypes.object.isRequired,\n        changeRaidSize: React.PropTypes.func,\n        requestedRaidSize: React.PropTypes.number,\n        selected: React.PropTypes.object,\n        updateModel: React.PropTypes.func,\n        hagi: React.PropTypes.object.isRequired,\n        hagroups: React.PropTypes.array.isRequired,\n        readOnly: React.PropTypes.bool.isRequired,\n        displayType: React.PropTypes.string,\n        setExtendedOption: React.PropTypes.func.isRequired,\n        report: React.PropTypes.object.isRequired,\n        userPreferences: React.PropTypes.object.isRequired,\n    }, usual.isRequired),\n\n    render: function() {\n        var props = this.props,\n            _this = this,\n            hagroup = this.getHagroup(),\n            raidTypes = new RaidTypes(),\n            aggregateBuilder = props.aggregateBuilder,\n            aggregateDeviceSummary = aggregateBuilder.deviceSummary(),\n            aggregateDeviceLimits = aggregateBuilder.deviceLimits(),\n            aggregateRaidSizeLimits = aggregateBuilder.raidSizeLimits(),\n            dataSpec = aggregateDeviceSummary.data.spec,\n            aggregate = aggregateBuilder.aggregate,\n            currentRaidSize = this.props.requestedRaidSize ? this.props.requestedRaidSize : this.getActualRaidSize(),\n            report = props.report;\n\n        var canSelectController = !props.readOnly && !aggregate.is_root_aggregate,\n            canEditDevices = !props.readOnly && !(aggregate.is_root_aggregate && report.summary.containsVirtualDevices),\n            canEditRaidSize = !props.readOnly && !aggregate.is_root_aggregate;\n\n        function renderFasConfigurationOptions() {\n            if (!props.hagi.isESeries) {\n                return (\n                    <div>\n                        <div className=\"row-list-item-option-header\">\n                            Flash Pool\n                        </div>\n                        <OptionRow\n                            action={ _this.openFlashPoolEditor }\n                            readOnly={ false }\n                            optionName={ _this.getFlashPoolDisplayName() }\n                            type=\"extended\" />\n                        <div className=\"row-list-item-option-header\">\n                            Configuration\n                        </div>\n                        <OptionRow\n                            action={ _this.props.changeRaidSize }\n                            readOnly={ !canEditRaidSize }\n                            optionName=\"Requested RAID Size\"\n                            optionValue={ currentRaidSize }\n                            maxValue={ aggregateRaidSizeLimits.max }\n                            minValue={ aggregateRaidSizeLimits.min }\n                            type=\"spinner\" />\n                        <OptionRow\n                            action={ null }\n                            readOnly={ true }\n                            optionName=\"Actual RAID Size\"\n                            optionValue={ _this.getActualRaidSize() }\n                            type=\"spinner\" />\n                        <OptionRow\n                            action={ _this.setSnapReserveProportion }\n                            readOnly={ !canEditDevices }\n                            optionName=\"Snap Reserve %\"\n                            optionValue={ _this.getAggregateSnapReserveAsPercentage(aggregate) }\n                            maxValue={ 50 }\n                            minValue={ 0 }\n                            hide={ !_this.isManualAggregatePolicyEnabled() }\n                            type=\"spinner\" />\n                    </div>\n                );\n            }\n        }\n\n    \treturn (\n            <div className=\"aggregate-editor-options\">\n                <div className=\"row-list-item-option-header\">\n                    { props.displayType } Name\n                </div>\n                <OptionRow\n                    action={ this.setAggregateName }\n                    readOnly={ !this.isManualAggregatePolicyEnabled() }\n                    optionName={ aggregate.name }\n                    type=\"text\" />\n                <div className=\"row-list-item-option-header\">\n                    Controller\n                </div>\n                <OptionRow\n                    action={ this.setToPrimaryController }\n                    readOnly={ !canSelectController }\n                    optionName={ hagroup.controllers[0].name }\n                    optionValue={ this.isAggregateOnPrimaryController(aggregate) }\n                    type=\"radio\" />\n                <OptionRow\n                    action={ this.setToPartnerController }\n                    readOnly={ !canSelectController }\n                    optionName={ hagroup.controllers.length > 1 ? hagroup.controllers[1].name : 'n/a' }\n                    optionValue={ !this.isAggregateOnPrimaryController(aggregate) }\n                    type=\"radio\" />\n                <div className=\"row-list-item-option-header\">\n                    RAID Type\n                </div>\n                <OptionRow\n                    action={ this.openRaidSelector }\n                    readOnly={ !canEditDevices }\n                    optionName={ aggregate.raid_type.replace('_', ' ') }\n                    type=\"extended\" />\n                <div className=\"row-list-item-option-header\">\n                    Devices\n                </div>\n                <OptionRow\n                    action={ this.setDriveCount }\n                    readOnly={ !canEditDevices }\n                    optionName=\"Count\"\n                    optionValue={ aggregateDeviceSummary.data.count }\n                    maxValue={ aggregateDeviceLimits.max }\n                    minValue={ aggregateDeviceLimits.min }\n                    type=\"spinner\" />\n                <OptionRow\n                    action={ this._applyDdpReserve }\n                    readOnly={ this.isManualAggregatePolicyEnabled() }\n                    optionName=\"Reserve\"\n                    optionValue={ report.summary.driveRoleSummary && report.summary.driveRoleSummary.reserve ? report.summary.driveRoleSummary.reserve : 0 }\n                    maxValue={ report.summary.driveRoleSummary ? this.getMaxDdpReserveCount(report.summary.driveRoleSummary.total) : 0 }\n                    hide={ !(props.hagi.isESeries && aggregate.raid_type === raidTypes.DDP) }\n                    type=\"spinner\" />\n                <OptionRow\n                    action={ this.openDriveSelector }\n                    readOnly={ !canEditDevices }\n                    optionName={ this.getDriveSpecDisplay(dataSpec) }\n                    type=\"extended\" />\n                { renderFasConfigurationOptions() }\n            </div>\n\t\t);\n\t},\n\n    getAggregateSnapReserveAsPercentage: function(aggregate) {\n        return Math.round(aggregate._snapreserve_proportion * 100);\n    },\n\n    /*  This and getVirtualDeviceSize are duplicated in aggregate-editor-extended-options.jsx,\n        Should probably move them up higher and call them from each component instead. */\n    getDriveSpecDisplay: function(driveSpec, count) {\n        var countDisplay;\n\n        if (count) {\n            countDisplay = '(' + count + ')';\n        } else {\n            countDisplay = '';\n        }\n\n        if (driveSpec) {\n            if (driveSpec.slice) {\n                return this.getVirtualDeviceSize(driveSpec);\n            } else {\n                return driveSpec.rawgb + 'GB ' + driveSpec.type + ' ' + countDisplay;\n            }\n        } else {\n            return 'none';\n        }\n    },\n\n    getBuilder: function() {\n        return this.props.aggregateBuilder;\n    },\n\n    getFlashPoolDisplayName: function() {\n        var capacityGiB = this.props.report.summary.cacheCapacity,\n            displayPreference = this.props.userPreferences.useBase10Yields ? 'GB' : 'GiB',\n            unit = new Unit(capacityGiB, 'GiB'),\n            unitDisplay = unit.to(displayPreference).friendly(2);\n\n        var displayName = capacityGiB ? unitDisplay + ' allocated' : 'None allocated';\n\n        return displayName;\n    },\n\n    getHagroup: function() {\n        return _.first(this.props.hagroups);\n    },\n\n    getMaxDdpReserveCount: function(totalDriveCount) {\n        console.log('totalDriveCount', totalDriveCount);\n        return 0;\n    },\n\n    getActualRaidSize: function() {\n        var builder = this.getBuilder();\n\n        return builder.currentRaidSize();\n    },\n\n    getRequestedRaidSize: function() {\n        var builder = this.getBuilder();\n\n        return builder.requestedRaidSize();\n    },\n\n    getVirtualDeviceSize: function(driveSpec) {\n        return new Unit(driveSpec.rsgb, 'GB').to('GiB').makeHappyFriendly();\n    },\n\n    isAggregateOnPrimaryController: function(aggregate) {\n        var hagroup = this.getHagroup();\n        return aggregate._controller === hagroup.controllers[0]._id ? true : false;\n    },\n\n    isManualAggregatePolicyEnabled: function() {\n        var system = _.first(this.props.hagroups),\n            policies = system._policies || {},\n            aggregatePolicy = policies.Aggregates || {},\n            manualAggregatesPolicy = aggregatePolicy.manual ? true : false;\n\n        return manualAggregatesPolicy;\n    },\n\n    setAggregateName: function(event) {\n        var builder = this.getBuilder();\n\n        builder.setName(event.target.value);\n        this.props.updateModel();\n    },\n\n    setDriveCount: function(count) {\n        var builder = this.getBuilder(),\n            deviceSummary = builder.deviceSummary(),\n            dataSpec = deviceSummary.data.spec;\n\n        if (dataSpec) {\n            builder.setDeviceAndCount(dataSpec, count);\n            this.props.updateModel();\n        }\n    },\n\n    setSnapReserveProportion: function(percentage) {\n        var builder = this.getBuilder(),\n            proportion = percentage / 100;\n\n        builder.setSnapReserve(proportion);\n        this.props.updateModel();\n    },\n\n    setToPartnerController: function() {\n        var builder = this.getBuilder(),\n            hagroup = this.getHagroup(),\n            controller = _.last(hagroup.controllers);\n\n        builder.setController(controller);\n        this.props.updateModel();\n    },\n\n    setToPrimaryController: function() {\n        var builder = this.getBuilder(),\n            hagroup = this.getHagroup(),\n            controller = _.first(hagroup.controllers);\n\n        builder.setController(controller);\n        this.props.updateModel();\n    },\n\n    openDriveSelector: function(/*event*/) {\n        this.props.setExtendedOption('driveSelector');\n    },\n\n    openFlashPoolEditor: function(/*event*/) {\n        this.props.setExtendedOption('flashPoolEditor');\n    },\n\n    openRaidSelector: function(/*event*/) {\n        this.props.setExtendedOption('raidSelector');\n    }\n\n});\n\nmodule.exports = AggregateEditorOptions;\n","'use strict';\n\nvar _ = require('lodash'),\n\tReact = require('react'),\n\tusual = require('../usual-props'),\n\tColumnHeader = require('./layout/column-header'),\n    ActionLink = require('./layout/action-link'),\n    ScrollableRegion = require('./layout/scrollable-region'),\n    AggregateEditorOptions = require('./aggregate-editor-options'),\n    AggregateEditorExtendedOptions = require('./aggregate-editor-extended-options'),\n    AggregateReporter = require('../../lib/model/aggregates/aggregateReporter'),\n\tManualAggregateBuilder = require('../../lib/model/aggregates/manual-aggregate-builder');\n\nvar AggregateEditor = React.createClass({\n    propTypes: _.merge({\n        selection: React.PropTypes.object.isRequired,\n        selected: React.PropTypes.object,\n        selectedItem: React.PropTypes.array.isRequired,\n        onClose: React.PropTypes.func,\n        platformConfig: React.PropTypes.object.isRequired,\n        userPreferences: React.PropTypes.object.isRequired,\n        installations: React.PropTypes.array.isRequired,\n    }, usual.isRequired),\n\n    getInitialState: function() {\n        return { requestedRaidSize: 0 };\n    },\n\n    componentWillReceiveProps: function(nextProps) {\n        this.checkPropsAndInitializeState(nextProps);\n    },\n\n    componentWillMount: function() {\n        this.checkPropsAndInitializeState(this.props);\n    },\n\n    render: function() {\n    \tvar aggregateBuilder = this.builder,\n            aggregate = aggregateBuilder.aggregate,\n            readOnly = !this.isManualAggregatePolicyEnabled(),\n            productLineIsESeries = this.isProductLineESeries(),\n            displayType = productLineIsESeries ? 'Storage Container' : 'Aggregate',\n            columnTitle = readOnly ? 'View ' + displayType : 'Change ' + displayType,\n\t\t\thagroups = this.props.selectedItem,\n\t\t\thagi = this.makeHagi(hagroups),\n    \t\treporter = new AggregateReporter(hagi),\n    \t\treport = reporter.createAggregateReport(aggregate);\n\n    \tif (!this.canAddAggregate()) {\n            return (\n                <div className=\"placeholder-pane\">\n                    No unallocated/spare devices available to create new aggregate.<br/>\n                    Add more drives to system.\n                </div>\n            );\n        }\n\n        return (\n        \t<div>\n        \t\t<ColumnHeader columnTitle={ columnTitle }>\n                    <ActionLink\n                        isToggle={ false }\n                        select={ this.props.onClose }\n                        selected={ false }\n                        enabled={ true }>\n                        Close\n                    </ActionLink>\n                </ColumnHeader>\n                <ScrollableRegion>\n\t        \t\t<AggregateEditorPane\n\t        \t\t\taggregateBuilder={ aggregateBuilder }\n                        changeRaidSize={ this.changeRaidSize }\n                        requestedRaidSize={ this.state.requestedRaidSize }\n\t\t                hagi={ hagi }\n\t\t                hagroups={ hagroups }\n\t\t                displayType={ displayType }\n\t\t                readOnly={ readOnly }\n                        updateModel={ this.updateModel }\n\t\t                selected={ this.props.selected }\n\t\t                report={ report }\n                        userPreferences={ this.props.userPreferences }\n\t\t                { ... usual(this.props) } />\n        \t\t</ScrollableRegion>\n        \t</div>\n    \t);\n    },\n\n    changeRaidSize: function(newSize) {\n        this.setState({ requestedRaidSize: newSize});\n\n        this.builder.setRaidSize(newSize);\n        this.updateModel();\n    },\n\n    addAggregate: function(hagi) {\n        this.builder = new ManualAggregateBuilder(hagi);\n\n        if (this.builder.aggregate) {\n            this.props.fire('PROJECT_ADD_MANUAL_AGGREGATE', hagi.hagroup._id, this.builder.aggregate, this.selectAggregate);\n        } else {\n            console.log('add failed 2: could not plan new aggregate');\n        }\n    },\n\n    canAddAggregate: function() {\n    \treturn this.isAggregateSpecifiedInSelection(this.props);\n    },\n\n    checkPropsAndInitializeState: function(propsToCheck) {\n        /*\n            Pseudo Code:\n\n            If NO aggregate selected\n                create builder with hagi as only arg\n            If aggregate selected\n                create builder with hagi and the selected aggregate (concrete, not an id)\n\n            return the builder in scope with render, pass down to aggregate-editor-options\n        */\n        var hagi = this.makeHagi(propsToCheck.selectedItem),\n            requestedRaidSize = this.state.requestedRaidSize;\n\n    \tif (!this.isAggregateSpecifiedInSelection(propsToCheck)) {\n            this.addAggregate(hagi);\n        } else {\n            this.builder = new ManualAggregateBuilder(hagi, _.first(propsToCheck.selection), requestedRaidSize);\n        }\n    },\n\n    isAggregateSpecifiedInSelection: function(propsToCheck) {\n        return 'aggregate' in propsToCheck.selected.selector;\n    },\n\n    isManualAggregatePolicyEnabled: function() {\n        var system = _.first(this.props.selectedItem),\n            policies = system._policies || {},\n            aggregatePolicy = policies.Aggregates || {},\n            manualAggregatesPolicy = aggregatePolicy.manual ? true : false;\n\n        return manualAggregatesPolicy;\n    },\n\n    isProductLineESeries: function() {\n        var hagi = this.makeHagi(this.props.selectedItem);\n\n        return hagi.isESeries;\n    },\n\n    makeHagi: function(hagroups) {\n        var map = this.props.map,\n            hagroup = _.first(hagroups);\n\n        return map.inspect(hagroup);\n    },\n\n    selectAggregate: function(newAggregate) {\n        var selected = this.props.selected,\n            selector = _.clone(selected.selector) || {};\n\n        if (newAggregate) {\n            _.merge(selector, {aggregate: {_id: newAggregate._id}, controller: {_id: newAggregate._controller}});\n            this.props.fire('HARDWARE_SELECT', selected.uuid, selector, selected.col2View, selected.col3View);\n        }\n    },\n\n    updateModel: function() {\n        var hagroup = _.first(this.props.selectedItem),\n            aggregate = this.builder.aggregate;\n\n        if (aggregate) {\n            // this.props.fire('PROJECT_UPDATE_AGGREGATE', hagroup._id, aggregate, this.builder.aggregate, this.props.selectAggregate);\n            // Old one will be deleted on attach\n            this.props.fire('PROJECT_ADD_MANUAL_AGGREGATE', hagroup._id, aggregate, this.selectAggregate);\n        } else {\n            console.error('missing aggregate');\n        }\n    }\n\n});\n\nvar AggregateEditorPane = React.createClass({\n\tpropTypes: _.merge({\n        aggregateBuilder: React.PropTypes.object.isRequired,\n        changeRaidSize: React.PropTypes.func,\n        requestedRaidSize: React.PropTypes.number,\n        selected: React.PropTypes.object,\n        updateModel: React.PropTypes.func,\n        hagi: React.PropTypes.object.isRequired,\n        hagroups: React.PropTypes.array.isRequired,\n        readOnly: React.PropTypes.bool.isRequired,\n        displayType: React.PropTypes.string,\n        report: React.PropTypes.object.isRequired,\n        userPreferences: React.PropTypes.object.isRequired,\n    }, usual.isRequired),\n\n    getInitialState: function() {\n    \treturn {\n    \t\textendedOption: null\n    \t};\n    },\n\n\trender: function() {\n\t\treturn (\n\t\t\t<div className=\"aggregate-editor\">\n\t\t\t\t<AggregateEditorOptions\n\t\t\t\t\taggregateBuilder={ this.props.aggregateBuilder }\n                    changeRaidSize={ this.props.changeRaidSize }\n                    requestedRaidSize={ this.props.requestedRaidSize }\n\t                hagi={ this.props.hagi }\n\t                hagroups={ this.props.hagroups }\n\t                displayType={ this.props.displayType }\n\t                readOnly={ this.props.readOnly }\n                    updateModel={ this.props.updateModel }\n\t                selected={ this.props.selected }\n\t                setExtendedOption={ this.setExtendedOption }\n\t                report={ this.props.report }\n                    userPreferences={ this.props.userPreferences }\n\t                { ... usual(this.props) } />\n\t\t\t\t<AggregateEditorExtendedOptions\n\t\t\t\t\textendedOption={ this.state.extendedOption }\n                    aggregateBuilder={ this.props.aggregateBuilder }\n                    hagi={ this.props.hagi }\n                    hagroups={ this.props.hagroups }\n                    displayType={ this.props.displayType }\n                    readOnly={ this.props.readOnly }\n                    updateModel={ this.props.updateModel }\n                    selected={ this.props.selected }\n                    setExtendedOption={ this.setExtendedOption }\n                    report={ this.props.report }\n                    userPreferences={ this.props.userPreferences }\n                    close={ this.close }\n                    { ... usual(this.props) } />\n\t\t\t</div>\n\t\t);\n\t},\n\n    close: function() {\n        this.setState({\n            extendedOption: null\n        });\n    },\n\n\tsetExtendedOption: function(extendedOption) {\n\t\tthis.setState({\n\t\t\textendedOption: extendedOption\n\t\t});\n\t}\n});\n\nmodule.exports = AggregateEditor;\n","'use strict';\n\nvar React = require('react'),\n    RaidTypes = require('../../lib/model/aggregates/raid-types'),\n\tUnit = require('../../lib/units.js');\n\nvar AggregateSummary = React.createClass({\n    propTypes: {\n        report: React.PropTypes.object.isRequired,\n        limits: React.PropTypes.object.isRequired,\n        base10YieldsPreference: React.PropTypes.string.isRequired,\n        raidType: React.PropTypes.string.isRequired,\n        isESeries: React.PropTypes.bool.isRequired,\n    },\n\n    render: function() {\n        var scaleModifier = 200;\n        if (this.props.isESeries) {\n            return (\n                <StorageContainerSummary\n                    report={ this.props.report }\n                    limits={ this.props.limits }\n                    base10YieldsPreference={ this.props.base10YieldsPreference }\n                    raidType={ this.props.raid_type } />\n            );\n        }\n\n        return (\n            <div className=\"aggregate-editor-extended-options aggregate-editor-summary\">\n                <div className=\"row-list-item-option-header\">\n                    Aggregate Summary\n                </div>\n                <CapacitySummaryChartWithSnapReserve\n                    report={ this.props.report }\n                    limits={ this.props.limits }\n                    scaleModifier={ scaleModifier }\n                    base10YieldsPreference={ this.props.base10YieldsPreference }/>\n                <DriveCountsSummaryChartWithParity\n                    driveRoleSummary={ this.props.report.summary.driveRoleSummary }\n                    limits={ this.props.limits }\n                    scaleModifier={ scaleModifier } />\n            </div>\n        );\n    }\n});\n\nvar StorageContainerSummary = React.createClass({\n    propTypes: {\n        report: React.PropTypes.object.isRequired,\n        limits: React.PropTypes.object.isRequired,\n        base10YieldsPreference: React.PropTypes.string.isRequired,\n        raidType: React.PropTypes.string.isRequired,\n    },\n\n    render: function () {\n        var aggregateDisplayLanguage = this.props.raidType === 'DDP' || this.props.raidType === new RaidTypes().DDP ? 'DDP' : 'Volume Group',\n            scaleModifier = 200,\n            driveCountSummaryDisplay;\n\n        if (aggregateDisplayLanguage === 'DDP') {\n            driveCountSummaryDisplay = (\n                <DriveCountsSummaryChartWithReserve\n                    driveRoleSummary={ this.props.report.summary.driveRoleSummary }\n                    limits={ this.props.limits }\n                    scaleModifier={ scaleModifier } />\n            );\n        } else {\n            driveCountSummaryDisplay = (\n                <DriveCountsSummaryChartWithParity\n                    driveRoleSummary={ this.props.report.summary.driveRoleSummary }\n                    limits={ this.props.limits }\n                    scaleModifier={ scaleModifier }\n                    showTotalToMaxRatio={ true } />\n            );\n        }\n\n        return (\n            <div className=\"aggregate-editor-extended-options aggregate-editor-summary\">\n                <div className=\"row-list-item-option-header\">\n                    Storage Container Summary\n                </div>\n                <CapacitySummaryChartForESeries\n                    report={ this.props.report }\n                    limits = { this.props.limits }\n                    scaleModifier={ scaleModifier }\n                    base10YieldsPreference={ this.props.base10YieldsPreference }\n                    aggregateDisplayLanguage={ aggregateDisplayLanguage } />\n                { driveCountSummaryDisplay }\n            </div>\n        );\n    }\n});\n\nvar CapacitySummaryChartForESeries = React.createClass({\n    render: function() {\n        var report = this.props.report,\n            limits = this.props.limits,\n            base10YieldsPreference = this.props.base10YieldsPreference,\n            aggregateDisplayLanguage = this.props.aggregateDisplayLanguage,\n            capacity = (report.summary.isRootAggregate) ? (report.summary.rootCapacity) : (report.summary.usableCapacity),\n            capacityText = (report.summary.isRootAggregate) ? 'Root Capacity ' : 'Usable Capacity ',\n            // totalCapacity = report.summary.snapReserveCapacity + capacity;\n            scaleModifier = this.props.scaleModifier,\n            maxCapacityUnit = new Unit(limits.capacity_gb, 'GB'),\n            maxCapacityGiB = maxCapacityUnit.to('GiB').value,\n            reserveScaled = (0 / maxCapacityGiB) * scaleModifier,\n            capacityScaled = (capacity / maxCapacityGiB) * scaleModifier,\n            usableCapacityUnit = new Unit(capacity, 'GiB');\n\n        return (\n            <div className=\"ae-summary-graph\">\n                <span className=\"emphasize\">{ aggregateDisplayLanguage } Size</span>\n                {/*<span className=\"pull-right\">\n                 { new Unit(totalCapacity, 'GiB').to(base10YieldsPreference).friendly(2) }\n                 &nbsp;/&nbsp;\n                 { maxCapacityUnit.to(base10YieldsPreference).friendly(2) }\n                 </span>\n                 <br/>*/}\n                <svg width={ scaleModifier } height=\"110\">\n                    <g>\n                        <rect width={ scaleModifier } height=\"32\" y=\"2\" className=\"ae-summary-bar-container\" />\n                        <rect width={ reserveScaled } height=\"32\" y=\"2\" className=\"ae-summary-bar-snap-reserve\" />\n                        <rect width={ capacityScaled } height=\"32\" x={ reserveScaled } y=\"2\" className=\"ae-summary-bar-usable-capacity\" />\n                    </g>\n                    <g>\n                        <rect width=\"8\" height=\"8\" y=\"48\" className=\"ae-summary-bar-usable-capacity\" />\n                        <text x=\"16\" y=\"56\">\n                            {capacityText + ' ' + usableCapacityUnit.to(base10YieldsPreference).friendly(2) }\n                        </text>\n                    </g>\n                </svg>\n            </div>\n        );\n    }\n});\n\nvar CapacitySummaryChartWithSnapReserve = React.createClass({\n    render: function() {\n        var report = this.props.report,\n            limits = this.props.limits,\n            base10YieldsPreference = this.props.base10YieldsPreference,\n            capacity = (report.summary.isRootAggregate) ? (report.summary.rootCapacity) : (report.summary.usableCapacity),\n            capacityText = (report.summary.isRootAggregate) ? 'Root Capacity ' : 'Usable Capacity ',\n            totalCapacity = report.summary.snapReserveCapacity + capacity,\n            scaleModifier = this.props.scaleModifier,\n            snapReserveScaled = (report.summary.snapReserveCapacity / new Unit(limits.aggr.size_64_tb, 'TiB').to('GiB').value) * scaleModifier,\n            capacityScaled = (capacity / new Unit(limits.aggr.size_64_tb, 'TiB').to('GiB').value) * scaleModifier,\n            usableCapacityUnit = new Unit(capacity, 'GiB'),\n            snapReserveCapacityUnit = new Unit(report.summary.snapReserveCapacity, 'GiB');\n\n        return(\n            <div className=\"ae-summary-graph\">\n                <span className=\"emphasize\">Aggregate Size</span>\n                <br/>\n                <span className=\"pull-right\">\n                        { new Unit(totalCapacity, 'GiB').to(base10YieldsPreference).friendly(2) }\n                &nbsp;/&nbsp;\n                        { new Unit(limits.aggr.size_64_tb, 'TiB').to(base10YieldsPreference).friendly(2) }\n                </span>\n                <br/>\n                <svg width={ scaleModifier } height=\"110\">\n                    <g>\n                        <rect width={ scaleModifier } height=\"32\" y=\"2\" className=\"ae-summary-bar-container\" />\n                        <rect width={ snapReserveScaled } height=\"32\" y=\"2\" className=\"ae-summary-bar-snap-reserve\" />\n                        <rect width={ capacityScaled } height=\"32\" x={ snapReserveScaled } y=\"2\" className=\"ae-summary-bar-usable-capacity\" />\n                    </g>\n                    <g>\n                        <rect width=\"8\" height=\"8\" y=\"48\" className=\"ae-summary-bar-snap-reserve\" />\n                        <text x=\"16\" y=\"56\">\n                                {'Snap Reserve ' + snapReserveCapacityUnit.to(base10YieldsPreference).friendly(2) }\n                        </text>\n\n                        <rect width=\"8\" height=\"8\" y=\"72\" className=\"ae-summary-bar-usable-capacity\" />\n                        <text x=\"16\" y=\"80\">\n                                {capacityText + ' ' + usableCapacityUnit.to(base10YieldsPreference).friendly(2) }\n                        </text>\n                    </g>\n                </svg>\n            </div>\n        );\n    }\n});\n\nvar DriveCountsSummaryChartWithParity = React.createClass({\n    render: function() {\n        var scaleModifier = this.props.scaleModifier,\n            maxDrives = this.props.limits.drive.total,\n            driveSummary = this.props.driveRoleSummary,\n            totalParityDrives = driveSummary.parity + driveSummary.dparity,\n            totalDrives = totalParityDrives + driveSummary.data + totalParityDrives,\n            parityDrivesScaled = (totalParityDrives / maxDrives) * scaleModifier,\n            dataDrivesScaled = (driveSummary.data / maxDrives) * scaleModifier,\n            showTotalToMaxRatio = this.props.showTotalToMaxRatio;\n\n        /*var maxDrives = //// TODO: getMaxAggrDrives(new Unit(limits.aggr.size_64_tb, 'TiB').to('GiB').value, report.drivesSpec.size, aggregate.raidsize);\n            Math.floor(limits.aggr.size_64_tb); // temp arbitrary limit, removed label\n            */\n\n        return (\n            <div className=\"ae-summary-graph\">\n                <span className=\"emphasize\">Drive Counts</span>\n                { showTotalToMaxRatio ? (<span className=\"pull-right\">{ totalDrives } / {maxDrives} Drives</span>) : '' }\n                <svg width={ scaleModifier } height=\"140\">\n                    <g>\n                        <rect width={ scaleModifier } height=\"32\" y=\"2\" className=\"ae-summary-bar-container\" />\n                        <rect width={ parityDrivesScaled } height=\"32\" y=\"2\" className=\"ae-summary-bar-parity-drives\" />\n                        <rect width={ dataDrivesScaled } height=\"32\" x={ parityDrivesScaled } y=\"2\" className=\"ae-summary-bar-data-drives\" />\n                    </g>\n                    <g>\n                        <rect width=\"8\" height=\"8\" y=\"48\" className=\"ae-summary-bar-parity-drives\" />\n                        <text x=\"16\" y=\"56\">{ 'Parity Drives ' + totalParityDrives }</text>\n                        <rect width=\"8\" height=\"8\" y=\"72\" className=\"ae-summary-bar-data-drives\" />\n                        <text x=\"16\" y=\"80\">{ 'Data Drives ' + (driveSummary.data) }</text>\n                    </g>\n                </svg>\n            </div>\n        );\n    }\n});\n\nvar DriveCountsSummaryChartWithReserve = React.createClass({\n    render: function() {\n        var scaleModifier = this.props.scaleModifier,\n            maxDrives = this.props.limits.drive.total,\n            driveSummary = this.props.driveRoleSummary,\n            totalParityDrives = driveSummary.parity + driveSummary.dparity,\n            parityDrivesScaled = (totalParityDrives / maxDrives) * scaleModifier,\n            dataDrivesScaled = (driveSummary.data / maxDrives) * scaleModifier,\n            totalDrives = totalParityDrives + driveSummary.data + (driveSummary.reserve || 0);\n\n        return(\n            <div className=\"ae-summary-graph\">\n                <span className=\"emphasize\">Drive Counts</span>\n                <span className=\"pull-right\">{ totalDrives } / {maxDrives} Drives</span><br/>\n                <svg width={ scaleModifier } height=\"140\">\n                    <g>\n                        <rect width={ scaleModifier } height=\"32\" y=\"2\" className=\"ae-summary-bar-container\" />\n                        <rect width={ parityDrivesScaled } height=\"32\" y=\"2\" className=\"ae-summary-bar-parity-drives\" />\n                        <rect width={ dataDrivesScaled } height=\"32\" x={ parityDrivesScaled } y=\"2\" className=\"ae-summary-bar-data-drives\" />\n                    </g>\n                    <g>\n                        <rect width=\"8\" height=\"8\" y=\"48\" className=\"ae-summary-bar-parity-drives\" />\n                        <text x=\"16\" y=\"56\">{'Reserve Drives ' + (driveSummary.reserve || 0)}</text>\n                        <rect width=\"8\" height=\"8\" y=\"72\" className=\"ae-summary-bar-data-drives\" />\n                        <text x=\"16\" y=\"80\">{'Data Drives ' + (driveSummary.data)}</text>\n                    </g>\n                </svg>\n            </div>\n        );\n    }\n});\n\nmodule.exports = AggregateSummary;\n","'use strict';\n\nvar React = require('react'),\n    RouteHandler = require('react-router').RouteHandler;\n\n/**\n * Our main container.\n */\n\nvar App = React.createClass({\n    render: function() {\n        return (\n            <div id=\"app\">\n                <RouteHandler { ... this.props } />\n            </div>\n        );\n    }\n});\n\nmodule.exports = App;\n","'use strict';\n\nvar Glyph = require('./glyph'),\n    FAGlyph = require('./faglyph'),\n    React = require('react');\n\nvar Button = React.createClass({\n    propTypes: {\n        onClick: React.PropTypes.func.isRequired,\n        title: React.PropTypes.string,\n        glyph: React.PropTypes.string,\n        faglyph: React.PropTypes.string,\n        spin: React.PropTypes.bool,\n        alignRight: React.PropTypes.bool\n    },\n\n    _glyph: function() {\n        if (this.props.faglyph) {\n            return (\n                <FAGlyph\n                    name={ this.props.faglyph }\n                    spin={ this.props.spin } />\n            );\n        } else if (this.props.glyph) {\n            return (\n                <Glyph\n                    name={ this.props.glyph }\n                    spin={ this.props.spin } />\n            );\n        } else {\n            return null;\n        }\n    },\n\n    _allClasses: function() {\n        var classes = {\n            'btn': true,\n            'btn-default': true,\n        };\n        if (this.props.extraClasses instanceof Array) {\n            this.props.extraClasses.forEach(function (extra) {\n                classes[extra] = true;\n            });\n        } else if (typeof(this.props.extraClasses) === 'string') {\n            this.props.extraClasses.split(' ').forEach(function (extra) {\n                classes[extra] = true;\n            });\n        } else if (this.props.extraClasses instanceof Object) {\n            for (var key in this.props.extraClasses) {\n                classes[key] = this.props.extraClasses[key];\n            }\n        }\n        return React.addons.classSet(classes);\n    },\n\n    _renderInside: function() {\n        if (this.props.alignRight) {\n            return (\n                <span>\n                    { this._glyph() }\n                    { this.props.children }\n                </span>\n            );\n        } else {\n            return (\n                <span>\n                    { this.props.children }\n                    { this._glyph() }\n                </span>\n            );\n        }\n    },\n\n    _handleKeyUp: function(event) {\n        if (event.key === 'Enter') {\n            this.props.onClick();\n        }\n    },\n\n    render: function() {\n        return (\n            <div className={ this._allClasses() }\n                 title={ this.props.title }\n                 tabIndex={0}\n                 onClick={ this.props.onClick }\n                 onKeyUp={ this._handleKeyUp }>\n                { this._renderInside() }\n            </div>\n        );\n    }\n});\n\nmodule.exports = Button;","'use strict';\n\nvar React = require('react'),\n    Tooltip = require('./tooltip'),\n    Unit = require('../../lib/units.js');\n\nvar CapacityTooltip  = React.createClass({\n    propTypes: {\n        inputValue: React.PropTypes.number,\n        displayUnitsFrom: React.PropTypes.string,\n        inputUnit: React.PropTypes.object,\n    },\n\n    render: function() {\n        ////assert(this.props.inputUnit || this.props.inputValue >= 0 && this.props.displayUnitsFrom);\n        var unit = this.props.inputUnit || new Unit(this.props.inputValue, this.props.displayUnitsFrom);\n\n        return (\n            <Tooltip title={ this.props.title || \"Capacity\" }\n                     position=\"left\"\n                     titleClassName=\"right strong\">\n                <table>\n                    <tr><th className=\"right\">Base 2</th>\n                        <th/>\n                        <th className=\"right\">Base 10</th></tr>\n                    <tr><td className=\"numeric\"> {formatUnit(unit.to('GiB'))} GiB</td>\n                        <td/>\n                        <td className=\"numeric\"> {formatUnit(unit.to('GB' ))} GB</td></tr>\n                    <tr><td className=\"numeric\"> {formatUnit(unit.to('TiB'))} TiB</td>\n                        <td/>\n                        <td className=\"numeric\"> {formatUnit(unit.to('TB' ))} TB</td></tr>\n                </table>\n            </Tooltip>\n        );\n\n        function formatUnit(u) {\n            return u.value.toFixed(3).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,');\n        }\n    },\n});\n\nmodule.exports = CapacityTooltip;\n","'use strict';\n\nvar _ = require('lodash'),\n    React = require('react'),\n    Button = require('./button'),\n    cnst = require('./constants'),\n    ColumnHeader = require('./layout/column-header'),\n    ActionLink = require('./layout/action-link'),\n    ScrollableRegion = require('./layout/scrollable-region'),\n    Repeat = require('./repeat');\n\nvar SystemRow = React.createClass({\n    propTypes: {\n        system: React.PropTypes.object.isRequired,\n        guard: React.PropTypes.object.isRequired,\n        selector: React.PropTypes.object.isRequired,\n        fire: React.PropTypes.func.isRequired\n    },\n\n    getInitialState: function() {\n        return {\n            editingName: false,\n            newControllerName1: '',\n            newControllerName2: ''\n       };\n    },\n\n    componentWillReceiveProps: function(nextProps) {\n        if (this.props.system._id !== nextProps.system._id) {\n            var controllers = nextProps.system.controllers || [];\n\n            this.setState({\n                editingName: false,\n                newControllerName1: controllers[0] ? controllers[0].name || '' : '',\n                newControllerName2: controllers[1] ? controllers[1].name || '' : ''\n            });\n        }\n    },\n\n    _editName: function() {\n        var controllers = this.props.system.controllers || [];\n\n        this.setState({\n            editingName: true,\n            newControllerName1: controllers[0] ? controllers[0].name || '' : '',\n            newControllerName2: controllers[1] ? controllers[1].name || '' : ''\n        }, function() {\n            // Move focus to the input field after we render it (and select text)\n            this.refs.controllerNameInput1.getDOMNode().select();\n        });\n    },\n\n    _saveNewName: function() {\n\n        if (this.state.newControllerName1 && this.state.newControllerName2) {\n            this.setState({\n                editingName: false,\n                newControllerName1: '',\n                newControllerName2: ''\n            });\n\n            if (this.props.system && this.props.system._id) {\n                this.props.fire(\n                    'PROJECT_NAME_CONTROLLERS',\n                    this.props.system._id,\n                    this.state.newControllerName1,\n                    this.state.newControllerName2\n                );\n            }\n        } else {\n            this._cancelEditName();\n        }\n\n    },\n\n    _cancelEditName: function() {\n        var controllers = this.props.system.controllers || [];\n\n        this.setState({\n            editingName: false,\n            newControllerName1: controllers[0] ? controllers[0].name || '' : '',\n            newControllerName2: controllers[1] ? controllers[1].name || '' : ''\n        });\n    },\n\n    _captureNewControllerName1: function(event) {\n        if (!event.target.value) {\n            this.setState({\n                newControllerName1: ''\n            });\n        } else if (event.target.value.search('^[A-Za-z0-9_-]+$') !== -1) {\n            this.setState({\n                newControllerName1: event.target.value\n            });\n        }\n    },\n\n    _captureNewControllerName2: function(event) {\n        if (!event.target.value) {\n            this.setState({\n                newControllerName2: ''\n            });\n        } else if (event.target.value.search('^[A-Za-z0-9_.-]+$') !== -1) {\n            this.setState({\n                newControllerName2: event.target.value\n            });\n        }\n    },\n\n    _deleteSystem: function(version, event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        this.props.fire('PROJECT_REMOVE_SYSTEM', this.props.system._id);\n\n        if (version) {\n            this.props.fire('PROJECT_SET_CLUSTER_VERSION', this.props.system.cluster._id, version);\n        }\n    },\n\n    _getControllerPairName: function() {\n        var controllerPairName = _.flatten((this.props.system.controllers || []), 'name').join(' / ');\n\n        return (controllerPairName && controllerPairName !== ' / ') ? controllerPairName : 'un-named';\n    },\n\n    _getRawCapacity: function() {\n        var rawCapacity = _.reduce(this.props.system.shelves, function(rawCapacity, shelf) {\n            var drive_specs = _.isEmpty(shelf._x_bom) ? [] : shelf._x_bom.drive_specs,\n                shelfCapacity = _.reduce(drive_specs, function(shelfCapacity, bom) {\n                    return shelfCapacity + (bom.rawgb || 0 * bom.quantity || 0);\n                }, 0);\n            return rawCapacity + shelfCapacity;\n        }, 0);\n\n        return rawCapacity ? ((rawCapacity > 999) ? (rawCapacity/1000) + 'TB ' : rawCapacity + 'GB ') + ' Raw' : '';\n    },\n\n    _handleKeyUp: function(event) {\n        if (event.key === 'Enter') {\n            this._saveNewName();\n        } else if (event.key === 'Escape') {\n            this._cancelEditName();\n        }\n    },\n\n    _renderNameCells: function(controllers) {\n        var items = [];\n\n        // <div className={ controllers.length > 1 ? \"row-list-cell row-list-cell-m row-list-cell-middle\" : \"row-list-cell row-list-cell-middle\" }>\n        items.push(\n            <div className=\"row-list-cell row-list-cell-m row-list-cell-middle\">\n                <div className=\"edit-name-box\">\n                    <input\n                        type=\"text\"\n                        ref=\"controllerNameInput1\"\n                        value={ this.state.newControllerName1 }\n                        placeholder=\"name\"\n                        onChange={ this._captureNewControllerName1 }\n                        onKeyUp={ this._handleKeyUp }\n                        className=\"form-control\" />\n                </div>\n            </div>\n        );\n\n        if (controllers.length > 1) {\n            items.push(\n                <div className=\"row-list-cell row-list-cell-m row-list-cell-middle\">\n                    <div className=\"edit-name-box\">\n                        <input\n                            type=\"text\"\n                            ref=\"controllerNameInput2\"\n                            value={ this.state.newControllerName2 }\n                            placeholder=\"name\"\n                            onChange={ this._captureNewControllerName2 }\n                            onKeyUp={ this._handleKeyUp }\n                            className=\"form-control\" />\n                    </div>\n                </div>\n            );\n        }\n\n        return items;\n    },\n\n    render: function() {\n        if (this.state.editingName) {\n            return (\n                <div className=\"row-list-item\">\n                    <div className=\"row-list-cell row-list-cell-xs\"></div>\n                    { this._renderNameCells(this.props.system.controllers || []) }\n                    <div className=\"row-list-cell row-list-cell-s\"></div>\n                    <div className=\"toolstrip\">\n                        <Button\n                            faglyph=\"check\"\n                            title=\"save changes to project name\"\n                            onClick={ this._saveNewName }\n                            extraClasses={{\n                                'btn-success': true,\n                                'no-border': true,\n                            }} />\n                        <Button\n                            faglyph=\"times\"\n                            title=\"cancel changes to project name\"\n                            onClick={ this._cancelEditName }\n                            extraClasses={{\n                                'btn-danger': true,\n                                'no-border': true,\n                            }} />\n                    </div>\n                </div>\n            );\n        } else {\n            var addingTo = _.clone(this.props.selector),\n                replacing = _.assign(addingTo, { hagroup: { _id: this.props.system._id } }),\n                delConfigs = this.props.guard.deletingSystem(replacing),\n                deleteSystemConfig = _.last(delConfigs),\n                newVersion = deleteSystemConfig ? deleteSystemConfig.newVersion : undefined,\n                delAction = _.partial(this._deleteSystem, newVersion);\n\n            return (\n                <div className=\"row-list-item\">\n                    <div className=\"row-list-cell row-list-cell-xs\">\n                    </div>\n                    <div className=\"row-list-cell row-list-cell-nopad\">\n                        <Button\n                            faglyph=\"trash\"\n                            title=\"remove this system\"\n                            onClick={ delAction }\n                            extraClasses={{\n                                'btn-default': true,\n                                'no-border': true,\n                            }}>\n                        </Button>\n                    </div>\n                    <div className=\"row-list-cell row-list-cell-m row-list-cell-middle\">\n                        <span>{ this._getControllerPairName() }</span>\n                    </div>\n                    <div className=\"row-list-cell row-list-cell-s row-list-cell-middle hide-contracted\">\n                        { this._getRawCapacity() }\n                    </div>\n                    <div className=\"row-list-cell row-list-cell-s\"></div>\n                    <span className=\"toolstrip\">\n                        <Button\n                            faglyph=\"pencil\"\n                            title=\"edit the name of your system\"\n                            onClick={ this._editName }\n                            extraClasses={{\n                                'btn-default': true,\n                                'no-border': true,\n                            }}>\n                        </Button>\n                    </span>\n                </div>\n            );\n        }\n    }\n});\n\n// TODO: x nodes out of x after limits are available\nvar NodeCountRow = React.createClass({\n    propTypes: {\n        count: React.PropTypes.number.isRequired,\n        model: React.PropTypes.string.isRequired\n    },\n\n    render: function() {\n        return (\n            <div className=\"row-list-item header\">\n                <div className=\"row-list-cell row-list-cell-m\">\n                    <div className=\"drive-summary-block no-overflow emphasize\">\n                        <span className=\"drive-count\">{ this.props.count }</span>\n                        <span className=\"fa fa-netapp-controller fa-fw\"></span>\n                        <span className=\"drive-label\">{ this.props.model }</span>\n                    </div>\n                </div>\n                <div className=\"row-list-cell row-list-cell-m\">\n                </div>\n            </div>\n        );\n    },\n});\n\nvar ModelGroup = React.createClass({\n    propTypes: {\n        modelGroup: React.PropTypes.object.isRequired,\n        guard: React.PropTypes.object.isRequired,\n        selector: React.PropTypes.object.isRequired,\n        fire: React.PropTypes.func.isRequired\n    },\n\n    _getNodeCounts: function() {\n        var nodeCounts = {};\n\n        _.forEach(this.props.modelGroup, function (hagroup) {\n            var before = nodeCounts[hagroup.model] || 0,\n                after = before + hagroup.controllers.length;\n            nodeCounts[hagroup.model] = after;\n        });\n\n        return nodeCounts;\n    },\n\n    _renderRows: function(count, model) {\n        return (\n            <NodeCountRow count={ count } model={ model } />\n        );\n    },\n\n    render: function() {\n        return (\n            <div>\n                { _.map(this._getNodeCounts(), this._renderRows) }\n                <Repeat seq={ this.props.modelGroup }\n                        prop=\"system\">\n                    <SystemRow\n                        guard={ this.props.guard }\n                        selector={ this.props.selector }\n                        fire={ this.props.fire } />\n                </Repeat>\n            </div>\n        );\n    },\n});\n\nvar ClusterDetails = React.createClass({\n    propTypes: {\n        cluster: React.PropTypes.object.isRequired,\n        select: React.PropTypes.func.isRequired,\n        clearSelection: React.PropTypes.func,\n        fire: React.PropTypes.func.isRequired,\n        col3View: React.PropTypes.string.isRequired,\n    },\n\n    getInitialState: function() {\n        return {\n            editingName: false,\n            newClusterName: ''\n       };\n    },\n\n    componentWillReceiveProps: function(nextProps) {\n        if (this.props.cluster._id !== nextProps.cluster._id) {\n            this.setState({\n                editingName: false,\n                newClusterName: nextProps.cluster.name || ''\n            });\n        }\n    },\n\n    _editName: function() {\n        this.setState({\n            editingName: true,\n            newClusterName: this.props.cluster.name || ''\n        }, function() {\n            // Move focus to the input field after we render it (and select text)\n            this.refs.clusterNameInput.getDOMNode().select();\n        });\n    },\n\n    _saveNewName: function() {\n        this.setState({\n            editingName: false,\n            newClusterName: ''\n        });\n\n        this.props.fire('PROJECT_NAME_CLUSTER', this.props.cluster._id, this.state.newClusterName);\n    },\n\n    _cancelEditName: function() {\n        this.setState({\n            editingName: false,\n            newClusterName: this.props.cluster.name || ''\n        });\n    },\n\n    _captureNewName: function(event) {\n        if (!event.target.value) {\n            this.setState({\n                newClusterName: ''\n            });\n        } else if (event.target.value.search('^[A-Za-z0-9_-]+$') !== -1) {\n            this.setState({\n                newClusterName: event.target.value\n            });\n        }\n    },\n\n    _delete: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        _.forEach(this.props.cluster.hagroups, function(hagroup) {\n            this.props.fire('PROJECT_REMOVE_SYSTEM', hagroup._id);\n        }, this);\n\n        this.props.clearSelection();\n    },\n\n    _handleKeyUp: function(event) {\n        if (event.key === 'Enter') {\n            this._saveNewName();\n        } else if (event.key === 'Escape') {\n            this._cancelEditName();\n        }\n    },\n\n    _renderNameOrNameInput: function() {\n        if (this.state.editingName) {\n            return (\n                <div className=\"row-list-item-grouping\">\n                    <div className=\"row-list-item\">\n                        <div className=\"row-list-cell row-list-cell-xs row-list-cell-middle\">\n                            <span className=\"emphasize\">Name</span>\n                        </div>\n                        <div className=\"row-list-cell row-list-cell-m\">\n                            <div className=\"edit-name-box\">\n                                <input\n                                    type=\"text\"\n                                    ref=\"clusterNameInput\"\n                                    value={ this.state.newClusterName }\n                                    placeholder=\"Name the cluster\"\n                                    onChange={ this._captureNewName }\n                                    onKeyUp={ this._handleKeyUp }\n                                    className=\"form-control\" />\n                            </div>\n                        </div>\n                        <div className=\"toolstrip\">\n                            <Button\n                                faglyph=\"check\"\n                                title=\"save changes to cluster name\"\n                                onClick={ this._saveNewName }\n                                extraClasses={{\n                                    'btn-success': true,\n                                    'no-border': true,\n                                }} />\n                            <Button\n                                faglyph=\"times\"\n                                title=\"cancel changes to cluster name\"\n                                onClick={ this._cancelEditName }\n                                extraClasses={{\n                                    'btn-danger': true,\n                                    'no-border': true,\n                                }} />\n                        </div>\n                    </div>\n                </div>\n            );\n        } else {\n            return (\n                <div className=\"row-list-item-grouping\">\n                    <div className=\"row-list-item\">\n                        <div className=\"row-list-cell row-list-cell-xs row-list-cell-middle\">\n                            <span className=\"emphasize\">Name</span>\n                        </div>\n                        <div className=\"row-list-cell row-list-cell-m\">\n                            <span>{ this.props.cluster.name || 'un-named' }</span>\n                        </div>\n                        <div className=\"toolstrip\">\n                            <Button\n                                faglyph=\"pencil\"\n                                title=\"edit the name of your cluster\"\n                                onClick={ this._editName }\n                                extraClasses={{\n                                    'btn-default': true,\n                                    'no-border': true,\n                                }}>\n                            </Button>\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n    },\n\n    add: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        var selector = {\n                'productLine': cnst.PRODUCTLINE_FAS,\n                'productSubLine': cnst.PRODUCTLINE_SUBTYPE_CDOT\n            };\n\n        this.props.select(selector, cnst.UI_SELECT_ADD_CHANGE_SYSTEMS);\n    },\n\n    // TODO: CDOT FAS is the only option for now but we should look up the product line from prod info when it is available\n    render: function() {\n        var modelGroups = _.groupBy(this.props.cluster.hagroups, function(s) { return s.model; }),\n            enableAddSystem = !_(this.props.cluster.hagroups)\n                .any(function(s) { return s.controllers.length === 1; }),\n            addSystemRowClass = React.addons.classSet({\n                'row-list-item': true,\n                'new': true,\n                'selectable': enableAddSystem,\n                'disabled': !enableAddSystem,\n                'selected': (enableAddSystem && this.props.col3View === cnst.UI_SELECT_ADD_CHANGE_SYSTEMS)\n            }),\n            addSystemTextClass = React.addons.classSet({\n                'row-list-cell': true,\n                'row-list-cell-middle': true,\n                'text-muted': !enableAddSystem\n            }),\n            addClick = enableAddSystem ? this.add : undefined;\n\n            var hagroup = _.first(this.props.cluster.hagroups),\n                policies = hagroup._policies || {},\n                versionPolicy = policies.version || {},\n                options = versionPolicy.pin ? { version: hagroup.version } : {};\n\n            var inspector = this.props.map.inspect(this.props.cluster),\n                selector = {\n                    installation: { _id: inspector.installation._id },\n                    cluster: { _id: inspector.cluster._id }\n                },\n                guard = this.props.map.guard(selector, options);\n\n        return (\n            <div>\n                <ColumnHeader columnTitle=\"Cluster Details\">\n                    <ActionLink\n                        isToggle={ false }\n                        select={ this._delete }\n                        selected={ false }\n                        enabled={ true }>\n                        Delete\n                    </ActionLink>\n                </ColumnHeader>\n                <ScrollableRegion>\n                    <div className=\"hc-cluster\">\n                        { this._renderNameOrNameInput() }\n                        <div className=\"row-list-item-grouping\">\n                            <div className={ addSystemRowClass } onClick={ addClick }>\n                                <div className=\"row-list-cell row-list-cell-xs row-list-cell-middle\">\n                                </div>\n                                <div className={addSystemTextClass}>\n                                    Add a new system<span className=\"hide-contracted\"> to this cluster</span>\n                                </div>\n                                <span className=\"chevron\">\n                                    <span className=\"fa fa-fw fa-plus\"></span>\n                                </span>\n                            </div>\n                            <Repeat seq={ modelGroups }\n                                    prop=\"modelGroup\">\n                                <ModelGroup\n                                    guard={ guard }\n                                    selector={ selector }\n                                    fire={ this.props.fire } />\n                            </Repeat>\n                        </div>\n                    </div>\n                </ScrollableRegion>\n            </div>\n        );\n    }\n});\n\nmodule.exports = ClusterDetails;\n","'use strict';\n\nvar _ = require('lodash'),\n\tReact = require('react'),\n\tRepeat = require('./repeat'),\n    SystemSummary = require('./system-summary');\n\nvar ClusterList = React.createClass({\n    propTypes: {\n        clusters: React.PropTypes.array.isRequired,\n        currentSelection: React.PropTypes.object.isRequired,\n        select: React.PropTypes.func.isRequired,\n        fire: React.PropTypes.func.isRequired\n    },\n\n    render: function() {\n        return (\n            <Repeat seq={ this.props.clusters }\n                    prop=\"cluster\"\n                    className=\"clusters\">\n                <Cluster\n                    currentSelection={ this.props.currentSelection }\n                    select={ this.props.select } />\n            </Repeat>\n        );\n    }\n});\n\nvar Cluster = React.createClass({\n    propTypes: {\n        cluster: React.PropTypes.object.isRequired,\n        currentSelection: React.PropTypes.object.isRequired,\n        select: React.PropTypes.func.isRequired\n    },\n\n    isSelected: function(selector, cluster) {\n        var isClusterMatch = false,\n            selectedCluster = _(selector).has('cluster') ? selector.cluster._id : '';\n\n        if (selectedCluster) {\n            var id = cluster._id || '';\n            isClusterMatch = (selectedCluster === id) ? true : false;\n        }\n\n        return _(selector).has('hagroup') ? false : isClusterMatch;\n    },\n\n    selectCluster: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        var selector = { cluster: { _id: this.props.cluster._id } };\n        this.props.select(selector, 'ClusterGrouping');\n    },\n\n    selectClusterGroup: function(selector, col2View, col3View) {\n        var parent = { cluster: { _id: this.props.cluster._id } };\n        this.props.select(_.merge(parent, selector), col2View, col3View);\n    },\n\n    render: function() {\n        var cluster = this.props.cluster,\n            selected = this.props.currentSelection,\n            isSelected = this.isSelected(selected, cluster),\n            modelGroups = _.groupBy(cluster.hagroups, function(s) { return s._model; }),\n            classNames = React.addons.classSet({\n                'cluster': true,\n                'selectable': true,\n                'selected': isSelected,\n            });\n\n        return (\n            <div className={ classNames }>\n                <span className=\"sub-grouping-label\" onClick={ this.selectCluster }>\n                    { cluster.name || 'un-named' }\n                    <span className=\"pull-right action\">\n                        Edit\n                    </span>\n                </span>\n                <Repeat seq={ _.map(modelGroups) }\n                        prop=\"hagroups\"\n                        className=\"standalones\">\n                    <SystemSummary\n                        isGrouped={ false }\n                        currentSelection={ selected }\n                        select={ this.selectClusterGroup } />\n                </Repeat>\n            </div>\n        );\n    }\n});\n\nmodule.exports = ClusterList;\n","'use strict';\n\nvar React = require('react'),\n    FAGlyph = require('../faglyph'),\n    Button = require('../button'),\n    Spinner = require('./spinner');\n\nvar OptionRow = React.createClass({\n    propTypes: {\n        type: React.PropTypes.string.isRequired,\n        action: React.PropTypes.func,\n        optionName: React.PropTypes.string.isRequired,\n        optionValue: React.PropTypes.any,\n        readOnly: React.PropTypes.bool,\n        minValue: React.PropTypes.any,\n        maxValue: React.PropTypes.any,\n        hide: React.PropTypes.bool,\n    },\n\n    render: function() {\n        var optionTypeDisplay;\n\n        if (!!this.props.hide) {\n            return null;\n        }\n\n        switch (this.props.type) {\n            case 'extended':\n                optionTypeDisplay = (\n                    <ExtendedOption\n                        optionName={ this.props.optionName }\n                        readOnly={ this.props.readOnly }\n                        action={ this.props.action } />\n                );\n            break;\n            case 'radio':\n                optionTypeDisplay = (\n                    <RadioOption\n                        optionName={ this.props.optionName }\n                        optionValue={ this.props.optionValue }\n                        readOnly={ this.props.readOnly }\n                        action={ this.props.action } />\n                );\n            break;\n            case 'spinner':\n                optionTypeDisplay = (\n                    <SpinnerOption\n                        optionName={ this.props.optionName }\n                        optionValue={ this.props.optionValue }\n                        readOnly={ this.props.readOnly }\n                        action={ this.props.action }\n                        maxValue={ this.props.maxValue }\n                        minValue={ this.props.minValue } />\n                );\n            break;\n            case 'text':\n                optionTypeDisplay = (\n                    <TextOption\n                        optionName={ this.props.optionName }\n                        readOnly={ this.props.readOnly }\n                        action={ this.props.action } />\n                );\n            break;\n            default:\n                return null;\n        }\n\n        return optionTypeDisplay;\n    }\n});\n\nvar ExtendedOption = React.createClass({\n    propTypes: {\n        action: React.PropTypes.func,\n        optionName: React.PropTypes.string.isRequired,\n        readOnly: React.PropTypes.bool,\n    },\n\n    render: function() {\n        var className = React.addons.classSet({\n                'row-list-item': true,\n                'row-list-item-option': true,\n                'selectable': !!this.props.action && !this.props.readOnly\n            });\n\n        return (\n            <div className={ className } onClick={ !this.props.readOnly ? this.props.action : null }>\n                <div className=\"row-list-cell\">\n                    { this.props.optionName }\n                </div>\n                <span className=\"chevron\">\n                    <FAGlyph name={ !this.props.readOnly ? 'chevron-right' : null } hideIfUnnamed={ true } />\n                </span>\n            </div>\n        );\n    }\n});\n\nvar RadioOption = React.createClass({\n    propTypes: {\n        action: React.PropTypes.func,\n        optionName: React.PropTypes.string.isRequired,\n        optionValue: React.PropTypes.any,\n        readOnly: React.PropTypes.bool,\n    },\n\n    render: function() {\n        var className = React.addons.classSet({\n                'row-list-item': true,\n                'row-list-item-option': true,\n                'selectable': !!this.props.action && !this.props.readOnly\n            });\n\n        return (\n            <div className={ className } onClick={ !this.props.readOnly ? this.props.action : null }>\n                <div className=\"row-list-cell\">\n                    { this.props.optionName }\n                </div>\n                <span className=\"chevron\">\n                    <FAGlyph name={ !!this.props.optionValue ? 'check' : null } hideIfUnnamed={ true } title=\"Selected\" />\n                </span>\n            </div>\n        );\n    }\n});\n\nvar SpinnerOption = React.createClass({\n    propTypes: {\n        action: React.PropTypes.func.isRequired,\n        optionName: React.PropTypes.string.isRequired,\n        optionValue: React.PropTypes.any,\n        readOnly: React.PropTypes.bool,\n        minValue: React.PropTypes.number,\n        maxValue: React.PropTypes.number,\n    },\n\n    render: function() {\n        var className = React.addons.classSet({\n                'row-list-item': true,\n                'row-list-item-option': true,\n                'selectable': false\n            });\n\n        return (\n            <div className={ className }>\n                <div className=\"row-list-cell\">\n                    { this.props.optionName }\n                </div>\n                <Spinner\n                    readOnly={ this.props.readOnly }\n                    applyValue={ this.props.action }\n                    value={ this.props.optionValue }\n                    minValue={ this.props.minValue }\n                    maxValue={ this.props.maxValue } />\n            </div>\n        );\n    }\n});\n\nvar TextOption = React.createClass({\n    propTypes: {\n        action: React.PropTypes.func,\n        optionName: React.PropTypes.string.isRequired,\n        readOnly: React.PropTypes.bool,\n    },\n\n    getInitialState: function() {\n        return {\n            editMode: false\n        };\n    },\n\n    render: function() {\n        var className = React.addons.classSet({\n                'row-list-item': true,\n                'row-list-item-option': true,\n                'selectable': !!this.props.action && !this.props.readOnly\n            });\n\n        if (this.state.editMode) {\n            return (\n                <div className={ className }>\n                    <div className=\"row-list-cell\">\n                        <input\n                            onChange={ this.props.action }\n                            onKeyUp={ this.handleKeyUp }\n                            type=\"text\"\n                            ref=\"textInput\"\n                            value={ this.props.optionName }\n                            placeholder=\"name\"\n                            className=\"form-control ae-option-input\" />\n                    </div>\n                    <div className=\"toolstrip\">\n                        <Button\n                            faglyph=\"check\"\n                            onClick={ this.closeEditMode }\n                            extraClasses={{\n                                'btn-success': true,\n                                'no-border': true,\n                            }} />\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <div className={ className } onClick={ !this.props.readOnly ? this.openEditMode : null }>\n                <div className=\"row-list-cell\">\n                    { this.props.optionName }\n                </div>\n                <span className=\"chevron\">\n                    <FAGlyph name={ !this.props.readOnly ? 'pencil' : null } hideIfUnnamed={ true } title=\"Edit\" />\n                </span>\n            </div>\n        );\n    },\n\n    closeEditMode: function(event) {\n        if (event) {\n            event.stopPropagation();\n            event.preventDefault();\n        }\n\n        this.setState({\n            editMode: false\n        });\n    },\n\n    handleKeyUp: function(event) {\n        if (event.key === 'Enter' || event.key === 'Escape') {\n            this.closeEditMode(event);\n        }\n    },\n\n    openEditMode: function(event) {\n        if (event) {\n            event.stopPropagation();\n            event.preventDefault();\n        }\n\n        this.setState({\n            editMode: true\n        }, function() {\n            this.refs.textInput.getDOMNode().select();\n        });\n    }\n});\n\nmodule.exports = OptionRow;\n","'use strict';\n\nvar React = require('react'),\n    Button = require('../button');\n\nvar Spinner = React.createClass({\n    propTypes: {\n        applyValue: React.PropTypes.func.isRequired,\n        value: React.PropTypes.any,\n        readOnly: React.PropTypes.bool,\n        minValue: React.PropTypes.number,\n        maxValue: React.PropTypes.number,\n    },\n\n    render: function() {\n        if (this.props.readOnly) {\n            return(\n                <div className=\"toolstrip\">\n                    <div className=\"row-list-cell\">\n                        <span className=\"read-only-value\">\n                            { this.props.value }\n                        </span>\n                    </div>\n                </div>\n            );\n        }\n\n        var max = (this.props.maxValue !== undefined) ? this.props.maxValue : Infinity,\n            min = (this.props.minValue !== undefined) ? this.props.minValue : 0;\n\n        return (\n            <div className=\"toolstrip\">\n                <Button\n                    faglyph=\"minus\"\n                    onClick={ this.decrementValue }\n                    extraClasses={{\n                        'btn-default': true,\n                        'no-border': true,\n                        'no-pad-right': true,\n                        'disabled': this.props.value <= min,\n                    }} />\n                <input\n                    onChange={ this.setValue }\n                    type=\"text\"\n                    value={ this.props.value }\n                    className=\"input-count\"/>\n                <Button\n                    faglyph=\"plus\"\n                    onClick={ this.incrementValue }\n                    extraClasses={{\n                        'btn-default': true,\n                        'no-border': true,\n                        'no-pad-left': true,\n                        'disabled': this.props.value >= max,\n                    }} />\n            </div>\n        );\n    },\n\n    applyValue: function(newValue) {\n        var rangeCheckedNewValue = newValue > this.props.maxValue ? this.props.maxValue : newValue < this.props.minValue ? this.props.minValue : newValue;\n\n        this.props.applyValue(rangeCheckedNewValue);\n    },\n\n    decrementValue: function(event) {\n        if (event) {\n            event.stopPropagation();\n            event.preventDefault();\n        }\n\n        var increment = this.props.increment || 1;\n        this.applyValue(this.props.value - increment);\n    },\n\n    incrementValue: function(event) {\n        if (event) {\n            event.stopPropagation();\n            event.preventDefault();\n        }\n\n        var increment = this.props.increment || 1;\n        this.applyValue(this.props.value + increment);\n    },\n\n    setValue: function(event) {\n        if (event) {\n            event.stopPropagation();\n            event.preventDefault();\n        }\n\n        this.applyValue(event.target.value);\n    }\n});\n\nmodule.exports = Spinner;\n","'use strict';\n\nmodule.exports = {\n    PRODUCTLINE_FAS : 'FAS',\n    PRODUCTLINE_PERF : 'Performance',\n    PRODUCTLINE_FLASH : 'Enterprise All-Flash',\n    PRODUCTLINE_SUBTYPE_CDOT : 'c-mode',\n    PRODUCTLINE_SUBTYPE_7MODE : '7-mode',\n    PRODUCTLINE_SUBTYPE_MCC : 'MCC',\n    PRODUCTLINE_SUBTYPE_MC : 'MetroCluster',\n\n    UI_SELECT_ADD_CHANGE_SYSTEMS : 'ProductConfigs',\n    UI_SELECT_ADD_CHANGE_SHELF_DRIVE_LIST : 'ShelfList',\n    UI_SELECT_ADD_CHANGE_AGGREGATE : 'AggregateBuilder'\n};\n","'use strict';\n\nvar React = require('react');\n\nvar DEFAULT_TITLE = 'drive counts and total raw capacity by type';\n\nvar DriveEntry = React.createClass({\n    render: function () {\n        var p = this.props,\n            glyphClass = 'fa fa-fw fa-' + p.glyph,\n            tlist,\n            cap,\n            rounded,\n            mainClass,\n            dclassCSS = p.dclassCSS;\n\n        if (p.rawtb) {\n            cap = Math.round(p.rawtb);\n            rounded = Math.abs(p.rawtb - cap) > 0.01 && cap < 1000;\n            cap = rounded ? '~' + cap : cap;\n        } else {\n            cap = '';\n            rounded = '';\n        }\n\n        if (p.count) {\n            tlist = [ p.count, p.dclass, 'drives;', p.rawtb, 'TB total' ];\n        } else {\n            tlist = [ 'No', p.dclass, 'drives' ];\n        }\n\n        function mir(className) {\n            // mute if required\n            return p.count ? className : className + ' text-mute';\n        }\n\n        function iir(className) {\n            // invisible if required\n            var invis = className + ' hide';\n            if (p.hideCapacity || p.count === 0) {\n                return invis;\n            } else {\n                return className;\n            }\n        }\n\n        // TODO: round thousands; output in bold\n\n        if (p.hideIfZero && !p.count) {\n            mainClass = 'drive-summary-block no-overflow hide';\n        } else {\n            mainClass = 'drive-summary-block no-overflow';\n        }\n        mainClass = mainClass + ' ' + dclassCSS;\n\n        return (\n            <div className={ mainClass } title={ tlist.join(' ') }>\n                <span className={ mir('drive-count') }>{p.count || 0}</span>\n                <span className={ glyphClass }></span>\n                <span className={ mir('drive-label') }>{ p.dclass }</span>\n                <span className={ iir('drive-rawtb') }>{ cap }</span>\n                <span className={ iir('text-mute') }>TB</span>\n            </div>\n        );\n    },\n});\n\nvar DriveSummary = React.createClass({\n    propTypes: {\n        hideCapacity: React.PropTypes.bool\n    },\n\n    render: function() {\n        var count = this.props.drives.count,\n        rawtb = this.props.drives.rawtb;\n//console.log('DriveSummary',count,rawtb);\n        return (\n            <div className={ this.props.className }\n                 title= { this.props.title || DEFAULT_TITLE }>\n                <DriveEntry hideIfZero={ this.props.hideIfZero }\n                            hideCapacity={ this.props.hideCapacity }\n                            dclass=\"Solid-State Drive\"\n                            glyph=\"hdd-o\"\n                            dclassCSS=\"drive-ssd\"\n                            count={ count.SSD }\n                            rawtb={ rawtb.SSD } />\n                <DriveEntry hideIfZero={ this.props.hideIfZero }\n                            hideCapacity={ this.props.hideCapacity }\n                            dclass=\"Performance HDD\"\n                            glyph=\"hdd-o\"\n                            dclassCSS=\"drive-performance\"\n                            count={ count.performance }\n                            rawtb={ rawtb.performance } />\n                <DriveEntry hideIfZero={ this.props.hideIfZero }\n                            hideCapacity={ this.props.hideCapacity }\n                            dclass=\"Capacity HDD\"\n                            glyph=\"hdd-o\"\n                            dclassCSS=\"drive-capacity\"\n                            count={ count.capacity }\n                            rawtb={ rawtb.capacity } />\n            </div>\n        );\n    },\n});\n\nmodule.exports = DriveSummary;\n","'use strict';\n\nvar React = require('react'),\n    _ = require('lodash');\n\nvar FAGlyph = React.createClass({\n    propTypes: {\n        name: React.PropTypes.string,\n        title: React.PropTypes.string,\n        extraClasses: React.PropTypes.object,\n        spin: React.PropTypes.bool,\n        hideIfUnnamed: React.PropTypes.bool\n    },\n\n    render: function() {\n        var classes = {\n            'fa': true,\n            'fa-spin': this.props.spin,\n            'fa-fw': true,\n            'hide': this.props.hideIfUnnamed && !this.props.name\n        };\n\n        _.merge(classes, this.props.extraClasses || {});\n        classes['fa-' + this.props.name] = true;\n\n        return (\n            <span title={ this.props.title }\n                  className={ React.addons.classSet(classes) }></span>\n        );\n    }\n});\n\nmodule.exports = FAGlyph;","'use strict';\n// jshint laxbreak: true\n\nvar assert = require('assert'),\n    React = require('react'),\n    classSet = React.addons.classSet,\n    Button = require('./button'),\n    Repeat = require('./repeat'),\n    FAGlyph = require('./faglyph'),\n    RaidTypes = require('../../lib/model/aggregates/raid-types'),\n    toggles = require('../../lib/feature-toggles'),\n    _ = require('lodash');\n\nvar MAX_SLICE_WIDTH_DEVICES = 28,\n    MIN_SLICE_WIDTH_DEVICES = 2;\n\nvar AGGREGATE_EDITING_PROPS = {\n        aggregate: React.PropTypes.object.isRequired,\n        fire: React.PropTypes.func.isRequired,\n        hagi: React.PropTypes.object.isRequired,\n        log: React.PropTypes.func.isRequired,\n    };\n\nvar AggregateFlashPoolEditor = React.createClass({\n    propTypes: AGGREGATE_EDITING_PROPS,\n\n    render: function() {\n        var aggregate = this.props.aggregate;\n\n        // HA group wide devices:\n        var devices = this.props.hagi.allPhysicalDevices(),\n            qualifiedSSDsPresent = _(devices)\n                .map('spec')\n                .where({ fp_support: true })\n                .where({ type: 'SSD' })\n                .any();\n\n        // devices in the aggregate:\n        var aggregateSpecs = _(aggregate._raid_groups)\n                .map('__deviceSpecs')\n                .flatten()\n                .where('count')\n                .map('spec')\n                .value(),\n            aggregateHDD = _.filter(aggregateSpecs, isHDD),\n            aggregateUnqual = _.where(aggregateHDD, { fp_support: false });\n\n        if (_.all(aggregateSpecs, isSSD)) {\n            return (\n                <AggregateFlashPoolEditorDisabled { ... this.props }>\n                    <p>\n                        Flash Pool&#x2122; is not required on all-SSD\n                        aggregates.\n                    </p>\n                </AggregateFlashPoolEditorDisabled>\n            );\n\n        } else if (_.any(aggregateUnqual)) {\n            var rawSizes = _.map(aggregateUnqual, rawGB);\n\n             return (\n               <AggregateFlashPoolEditorDisabled { ... this.props }>\n                    <p>\n                        The { oxford(rawSizes) } drives in this\n                        aggregate are not supported for Flash Pool&#x2122;.\n                        Please select storage showing the flash symbol:\n                        <FAGlyph name=\"flash\" title=\"Supports Flash Pool\" />\n                    </p>\n                </AggregateFlashPoolEditorDisabled>\n            );\n\n        } else if (!qualifiedSSDsPresent) {\n             return (\n               <AggregateFlashPoolEditorDisabled { ... this.props }>\n                    <p>\n                        None of the shelves in this system contain SSD\n                        supported for Flash Pool&#x2122;. Please select\n                        storage showing the flash symbol:\n                        <FAGlyph name=\"flash\" title=\"Supports Flash Pool\" />\n                    </p>\n                </AggregateFlashPoolEditorDisabled>\n            );\n\n        } else {\n            return (\n                <AggregateFlashPoolEditorEnabled { ...this.props } />\n            );\n        }\n    }\n});\n\nfunction isSSD(spec) {\n    return spec.type === 'SSD';\n}\n\nfunction isHDD(spec) {\n    return spec.type !== 'SSD';\n}\n\nfunction rawGB(spec) {\n    return spec.rawgb + 'GB';\n}\n\nfunction oxford(strings) {\n    assert(strings instanceof Array, '81f97cd7');\n    assert.notEqual(strings.length, 0, '5e008ca5');\n\n    if (strings.length === 1) {\n        return strings;\n    } else {\n        strings = _.clone(strings);\n        var last = strings.pop();\n        return [ strings.join(', '), last ].join(' and ');\n    }\n}\n\nvar AggregateFlashPoolEditorDisabled = React.createClass({\n    propTypes: {\n        children: React.PropTypes.element.isRequired\n    },\n\n    render: function() {\n        return (\n            <div id=\"fp-editor\">\n                <div className=\"row-list-item-option-header\">\n                    Flash Pools\n                </div>\n                <SingleCellOrganism>\n                    { this.props.children }\n                </SingleCellOrganism>\n                <FlashPools\n                    warnIfNone={ false }\n                    { ... this.props } />\n            </div>\n        );\n    }\n});\n\nvar AggregateFlashPoolEditorEnabled = React.createClass({\n    propTypes: {\n        aggregate: React.PropTypes.object.isRequired,\n        fire: React.PropTypes.func.isRequired,\n        hagi: React.PropTypes.object.isRequired,\n        log: React.PropTypes.func.isRequired,\n    },\n\n    getInitialState: function() {\n        return {\n            adding: false,\n        };\n    },\n\n    render: function() {\n        var addClassName = classSet({\n                'option-header-link': true,\n                'disabled': !this._canAdd(),\n            }),\n            addText = this.state.adding\n                ? 'Cancel'\n                : 'Add Storage Pool';\n\n        return (\n            <div id=\"fp-editor\">\n                <NewPoolDriveSelector\n                    isOpen={ this.state.adding }\n                    cancel={ this._close }\n                    fire={ hook(this.props.fire, this._close) }\n                    { ... _.omit(this.props, 'fire') } />\n                <div className=\"row-list-item-option-header\">\n                    Flash Pools\n                    { this.state.adding ? null : (\n                    <a className={ addClassName }\n                       href=\"#\"\n                       onClick={ this._toggle }>\n                       { addText }\n                    </a>\n                    ) }\n                </div>\n                <FlashPools\n                    warnIfNone={ true }\n                    { ... this.props } />\n            </div>\n        );\n    },\n\n    _canAdd: function() {\n        // TODO: also checkthe guard to see whether or not\n        // it should be allowed.\n        return toggles.FEATURE_FP_MANUAL_ENABLED;\n    },\n\n    _toggle: function (event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        if (this._canAdd()) {\n            this.setState({ adding: !this.state.adding });\n        }\n    },\n\n    _close: function() {\n        this.setState({ adding: false });\n    },\n});\n\nfunction hook(hookedFn, hookFn) {\n    // jshint -W040\n    return function hooked() {\n        try {\n            hookFn.apply(this, arguments);\n        } catch (err) {\n            try {\n                console.error('hookFn', hookFn.name, 'failed:', err);\n            } catch (err2) {\n                // can't even whine? no worries\n            }\n        }\n        return hookedFn.apply(this, arguments);\n    };\n}\n\nvar NewPoolDriveSelector = React.createClass({\n    propTypes: _.merge({\n        cancel: React.PropTypes.func.isRequired,\n        isOpen: React.PropTypes.bool,\n    }, AGGREGATE_EDITING_PROPS),\n\n    _findAvailableFlashPoolDeviceSpecs: function () {\n        var hagi = this.props.hagi,\n            all = hagi.allPhysicalDevices(),\n            available = hagi.unlockedPhysicalDevices(),\n            allFpSSD = _.filter(all, isFpSSD),\n            availFpSSD = _.filter(available, isFpSSD);\n\n        this.props.log.debug('NewPoolDriveSelector', {\n            all: allFpSSD,\n            available: availFpSSD\n        });\n\n        return availFpSSD;\n    },\n\n    _cancel: function (event) {\n        event.stopPropagation();\n        event.preventDefault();\n        this.props.cancel();\n    },\n\n    render: function() {\n        if (!this.props.isOpen) {\n            return null;\n        }\n\n        var flashPoolDeviceSpecs = this._findAvailableFlashPoolDeviceSpecs();\n\n        return (\n            <div>\n                <div className=\"row-list-item-option-header\">\n                    New Flash Pool\n                    <a className=\"option-header-link\"\n                       href=\"#\"\n                       onClick={ this._cancel }>\n                       Cancel\n                    </a>\n                </div>\n                <div className=\"row-list-item\">\n                    <div className=\"fp-drive-choice\">\n                        <table>\n                            <thead>\n                                <tr className=\"row-list-item\">\n                                    <th className=\"row-list-cell right\">Size</th>\n                                    <th className=\"row-list-cell right\">Count</th>\n                                    <th className=\"row-list-cell right\">\n                                        Available<sup>&nbsp;*</sup> \n                                    </th>\n                                </tr>\n                            </thead>\n                            <Repeat type=\"tableRow\" seq={ flashPoolDeviceSpecs } prop=\"deviceSpec\">\n                                <FlashPoolDriveRow\n                                    // deviceSpec={ /* comes from Repeat */ }\n                                    { ... this.props }  />\n                            </Repeat>\n                            <tfoot>\n                                <tr className=\"row-list-item no-border\">\n                                    <td className=\"row-list-cell\" colSpan=\"3\">\n                                        <p className=\"fp-foot\">\n                                            <span className=\"fp-foot-hang-left\">*</span>\n                                            SSDs used by an auto-filled aggregate\n                                            are considered available.\n                                        </p>\n                                    </td>\n                                </tr>\n                            </tfoot>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n});\n\nfunction isFpSSD(ds) {\n    return ds.spec.fp_support && ds.spec.type === 'SSD';\n}\n\nvar FlashPoolDriveRow = React.createClass({\n    propTypes: _.merge({\n        deviceSpec: React.PropTypes.object.isRequired\n    }, AGGREGATE_EDITING_PROPS),\n\n    _addStoragePool: function (event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        var deviceCount = this.props.deviceSpec.devices.length,\n            poolDeviceCount = Math.min(deviceCount - 1, MAX_SLICE_WIDTH_DEVICES),\n            raidType = poolDeviceCount > 2\n                ? new RaidTypes().RAID_DP\n                : new RaidTypes().RAID_4;\n\n        this.props.fire(\n            'PROJECT_FP_ADD_POOL',\n            this.props.aggregate._controller,\n            this.props.deviceSpec.spec,\n            raidType,\n            poolDeviceCount);\n    },\n\n    render: function() {\n        var deviceCount = this.props.deviceSpec.devices.length,\n            rowClasses = {\n                'row-list-item': true,\n                selectable: deviceCount >= 3,\n            };\n\n        return(\n            <tr className={ classSet(rowClasses) } onClick={ this._addStoragePool }>\n                <td className=\"row-list-cell right\">\n                    {  this.props.deviceSpec.spec.rawgb + 'GB ' + this.props.deviceSpec.spec.type }\n                </td>\n                <td className=\"row-list-cell right\">\n                    { deviceCount }\n                </td>\n                <td className=\"row-list-cell right\">\n                    { deviceCount }\n                </td>\n            </tr>\n        );\n    }\n});\n\nvar FlashPools = React.createClass({\n    propTypes: _.merge({\n        warnIfNone: React.PropTypes.bool\n    }, AGGREGATE_EDITING_PROPS),\n\n    render: function() {\n        var pools = _(this.props.hagi.hagroup.controllers)\n                .where('storage_pools')\n                .flatten('storage_pools')\n                .value(),\n            olds = _(this.props.hagi.hagroup.controllers)\n                .map('aggregates').filter().flatten()\n                .map('_raid_groups').filter().flatten()\n                .where({ cache: true })\n                .where(function noVirtuals(rg) {\n                    var firstSpec = rg.__deviceSpecs[0].spec,\n                        sliced = firstSpec._slice_name || firstSpec.slice;\n                    return !sliced;\n                })\n                .value(),\n            all = pools.concat(olds);\n\n        this.props.log.debug('FlashPools.render', {\n            pools: pools,\n            olds: olds,\n            all: all,\n        });\n\n        if (all.length) {\n            return(\n                <Repeat id=\"fp-existing-pools\" seq={ all } key={ getId } prop=\"item\">\n                    <AppropriateRow { ... this.props } />\n                </Repeat>\n            );\n        } else if (this.props.warnIfNone) {\n            return(\n                <SingleCellOrganism>\n                    <p>There are no Flash Pool&#x2122; aggregates or\n                    storage pools on this system.</p>\n                </SingleCellOrganism>\n            );\n        } else {\n            return null;\n        }\n    }\n});\n\nfunction getId(ob) {\n    return ob._id;\n}\n\nvar AllocationUnit = React.createClass({\n    propTypes: _.merge({\n        allocation: React.PropTypes.object.isRequired,\n    }, AGGREGATE_EDITING_PROPS),\n\n    _getAggregateName: function (id) {\n        if (!id) {\n            return 'unclaimed';\n        }\n\n        try {\n            var inspector = this.props.hagi.inspect({\n                _type: 'aggregate',\n                _id: id,\n            });\n            return inspector.aggregate.name;\n        } catch (err) {\n            this.props.log([ 'fp', 'aggregate-find' ], {\n                err: err,\n                id: id,\n            });\n            return '?';\n        }\n    },\n\n    render: function() {\n        var ownerId = this.props.allocation.aggr_id,\n            ownerName = this._getAggregateName(ownerId),\n            claimed = !!ownerId,\n            mine = ownerId === this.props.aggregate._id,\n            manual = this.props.aggregate._manual;\n\n        var sliceCSS = React.addons.classSet({\n                'fp-allocation-slice-claimed-manual': claimed && manual,\n                'fp-allocation-slice-claimed-unclaimed': !claimed,\n                'fp-allocation-slice-claimed-current': mine,\n                'fp-allocation-slice-claimed-auto': claimed && !manual,\n                'fp-allocation-slice': true,\n            });\n\n        return (\n            <div className={ sliceCSS }>\n                <span className=\"inner\">{ ownerName }</span>\n            </div>\n        );\n    }\n});\n\nvar AllocationClaimer = React.createClass({\n    propTypes: _.merge({\n        allocations: React.PropTypes.array.isRequired,\n        isSliced: React.PropTypes.bool.isRequired,\n    }, AGGREGATE_EDITING_PROPS),\n\n    render: function() {\n        var blockCSS = 'fp-allocation-block',\n            allocationSlices,\n            _props = _.pick(this.props, _.keys(AGGREGATE_EDITING_PROPS));\n\n        if (this.props.isSliced) {\n            allocationSlices = (\n                <Repeat\n                    seq={ this.props.allocations }\n                    prop={ 'allocation' }>\n                    <AllocationUnit { ... _props } />\n                </Repeat>\n            );\n        } else {\n            // TODO: old style FP doesn't involve \"unsliced\" pools, so\n            // this doesn't make much sense.\n            allocationSlices = (\n                <div className='fp-allocation-unsliced'>\n                    <p>?</p>\n                </div>\n            );\n        }\n\n        return (\n            <div className={ blockCSS }>\n                { allocationSlices }\n            </div>\n        );\n    }\n});\n\nvar PoolAdjuster = React.createClass({\n    propTypes: _.merge({\n        item: React.PropTypes.object.isRequired,\n        canExpand: React.PropTypes.func.isRequired,\n        canShrink: React.PropTypes.func.isRequired,\n        expand: React.PropTypes.func.isRequired,\n        shrink: React.PropTypes.func.isRequired,\n    }, AGGREGATE_EDITING_PROPS),\n\n    render: function() {\n        var item = this.props.item,\n            driveSpec = item.__deviceSpecs[0].spec,\n            driveRepr = driveSpec.rawgb + 'GB ' + driveSpec.type,\n            canExpand = this.props.canExpand(),\n            canShrink = this.props.canShrink(),\n            expand = canExpand ? this.props._expand : this._noop,\n            shrink = canShrink ? this.props._shrink : this._noop,\n            isSlicedCSS = React.addons.classSet({\n                // TODO: cater for normal RAID groups\n                'fa': true,\n                'fa-fw': true,\n                'fa-toggle-on': true,\n            }),\n            slicedBlock = null;\n\n        if (item._type === 'storage_pool') {\n            slicedBlock = (\n                <div className=\"fp-allocation-option\">\n                    <span className=\"option-title\">Partitioned&nbsp;</span>\n                    <span className={ isSlicedCSS }></span>\n                </div>\n            );\n        }\n\n        return (\n            <div className=\"fp-allocation-options\">\n                <Button\n                    onClick={ shrink }\n                    faglyph=\"minus\"\n                    extraClasses={{\n                        'btn-default': true,\n                        'no-border': true,\n                        'no-pad-right': true,\n                        'disabled': !canShrink,\n                    }} />\n                <input\n                    type=\"text\"\n                    value={ item._devices.length }\n                    readOnly=\"true\"\n                    className=\"input-count\"/>\n                <Button\n                    onClick={ expand }\n                    faglyph=\"plus\"\n                    extraClasses={{\n                        'btn-default': true,\n                        'no-border': true,\n                        'no-pad-left': true,\n                        'disabled': !canExpand,\n                    }} />\n                <div className=\"fp-allocation-option\">\n                    { driveRepr }\n                </div>\n                { slicedBlock }\n            </div>\n        );\n    },\n\n    _noop: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n    },\n\n    _shrink: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n        this.props.shrink();\n    },\n\n    _expand: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n        this.props.expand();\n    },\n});\n\nvar PoolDeleter = React.createClass({\n    propTypes: _.merge({\n        allocationType: React.PropTypes.string.isRequired,\n        deleteMe: React.PropTypes.func.isRequired\n    }, AGGREGATE_EDITING_PROPS),\n\n    render: function() {\n        if (this.props.allocationType === 'manual') {\n            return (\n                <div className=\"fp-allocation-remove-block\">\n                    <Button\n                        onClick={ this._deletePool }\n                        faglyph=\"trash\"\n                        extraClasses={{\n                            'btn-default': true,\n                            'no-border': true,\n                            'no-pad-left': true,\n                            'no-pad-right': true\n                        }} />\n                </div>\n            );\n        } else {\n            return (\n                <div className=\"fp-allocation-remove-block\" />\n            );\n        }\n    },\n\n    _deletePool: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n        this.props.deleteMe();\n    },\n});\n\nvar AppropriateRow = React.createClass({\n    propTypes: _.merge({\n        item: React.PropTypes.object.isRequired,\n    }, AGGREGATE_EDITING_PROPS),\n\n    render: function() {\n        var item = this.props.item,\n            props = _.omit(this.props, 'item');\n\n        switch (item._type) {\n            case 'storage_pool':\n                return (\n                    <PoolRow pool={ item } { ... props } />\n                );\n            case 'raidgroup':\n                return (\n                    <RaidGroupRow raidGroup={ item } { ... props } />\n                );\n            default:\n                this.props.log.debug('missing _type; bad raid group?');\n                return null;\n        }\n    }\n});\n\nvar RaidGroupRow = React.createClass({\n    propTypes: _.merge({\n        raidGroup: React.PropTypes.object.isRequired,\n    }, AGGREGATE_EDITING_PROPS),\n\n    render: function() {\n        var raidGroup = this.props.raidGroup,\n            insp = this.props.hagi.inspect(raidGroup),\n            aggregate = insp.aggregate,\n            manual = aggregate._manual,\n            allocationType = manual ? 'manual': 'auto',\n            mine = aggregate._id === this.props.aggregate._id,\n            sliceCSS = classSet({\n                'fp-allocation-unsliced': true,\n                'fp-allocation-slice-claimed-manual': manual,\n                'fp-allocation-slice-claimed-current': mine,\n                'fp-allocation-slice-claimed-auto': !manual,\n                'fp-allocation-slice': true,\n            });\n\n        return (\n            <div className=\"row-list-item fp-allocation-row\">\n                <PoolDeleter\n                    allocationType={ allocationType }\n                    deleteMe={ this._deleteMe }\n                    { ... this.props } />\n                <div className=\"fp-allocation-block\">\n                    <div className={sliceCSS}>\n                        <span className=\"inner\">{ aggregate.name }</span>\n                    </div>\n                </div>\n                <PoolAdjuster\n                    item={ this.props.raidGroup }\n                    canExpand={ this._canExpand }\n                    canShrink={ this._canShrink }\n                    expand = { this._expand }\n                    shrink = { this._shrink }\n                    { ... this.props } />\n            </div>\n        );\n    },\n\n    _deleteMe: function() {\n        this.props.fire('PROJECT_FP_DEL_AGGR_RG', this.props.raidGroup._id);\n    },\n\n    _canExpand: function() {\n        return toggles.FEATURE_FP_MANUAL_ENABLED\n            && this.props.pool._devices.length < MAX_SLICE_WIDTH_DEVICES\n            && this._anyMoreOfTheseDrivesAvailable();\n    },\n\n    _canShrink: function() {\n        return toggles.FEATURE_FP_MANUAL_ENABLED\n            && false; // button ripped off\n    },\n\n    _anyMoreOfTheseDrivesAvailable: function() {\n        // this.props.hagi -> Do we have room to improve?\n        // TODO: Expand isn't implemented in the API, so we are saying NO you cannot.\n\n        return false;\n    },\n\n    _expand: function() {\n        if (!this._canExpand()) {\n            return;\n        }\n        this.props.log.error('expanding FP raid groups not implemented');\n        return;\n    },\n\n    _shrink: function() {\n        if (!this._canShrink()) {\n            return;\n        }\n        this.props.log.error('shrinking FP raid groups not implemented');\n        return;\n    },\n});\n\nvar PoolRow = React.createClass({\n    propTypes: _.merge({\n        pool: React.PropTypes.object.isRequired,\n    }, AGGREGATE_EDITING_PROPS),\n\n    render: function() {\n        var pool = this.props.pool,\n            allocationType = pool._manual === false ? 'auto' : 'manual',\n            isSliced = true;\n\n        this.props.log.debug('PoolRow: this.props.pool', this.props.pool);\n\n        return (\n            <div className=\"row-list-item fp-allocation-row\">\n                <PoolDeleter\n                    allocationType={ allocationType }\n                    deleteMe={ this._deleteMe }\n                    { ... this.props } />\n                <AllocationClaimer\n                    isSliced={ isSliced }\n                    allocations={ pool._allocations }\n                    { ... this.props } />\n                <PoolAdjuster\n                    item={ this.props.pool }\n                    canExpand={ this._canExpand }\n                    canShrink={ this._canShrink }\n                    expand={ this._expand }\n                    shrink={ this._shrink }\n                    { ... this.props } />\n            </div>\n        );\n    },\n\n    _deleteMe: function() {\n        this.props.fire('PROJECT_FP_DEL_POOL', this.props.pool._id);\n    },\n\n    _canExpand: function() {\n        return toggles.FEATURE_FP_MANUAL_ENABLED\n            && this.props.pool._devices.length < MAX_SLICE_WIDTH_DEVICES\n            && this._anyMoreOfTheseDrivesAvailable();\n    },\n\n    _canShrink: function() {\n        return toggles.FEATURE_FP_MANUAL_ENABLED\n            && false; // button ripped off\n    },\n\n    _anyMoreOfTheseDrivesAvailable: function() {\n        // this.props.hagi -> Do we have room to improve?\n        // TODO: Expand isn't implemented in the API, so we are saying NO you cannot.\n\n        return false;\n    },\n\n    _expand: function() {\n        if (!this._canExpand()) {\n            return;\n        }\n\n        var pool = this.props.pool,\n            poolWidth = pool._devices.length,\n            newPoolWidth = poolWidth + 1;\n\n        assert(newPoolWidth <= MAX_SLICE_WIDTH_DEVICES, 'You cannot expand the pool above threshold');\n\n        this.props.fire('PROJECT_FP_RESIZE_POOL', pool._id, newPoolWidth);\n    },\n\n    _shrink: function() {\n        if (!this._canShrink()) {\n            return;\n        }\n\n        var pool = this.props.pool,\n            poolWidth = pool._devices.length,\n            newPoolWidth = poolWidth - 1;\n\n        assert(newPoolWidth >= MIN_SLICE_WIDTH_DEVICES, 'You cannot shrink the pool below threshold');\n\n        this.props.fire('PROJECT_FP_RESIZE_POOL', pool._id, newPoolWidth);\n    },\n});\n\nvar SingleCellOrganism = React.createClass({\n    propTypes: {\n        children: React.PropTypes.element.isRequired\n    },\n\n    render: function () {\n        return (\n                <div className=\"row-list-item\">\n                    <div className=\"row-list-cell\">\n                        { this.props.children }\n                    </div>\n                </div>\n        );\n    }\n});\n\nmodule.exports = AggregateFlashPoolEditor;\n","'use strict';\n\nvar React = require('react');\n\nvar Footer = React.createClass({\n    render: function() {\n        return (\n            <div id=\"footer\">\n                <div className=\"container-fluid\">\n                    <p>\n                        <strong>PRE-ALPHA. IN EARLY DEVELOPMENT. </strong>\n                        Contacts: Changjie Sun, Mark Sibert, Garth Kidd.\n                    </p>\n                </div>\n            </div>\n        );\n    },\n});\n\nmodule.exports = Footer;\n","'use strict';\n\nvar React = require('react'),\n    _ = require('lodash');\n\nvar Glyph = React.createClass({\n    propTypes: {\n        name: React.PropTypes.string,\n        title: React.PropTypes.string,\n        extraClasses: React.PropTypes.object,\n        spin: React.PropTypes.bool\n    },\n\n    render: function() {\n        var classes = {\n            'glyphicon': true,\n            'spin': this.props.spin\n        };\n\n        _.merge(classes, this.props.extraClasses || {});\n        classes['glyphicon-' + this.props.name] = true;\n\n        return (\n            <span title={ this.props.title }\n                  className={ React.addons.classSet(classes) }></span>\n        );\n    }\n});\n\nmodule.exports = Glyph;","'use strict';\n\nvar _ = require('lodash'),\n    React = require('react'),\n    Column = require('./layout/column'),\n    AggregateEditor = require('./aggregate-editor'),\n    ClusterDetails = require('./cluster-details'),\n    InstallationList = require('./installation-list'),\n    Placeholder = require('./placeholder'),\n    ProductConfigs = require('./product-configs'),\n    ProductLines = require('./product-lines'),\n    Reports = require('./reports'),\n    ShelfList = require('./shelf-list'),\n    SystemOverview = require('./system-overview'),\n    VersionList = require('./version-list'),\n    usual = require('../usual-props'),\n    cnst = require('./constants'),\n    _ = require('lodash');\n\nvar Hardware = React.createClass({\n    propTypes: _.defaults({\n        projectId: React.PropTypes.string.isRequired,\n        selected: React.PropTypes.object.isRequired,\n        productInfo: React.PropTypes.object.isRequired,\n        userPreferences: React.PropTypes.object.isRequired,\n    }, usual.isRequired),\n\n    componentDidMount: function() {\n        window.addEventListener('keyup', this.handleKeyUp);\n    },\n\n    componentWillUnmount: function(){\n        window.removeEventListener('keyup', this.handleKeyUp);\n    },\n\n    handleKeyUp: function(event) {\n        if (event.which === 27) { // Escape\n            this.closeCol3(event);\n        }\n    },\n\n    closeCol3: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        var currentSelector = this.props.selected.selector,\n            selector = _.pick(currentSelector, ['installation', 'cluster', 'hagroup']),\n            col2View = this.props.selected.col2View;\n\n        this.props.fire('HARDWARE_SELECT', this.props.projectId, selector, col2View, null);\n    },\n\n    resolveCol2Selection: function() {\n        var currentSelector = this.props.selected.selector;\n        var selector = _.pick(currentSelector, ['installation', 'cluster', 'hagroup']);\n        var selection = this.props.map.resolveSelection(selector);\n\n        return selection.length ? selection : null;\n    },\n\n    resolveCol3Selection: function() {\n        var selection = this.props.map.resolveSelection(this.props.selected.selector);\n\n        return selection.length ? selection : null;\n    },\n\n    render: function() {\n        var col2Items = this.resolveCol2Selection(),\n            col3Items = this.resolveCol3Selection(),\n            isShowingCol3 = !!(col3Items && this.props.selected.col3View);\n\n        var col3View = _.isEmpty(col3Items) ? null : this.props.selected.col3View;\n\n        return (\n            <div id=\"hardware-view\">\n                <Column\n                    expanded={ true }\n                    lightTheme={ true }\n                    expandedWidth=\"2\"\n                    collapsedWidth=\"2\"\n                    zIndex={ 3 }>\n                    <InstallationList\n                        installations={ this.props.map.installations }\n                        selected={ this.props.selected }\n                        projectId={ this.props.projectId }\n                        { ... usual(this.props) } />\n                </Column>\n                <Column\n                    expanded={ !isShowingCol3 }\n                    lightTheme={ false }\n                    expandedWidth=\"6\"\n                    collapsedWidth=\"3\"\n                    onClick={ this.closeCol3 }\n                    zIndex={ 2 }>\n                    <DetailsLevel2\n                        items={ col2Items }\n                        selected={ this.props.selected }\n                        projectId={ this.props.projectId }\n                        userPreferences={ this.props.userPreferences }\n                        platformConfig={ this.props.productInfo }\n                        col3View={ col3View }\n                        { ... usual(this.props) } />\n                </Column>\n                <Column\n                    expanded={ isShowingCol3 }\n                    lightTheme={ !isShowingCol3 }\n                    expandedWidth=\"7\"\n                    collapsedWidth=\"4\"\n                    zIndex={ 3 }>\n                    <DetailsLevel3\n                        items={ col3Items }\n                        installations={ this.props.map.installations }\n                        selectedItem={ col2Items }\n                        selected={ this.props.selected }\n                        projectId={ this.props.projectId }\n                        userPreferences = { this.props.userPreferences }\n                        platformConfig={ this.props.productInfo }\n                        closeSelf={ this.closeCol3 }\n                        view={ col3View }\n                        { ... usual(this.props) } />\n                </Column>\n            </div>\n        );\n    }\n});\n\nvar DetailsLevel2 = React.createClass({\n    propTypes: _.defaults({\n        items: React.PropTypes.array.isRequired,\n        selected: React.PropTypes.object.isRequired,\n        projectId: React.PropTypes.string.isRequired,\n        userPreferences: React.PropTypes.object.isRequired,\n        platformConfig: React.PropTypes.object.isRequired,\n        fire: React.PropTypes.func.isRequired,\n        col3View: React.PropTypes.string,\n    }, usual),\n\n    clearSelection: function() {\n        this.props.fire('HARDWARE_CLEAR');\n    },\n\n    selectHardware: function(selector, col3View) {\n        var base = _.pick(this.props.selected.selector, ['installation', 'cluster', 'hagroup']),\n            newSelector = _.merge(_.clone(base), selector),\n            col2View = this.props.selected.col2View;\n\n        var isSameCol3 = col3View && (col3View === this.props.selected.col3View),\n            isSameHardware = _.isEqual(this.props.selected.selector, newSelector);\n\n        col3View = (isSameCol3 && isSameHardware) ? null : col3View;\n        newSelector = col3View ? newSelector : base;\n\n        this.props.fire('HARDWARE_SELECT', this.props.projectId, newSelector, col2View, col3View);\n    },\n\n    selectCol2View: function(col2View) {\n        var selector = this.props.selected.selector,\n            col3View = this.props.selected.col3View;\n\n        this.props.fire('HARDWARE_SELECT', this.props.projectId, selector, col2View, col3View);\n    },\n\n    render: function() {\n        var items = this.props.items,\n            view = _.isEmpty(items) ? null : this.props.selected.col2View;\n\n        console.log('DetailsLevel2 items:', items, 'view:', view);\n\n        // Overly complicated until we take the time to refactor out into seperate components\n        if ((view === 'SystemOverview') || (view === 'Aggregates') || (view === 'Policies')) {\n            return (\n                <SystemOverview\n                    systems={ items }\n                    select={ this.selectHardware }\n                    clearSelection={ this.clearSelection }\n                    selectDetails={ this.props.selected.selector }\n                    userPreferences={ this.props.userPreferences }\n                    col3View={ this.props.col3View }\n                    col2Tab={ view }\n                    selectCol2View={ this.selectCol2View }\n                    { ... usual(this.props) } />\n            );\n        } else if (view === 'ClusterGrouping') {\n            return (\n                <ClusterDetails\n                    cluster={ items[0] }\n                    select={ this.selectHardware }\n                    clearSelection={ this.clearSelection }\n                    col3View={ this.props.col3View }\n                    { ... usual(this.props) } />\n            );\n        } else if (view === 'ProductLines') {\n            return (\n                <ProductLines\n                    installation={ items[0] }\n                    productInfo={ this.props.platformConfig }\n                    select={ this.selectHardware }\n                    clearSelection={ this.clearSelection }\n                    { ... usual(this.props) } />\n            );\n        } else {\n            return (\n                <Placeholder />\n            );\n        }\n    }\n});\n\nvar DetailsLevel3 = React.createClass({\n    propTypes: _.defaults({\n        items: React.PropTypes.array.isRequired,\n        installations: React.PropTypes.array.isRequired,\n        selectedItem: React.PropTypes.array.isRequired,\n        selected: React.PropTypes.object.isRequired,\n        projectId: React.PropTypes.string.isRequired,\n        userPreferences: React.PropTypes.object.isRequired,\n        platformConfig: React.PropTypes.object.isRequired,\n        closeSelf: React.PropTypes.func.isRequired,\n        view: React.PropTypes.string,\n    }, usual),\n\n    render: function () {\n        var items = this.props.items,\n            view = this.props.view;\n\n        console.log('DetailsLevel3 items:', items, 'view:', view);\n\n        if (view === cnst.UI_SELECT_ADD_CHANGE_SHELF_DRIVE_LIST) {\n            return(\n                <ShelfList\n                    selection={ items }\n                    selectedItem={ this.props.selectedItem }\n                    selectDetails={ this.props.selected.selector }\n                    onClose={ this.props.closeSelf }\n                    { ... usual(this.props) } />\n            );\n        } else if (view === cnst.UI_SELECT_ADD_CHANGE_SYSTEMS) {\n            return(\n                <ProductConfigs\n                    selection={ items[0] }\n                    selectDetails={ this.props.selected.selector }\n                    productInfo={ this.props.platformConfig }\n                    projectId={ this.props.projectId }\n                    onClose={ this.props.closeSelf }\n                    { ... usual(this.props) } />\n            );\n        } else if (view === cnst.UI_SELECT_ADD_CHANGE_AGGREGATE) {\n            return (\n                <AggregateEditor\n                    selection={ items }\n                    platformConfig={ this.props.platformConfig }\n                    selectedItem={ this.props.selectedItem }\n                    selected={ this.props.selected }\n                    onClose={ this.props.closeSelf }\n                    userPreferences = { this.props.userPreferences }\n                    installations = { this.props.installations }\n                    { ... usual(this.props) } />\n            );\n        } else if (view === 'VersionList') {\n            return (\n                <VersionList\n                    hagroups={ items }\n                    hardwareSelector={ this.props.selected.selector }\n                    handleClose={ this.props.closeSelf }\n                    { ... usual(this.props) } />\n            );\n        } else {\n            return (\n                <Reports\n                    selectedItem={ this.props.selectedItem }\n                    installations={ this.props.installations }\n                    userPreferences={ this.props.userPreferences }\n                    projectId={ this.props.projectId }\n                    { ... usual(this.props) } />\n            );\n        }\n    },\n});\n\nmodule.exports = Hardware;\n","'use strict';\n\nvar React = require('react'),\n    FAGlyph = require('./faglyph');\n\nvar ShelfDriveGroupSummary = React.createClass({\n    propTypes: {\n        driveGroup: React.PropTypes.object.isRequired,\n        fpSupport: React.PropTypes.bool.isRequired,\n        shelfCount: React.PropTypes.number.isRequired\n    },\n\n    _shortenedCapacityString: function(size) {\n        return size > 999 ? (size/1000) + 'TB' : size + 'GB';\n    },\n\n    _iconForDriveType: function (combo) {\n        switch (combo.type) {\n            case 'SATA': return 'hdd-o';\n            case 'FC': return 'hdd-o';\n            case 'SAS': return 'hdd-o';\n            case 'SSD': return 'hdd-o';\n            case 'MSATA': return 'hdd-o';\n            case 'NL-SAS': return 'hdd-o';\n            default: return 'hdd-o';\n        }\n    },\n\n    _classNameForDriveType: function (combo) {\n        switch (combo.rpm) {\n            case 10: return 'text-blue';\n            case 15: return 'text-green';\n            case 50: return 'text-purple';\n            default: return '';\n        }\n    },\n\n    render: function() {\n        var shelfCount = this.props.shelfCount,\n            d = this.props.driveGroup,\n            encrypted = d.encrypted ? 'key' : '',\n            supportsFlashPool = this.props.fpSupport ? 'flash' : '';\n\n        console.log('DEBUG: shelfDrivesGroup', d);\n        return (\n            <div className=\"drive-summary-block\">\n                <span className=\"drive-count\">{ d.quantity * shelfCount }</span>\n                <span className={ this._classNameForDriveType(d) }><FAGlyph name={ this._iconForDriveType(d) }/></span>\n                <span className=\"drive-label-size\">{ this._shortenedCapacityString(d.rawgb) }\n                    <span className=\"hide-contracted drive-type\">{ d.type }</span>\n                </span>\n                <span className=\"hide-contracted\">\n                    <FAGlyph name={ supportsFlashPool } hideIfUnnamed=\"true\" title=\"Supports Flash Pool\"/>\n                    <FAGlyph name={ encrypted } hideIfUnnamed=\"true\" title=\"Encrypted\"/>\n                </span>\n            </div>\n        );\n    }\n});\n\nmodule.exports = ShelfDriveGroupSummary;\n","'use strict';\n\nvar _ = require('lodash'),\n    React = require('react'),\n    ColumnHeader = require('./layout/column-header'),\n    ActionLink = require('./layout/action-link'),\n    ScrollableRegion = require('./layout/scrollable-region'),\n    Repeat = require('./repeat'),\n    ClusterList = require('./cluster-list'),\n    SystemList = require('./system-list');\n\nvar InstallationList = React.createClass({\n    propTypes: {\n        installations: React.PropTypes.array.isRequired,\n        selected: React.PropTypes.object.isRequired,\n        projectId: React.PropTypes.string.isRequired,\n        fire: React.PropTypes.func.isRequired\n    },\n\n    selectSystems: function(selector, col2View, col3View) {\n        this.props.fire('HARDWARE_SELECT', this.props.projectId, selector, col2View, col3View);\n    },\n\n    addSystem: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        // Current add is designed assuming only one installation - will change with MCC\n        var selector = { installation: { _id: this.props.installations[0]._id } },\n            col2View = 'ProductLines';\n\n        this.selectSystems(selector, col2View);\n    },\n\n    render: function() {\n        return (\n            <div>\n                <ColumnHeader columnTitle=\"Systems\">\n                    <ActionLink\n                        isToggle={ false }\n                        select={ this.addSystem }\n                        selected={ false }\n                        enabled={ true }>\n                        Add\n                    </ActionLink>\n                </ColumnHeader>\n                <ScrollableRegion>\n                    <Repeat seq={ this.props.installations }\n                            prop=\"installation\"\n                            className=\"installations\">\n                        <Installation\n                            currentSelection={ this.props.selected.selector || {} }\n                            select={ this.selectSystems }\n                            fire={ this.props.fire } />\n                    </Repeat>\n                </ScrollableRegion>\n            </div>\n        );\n    },\n});\n\nvar Installation = React.createClass({\n    propTypes: {\n        installation: React.PropTypes.object.isRequired,\n        currentSelection: React.PropTypes.object.isRequired,\n        select: React.PropTypes.func.isRequired,\n        fire: React.PropTypes.func.isRequired\n    },\n\n    selectInstallation: function(selector, col2View, col3View) {\n        var parent = { installation: { _id: this.props.installation._id } };\n        this.props.select(_.merge(parent, selector), col2View, col3View);\n    },\n\n    render: function() {\n        return (\n            <div className=\"installation\">\n                <span className=\"group-type-label\">Clusters</span>\n                <ClusterList\n                    clusters={ this.props.installation.clusters }\n                    currentSelection={ this.props.currentSelection }\n                    select={ this.selectInstallation }\n                    fire={ this.props.fire } />\n                <span className=\"group-type-label\">Non-Clusters</span>\n                <SystemList\n                    hagroups={ this.props.installation.hagroups }\n                    isStandAlone={ true }\n                    currentSelection={ this.props.currentSelection }\n                    select={ this.selectInstallation } />\n            </div>\n        );\n    }\n});\n\nmodule.exports = InstallationList;\n","'use strict';\n\nvar React = require('react');\n\nvar ActionLink = React.createClass({\n    propTypes: {\n        isToggle: React.PropTypes.bool.isRequired,\n        select: React.PropTypes.func.isRequired,\n        selected: React.PropTypes.bool.isRequired,\n        enabled: React.PropTypes.bool.isRequired,\n    },\n\n    render: function() {\n        var classNames = React.addons.classSet({\n            'action-link': true,\n            'selected': this.props.selected,\n            'disabled': !this.props.enabled,\n            'toggle': this.props.isToggle,\n            'hide-contracted': this.props.hideContracted,\n        });\n\n        if (this.props.enabled) {\n            return (\n                <span className={ classNames } onClick={ this.props.select }>\n                    { this.props.children }\n                </span>\n            );\n        } else {\n            return (\n                <span className={ classNames }>\n                    { this.props.children }\n                </span>\n            );\n        }\n    }\n});\n\nmodule.exports = ActionLink;","'use strict';\n\nvar React = require('react');\n\nvar ColumnHeader = React.createClass({\n    propTypes: {\n        columnTitle: React.PropTypes.string,\n    },\n\n    render: function() {\n        return (\n            <div className=\"column-header\">\n                <h1>{ this.props.columnTitle }</h1>\n                <div className=\"action-links\">\n                    { this.props.children }\n                </div>\n            </div>\n        );\n    }\n});\n\nmodule.exports = ColumnHeader;","'use strict';\n\nvar React = require('react');\n\nvar Column = React.createClass({\n    propTypes: {\n        expanded: React.PropTypes.bool,\n        expandedWidth: React.PropTypes.string,\n        collapsedWidth: React.PropTypes.string,\n        lightTheme: React.PropTypes.bool,\n        onClick: React.PropTypes.func,\n        zIndex: React.PropTypes.number,\n    },\n\n    render: function() {\n        var expandedClass = 'col-xs-' + this.props.expandedWidth,\n            collapsedClass = 'col-xs-' + this.props.collapsedWidth,\n            classes = {\n                'column': true,\n                'contracted-view': !this.props.expanded,\n                'expanded-view': this.props.expanded,\n                'column-light': this.props.lightTheme,\n            };\n\n            if (this.props.expanded) {\n                classes[expandedClass] = true;\n            } else {\n                classes[collapsedClass] = true;\n            }\n\n        var classNames = React.addons.classSet(classes),\n            styles = {\n                zIndex: this.props.zIndex,\n            };\n\n        return (\n            <div className={ classNames } style={ styles } onClick={ this.props.onClick }>\n                { this.props.children }\n            </div>\n        );\n    }\n});\n\nmodule.exports = Column;","'use strict';\n\nvar React = require('react');\n\nvar ScrollableRegion = React.createClass({\n\tpropTypes: {\n\t\ttop: React.PropTypes.string\n\t},\n\n    render: function() {\n    \tvar styles = {\n    \t\ttop: this.props.top,\n    \t};\n\n        return (\n            <div className=\"scrollable\" style={ styles }>\n                { this.props.children }\n            </div>\n        );\n    }\n});\n\nmodule.exports = ScrollableRegion;","'use strict';\n\nvar React = require('react'),\n    Version = require('../../version'),\n    Link = require('react-router').Link;\n\nvar Masthead = React.createClass({\n    propTypes: {\n        title: React.PropTypes.string,\n        store: React.PropTypes.object.isRequired\n    },\n\n    getInitialState: function() {\n        return this.props.store.getState();\n    },\n\n    componentDidMount: function() {\n        this.props.store.watch(this._onChange);\n    },\n\n    componentWillUnmount: function() {\n        this.props.store.unwatch(this._onChange);\n    },\n\n    _onChange: function() {\n        this.setState(this.props.store.getState());\n    },\n\n    _title: function() {\n        if (this.props.title) {\n            return (\n                <span className=\"current\">{ this.props.title }</span>\n            );\n        }\n    },\n\n    render: function() {\n        var BetaStrip = '', UserInfoStrip = '';\n        if (Version.branch === 'master') {\n          BetaStrip = (\n            <div className=\"beta-text\">\n              BETA 3\n            </div>\n          );\n        }\n        if (this.state.firstName !== '') {\n          UserInfoStrip = (\n            <div className=\"user-info\">\n              Welcome, { this.state.firstName }\n            </div>\n          );\n        }\n\n        return (\n            <header id=\"masthead\">\n                <div className=\"logo\">\n                    <img src=\"/media/img/na_logo.png\" alt=\"Logo\" />\n                </div>\n                <div className=\"breadcrumb-nav\">\n                    <Link\n                        title=\"Return to Synergy: My Portfolio\"\n                        to=\"/\"\n                        className=\"home-link\">\n                        Synergy 6\n                    </Link>\n                    { this._title() }\n                </div>\n                { BetaStrip }\n                <div id=\"headerUtilitiesDiv\" className=\"headerUtilities header-nav\">\n                    <ul>\n                      <li><Link\n                              title=\"Return to Synergy: My Portfolio\"\n                              to=\"/\"\n                              className=\"headerButtonIcon\">\n                              <span className=\"fa fa-home fa-fw\"></span>\n                          </Link>\n                      </li>\n                      <li><a id=\"informationSection\" href=\"#\" title=\"Information\" className=\"infoCls headerButtonIcon\">\n                      <span className=\"fa fa-info-circle fa-fw\"></span></a>\n                        <div className=\"headerSubMenu\">\n                          <div className=\"subMenuHeader\"> Information </div>\n                          <ul>\n                            <li><a href=\"https://private-communities.netapp.com/docs/DOC-35424\" target=\"_blank\">Release Notes</a></li>\n                            <li><a href=\"http://www.netapp.com/us/communities/subscriptions.aspx\" target=\"_blank\">Subscription Center</a></li>\n                          </ul>\n                          <div className=\"subMenuHeader\">Quick Links</div>\n                          <ul>\n                            <li><a href=\"https://fieldportal.netapp.com/funded-tools-a-z.aspx\"\n                                        target=\"_blank\">NetApp Funded Technical Tools</a></li>\n                            <li><a href=\"http://synergy5.netapp.com/\"\n                                        target=\"_blank\">Synergy 5</a></li>\n                          </ul>\n                        </div>\n                      </li>\n                      <li><a id=\"communitySection\" href=\"https://communities.netapp.com/community/netapp_partners_network/netapp_tools/synergy\"\n                                            title=\"Community\" className=\"commCls headerButtonIcon\" target=\"_blank\">\n                        <span className=\"fa fa-users fa-fw\"></span></a>\n                        <div className=\"headerSubMenu\">\n                          <ul>\n                            <li><a href=\"https://communities.netapp.com/community/netapp_partners_network/netapp_tools/synergy\" target=\"_blank\">Community</a></li>\n                            <li><a href=\"https://twitter.com/netapptools\" target=\"_blank\">@NetApp Tools</a></li>\n                            <li><a href=\"https://www.surveymonkey.com/s/QP83YWB\" target=\"_blank\">Rate This Tool</a></li>\n                          </ul>\n                        </div>\n                      </li>\n                      <li><a id=\"faqSection\" href=\"#\" className=\"faqCls headerButtonIcon\" title=\"FAQ\">\n                        <span className=\"fa fa-book fa-fw\"></span></a>\n                        <div className=\"headerSubMenu\">\n                          <ul>\n                            <li><a href=\"https://private-communities.netapp.com/docs/DOC-35044\" target=\"_blank\">Synergy 6 FAQ</a></li>\n                            <li><a href=\"#\">User Guide (coming soon)</a></li>\n                          </ul>\n                        </div>\n                      </li>\n                      <li><a id=\"supportSection\" href=\"https://track.netapp.com/Ticket/synergyweb/42\" className=\"contactCls headerButtonIcon\" title=\"Support\" target=\"_blank\">\n                        <span className=\"fa fa-headphones fa-fw\"></span></a>\n                        <div className=\"headerSubMenu\">\n                          <ul>\n                            <li><a href=\"https://track.netapp.com/Ticket/synergyweb/42\" target=\"_blank\">Support</a></li>\n                          </ul>\n                        </div>\n                      </li>\n                    </ul>\n                    { UserInfoStrip }\n                </div>\n            </header>\n        );\n    }\n});\n\nmodule.exports = Masthead;\n","'use strict';\n\nvar React = require('react'),\n    Glyph = require('./glyph');\n\nvar MOTD = React.createClass({\n    propTypes: {\n        stores: React.PropTypes.object.isRequired,\n    },\n\n    getInitialState: function() {\n        return this.props.stores.motd.getState();\n    },\n\n    componentDidMount: function() {\n        this.props.stores.motd.watch(this._onChange);\n    },\n\n    componentWillUnmount: function() {\n        this.props.stores.motd.unwatch(this._onChange);\n    },\n\n    _glyph: function() {\n        if (!this.state.fetching) {\n            return null;\n        }\n\n        return (\n            <Glyph\n                name=\"refresh\"\n                spin={true}\n                extraClasses={{ 'pull-right': true }} />\n        );\n    },\n\n    _content: function() {\n        if (this.state.fetching) {\n            return this._glyph();\n        }\n\n        if (this.state.err) {\n            console.log('MOTD error:', this.state.err.message);\n            return (\n                <div>\n                    <p>\n                        Welcome to the fully redesigned Synergy. Being a BETA, this version will undergo a bit more change prior to GA release.\n                        <br/><br/>\n                        Please explore the tool and provide <a href=\"https://track.netapp.com/Ticket/synergyweb/42\" target=\"_blank\">feedback</a>.\n                        <br/><br/>\n                        Be aware that projects in the BETA version of My Portfolio may or may not transition into the final release.\n                        Click <a href=\"https://private-communities.netapp.com/docs/DOC-35044\" target=\"_blank\">here</a> for more information.\n                    </p>\n                    Known Bugs:\n                    <ul>\n                        <li>Session expires after 1 hour. If Synergy becomes unresponsive, click Refresh to login and reestablish a session.</li>\n                        <li>When \"Automatically fill system with aggregates\" is disabled,  Auto-aggregates are still created when new drives are added.</li>\n                        <li>Shelves/drives are not allowed to be deleted if a manual aggregate is assigned to it. Ideally we should allow user to do that and reassign the aggregate to other free drives.</li>\n                        <li>Firefox browsers yield an Unresponsive script message upon first access. Click the Continue button to access Synergy for full functionality.</li>\n                    </ul>\n                    <p>\n                        Click <a href=\"https://private-communities.netapp.com/docs/DOC-35424\" target=\"_blank\">release notes</a> for more details.\n                    </p>\n                </div>\n            );\n        }\n\n        return (\n            <div>\n                { this.state.content || <p>No news is good news.</p> }\n            </div>\n        );\n    },\n\n    render: function() {\n        return (\n            <div>\n                <strong>Message of the Day</strong>\n                { this._glyph() }<br />\n                { this._content() }\n            </div>\n        );\n    },\n\n    _onChange: function() {\n        this.setState(this.props.stores.motd.getState());\n    }\n});\n\nmodule.exports = MOTD;\n","'use strict';\n\nvar React = require('react'),\n    version = require('../../version');\n\nvar Placeholder = React.createClass({\n\trender: function() {\n        var branch = version.branch,\n            datetime = version.datetime,\n            revision = version.revision.substring(0,12);\n\n        var info = (branch === 'master') ? '' : (datetime + ' ' + branch + ':' + revision);\n\n        return (\n        \t<div className=\"placeholder-pane\">\n                Make a selection to the left to get started.\n                <br/>\n                <span className=\"version-info-text\">{ info }</span>\n            </div>\n        );\n    }\n});\n\nmodule.exports = Placeholder;\n","'use strict';\n\nvar _ = require('lodash'),\n    React = require('react'),\n    ColumnHeader = require('./layout/column-header'),\n    ActionLink = require('./layout/action-link'),\n    ScrollableRegion = require('./layout/scrollable-region'),\n    cnst = require('./constants'),\n    Tooltip = require('./tooltip'),\n    Button = require('./button'),\n    constants = require('../../lib/constants.js');\n\nvar CONFIG_GROUPS = constants.CONFIG_GROUPS;\n\nvar ProductConfigs = React.createClass({\n    propTypes: {\n        selection: React.PropTypes.object.isRequired,\n        selectDetails: React.PropTypes.object.isRequired,\n        fire: React.PropTypes.func.isRequired,\n        productInfo: React.PropTypes.object.isRequired,\n        projectId: React.PropTypes.string.isRequired,\n        onClose: React.PropTypes.func\n    },\n\n    getInitialState: function() {\n        return {\n            showEoa: false,\n            configFilters: {\n                isSellable: true,\n                isHA: true\n            }\n        };\n    },\n\n    componentWillReceiveProps: function(nextProps) {\n        if (!_.isEqual(this.props.selectDetails, nextProps.selectDetails)) {\n            this.setState({\n                showEoa: false,\n                configFilters: {\n                    isSellable: true,\n                    isHA: true\n                }\n            });\n        }\n    },\n\n    componentDidMount: function() {\n        if (this.refs.FilterFasMultiNodeCluster) {\n            this.refs.FilterFasMultiNodeCluster.getDOMNode().setAttribute('checked', 'checked');\n        } else if (this.refs.filterESeriesDuplex) {\n            this.refs.filterESeriesDuplex.getDOMNode().setAttribute('checked', 'checked');\n        }\n    },\n\n    _filterConfigs: function(configs, constraint) {\n        return _.isEmpty(constraint) ? _.where(configs) : _.where(configs, constraint);\n    },\n\n    _fixSelectionAfterAdd: function (err, hagroup) {\n        if (err) {\n            return console.error(err);\n        }\n\n        var base = _.pick(this.props.selectDetails, 'installation'),\n            newSelector = _.merge(base, { hagroup: { _id: hagroup._id } }),\n            col2View = 'SystemOverview';\n\n        if (hagroup.cluster && hagroup.cluster._id) {\n            newSelector = _.merge(newSelector, {\n                cluster: { _id: hagroup.cluster._id },\n                hagroup: { _model: hagroup._model }\n            });\n        }\n\n        this.props.fire('HARDWARE_SELECT', this.props.projectId, newSelector, col2View, null);\n    },\n\n    addSystem: function(config, addingTo, replacing, event) {\n        event.stopPropagation();\n\n        var specs = config.buildSpec(addingTo, replacing),\n            spec = specs[0];\n\n        if (config.groupId === cnst.PRODUCTLINE_SUBTYPE_CDOT) {\n            var fire = this.props.fire,\n                isCluster = _(this.props.selectDetails).has('cluster') ? true : false;\n\n            if (isCluster) {\n                fire('PROJECT_EXPAND_CLUSTER', this.props.selection._id, spec);\n                this._close(event);\n            } else {\n                fire('PROJECT_ADD_CLUSTER', spec, this._fixSelectionAfterAdd);\n            }\n        } else {\n            this.props.fire('PROJECT_ADD_STANDALONE', spec, this._fixSelectionAfterAdd);\n        }\n    },\n\n    changeSystem: function (config, addingTo, replacing, event) {\n        event.stopPropagation();\n\n        var props = this.props,\n            specs = config.buildSpec(addingTo, replacing),\n            selector = _.merge(props.selectDetails, { hagroup: { _model: config.configModel } });\n\n        props.fire('PROJECT_CHANGE_SYSTEMS', specs);\n        props.fire('HARDWARE_SELECT', props.projectId, selector, 'SystemOverview', null);\n    },\n\n    _close: function (event) {\n        this.props.onClose(event);\n    },\n\n     _showDetails: function(systemConfig, event) {\n        event.stopPropagation();\n        this.setState({\n            currentSystemHover: systemConfig\n        });\n    },\n\n    render: function() {\n        var props = this.props,\n            selector = props.selectDetails,\n            isConfigChange = _(selector).has('hagroup') ? true : false,\n            isCluster = _(selector).has('cluster') ? true : false,\n            action = isConfigChange ? this.changeSystem : this.addSystem;\n\n        var addingTo, replacing, renderProductLineFilters, title, options, policies, versionPolicy;\n        var showDetails = this._showDetails;\n\n        if (isConfigChange) {\n            var hagroup = props.selection,\n                clusterSelector = isCluster ? { cluster: { _id: hagroup.cluster._id } } : {},\n                hagroupSelector = { hagroup: { _id: hagroup._id } },\n                model = hagroup._model;\n\n            policies = hagroup._policies || {};\n            versionPolicy = policies.version || {};\n            options = versionPolicy.pin ? { version: hagroup.version } : {};\n\n            addingTo = _.merge(_.pick(selector, 'installation'), clusterSelector);\n            replacing = _.merge(_.pick(selector, ['installation', 'cluster']), hagroupSelector);\n            title = 'Change ' + hagroup._model + ' System';\n\n            if (isCluster) {\n                renderProductLineFilters = this.renderClusteredFilters;\n            } else if (model.substring(0, 3) === \"FAS\") {\n                renderProductLineFilters = this.renderFasFilters;\n            } else if (model.substring(0, 1) === \"V\") {\n                renderProductLineFilters = this.renderFasFilters;\n            } else if (model.substring(0, 2) === \"EF\") {\n                renderProductLineFilters = this.renderEFSeriesFilters;\n            } else if (model.substring(0, 1) === \"E\") {\n                renderProductLineFilters = this.renderESeriesFilters;\n            }\n        } else {\n            if (isCluster) {\n                var sampleSystem = _.first(props.selection.hagroups);\n\n                policies = sampleSystem._policies || {};\n                versionPolicy = policies.version || {};\n                options = versionPolicy.pin ? { version: sampleSystem.version } : {};\n\n                addingTo = selector;\n                title = 'Add System to ' + (props.selection.name || 'Cluster');\n                renderProductLineFilters = _.partial(this.renderClusteredFilters, true);\n            } else {\n                var productLine = selector.productLine,\n                    productSubLine = selector.productSubLine,\n                    configGroup = props.productInfo.getConfigGroup(productLine, productSubLine);\n\n                addingTo = configGroup;\n                title = 'Add ' + configGroup.title + ' System';\n\n                if (configGroup.id === CONFIG_GROUPS.FAS_CMODE_NORMAL) {\n                    renderProductLineFilters = this.renderClusteredFilters;\n                } else if (configGroup.id === CONFIG_GROUPS.FAS_7MODE_NORMAL) {\n                    renderProductLineFilters = this.renderFasFilters;\n                } else if (configGroup.id === CONFIG_GROUPS.E_NORMAL) {\n                    renderProductLineFilters = this.renderESeriesFilters;\n                } else if (configGroup.id === CONFIG_GROUPS.EF_NORMAL) {\n                    renderProductLineFilters = this.renderEFSeriesFilters;\n                }\n            }\n        }\n\n        var guard = props.map.guard(addingTo, options),\n            configs = guard.addingSystem(replacing),\n            filteredConfigs = this._filterConfigs(configs, this.state.configFilters),\n            enabledConfigs = this._filterConfigs(filteredConfigs, { isEnabled: true }),\n            disabledConfigs = this._filterConfigs(filteredConfigs, { isEnabled: false });\n\n        var enabledConfigList = _(enabledConfigs)\n            .map(function (c) {\n                return(\n                    <div className=\"row-list-item selectable\" onClick={_.partial(action, c, addingTo, replacing)} onMouseOver={ _.partial(showDetails, c) }>\n                        <div className=\"row-list-cell\">{c.configModel}</div>\n                        <div className=\"row-list-cell\">{ !c.isSellable ? '(EOA)' : '' }</div>\n                    </div>\n                    );\n            }).value();\n        var disabledConfigList = _(disabledConfigs)\n            .map(function (c) {\n                var disabledTooltip;\n                var conflicts = _.map(c.conflicts, function(conflict) {\n                    var attribute = conflict.attribute.toUpperCase().replace('.','_'),\n                        limit_type = constants.LIMIT_TYPES[attribute],\n                        limit_reason = constants.LIMIT_REASONS[limit_type];\n\n                    return (\n                        <div>\n                            { limit_reason }\n                        </div>\n                    );\n                });\n                disabledTooltip = (\n                    <Tooltip title=\"Disabled\"\n                         position=\"top\"\n                         titleClassName=\"right strong\">\n                         { conflicts }\n                    </Tooltip>\n                );\n                return(\n                    <div className=\"row-list-item disabled-selection\" onMouseOver={ _.partial(showDetails, c) }>\n                        <div className=\"row-list-cell\">{c.configModel}</div>\n                        <div className=\"row-list-cell\">{ !c.isSellable ? '(EOA)' : '' }</div>\n                        { disabledTooltip }\n                    </div>\n                    );\n            }).value();\n\n        return (\n            <div>\n                <ColumnHeader columnTitle={ title }>\n                    <ActionLink\n                        isToggle={ false }\n                        select={ this._close }\n                        selected={ false }\n                        enabled={ true }>\n                        Close\n                    </ActionLink>\n                </ColumnHeader>\n                { renderProductLineFilters() }\n                <ScrollableRegion top=\"80\">\n                    { enabledConfigList }\n                    { disabledConfigList }\n                </ScrollableRegion>\n            </div>\n        );\n    },\n\n    noOpFilter: function(/* c */) {\n        return true;\n    },\n\n    renderClusteredFilters: function(disableSingleNodeClusterChoice) {\n        //Single-Node, TNSC, Switched Cluster\n        var disableSingleNodeFilter = disableSingleNodeClusterChoice ? 'disabled' : false;\n        return (\n            <div className=\"filter-pane\">\n                <div className=\"btn-group\">\n                    <input\n                    onChange={ _.partial(this._chainFilters, { isHA: true }) }\n                    type=\"radio\"\n                    name=\"filterFas\"\n                    ref=\"FilterFasMultiNodeCluster\"\n                    id=\"FilterFasMultiNodeCluster\" />\n                    <label htmlFor=\"FilterFasMultiNodeCluster\" className=\"btn btn-default\">\n                        <span> Multi-Node</span>\n                    </label>\n\n                    <input\n                    disabled={disableSingleNodeFilter}\n                    onChange={ _.partial(this._chainFilters, { isHA: false }) }\n                    type=\"radio\"\n                    name=\"filterFas\"\n                    ref=\"FilterFasSingleNodeCluster\"\n                    id=\"FilterFasSingleNodeCluster\" />\n                    <label\n                        disabled={disableSingleNodeFilter}\n                        htmlFor=\"FilterFasSingleNodeCluster\"\n                        className=\"btn btn-default\">\n                        <span> Single-Node</span>\n                    </label>\n                </div>\n                <div className=\"btn-group pull-right\">\n                    <Button\n                        onClick={ this._filterShowEoa }\n                        title=\"toggle show end of availability\"\n                        alignRight= { true }\n                        extraClasses={{\n                            'btn-default': true,\n                            'no-border': false,\n                            'toggled': this.state.showEoa,\n                        }}>\n                        Show EOA\n                    </Button>\n                    <Button\n                        onClick={ this._filterHideEoa }\n                        title=\"toggle hide end of availability\"\n                        alignRight= { true }\n                        extraClasses={{\n                            'btn-default': true,\n                            'no-border': false,\n                            'toggled': !this.state.showEoa,\n                        }}>\n                        Hide EOA\n                    </Button>\n                </div>\n            </div>\n            );\n    },\n\n    renderFasFilters: function() {\n        return (\n            <div className=\"filter-pane\">\n                <div className=\"btn-group\">\n                    <input\n                    onChange={ _.partial(this._chainFilters, { isHA: true }) }\n                    type=\"radio\"\n                    name=\"filterFas\"\n                    ref=\"FilterFasMultiNodeCluster\"\n                    id=\"FilterFasMultiNodeCluster\" />\n                    <label htmlFor=\"FilterFasMultiNodeCluster\" className=\"btn btn-default\">\n                        <span> HA Pair</span>\n                    </label>\n\n                    <input\n                    onChange={ _.partial(this._chainFilters, { isHA: false }) }\n                    type=\"radio\"\n                    name=\"filterFas\"\n                    id=\"FilterFasStandalone\" />\n                    <label htmlFor=\"FilterFasStandalone\" className=\"btn btn-default\">\n                        <span> Standalone</span>\n                    </label>\n\n                    <input\n                    onChange={ _.partial(this._chainFilters, { isEmbedded: true }) }\n                    type=\"radio\"\n                    name=\"filterFas\"\n                    id=\"FilterFasEmbedded\" />\n                    <label htmlFor=\"FilterFasEmbedded\" className=\"btn btn-default\">\n                        <span> Internal Disk</span>\n                    </label>\n                </div>\n                <div className=\"btn-group pull-right\">\n                    <Button\n                        onClick={ this._filterShowEoa }\n                        title=\"toggle show end of availability\"\n                        alignRight= { true }\n                        extraClasses={{\n                            'btn-default': true,\n                            'no-border': false,\n                            'toggled': this.state.showEoa,\n                        }}>\n                        Show EOA\n                    </Button>\n                    <Button\n                        onClick={ this._filterHideEoa }\n                        title=\"toggle hide end of availability\"\n                        alignRight= { true }\n                        extraClasses={{\n                            'btn-default': true,\n                            'no-border': false,\n                            'toggled': !this.state.showEoa,\n                        }}>\n                        Hide EOA\n                    </Button>\n                </div>\n            </div>\n        );\n    },\n\n    renderESeriesFilters: function() {\n        return (\n            <div className=\"filter-pane\">\n                <div className=\"btn-group\">\n                    <input\n                    onChange={ _.partial(this._chainFilters, { isHA: true }) }\n                    type=\"radio\"\n                    name=\"filterE\"\n                    ref=\"filterESeriesDuplex\"\n                    id=\"filterESeriesDuplex\" />\n                    <label htmlFor=\"filterESeriesDuplex\" className=\"btn btn-default\">\n                        <span> Duplex</span>\n                    </label>\n                    <input\n                    onChange={ _.partial(this._chainFilters, { isHA: false }) }\n                    type=\"radio\"\n                    name=\"filterE\"\n                    ref=\"filterESeriesSimplex\"\n                    id=\"filterESeriesSimplex\" />\n                    <label htmlFor=\"filterESeriesSimplex\" className=\"btn btn-default\">\n                        <span> Simplex</span>\n                    </label>\n                </div>\n                <div className=\"btn-group pull-right\">\n                    <Button\n                        onClick={ this._filterShowEoa }\n                        title=\"toggle show end of availability\"\n                        alignRight= { true }\n                        extraClasses={{\n                            'btn-default': true,\n                            'no-border': false,\n                            'toggled': this.state.showEoa,\n                        }}>\n                        Show EOA\n                    </Button>\n                    <Button\n                        onClick={ this._filterHideEoa }\n                        title=\"toggle hide end of availability\"\n                        alignRight= { true }\n                        extraClasses={{\n                            'btn-default': true,\n                            'no-border': false,\n                            'toggled': !this.state.showEoa,\n                        }}>\n                        Hide EOA\n                    </Button>\n                </div>\n            </div>\n        );\n    },\n\n    renderEFSeriesFilters: function() {\n        return (\n            <div className=\"filter-pane\">\n                <div className=\"btn-group pull-right\">\n                    <Button\n                        onClick={ this._filterShowEoa }\n                        title=\"toggle show end of availability\"\n                        alignRight= { true }\n                        extraClasses={{\n                            'btn-default': true,\n                            'no-border': false,\n                            'toggled': this.state.showEoa,\n                        }}>\n                        Show EOA\n                    </Button>\n                    <Button\n                        onClick={ this._filterHideEoa }\n                        title=\"toggle hide end of availability\"\n                        alignRight= { true }\n                        extraClasses={{\n                            'btn-default': true,\n                            'no-border': false,\n                            'toggled': !this.state.showEoa,\n                        }}>\n                        Hide EOA\n                    </Button>\n                </div>\n                <div className=\"clearfix\" />\n            </div>\n        );\n    },\n\n    _applyFiltersAndSetState: function(configFilters, showEoa) {\n        var newConfigs = !showEoa ? { isSellable: true } : {};\n        _.merge(newConfigs, configFilters);\n\n        this.setState({showEoa: showEoa, configFilters: newConfigs});\n    },\n\n    _chainFilters: function(filter /*, event */) {\n        this._applyFiltersAndSetState(filter, this.state.showEoa);\n    },\n\n    _filterShowEoa: function(/* event */) {\n        var filters = _.clone(this.state.configFilters);\n        delete filters.isSellable;\n        this._applyFiltersAndSetState(filters, true);\n    },\n\n    _filterHideEoa: function(/* event */) {\n        var filters = _.clone(this.state.configFilters);\n        delete filters.isSellable;\n        this._applyFiltersAndSetState(filters, false);\n    },\n});\n\nmodule.exports = ProductConfigs;\n","'use strict';\n\nvar _ = require('lodash'),\n    React = require('react'),\n    cnst = require('./constants'),\n    ColumnHeader = require('./layout/column-header'),\n    ActionLink = require('./layout/action-link'),\n    ScrollableRegion = require('./layout/scrollable-region'),\n    Repeat = require('./repeat');\n\nvar ProductLines = React.createClass({\n    propTypes: {\n        installation: React.PropTypes.object.isRequired,\n        productInfo: React.PropTypes.object.isRequired,\n        select: React.PropTypes.func.isRequired,\n        clearSelection: React.PropTypes.func.isRequired\n    },\n\n    close: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n        this.props.clearSelection();\n    },\n\n    render: function() {\n        var props = this.props,\n            configs = props.productInfo.getConfigGroups() || [];\n\n        return (\n            <div>\n                <ColumnHeader columnTitle=\"Add System\">\n                    <ActionLink\n                        isToggle={ false }\n                        select={ this.close }\n                        selected={ false }\n                        enabled={ true }>\n                        Close\n                    </ActionLink>\n                </ColumnHeader>\n                <ScrollableRegion>\n                    <Repeat seq={ configs }\n                            prop=\"line\">\n                        <ProductLine\n                            installation={ props.installation }\n                            select={ props.select } />\n                    </Repeat>\n                </ScrollableRegion>\n            </div>\n        );\n    }\n});\n\nvar ProductLine = React.createClass({\n    propTypes: {\n        line: React.PropTypes.object.isRequired,\n        installation: React.PropTypes.object.isRequired,\n        select: React.PropTypes.func.isRequired\n    },\n\n    render: function() {\n        var props = this.props,\n            line = props.line,\n            title = (typeof line.title === 'string') ? line.title.trim() : '',\n            subtitle = (typeof line.subtitle === 'string') ? line.subtitle.trim() : '',\n            formattedSubtitle = subtitle ? ' (' + subtitle + ')' : '';\n\n        if (line.enabled) {\n            return (\n                <EnabledLineEntry\n                    image={ line.img }\n                    title={ title }\n                    subtitle={ formattedSubtitle }\n                    subGroups={ line.subGroups || [] }\n                    lineId={ line.id }\n                    installation={ props.installation }\n                    select={ props.select } />\n            );\n        } else {\n            return (\n                <DisabledLineEntry\n                    image={ line.img }\n                    title={ title }\n                    subtitle={ formattedSubtitle } />\n            );\n        }\n    }\n});\n\nvar EnabledLineEntry = React.createClass({\n    propTypes: {\n        image: React.PropTypes.string.isRequired,\n        title: React.PropTypes.string.isRequired,\n        subtitle: React.PropTypes.string.isRequired,\n        subGroups: React.PropTypes.array.isRequired,\n        lineId: React.PropTypes.string.isRequired,\n        installation: React.PropTypes.object.isRequired,\n        select: React.PropTypes.func.isRequired\n    },\n\n    render: function() {\n        var props = this.props,\n            groups = _.where(props.subGroups, { enabled: true });\n\n        return (\n            <div className=\"product-grouping\">\n                <div className=\"product-image hide-contracted-full\">\n                    <img src={ props.image } className=\"controller-img\" alt={ props.title } />\n                </div>\n                <div className=\"product-links\">\n                    <div className=\"row-list-item no-border no-color\">\n                        <div className=\"row-list-cell\">\n                            <span className=\"emphasize\" >\n                                { props.title }\n                                <span className=\"hide-contracted-full\">{ props.subtitle }</span>\n                            </span>\n                        </div>\n                    </div>\n                    <Repeat seq={ groups }\n                            prop=\"subLine\">\n                        <ProductSubLine\n                            lineId={ props.lineId }\n                            installation={ props.installation }\n                            select={ props.select } />\n                    </Repeat>\n                </div>\n            </div>\n        );\n    }\n});\n\nvar DisabledLineEntry = React.createClass({\n    propTypes: {\n        image: React.PropTypes.string.isRequired,\n        title: React.PropTypes.string.isRequired,\n        subtitle: React.PropTypes.string.isRequired\n    },\n\n    // The 'coming soon' title was required during the beta - remove it as soon as possible\n    render: function() {\n        var props = this.props;\n\n        return (\n            <div className=\"product-grouping\" title=\"coming soon\">\n                <div className=\"product-image hide-contracted-full disabled\">\n                    <img src={ props.image } className=\"controller-img\" alt={ props.title } />\n                </div>\n                <div className=\"product-links\">\n                    <div className=\"row-list-item no-border no-color\">\n                        <div className=\"row-list-cell\">\n                            <span className=\"text-muted\" >\n                                { props.title }\n                                <span className=\"hide-contracted-full\">{ props.subtitle }</span>\n                            </span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n});\n\nvar ProductSubLine = React.createClass({\n    propTypes: {\n        lineId: React.PropTypes.string.isRequired,\n        subLine: React.PropTypes.object.isRequired,\n        installation: React.PropTypes.object.isRequired,\n        select: React.PropTypes.func.isRequired\n    },\n\n    render: function() {\n        var props = this.props,\n            subLine = props.subLine,\n            title = (typeof subLine.title === 'string') ? subLine.title.trim() : '';\n\n        return (\n            <EnabledSubLineEntry\n                title={ title }\n                lineId={ props.lineId }\n                subLine={ subLine }\n                installation={ props.installation }\n                select={ props.select } />\n        );\n    }\n});\n\nvar EnabledSubLineEntry = React.createClass({\n    propTypes: {\n        title: React.PropTypes.string.isRequired,\n        lineId: React.PropTypes.string.isRequired,\n        subLine: React.PropTypes.object.isRequired,\n        installation: React.PropTypes.object.isRequired,\n        select: React.PropTypes.func.isRequired\n    },\n\n    add: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        var selector = {\n                installation: { _id: this.props.installation._id },\n                'productLine': this.props.lineId,\n                'productSubLine': this.props.subLine.id\n            };\n\n        this.props.select(selector, cnst.UI_SELECT_ADD_CHANGE_SYSTEMS);\n    },\n\n    render: function() {\n        return (\n            <div className=\"row-list-item no-border no-color selectable\" onClick={ this.add }>\n                <div className=\"row-list-cell row-list-cell-m\">\n                    <span>{ this.props.title }</span>\n                </div>\n                <div className=\"row-list-cell row-list-cell-m row-list-cell-img hide-contracted-full\">\n                </div>\n                <span className=\"chevron\">\n                    <span className=\"fa fa-fw fa-chevron-right\"></span>\n                </span>\n            </div>\n        );\n    }\n});\n\nmodule.exports = ProductLines;\n","'use strict';\n\nvar React = require('react'),\n    moment = require('moment'),\n    DriveSummary = require('./drive-summary'),\n    Button = require('./button'),\n    Link = require('react-router').Link,\n    SeparatedList = require('./separated-list'),\n    FAGlyph = require('./faglyph'),\n    Glyph = require('./glyph'),\n    _ = require('lodash');\n\nvar PH_FETCH = 'Loading\\u2026',\n    PH_NORMAL = 'Search by project name, project ID, part number, configuration, drive capacity, drive speed, drive type, version, or mode',\n    PORTFOLIO_DEFAULT_NAME = 'Unnamed Project';\n\nvar ProjectAutoDesc = React.createClass({\n    propTypes: {\n        project: React.PropTypes.object.isRequired\n    },\n\n    _toModelEntries: function (modelToCount) {\n        if (!modelToCount) {\n            return null;\n        } else {\n            var entries = [];\n            for (var key in modelToCount) {\n                entries.push({\n                    model: key,\n                    count: modelToCount[key]\n                });\n            }\n            return entries;\n        }\n    },\n\n    _renderModelEntry: function (entry) {\n        return (\n            <div className=\"count-of\">\n                <span className=\"count-num\">{ entry.count }x&nbsp;</span>\n                <span className=\"count-what\">{ entry.model /* attach tag filtering here */ }</span>\n            </div>\n        );\n    },\n\n    _renderModels: function (headText, modelToCount, className) {\n        var head = (\n            <span className=\"pad-header\">{ headText }</span>\n        );\n        return (\n            <SeparatedList\n                className={ className }\n                seq={ this._toModelEntries(modelToCount) }\n                head={ head }\n                render={ this._renderModelEntry } />\n        );\n    },\n\n    _renderGood: function (desc) {\n        return (\n            <div className=\"project-auto-description\">\n                <DriveSummary drives={ desc.drives } className=\"pull-right\" />\n                { this._renderModels('Nodes: ', desc.nodes, \"pad-nodes\") }\n                { this._renderModels('Shelves: ', desc.shelves, \"pad-shelves\") }\n            </div>\n        );\n    },\n\n    _renderBad: function() {\n        return (\n            <div className=\"project-auto-description hide\">\n                { /* no auto desc available; malformed clip? */ }\n            </div>\n        );\n    },\n\n    render: function() {\n        var desc = this.props.project._x_autodesc;\n\n        if (desc && desc.modes && desc.modes.length) {\n            return this._renderGood(desc);\n        } else {\n            return this._renderBad();\n        }\n    },\n});\n\nvar AUTOTAG_EXCLUSIONS = [\n        /^X/,         // drive, card model numbers\n        /^[0-9.]+K/,  // drive speeds\n    ],\n    AUTOTAG_EXCLUDE_DESC_KEYS = [\n        'nodes',\n        'shelves',\n    ];\n\nvar ProjectEntry = React.createClass({\n    propTypes: {\n        project: React.PropTypes.object.isRequired,\n        fire: React.PropTypes.func.isRequired,\n        inEditMode: React.PropTypes.bool.isRequired\n    },\n\n    getInitialState: function() {\n        return {\n            editingName: false,\n            newName: null,\n       };\n    },\n\n    componentDidMount: function() {\n        if(this.props.inEditMode){\n            this.setState({\n                editingName: true,\n                newName: this.props.project._x_project_name || ''\n            });\n\n            if (this.refs.projectNameInput) {\n                this.refs.projectNameInput.getDOMNode().select();\n            }\n        }\n    },\n\n    _filterAutoTag: function(tag) {\n        for (var idx in AUTOTAG_EXCLUSIONS) {\n            if (tag.match(AUTOTAG_EXCLUSIONS[idx])) {\n                return false;\n            }\n        }\n\n        if (this.props.project._x_autodesc) {\n            for (var idx2 in AUTOTAG_EXCLUDE_DESC_KEYS) {\n                var key = AUTOTAG_EXCLUDE_DESC_KEYS[idx2],\n                    ob = this.props.project._x_autodesc[key];\n                if (ob) {\n                    if (_.has(ob, tag)) {\n                        return false;\n                    }\n                }\n            }\n        }\n\n        return true;\n    },\n\n    _gatherTags: function(project) {\n        var autoTags = _.filter(project._x_autotags || [], this._filterAutoTag),\n            tags = autoTags.concat(project._x_usertags || []);\n\n        if (tags.length > 0) {\n            tags.sort(); // mutate-in-place\n            return tags;\n        } else {\n            return null; // suppress list\n        }\n    },\n\n    _renderTag: function(tag) {\n        return (\n            <span className=\"pad-tag\">{ tag }</span>\n        );\n    },\n\n    _editName: function() {\n        this.setState({\n            editingName: true,\n            newName: this.props.project._x_project_name || ''\n        }, function() {\n            // Move focus to the input field after we render it (and select text)\n            if (this.refs.projectNameInput) {\n                this.refs.projectNameInput.getDOMNode().select();\n            }\n        });\n    },\n\n    _archiveProject: function() {\n        this.setState({\n            archivingProject: true\n        });\n    },\n\n    _confirmArchiveProject: function() {\n        this.setState({\n            archivingProject: false\n        });\n        this.props.fire('PORTFOLIO_ARCHIVE',\n            this.props.project._uuid,\n            this.props.project._version);\n    },\n\n    _cancelArchiveProject: function() {\n        this.setState({\n            archivingProject: false\n        });\n    },\n\n    _captureNewName: function(event) {\n        this.setState({\n            newName: event.target.value || ''\n        });\n    },\n\n    _saveNewName: function() {\n        this.setState({\n            editingName: false,\n            newName: null,\n        });\n        this.props.fire('PORTFOLIO_SET_NAME',\n                        this.props.project._uuid,\n                        this.props.project._version,\n                        this.state.newName);\n        this.props.fire('PROJECT_UNLOAD', this.props.project._uuid);\n    },\n\n    _cancelEditName: function() {\n        this.setState({\n            editingName: false,\n            newName: this.props.project._x_project_name || ''\n        });\n    },\n\n    _renderStateGlyph: function() {\n        if (this.props.project._X_STATE.adjusting) {\n            return (\n                <Button\n                    faglyph=\"refresh\"\n                    title=\"saving\"\n                    spin={ true }\n                    extraClasses={{\n                        'btn-default': true,\n                        'no-border': true,\n                    }} />\n            );\n        } else if (this.props.project._X_STATE.err) {\n            return (\n                <Button\n                    title=\"an error occurred amending your project\"\n                    glyph=\"warning-sign\"\n                    spin={ false }\n                    onClick={ this._editName }\n                    extraClasses={{\n                        'btn-default': true,\n                        'no-border': true,\n                    }} />\n            );\n        } else {\n            return (\n                <ul className=\"edit-strip\">\n                    <li>\n                        <FAGlyph\n                            name=\"chevron-down\"\n                            title=\"project options\" />\n                        <ul className=\"edit-strip-items\">\n                            <li>\n                                <Button\n                                    faglyph=\"pencil\"\n                                    title=\"edit the name of your project\"\n                                    onClick={ this._editName }\n                                    alignRight={ true }\n                                    extraClasses={{\n                                        'btn-default': true,\n                                        'no-border': true,\n                                    }}>\n                                    Edit project title\n                                </Button>\n                            </li>\n                            <li>\n                                <Button\n                                    faglyph=\"trash\"\n                                    title=\"delete this project\"\n                                    onClick={ this._archiveProject }\n                                    alignRight={ true }\n                                    extraClasses={{\n                                        'btn-default': true,\n                                        'no-border': true,\n                                    }}>\n                                    Delete project\n                                </Button>\n                            </li>\n                        </ul>\n                    </li>\n                </ul>\n            );\n        }\n    },\n\n    _handleKeyUp: function(event) {\n        if (event.key === 'Enter') {\n            this._saveNewName();\n        } else if (event.key === 'Escape') {\n            this._cancelEditName();\n        }\n    },\n\n    _renderArchiveProjectOverlay: function() {\n        if (this.state.archivingProject) {\n            return (\n                <div className=\"archive-project-overlay\">\n                    <div className=\"inner\">\n                        Delete this project?\n                        <div className=\"archive-project-buttons\">\n                            <Button\n                                faglyph=\"check\"\n                                title=\"confirm deleting of project\"\n                                onClick={ this._confirmArchiveProject }\n                                extraClasses={{\n                                    'btn-success': true,\n                                    'no-border': true,\n                                }} />\n                            <Button\n                                faglyph=\"times\"\n                                title=\"cancel deleting of project\"\n                                onClick={ this._cancelArchiveProject }\n                                extraClasses={{\n                                    'btn-danger': true,\n                                    'no-border': true,\n                                }} />\n                        </div>\n                    </div>\n                </div>\n            );\n        } else {\n            return null;\n        }\n    },\n\n    _renderNameOrNameInput: function() {\n        // Truncate long names to prevent pushing other UI elements off the page\n        var project = this.props.project,\n            fullName = this.state.newName || project._x_project_name || PORTFOLIO_DEFAULT_NAME,\n            displayName = (fullName.length > 80) ? fullName.slice(0,80) + '\\u2026' : fullName;\n\n        if (this.state.editingName) {\n            return (\n                <div className=\"project-title edit-mode\">\n                    <div className=\"edit-title\">\n                        <input\n                            type=\"text\"\n                            ref=\"projectNameInput\"\n                            value={ this.state.newName }\n                            placeholder=\"Name the project\"\n                            onChange={ this._captureNewName }\n                            onKeyUp={ this._handleKeyUp }\n                            className=\"form-control\" />\n                        <span className=\"toolstrip\">\n                            <Button\n                                faglyph=\"check\"\n                                title=\"save changes to project name\"\n                                onClick={ this._saveNewName }\n                                extraClasses={{\n                                    'btn-success': true,\n                                    'no-border': true,\n                                }} />\n                            <Button\n                                faglyph=\"times\"\n                                title=\"cancel changes to project name\"\n                                onClick={ this._cancelEditName }\n                                extraClasses={{\n                                    'btn-danger': true,\n                                    'no-border': true,\n                                }} />\n                        </span>\n                    </div>\n                </div>\n            );\n        } else {\n            return (\n                <div className=\"project-title\">\n                    <span>\n                        <span className=\"project-title-name\">\n                            <Link\n                                title={ project._x_project_name || PORTFOLIO_DEFAULT_NAME }\n                                to=\"project\"\n                                params={{ uuid: project._uuid }}\n                                className=\"pad-tlink\" >\n                                { displayName }\n                            </Link>\n                        </span>\n                        <span className=\"toolstrip pull-right\">\n                            { this._renderStateGlyph() }\n                        </span>\n                    </span>\n                    <span className=\"project-date\">\n                        Created:&nbsp;\n                        { moment.unix(project._x_original_timestamp/1000).calendar() }\n                        &nbsp;|&nbsp;Last Modified:&nbsp;\n                        { moment.unix(project._timestamp/1000).calendar() }\n                    </span>\n                </div>\n            );\n        }\n    },\n\n    render: function() {\n        var project = this.props.project;\n        // console.log(\"Timestamp: \" + project._timestamp);\n\n        // want to make the whole project div clickable?\n        // consider an onClick handler calling Router.transitionTo\n        return (\n            <div key={ project._uuid } className=\"project-entry\">\n                { /* insert user description here */ }\n                { this._renderArchiveProjectOverlay() }\n                { this._renderNameOrNameInput() }\n                <div className=\"project-info\">\n                    <ProjectAutoDesc project={ project } />\n                </div>\n            </div>\n        );\n    },\n});\n\nvar ProjectList = React.createClass({\n    propTypes: {\n        projects: React.PropTypes.array.isRequired,\n        fire: React.PropTypes.func.isRequired,\n        projectIdsInEditMode: React.PropTypes.object.isRequired\n    },\n\n    _addButtonClick: function() {\n        this.props.fire('PORTFOLIO_ADD_NEW');\n    },\n\n    render: function() {\n        var items = [];\n\n        _.forEach(this.props.projects, function renderProject(project) {\n            if (!project._x_archived) {\n                items.push(\n                    <ProjectEntry\n                        key={ project._uuid }\n                        project={ project }\n                        fire={ this.props.fire }\n                        inEditMode={ _.has(this.props.projectIdsInEditMode, project._uuid) }/>\n                );\n            }\n        }, this);\n\n        return (\n            <div className=\"project-list\">\n                <div className=\"row-list-item selectable new\" onClick={ this._addButtonClick }>\n                    <div className=\"row-list-cell\">\n                        Add a new project\n                    </div>\n                    <span className=\"chevron\">\n                        <span className=\"fa fa-fw fa-plus\"></span>\n                    </span>\n                </div>\n                { items }\n            </div>\n        );\n    },\n});\n\nvar ProjectListPanel = React.createClass({\n    propTypes: {\n        stores: React.PropTypes.object.isRequired,\n        fire: React.PropTypes.func.isRequired\n    },\n\n    getInitialState: function() {\n        return this.props.stores.portfolio.getState();\n    },\n\n    componentWillMount: function() {\n        if (!this.state.fetching && !this.state.fetched) {\n            this.props.fire('PORTFOLIO_FETCH');\n        }\n    },\n\n    componentDidMount: function() {\n        this.props.stores.portfolio.watch(this._onChange);\n\n        // Start focus in the search field\n        var projectSearchDOM = this.refs.projectSearch.getDOMNode();\n\n        if (projectSearchDOM) {\n            projectSearchDOM.focus();\n        }\n    },\n\n    componentWillUnmount: function() {\n        this.props.stores.portfolio.unwatch(this._onChange);\n    },\n\n    _searchChange: function (event) {\n        this.props.fire('PORTFOLIO_SEARCH', event.target.value);\n    },\n\n    _searchClear: function () {\n        this.props.fire('PORTFOLIO_SEARCH', '');\n    },\n\n    _handleKeyUp: function(event) {\n        if (event.key === 'Escape') {\n            this._searchClear();\n        }\n    },\n\n    _content: function() {\n        if (this.state.fetching) {\n            return (\n                <div className=\"placeholder-pane\">\n                    <Glyph\n                        name=\"refresh\"\n                        spin={ true }\n                        extraClasses={{ pad1em: true }} />\n                    <span className=\"placeholder-loading-text\">Loading your projects&hellip;</span>\n                </div>\n            );\n        }\n\n        return (\n            <ProjectList projects={ this.state.projects } fire={ this.props.fire } projectIdsInEditMode={ this.state.projectIdsInEditMode }/>\n        );\n    },\n\n    render: function() {\n        var searchHolder = this.state.fetching ? PH_FETCH : PH_NORMAL;\n\n        return (\n            <div className=\"col-sm-8 project-pane\">\n                <div className=\"project-search\">\n                  <input\n                      type=\"text\"\n                      ref=\"projectSearch\"\n                      value={ this.state.search }\n                      placeholder={ searchHolder }\n                      onChange={ this._searchChange }\n                      onKeyUp={ this._handleKeyUp }\n                      className=\"form-control\" />\n                  <Button\n                        faglyph={ this.state.search.length ? 'times' : 'search' }\n                        title=\"clear search text\"\n                        onClick={ this._searchClear }\n                        extraClasses={{\n                            'disabled': this.state.search.length === 0,\n                            'no-border': true,\n                        }}>\n                  </Button>\n                </div>\n                { this._content() }\n            </div>\n        );\n    },\n\n    /**\n    * Event handler for 'change' events coming from the TodoStore\n    */\n    _onChange: function() {\n        this.setState(this.props.stores.portfolio.getState());\n    }\n});\n\nmodule.exports = ProjectListPanel;\n","'use strict';\n\nvar React = require('react'),\n    Glyph = require('./glyph'),\n    Hardware = require('./hardware'),\n    retitle = require('../retitle');\n\nvar Project = React.createClass({\n    propTypes: {\n        stores: React.PropTypes.object.isRequired,\n        fire: React.PropTypes.func.isRequired,\n        log: React.PropTypes.func.isRequired,\n        uuid: React.PropTypes.string.isRequired,\n        version: React.PropTypes.string\n    },\n\n    _getUpdatedStateFromStores: function() {\n        return {\n            project: this.props.stores.project.getState(),\n            productInfo: this.props.stores.productInfo.getState(),\n            userPreferences: this.props.stores.userPreferences.getState(),\n            hardware: this.props.stores.hardware.getState()\n        };\n    },\n\n    getInitialState: function() {\n        return this._getUpdatedStateFromStores();\n    },\n\n    componentWillMount: function() {\n        if (this.state.project.fetched && this.state.productInfo.fetched) {\n            if (this.state.project.uuid !== this.props.uuid) {\n                // wrong clip\n                this._requestLoad();\n            }\n        } else if (!this.state.project.fetching && !this.state.project.fetched) {\n            // no clip fetched or fetching, i.e. initial idle state\n            this._requestLoad();\n        }\n    },\n\n    _requestLoad: function() {\n        this.props.fire('PROJECT_LOAD', this.props.uuid, this.props.version);\n        this.setState(this.getInitialState());\n    },\n\n    componentDidMount: function() {\n        this.props.stores.project.watch(this._onChange);\n        this.props.stores.productInfo.watch(this._onChange);\n        this.props.stores.userPreferences.watch(this._onChange);\n        this.props.stores.hardware.watch(this._onChange);\n        retitle(this._title(true));\n    },\n\n    componentWillUnmount: function() {\n        this.props.stores.project.unwatch(this._onChange);\n        this.props.stores.productInfo.unwatch(this._onChange);\n        this.props.stores.userPreferences.unwatch(this._onChange);\n        this.props.stores.hardware.unwatch(this._onChange);\n    },\n\n    _title: function (plain) {\n        if (this.state.project.fetching) {\n            return 'Opening Project\\u2026';\n        } else if (this.state.productInfo.fetching) {\n            return 'Loading platform information\\u2026';\n        } else if (this.state.project.fetched && this.state.productInfo.fetched) {\n            if (this.state.project.name) {\n                return this.state.project.name;\n            } else {\n                if (plain) {\n                    return this.state.project.uuid;\n                }\n\n                return (\n                    <span className=\"mono\">{ this.state.project.uuid }</span>\n                );\n            }\n        } else if (this.state.project.err || this.state.productInfo.err) {\n            return 'Error';\n        } else {\n            return 'SHOULD NOT BE DISPLAYED';\n        }\n    },\n\n    _content: function() {\n        if (this.state.project.fetching || this.state.productInfo.fetching) {\n            return (\n                <div className=\"placeholder-pane\">\n                    <Glyph\n                        name=\"refresh\"\n                        spin={ true }\n                        extraClasses={{ pad1em: true }} />\n                    <span className=\"placeholder-loading-text\">Loading your project&hellip;</span>\n                </div>\n            );\n        }\n\n        if (this.state.project.err) {\n            return (\n                <pre>\n                    { this.state.project.err.message }\n                </pre>\n            );\n        }\n\n        var selected = {};\n        if (this.state.project.uuid === this.state.hardware.uuid) {\n            selected = this.state.hardware;\n        }\n\n        var map = this.state.project.map();\n        map.rehydrate();\n\n        return (\n            <Hardware\n                map={ map }\n                projectId={ this.state.project.uuid }\n                selected={ selected }\n                productInfo = { this.state.productInfo.productInfo }\n                userPreferences = { this.state.userPreferences }\n                fire={ this.props.fire }\n                log={ this.props.log } />\n        );\n    },\n\n    render: function() {\n        return (\n            <div id=\"main-panel\">\n                <div id=\"content\">\n                    { this._content() }\n                </div>\n            </div>\n        );\n    },\n\n    _onChange: function() {\n        this.setState(this._getUpdatedStateFromStores());\n        retitle(this._title(true));\n    }\n});\n\nmodule.exports = Project;\n","'use strict';\n\nvar React = require('react'),\n    assert = require('assert'),\n    _ = require('lodash');\n\nvar Repeat = React.createClass({\n    propTypes: {\n        className: React.PropTypes.string,\n        seq: React.PropTypes.array.isRequired,\n        prop: React.PropTypes.string.isRequired,\n        type: React.PropTypes.string,\n        key: React.PropTypes.oneOfType([\n            React.PropTypes.string,\n            React.PropTypes.func,\n        ]),\n        children: React.PropTypes.element.isRequired\n    },\n\n    _getKeyExtractor: function() {\n        var keyProp = this.props.key;\n\n        switch (typeof keyProp) {\n            case 'function':\n                return keyProp;\n\n            case 'string':\n                return function (ob) {\n                    return ob[keyProp];\n                };\n\n            default:\n                assert.equal(typeof keyProp, 'undefined');\n                return null;\n        }\n    },\n\n    render: function () {\n        assert(!_.isArray(this.props.children));\n        var original = this.props.children,\n            prop = this.props.prop,\n            extractKey = this._getKeyExtractor(),\n            kids = _.map(this.props.seq, function (member, idx) {\n                var extras = {};\n                extras[prop] = member;\n                if (extractKey) {\n                    extras.key = extractKey(member, idx);\n                    // else preserve React's sombre warnings\n                }\n                return React.addons.cloneWithProps(original, extras);\n            });\n\n        /* Not sure if this good way of doing it. Hack fix for now. */\n        if (this.props.type && this.props.type === 'tableRow') {\n            return (\n                <tbody className={ this.props.className }>\n                    { kids }\n                </tbody>\n            );\n        } else {\n            return (\n                <div className={ this.props.className }>\n                    { kids }\n                </div>\n            );\n        }\n    }\n});\n\nmodule.exports = Repeat;\n","'use strict';\n\nvar React = require('react'),\n    Repeat = require('./repeat'),\n    Button = require('./button'),\n    ColumnHeader = require('./layout/column-header'),\n    ActionLink = require('./layout/action-link'),\n    ScrollableRegion = require('./layout/scrollable-region'),\n    CapacityTooltip = require('./capacity-tooltip'),\n    SystemSummary = require('../../lib/model/aggregates/systemSummary.js'),\n    EnvironmentalSummary = require('../../lib/model/inspect/environmental-summary'),\n    Unit = require('../../lib/units.js'),\n    FAGlyph = require('./faglyph'),\n    _ = require('lodash');\n\nvar DriveTypeRow = React.createClass({\n    propTypes: {\n        driveType: React.PropTypes.object.isRequired\n    },\n\n    render: function() {\n        return (\n            <tr>\n                <td>\n                    <div className=\"drive-summary-block no-overflow drive-breakdown\">\n                        <span className=\"drive-count\">{ this.props.driveType.count }</span>\n                        <span className=\"fa fa-fw fa-hdd-o\"></span>\n                        <span className=\"drive-label-size\">{ new Unit(this.props.driveType.rawgb, 'GB').to('TB').makeHappyFriendly(null, null, '%d%s') }\n                            <span className=\"drive-type\">{ this.props.driveType.type }</span>\n                        </span>\n                    </div>\n                </td>\n            </tr>\n        );\n    }\n});\n\nvar GroupedCapacitySummary = React.createClass({\n    propTypes: {\n        summary: React.PropTypes.object.isRequired,\n        useBase10Yields: React.PropTypes.bool.isRequired,\n    },\n\n    render: function() {\n        var performanceSummary = this.props.summary.performanceSummary,\n            capacitySummary = this.props.summary.capacitySummary,\n            ssdSummary = this.props.summary.ssdSummary,\n            totalSummary = this.props.summary,\n            displayInUnitBase = this.props.useBase10Yields ? 'TB' : 'TiB';\n\n        return (\n            <div className=\"capacity-summary\">\n                <table>\n                    <thead>\n                        <tr>\n                            <td></td>\n                            <th scope=\"col\" className=\"numeric\">Raw</th>\n                            <th scope=\"col\" className=\"numeric\">Usable</th>\n                        </tr>\n                    </thead>\n                    <tbody className=\"last-row\">\n                        <tr className=\"drive-class-row\">\n                            <td>\n                                <div className=\"drive-summary-block no-overflow drive-performance\">\n                                    <span className=\"drive-count\">{ performanceSummary.total }</span>\n                                    <span className=\"fa fa-fw fa-hdd-o\"></span>\n                                    <span className=\"drive-label\">Performance HDD</span>\n                                </div>\n                            </td>\n                            <td className=\"numeric\">\n                                { new Unit(performanceSummary.rawCapacity, 'GB').to('TB').friendly(2) }\n                                <CapacityTooltip title=\"Raw Capacity (Performance HDD)\" inputValue={performanceSummary.rawCapacity} displayUnitsFrom='GB' />\n                            </td>\n                            <td className=\"numeric\">\n                                { new Unit(performanceSummary.usableCapacity, 'GiB').to(displayInUnitBase).friendly(2) }\n                                <CapacityTooltip title=\"Usable Capacity (Performance HDD)\" inputValue={performanceSummary.usableCapacity} displayUnitsFrom='GiB' />\n                            </td>\n                        </tr>\n                        <tr className=\"drive-class-row\">\n                            <td>\n                                <div className=\"drive-summary-block no-overflow drive-capacity\">\n                                    <span className=\"drive-count\">{ capacitySummary.total }</span>\n                                    <span className=\"fa fa-fw fa-hdd-o\"></span>\n                                    <span className=\"drive-label\">Capacity HDD</span>\n                                </div>\n                            </td>\n                            <td className=\"numeric\">\n                                { new Unit(capacitySummary.rawCapacity, 'GB').to('TB').friendly(2) }\n                                <CapacityTooltip title=\"Raw Capacity (Capacity HDD)\" inputValue={capacitySummary.rawCapacity} displayUnitsFrom= 'GB' />\n                            </td>\n                            <td className=\"numeric\">\n                                { new Unit(capacitySummary.usableCapacity, 'GiB').to(displayInUnitBase).friendly(2) }\n                                <CapacityTooltip title=\"Usable Capacity (Capacity HDD)\" inputValue={capacitySummary.usableCapacity} displayUnitsFrom= 'GiB' />\n                            </td>\n                        </tr>\n                        <tr className=\"drive-class-row\">\n                            <td>\n                                <div className=\"drive-summary-block no-overflow drive-ssd\">\n                                    <span className=\"drive-count\">{ ssdSummary.total }</span>\n                                    <span className=\"fa fa-fw fa-hdd-o\"></span>\n                                    <span className=\"drive-label\">Solid-State Drive</span>\n                                </div>\n                            </td>\n                            <td className=\"numeric\">\n                                { new Unit(ssdSummary.rawCapacity, 'GB').to('TB').friendly(2) }\n                                <CapacityTooltip title=\"Raw Capacity (SSD)\" inputValue={ssdSummary.rawCapacity} displayUnitsFrom= 'GB' />\n                            </td>\n                            <td className=\"numeric\">\n                                { new Unit(ssdSummary.usableCapacity, 'GiB').to(displayInUnitBase).friendly(2) }\n                                <CapacityTooltip title=\"Usable Capacity (SSD)\" inputValue={ssdSummary.usableCapacity} displayUnitsFrom= 'GiB' />\n                            </td>\n                        </tr>\n                    </tbody>\n                    <tbody>\n                        <tr className=\"drive-class-row drive-total\">\n                            <td>\n                                <div className=\"drive-summary-block no-overflow\">\n                                    <span className=\"drive-count\">{ totalSummary.total }</span>\n                                    <span className=\"fa fa-fw fa-hdd-o\"></span>\n                                    <span className=\"drive-label\">Total</span>\n                                </div>\n                            </td>\n                            <td className=\"numeric\">\n                                { new Unit(totalSummary.rawCapacity, 'GB').to('TB').friendly(2) }\n                                <CapacityTooltip title=\"Raw Capacity (Total)\" inputValue={totalSummary.rawCapacity} displayUnitsFrom= 'GB' />\n                            </td>\n                            <td className=\"numeric\">\n                                { new Unit(totalSummary.usableCapacity, 'GiB').to(displayInUnitBase).friendly(2) }\n                                <CapacityTooltip title=\"Usable Capacity (Total)\" inputValue={totalSummary.usableCapacity} displayUnitsFrom= 'GiB' />\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        );\n    }\n});\n\nvar ExpandedCapacitySummary = React.createClass({\n    propTypes: {\n        summary: React.PropTypes.object.isRequired,\n        useBase10Yields: React.PropTypes.bool.isRequired,\n    },\n\n    render: function() {\n        var performanceSummary = this.props.summary.performanceSummary,\n            capacitySummary = this.props.summary.capacitySummary,\n            ssdSummary = this.props.summary.ssdSummary,\n            totalSummary = this.props.summary,\n            displayInUnitBase = this.props.useBase10Yields ? 'TB' : 'TiB';\n\n            console.log(\"Capacity\", capacitySummary);\n\n        return (\n            <div className=\"capacity-summary\">\n                <table>\n                    <thead>\n                        <tr>\n                            <td></td>\n                            <th scope=\"col\" className=\"numeric\">Raw</th>\n                            <th scope=\"col\" className=\"numeric\">Usable</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr className=\"drive-class-row\">\n                            <th scope=\"row\">\n                                <div className=\"drive-summary-block no-overflow drive-performance\">\n                                    <span className=\"drive-count\">{ performanceSummary.total }</span>\n                                    <span className=\"fa fa-fw fa-hdd-o\"></span>\n                                    <span className=\"drive-label\">Performance HDD</span>\n                                </div>\n                            </th>\n                            <td className=\"numeric\">\n                                { new Unit(performanceSummary.rawCapacity, 'GB').to('TB').friendly(2) }\n                                <CapacityTooltip title=\"Raw Capacity (Performance HDD)\" inputValue={performanceSummary.rawCapacity} displayUnitsFrom= 'GB' />\n                            </td>\n                            <td className=\"numeric\">\n                                { new Unit(performanceSummary.usableCapacity, 'GiB').to(displayInUnitBase).friendly(2) }\n                                <CapacityTooltip title=\"Usable Capacity (Performance HDD)\" inputValue={performanceSummary.usableCapacity} displayUnitsFrom= 'GiB' />\n                            </td>\n                        </tr>\n                    </tbody>\n                    <Repeat seq={ performanceSummary.driveCapacitySummaryByType }\n                        prop=\"driveType\"\n                        type=\"tableRow\">\n                        <DriveTypeRow />\n                    </Repeat>\n                    <tbody>\n                        <tr className=\"drive-class-row\">\n                            <th scope=\"row\">\n                                <div className=\"drive-summary-block drive-capacity\">\n                                    <span className=\"drive-count\">{ capacitySummary.total }</span>\n                                    <span className=\"fa fa-fw fa-hdd-o\"></span>\n                                    <span className=\"drive-label\">Capacity HDD</span>\n                                </div>\n                            </th>\n                            <td className=\"numeric\">\n                                { new Unit(capacitySummary.rawCapacity, 'GB').to('TB').friendly(2) }\n                                <CapacityTooltip title=\"Raw Capacity (Capacity HDD)\" inputValue={capacitySummary.rawCapacity} displayUnitsFrom= 'GB' />\n                            </td>\n                            <td className=\"numeric\">\n                                { new Unit(capacitySummary.usableCapacity, 'GiB').to(displayInUnitBase).friendly(2) }\n                                <CapacityTooltip title=\"Usable Capacity (Capacity HDD)\" inputValue={capacitySummary.usableCapacity} displayUnitsFrom= 'GiB' />\n                            </td>\n                        </tr>\n                    </tbody>\n                    <Repeat seq={ capacitySummary.driveCapacitySummaryByType }\n                        prop=\"driveType\"\n                        type=\"tableRow\">\n                        <DriveTypeRow />\n                    </Repeat>\n                    <tbody>\n                        <tr className=\"drive-class-row\">\n                            <th scope=\"row\">\n                                <div className=\"drive-summary-block no-overflow drive-ssd\">\n                                    <span className=\"drive-count\">{ ssdSummary.total }</span>\n                                    <span className=\"fa fa-fw fa-hdd-o\"></span>\n                                    <span className=\"drive-label\">Solid-State Drive</span>\n                                </div>\n                            </th>\n                            <td className=\"numeric\">\n                                { new Unit(ssdSummary.rawCapacity, 'GB').to('TB').friendly(2) }\n                                <CapacityTooltip title=\"Raw Capacity (SDD)\" inputValue={ssdSummary.rawCapacity} displayUnitsFrom= 'GB' />\n                            </td>\n                            <td className=\"numeric\">\n                                { new Unit(ssdSummary.usableCapacity, 'GiB').to(displayInUnitBase).friendly(2) }\n                                <CapacityTooltip title=\"Usable Capacity (SDD)\" inputValue={ssdSummary.usableCapacity} displayUnitsFrom= 'GiB' />\n                            </td>\n                        </tr>\n                    </tbody>\n                    <Repeat seq={ ssdSummary.driveCapacitySummaryByType }\n                        prop=\"driveType\"\n                        type=\"tableRow\"\n                        className=\"last-row\">\n                        <DriveTypeRow />\n                    </Repeat>\n                    <tbody>\n                        <tr className=\"drive-class-row drive-total\">\n                            <th scope=\"row\">\n                                <div className=\"drive-summary-block no-overflow\">\n                                    <span className=\"drive-count\">{ totalSummary.total }</span>\n                                    <span className=\"fa fa-fw fa-hdd-o\"></span>\n                                    <span className=\"drive-label\">Total</span>\n                                </div>\n                            </th>\n                            <td className=\"numeric\">\n                                { new Unit(totalSummary.rawCapacity, 'GB').to('TB').friendly(2) }\n                                <CapacityTooltip title=\"Raw Capacity (Total)\" inputValue={totalSummary.rawCapacity} displayUnitsFrom= 'GB' />\n                            </td>\n                            <td className=\"numeric\">\n                                { new Unit(totalSummary.usableCapacity, 'GiB').to(displayInUnitBase).friendly(2) }\n                                <CapacityTooltip title=\"Usable Capacity (Total)\" inputValue={totalSummary.usableCapacity} displayUnitsFrom= 'GiB' />\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        );\n    }\n});\n\nvar CapacitySummary = React.createClass({\n    propTypes: {\n        grouped: React.PropTypes.bool.isRequired,\n        summary: React.PropTypes.object.isRequired,\n        useBase10Yields: React.PropTypes.bool.isRequired,\n    },\n    render: function() {\n        if (this.props.grouped) {\n            return(\n                <GroupedCapacitySummary\n                    summary={ this.props.summary }\n                    useBase10Yields={ this.props.useBase10Yields } />\n            );\n        } else {\n            return(\n                <ExpandedCapacitySummary\n                    summary={ this.props.summary }\n                    useBase10Yields={ this.props.useBase10Yields }  />\n            );\n        }\n    }\n});\n\nvar EnvironmentalSummaryView = React.createClass({\n    render: function() {\n        var hagroups = this.props.hagroups,\n            map = this.props.map,\n            env = new EnvironmentalSummary(map, hagroups),\n            sum = env.create(),\n            mainsVoltage = this.props.voltageDisplay,\n            powerSpec = sum.power_spec[mainsVoltage];\n        // jshint laxbreak: true\n        // jsxhint laxbreak: true\n        return (\n            <div className=\"environmental-summary\">\n                <table>\n                    <thead>\n                        <tr>\n                            <td></td>\n                            <th scope=\"col\" className=\"numeric\">Typical</th>\n                            <th scope=\"col\" className=\"numeric\">Worst Case*</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <th scope=\"row\"><span className=\"fa fa-fw fa-dashboard\"></span> Current Draw</th>\n                            <td className=\"numeric\">{format(powerSpec.typical.amps, 1)} A</td>\n                            <td className=\"numeric\">{format(powerSpec.worst.amps, 1)} A</td>\n                        </tr>\n                        <tr>\n                            <th scope=\"row\"><span className=\"fa fa-fw fa-bolt\"></span> AC Power</th>\n                            <td className=\"numeric\">\n                                {format(env.powerWattsToVoltAmps(powerSpec.typical.watts))} VA\n                                &nbsp;/&nbsp;\n                                {format(powerSpec.typical.watts)} W</td>\n                            <td className=\"numeric\">\n                                {format(env.powerWattsToVoltAmps(powerSpec.worst.watts))}  VA\n                                &nbsp;/&nbsp;\n                                {format(powerSpec.worst.watts)} W</td>\n                        </tr>\n                        <tr>\n                            <th scope=\"row\"><span className=\"fa fa-fw fa-fire\"></span> BTU / hr</th>\n                            <td className=\"numeric\">{format(powerSpec.typical.BTU)}</td>\n                            <td className=\"numeric\">{format(powerSpec.worst.BTU)}</td>\n                        </tr>\n                        <tr>\n                            <th scope=\"row\"><span className=\"fa fa-fw fa-lightbulb-o\"></span> kWh / year</th>\n                            <td className=\"numeric\">{format(env.powerWattsToKWhPerYear(powerSpec.typical.watts))}</td>\n                            <td className=\"numeric\">{format(env.powerWattsToKWhPerYear(powerSpec.worst.watts))}</td>\n                        </tr>\n                    </tbody>\n                    <tbody>\n                        <tr>\n                            <th scope=\"row\"><span className=\"fa fa-fw fa-server\"></span> Rack Units</th>\n                            <td className=\"numeric\">{sum.rack_units} U</td>\n                            <td></td>\n                        </tr>\n                        <tr>\n                            <th scope=\"row\"><span className=\"fa fa-fw fa-plug\"></span> Outlets</th>\n                            <td className=\"numeric\">{sum.max_psu}</td>\n                            <td></td>\n                        </tr>\n                        <tr>\n                            <th scope=\"row\"><span className=\"fa fa-fw fa-anchor\"></span> Weight</th>\n                            <td className=\"numeric\">\n                                {format(env.weightGtoLbs(sum.weight_g))} lbs\n                                &nbsp;/&nbsp;\n                                {format(env.weightGtoKg(sum.weight_g))} kg</td>\n                            <td></td>\n                        </tr>\n                    </tbody>\n                </table>\n                <p>\n                    { sum.completeStatsAvailable\n                        ? (<div/>)\n                        : ( <div className=\"headroom\">\n                                <span className=\"fa fa-fw fa-warning\"></span>\n                                Complete environmental data unavailable. Some devices not accounted for.\n                            </div>) }\n                </p>\n                <p className=\"footnote\">\n                    *Power consumption with system running on one PSU, high fan speed and power distributed over one power cord.\n                    DS4xxx disk shelves are an exception, in that they require two PSUs.\n                </p>\n            </div>\n        );\n\n        function format(decimal, fractionDigits) {\n            return decimal.toFixed(fractionDigits || 0).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,');\n        }\n    }\n});\n\nvar DriveSummary = React.createClass({\n    propTypes: {\n        summary: React.PropTypes.object.isRequired,\n    },\n\n    render: function() {\n        var driveRoleSummary = this.props.summary.driveRoleSummary;\n        console.log('Drive Role Summary', driveRoleSummary);\n        return (\n            <div className=\"drive-summary\">\n                <table>\n                    <thead>\n                        <tr>\n                            <td></td>\n                            <th scope=\"col\" className=\"numeric\">Data</th>\n                            <th scope=\"col\" className=\"numeric\">Parity</th>\n                            <th scope=\"col\" className=\"numeric\">Spare</th>\n                            <th scope=\"col\" className=\"numeric\">Root</th>\n                            <th scope=\"col\" className=\"numeric\">Cache</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr className=\"drive-class-row\">\n                            <th scope=\"row\">\n                                <div className=\"drive-summary-block no-overflow\">\n                                    <span className=\"drive-count\">{ driveRoleSummary.physical.total }</span>\n                                    <span className=\"fa fa-fw fa-hdd-o\"></span>\n                                    <span>Dedicated</span>\n                                </div>\n                            </th>\n                            <td className=\"numeric\">{ driveRoleSummary.physical.data }</td>\n                            <td className=\"numeric\">{ driveRoleSummary.physical.parity + driveRoleSummary.physical.dparity }</td>\n                            <td className=\"numeric\">{ driveRoleSummary.physical.spare }</td>\n                            <td className=\"numeric\">{ driveRoleSummary.physical.root }</td>\n                            <td className=\"numeric\">{ driveRoleSummary.physical.cache }</td>\n                        </tr>\n                        <tr className=\"drive-class-row\">\n                            <th scope=\"row\">\n                                <div className=\"drive-summary-block no-overflow\">\n                                    <span className=\"drive-count\">{ this.props.summary.total - driveRoleSummary.physical.total }</span>\n                                    <span className=\"fa fa-fw fa-hdd-o\"></span>\n                                    <span>Partitioned</span>\n                                </div>\n                            </th>\n                        </tr>\n                        <tr className=\"drive-class-row\">\n                            <th scope=\"row\">\n                                <div className=\"drive-summary-block no-overflow\">\n                                    <span className=\"drive-count\"></span>\n                                    <span className=\"fa fa-fw fa-pie-chart\"></span>\n                                    <span>Partitions</span>\n                                </div>\n                            </th>\n                            <td className=\"numeric\">{ driveRoleSummary.virtual.data }</td>\n                            <td className=\"numeric\">{ driveRoleSummary.virtual.parity + driveRoleSummary.virtual.dparity }</td>\n                            <td className=\"numeric\">{ driveRoleSummary.virtual.spare }</td>\n                            <td className=\"numeric\">{ driveRoleSummary.virtual.root }</td>\n                            <td className=\"numeric\">{ driveRoleSummary.virtual.cache }</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        );\n    }\n});\n\nvar Reports = React.createClass({\n    propTypes: {\n        selectedItem: React.PropTypes.any.isRequired,\n        fire: React.PropTypes.func.isRequired,\n        map: React.PropTypes.object.isRequired,\n        installations: React.PropTypes.array.isRequired,\n        userPreferences: React.PropTypes.object.isRequired,\n        projectId: React.PropTypes.string.isRequired\n    },\n\n    _showSolutionView: function() {\n        this.props.fire('USER_PREFERENCES_ADJUST', { currentSystemsView: false });\n    },\n\n    _showCurrentView: function() {\n        this.props.fire('USER_PREFERENCES_ADJUST', { currentSystemsView: true });\n    },\n\n    _groupAll: function() {\n        this.props.fire('USER_PREFERENCES_ADJUST', { collapseCapacity: true });\n    },\n\n    _expandAll: function() {\n        this.props.fire('USER_PREFERENCES_ADJUST', { collapseCapacity: false });\n    },\n\n    _showUnitBase2: function() {\n        this.props.fire('USER_PREFERENCES_ADJUST', { useBase10Yields: false });\n    },\n\n    _showUnitBase10: function() {\n        this.props.fire('USER_PREFERENCES_ADJUST', { useBase10Yields: true });\n    },\n\n    _setMainsVoltageTo_v_100: function() {\n        this.props.fire('USER_PREFERENCES_ADJUST', { mainsVoltage: 'v_100' });\n    },\n\n    _setMainsVoltageTo_v_200: function() {\n        this.props.fire('USER_PREFERENCES_ADJUST', { mainsVoltage: 'v_200' });\n    },\n\n    _getHaGroups: function(currentSystemsView, canShowSelected) {\n        if (!currentSystemsView || !canShowSelected) {\n            var selectedHaPairs = [];\n\n            _.forEach(this.props.installations, function(installation) {\n                if (installation.clusters) {\n                    _.forEach(installation.clusters, function(cluster) {\n                        selectedHaPairs.push(cluster.hagroups);\n                    });\n                }\n\n                if (installation.hagroups) {\n                    selectedHaPairs.push(installation.hagroups);\n                }\n            });\n\n            selectedHaPairs = _.flatten(selectedHaPairs);\n\n            return selectedHaPairs;\n        }\n\n        var selectedItem = this.props.selectedItem,\n            clusters = _.where(selectedItem, { _type: 'cluster' }),\n            hagroups = _.reduce(clusters, accumulate, _.where(selectedItem, { _type: 'hagroup' }));\n\n        function accumulate(hagroups, cluster) {\n            Array.prototype.push.apply(hagroups, cluster.hagroups);\n            return hagroups;\n        }\n\n        return hagroups;\n    },\n\n    render: function() {\n        var canShowSelected;\n\n        if (this.props.selectedItem) {\n            canShowSelected = true;\n        } else {\n            canShowSelected = false;\n        }\n\n        var grouped = this.props.userPreferences.collapseCapacity || false,\n            currentSystemsView = this.props.userPreferences.currentSystemsView || false,\n            hagroups = this._getHaGroups(currentSystemsView, canShowSelected),\n            summary = new SystemSummary(this.props.map, hagroups).createSystemSummary(),\n            firstInstallation = _.first(this.props.installations);\n\n        var useBase10Yields = this.props.userPreferences.useBase10Yields || false,\n            mainsVoltage = this.props.userPreferences.mainsVoltage === 'v_200' ? 'v_200' : 'v_100';\n\n        var generateWordBtn;\n        if (firstInstallation && (!_.isEmpty(firstInstallation.clusters) || !_.isEmpty(firstInstallation.hagroups))) {\n            generateWordBtn = (\n                <a href={ '../qadr/' + this.props.projectId }\n                    title=\"generate word document\"\n                    className=\"btn btn-default results-subheading-button\"\n                    alignRight={ true }>\n                    <FAGlyph name={ 'file-word-o' } />Word\n                </a>\n            );\n        } else {\n            generateWordBtn = (\n                <Button\n                    title=\"generate word document\"\n                    faglyph=\"file-word-o\"\n                    alignRight={ true }\n                    extraClasses={{\n                        'btn-default': true,\n                        'no-border': false,\n                        'disabled': true,\n                        'results-subheading-button': true,\n                    }}>\n                    Word\n                </Button>\n            );\n        }\n\n        var generateVisioBtn;\n        if (firstInstallation && (!_.isEmpty(firstInstallation.clusters) || !_.isEmpty(firstInstallation.hagroups))) {\n            generateVisioBtn = (\n                <a href={ '../qadv/' + this.props.projectId }\n                    title=\"generate visio diagram\"\n                    className=\"btn btn-default results-subheading-button\"\n                    alignRight={ true }>\n                    <FAGlyph name={ 'sitemap' } />Visio\n                </a>\n            );\n        } else {\n            generateVisioBtn = (\n                <Button\n                    title=\"generate visio diagram\"\n                    faglyph=\"file-powerpoint-o\"\n                    alignRight={ true }\n                    extraClasses={{\n                        'btn-default': true,\n                        'no-border': false,\n                        'disabled': true,\n                        'results-subheading-button': true,\n                    }}>\n                    Visio\n                </Button>\n            );\n        }\n\n        return(\n            <div>\n                <ColumnHeader columnTitle=\"Results\">\n                    <ActionLink\n                        isToggle={ true }\n                        select={ this._showCurrentView }\n                        selected={ currentSystemsView && canShowSelected }\n                        enabled={ canShowSelected }>\n                        Selected Systems\n                    </ActionLink>\n                    <ActionLink\n                        isToggle={ true }\n                        select={ this._showSolutionView }\n                        selected={ !currentSystemsView || !canShowSelected }\n                        enabled={ true }>\n                        All Systems\n                    </ActionLink>\n                </ColumnHeader>\n                <ScrollableRegion>\n                    <div className=\"filter-pane\">\n                        <div className=\"btn-group\">\n                            { generateWordBtn }\n                            { generateVisioBtn }\n                        </div>\n                        <div className=\"btn-group pull-right\">\n                            <Button\n                                onClick={ this._showUnitBase10 }\n                                title=\"toggle base 10\"\n                                alignRight= { true }\n                                extraClasses={{\n                                    'results-subheading-button': true,\n                                    'btn-default': true,\n                                    'no-border': false,\n                                    'toggled': useBase10Yields,\n                                }}>\n                                Base 10\n                            </Button>\n                            <Button\n                                onClick={ this._showUnitBase2 }\n                                title=\"toggle base 2\"\n                                alignRight= { true }\n                                extraClasses={{\n                                    'results-subheading-button': true,\n                                    'btn-default': true,\n                                    'no-border': false,\n                                    'toggled': !useBase10Yields,\n                                }}>\n                                Base 2\n                            </Button>\n                        </div>\n                    </div>\n                    <div className=\"group-type-label\">\n                        <span>Capacity</span>\n                        <span className=\"pull-right action\">\n                            <span\n                                title={ grouped ? \"click to see drive size details\" : \"click to hide drive size details\" }\n                                onClick={ grouped ? this._expandAll : this._groupAll }\n                                className=\"expand-collapse-toggle\">\n                                { grouped ? \"Expand\" : \"Collapse\" }\n                            </span>\n                        </span>\n                    </div>\n                    <CapacitySummary\n                        grouped={ grouped }\n                        summary={ summary }\n                        useBase10Yields = { useBase10Yields }/>\n                    <br/>\n                    <div className=\"group-type-label\">\n                        <span>Drives</span>\n                    </div>\n                    <DriveSummary\n                        summary={ summary } />\n                    <br/>\n                    <div className=\"group-type-label\">\n                        <span>Environmental</span>\n                        <div className=\"btn-group pull-right results-subheading-button-group\">\n                            <Button\n                                onClick={ this._setMainsVoltageTo_v_100 }\n                                title=\"toggle mains voltage to 110V\"\n                                alignRight= { true }\n                                extraClasses={{\n                                    'results-subheading-button': true,\n                                    'btn-default': true,\n                                    'no-border': false,\n                                    'toggled': mainsVoltage !== \"v_200\",\n                                }}>\n                                110 V\n                            </Button>\n                            <Button\n                                onClick={ this._setMainsVoltageTo_v_200 }\n                                title=\"toggle mains voltage to 220V\"\n                                alignRight= { true }\n                                extraClasses={{\n                                    'results-subheading-button': true,\n                                    'btn-default': true,\n                                    'no-border': false,\n                                    'toggled': mainsVoltage === \"v_200\",\n                                }}>\n                                220 V\n                            </Button>\n                        </div>\n                    </div>\n                    <EnvironmentalSummaryView\n                        hagroups = { hagroups }\n                        map = { this.props.map }\n                        voltageDisplay={ mainsVoltage } />\n                </ScrollableRegion>\n            </div>\n        );\n    }\n});\n\nmodule.exports = Reports;\n","'use strict';\n\nvar React = require('react'),\n    assert = require('assert');\n\nfunction renderSeparatedList(seq, renderOne, renderSeparator) {\n    assert(seq instanceof Array);\n    assert(typeof renderOne === 'function');\n    assert(typeof renderSeparator === 'function' || renderSeparator === undefined);\n\n    var result = [],\n        last = seq.length - 1;\n\n    for (var idx = 0; idx < last; idx ++) {\n        result.push(renderOne(seq[idx]));\n        if (renderSeparator) {\n            result.push(renderSeparator());\n        }\n    }\n\n    if (seq.length > 0) {\n        result.push(renderOne(seq[last]));\n    }\n\n    return result;\n}\n\nvar SeparatedList = React.createClass({\n    propTypes: {\n        seq: React.PropTypes.array,\n        render: React.PropTypes.func.isRequired,\n        /* how to check sep, head, tail? */\n        className: React.PropTypes.string.isRequired,\n    },\n\n    _renderSeparator: function() {\n        var sep = this.props.sep;\n\n        if (sep === undefined) {\n            return (\n                <span className=\"sep\">; </span>\n            );\n        } else if (typeof sep === 'function') {\n            return sep();\n        } else {\n            return sep;\n        }\n    },\n\n    render: function() {\n        if (this.props.seq && this.props.seq.length > 0) {\n            return (\n                <div className={ this.props.className }>\n                    { this.props.head }\n                    {\n                        renderSeparatedList(\n                            this.props.seq,\n                            this.props.render,\n                            this._renderSeparator\n                        )\n                    }\n                    { this.props.tail }\n                </div>\n            );\n        } else {\n            return (\n                <div className={ this.props.className + ' hide' }>\n                    { null /* sequence empty or not present */ }\n                </div>\n            );\n        }\n    }\n});\n\nmodule.exports = SeparatedList;","'use strict';\n\nvar React = require('react'),\n    Button = require('./button');\n\nvar SessionExpirationOverlay = React.createClass({\n    propTypes: {\n        store: React.PropTypes.object.isRequired\n    },\n\n    getInitialState: function() {\n        return this.props.store.getState();\n    },\n\n    componentDidMount: function() {\n        this.props.store.watch(this.getSessionData);\n        this.interval = setInterval(this.getSessionData, 1000);\n    },\n\n    componentWillUnmount: function() {\n        this.props.store.unwatch(this.getSessionData);\n        clearInterval(this.interval);\n    },\n\n    getSessionData: function() {\n        this.setState(this.props.store.getState());\n    },\n\n    reloadPage: function(/* event */) {\n        location.reload();\n    },\n\n    render: function() {\n        if (!this.state.isExpired) {\n          return null;\n        } else {\n          return(\n            <div className=\"session-expire-overlay\">\n              <div className=\"inner\">\n                <span className=\"session-expire-message\">Your session has expired.</span><br/>\n                <Button\n                    title=\"login\"\n                    name=\"redirectToAuthnode\"\n                    id=\"REDIRECT_TO_AUTHNODE\"\n                    onClick={ this.reloadPage }\n                    extraClasses={{\n                        'btn-default': true,\n                        'no-border': false,\n                    }}>\n                    Login\n                </Button>\n              </div>\n            </div>\n          );\n        }\n    }\n});\n\nmodule.exports = SessionExpirationOverlay;\n","'use strict';\n\nvar React = require('react'),\n    modelUtil = require('../../lib/model/util'),\n    ShelfDriveGroupSummary = require('./hw-shelf-drive-group'),\n    _ = require('lodash'),\n    cnst = require('./constants'),\n    constants = require('../../lib/constants.js');\n\nvar ShelfDetails = React.createClass({\n    propTypes: {\n        systems: React.PropTypes.array.isRequired,\n        selected: React.PropTypes.object.isRequired,\n        select: React.PropTypes.func.isRequired,\n        fire: React.PropTypes.func.isRequired,\n        col3View: React.PropTypes.string.isRequired,\n    },\n    _getWrappedSystems: function() {\n        var props = this.props,\n            isGroupedSystems = Array.isArray(props.systems),\n            wrappedSystems = isGroupedSystems ? props.systems : [props.systems];\n        return wrappedSystems;\n    },\n\n    selectShelf: function(shelf, event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        var selector = {\n                shelf: {\n                    model: shelf.model,\n                    _isembedded: false,\n                    _x_bom: { drive_specs: [] }\n                }\n            };\n\n        _.forEach(shelf._x_bom.drive_specs, addSelectorConstraint);\n\n        function addSelectorConstraint(spec) {\n            selector.shelf._x_bom.drive_specs.push({ model: spec.model, quantity: spec.quantity });\n        }\n\n        this.props.select(selector, cnst.UI_SELECT_ADD_CHANGE_SHELF_DRIVE_LIST);\n    },\n\n    addShelf: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n        this.props.select({}, cnst.UI_SELECT_ADD_CHANGE_SHELF_DRIVE_LIST);\n    },\n\n    _isAddNewSelected: function() {\n        if (this.props.col3View === cnst.UI_SELECT_ADD_CHANGE_SHELF_DRIVE_LIST) {\n            if (_.isEmpty(this.props.selected.shelf)) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    render: function () {\n        // TODO: extract this copied grouping code\n        var _this = this;\n        var systems = this.props.systems;\n        var grouped = modelUtil.groupShelves(_(systems).flatten('shelves').where(function(s){return !s._isembedded;}).value());\n\n        var shelfGroupEditors = _.map(Object.keys(grouped).sort(), function(k) {\n            var safeShelf = _.find(grouped[k], isNotUsedInManual) || grouped[k][0];\n\n            function isNotUsedInManual(shelf) {\n                return !_this.props.map.inspect(shelf).isUsedByManualAggregate();\n            }\n\n            var selectDetails = _.partial(_this.selectShelf, safeShelf);\n\n            return (\n                <ShelfGroupEditor\n                    shelf={safeShelf}\n                    map={ _this.props.map }\n                    count={grouped[k].length}\n                    fire={_this.props.fire}\n                    selected={ _this.props.selected }\n                    selectDetails={ selectDetails }\n                    systems={systems} />\n            );\n        });\n\n        var addNewCSS = React.addons.classSet({\n            'row-list-item': true,\n            'selectable': true,\n            'new': true,\n            'selected': this._isAddNewSelected(),\n        });\n\n        return(\n            <div className=\"row-list-item-grouping\">\n                <div className={ addNewCSS } onClick={ this.addShelf }>\n                    <div className=\"row-list-cell row-list-cell-s\">\n                    </div>\n                    <div className=\"row-list-cell\">\n                        Add a new shelf\n                    </div>\n                    <span className=\"chevron\">\n                        <span className=\"fa fa-fw fa-plus\"></span>\n                    </span>\n                </div>\n                {shelfGroupEditors}\n            </div>\n        );\n    }\n});\n\nvar ShelfGroupEditor = React.createClass({\n    propTypes: {\n        fire: React.PropTypes.func.isRequired,\n        selectDetails: React.PropTypes.func.isRequired,\n        selected: React.PropTypes.object.isRequired,\n        shelf: React.PropTypes.object.isRequired,\n        count: React.PropTypes.number.isRequired,\n        systems: React.PropTypes.array.isRequired\n    },\n    getInitialState: function() {\n        return {\n            showLimitReason: false,\n            limitReasonToDisplay: ''\n        };\n    },\n    componentWillReceiveProps: function(/* nextProps */) {\n        this.setState({\n            showLimitReason: false,\n            limitReasonToDisplay: ''\n        });\n    },\n    _getByMatchingShelfCount: function (shelf) {\n        var matching  = _.groupBy(this.props.systems,\n            function(c) { return _.reduce(c.shelves,\n                function(c, s) { return c + (modelUtil.shelfDriveComboEquals(s, shelf) ? 1 : 0); }, 0); });\n        return matching;\n    },\n    _addShelf: function (specs, event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        this.props.fire('PROJECT_CHANGE_SYSTEMS', specs);\n    },\n    _deleteShelf: function (version, event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        var _props = this.props;\n        if (_props.systems && _props.shelf) {\n            var systemsByMatchingShelfCount = this._getByMatchingShelfCount(_props.shelf);\n            var maxCountOfShelves = _.max(Object.keys(systemsByMatchingShelfCount)); // TODO: verify _.max parseInt on these keys for compares\n            var targetSystems = systemsByMatchingShelfCount[maxCountOfShelves]; // systems with the most of these shelves\n\n            _props.fire('PROJECT_DELETE_SHELF', targetSystems[0]._id, _props.shelf);\n\n            if (targetSystems[0].is_clustered) {\n                _props.fire('PROJECT_SET_CLUSTER_VERSION', targetSystems[0].cluster._id, version);\n            } else {\n                _props.fire('PROJECT_SET_SYSTEM_VERSION', targetSystems[0]._id, version);\n            }\n        }\n    },\n\n    _displayLimitReason: function(config, event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        var type = constants.LIMIT_TYPES.DRIVE_TOTAL,\n            conflict = _.first(config ? config.conflicts || [] : []);\n\n        if(!_.isEmpty(conflict)) {\n            var attribute = conflict.attribute.toUpperCase().replace('.','_');\n\n            type = constants.LIMIT_TYPES[attribute];\n        }\n\n        this.setState({\n            showLimitReason: true,\n            limitReasonToDisplay: type\n        });\n    },\n\n    _isSelected: function() {\n        var selectedShelf = this.props.selected.shelf,\n            currentShelf = _.first(this.props.shelf) || this.props.shelf;\n\n        if (selectedShelf && currentShelf) {\n            if (_.has(selectedShelf, '_x_bom') && _.has(currentShelf, '_x_bom')) {\n                return modelUtil.shelfDriveComboEquals(selectedShelf, currentShelf);\n            } else {\n                return false;\n            }\n        } else {\n            return false;\n        }\n    },\n\n    render: function () {\n        var props = this.props,\n            hagroup = (props.systems.length === 1) ? props.systems[0] : props.systems,\n            matrix = props.map.inspect(hagroup).config.matrix,\n            version = hagroup.version;\n\n        var shelf = props.shelf,\n            count = this.props.count,\n            imageUrl = '../media/img/' + shelf.model.replace(\" \",\"\") + '_front_view.png',\n            drive_specs = _.isEmpty(shelf._x_bom) ? [] : shelf._x_bom.drive_specs,\n            drivesDisplay = _(drive_specs).map(function(d) {\n                var compat = matrix.checkVersionShelfDrive(version, shelf.model, d.model);\n\n                return(\n                    <ShelfDriveGroupSummary\n                        driveGroup={ d }\n                        fpSupport={ compat.fp_support_drive }\n                        shelfCount={ count } />\n                );\n            }).value(),\n            shelfCSS = React.addons.classSet({\n                'row-list-item': true,\n                'selectable': true,\n                'selected': this._isSelected(),\n            });\n\n        var policies = hagroup._policies || {},\n            versionPolicy = policies.version || {},\n            options = versionPolicy.pin ? { version: version } : {};\n\n        var base = _.pick(this.props.selected, ['installation', 'cluster', 'hagroup']),\n            guard = this.props.map.guard(base, options),\n            configs = guard.addingShelf(),\n            addShelfConfig = _.find(configs, function match(config) {\n                return modelUtil.isConfigForShelf(config, shelf);\n            }),\n            countDom;\n\n        var replacing = _.merge({ shelf: { _id: shelf._id } }, base),\n            delConfigs = guard.deletingShelf(replacing),\n            deleteShelfConfig = _.last(delConfigs),\n            deleteDom;\n\n        if (deleteShelfConfig && deleteShelfConfig.isEnabled) {\n            var delAction = _.partial(this._deleteShelf, deleteShelfConfig.newVersion);\n\n            deleteDom = (<span className=\"fa fa-fw fa-minus\" onClick={ delAction }></span>);\n        } else {\n            var delReason = _.partial(this._displayLimitReason, deleteShelfConfig);\n\n            deleteDom = (<span className=\"fa fa-fw fa-lock disabled\" onClick={ delReason }></span>);\n        }\n\n        if (addShelfConfig && addShelfConfig.isEnabled) {\n            var specs = addShelfConfig.buildSpec(base),\n                addShelf = _.partial(this._addShelf, specs);\n\n            countDom = (\n                <div className=\"row-list-cell row-list-cell-s\">\n                    { deleteDom }\n                    <input type=\"text\" value={this.props.count} className=\"input-count\" />\n                    <span className=\"fa fa-fw fa-plus\" onClick={ addShelf }></span>\n                </div>\n            );\n        } else {\n            var showReason = _.partial(this._displayLimitReason, addShelfConfig);\n\n            countDom = (\n                <div className=\"row-list-cell row-list-cell-s\">\n                    { deleteDom }\n                    <input type=\"text\" value={this.props.count} className=\"input-count\" />\n                    <span className=\"fa fa-fw fa-warning disabled\" onClick={ showReason }></span>\n                </div>\n            );\n        }\n\n        var shelfHeadroom;\n        if (this.state.showLimitReason)\n        {\n            var warningMsg = constants.LIMIT_REASONS[this.state.limitReasonToDisplay],\n                glyph = '';\n            switch (this.state.limitReasonToDisplay) {\n                case constants.LIMIT_TYPES.AGGR_MANUAL:\n                    glyph = 'fa-lock';\n                break;\n                default:\n                    glyph = 'fa-warning';\n                break;\n            }\n\n            shelfHeadroom = (\n                <div className=\"headroom\">\n                    <span className={ 'fa fa-fw ' + glyph }></span> { warningMsg }\n                </div>\n            );\n        }\n\n        return (\n            <div>\n                { shelfHeadroom }\n                <div className={ shelfCSS } onClick={this.props.selectDetails}>\n                    { countDom }\n                    <div className=\"row-list-cell row-list-cell-l\">\n                        <span className=\"emphasize\">{shelf.model}</span>\n                        {drivesDisplay}\n                    </div>\n                    <div className=\"row-list-cell row-list-cell-m row-list-cell-img hide-contracted-full\">\n                        <img src={ imageUrl } alt={ shelf.model } className=\"shelf-img\" />\n                    </div>\n                    <span className=\"chevron\">\n                        <span className=\"fa fa-fw fa-chevron-right\"></span>\n                    </span>\n                </div>\n            </div>\n        );\n    }\n});\n\nmodule.exports = ShelfDetails;\n","'use strict';\n\nvar _ = require('lodash'),\n    React = require('react'),\n    ColumnHeader = require('./layout/column-header'),\n    ActionLink = require('./layout/action-link'),\n    ScrollableRegion = require('./layout/scrollable-region'),\n    FAGlyph = require('./faglyph'),\n    Button = require('./button'),\n    Tooltip = require('./tooltip'),\n    constants = require('../../lib/constants.js');\n\nvar ShelfSpecRow = React.createClass({\n    fireOnClick: function(event) {\n        if (this.props.enabled) {\n            this.props.fire(event);\n        }\n    },\n    render: function () {\n        var p = this.props;\n        var d2c = <span/>;\n        var d2m = <span/>;\n        var d2i = <span/>;\n        var cssClassName = React.addons.classSet({\n            'row-list-item': true,\n            'ssp-selected': p.selected,\n            'selectable': !p.conflicts || p.conflicts.length === 0,\n            'disabled-selection': p.conflicts && p.conflicts.length > 0\n        });\n\n        if (p.dnB) {\n            d2c = (\n                <div className=\"count-icon-grouping\">\n                    <span className=\"count\">{ p.dnB }</span>\n                    <span className=\"icon\">\n                        <span className={ \"fa fa-fw fa-hdd-o \" + p.dcssB }></span>\n                    </span>\n                    <span className=\"item\">\n                        <span className=\"capacity-count\">{ ((p.dcB > 999) ? (p.dcB/1000) + 'TB ' : p.dcB + 'GB ') }</span>\n                        { p.dtB }\n                    </span>\n                </div>\n            );\n            d2m = (\n                <div>\n                    <span>{ p.dmB }</span>\n                    <span>{ p.doB }</span>\n                </div>\n            );\n            d2i = (\n                <div>\n                    <FAGlyph name=\"flash\" extraClasses={p.dfB} title=\"Supports Flash Pool\"/>\n                    <FAGlyph name=\"key\" extraClasses={p.deB} title=\"Encrypted\"/>\n                    <FAGlyph name=\"clock-o\" extraClasses={p.doB} title=\"End of Availability\"/>\n                </div>\n            );\n        }\n\n        var disabledTooltip;\n        if (p.conflicts && p.conflicts.length > 0) {\n            var conflicts = _.map(p.conflicts, function(conflict) {\n                var attribute = conflict.attribute.toUpperCase().replace('.','_'),\n                    limit_type = constants.LIMIT_TYPES[attribute],\n                    limit_reason = constants.LIMIT_REASONS[limit_type];\n\n                return (\n                    <div>\n                        { limit_reason }\n                    </div>\n                );\n            });\n            disabledTooltip = (\n                <Tooltip title=\"Disabled\"\n                     position=\"top\"\n                     titleClassName=\"right strong\">\n                     { conflicts }\n                </Tooltip>\n            );\n        }\n\n        return (\n            <div>\n                <div className={ cssClassName } onClick={ this.fireOnClick }>\n                    <div className=\"row-list-cell row-list-cell-s\">\n                        <span className=\"emphasize\">{ p.sm }</span>\n                    </div>\n                    <div className=\"row-list-cell row-list-cell-m\">\n                        <div className=\"count-icon-grouping\">\n                            <span className=\"count\">{ p.dnA }</span>\n                            <span className=\"icon\">\n                                <span className={ \"fa fa-fw fa-hdd-o \" + p.dcssA }></span>\n                            </span>\n                            <span className=\"item\">\n                                <span className=\"capacity-count\">{ ((p.dcA > 999) ? (p.dcA/1000) + 'TB' : p.dcA + 'GB') }</span>\n                                { p.dtA }\n                            </span>\n                        </div>\n                        { d2c }\n                    </div>\n                    <div className=\"row-list-cell row-list-cell-s\">\n                         <span>{ p.dmA }</span>\n                        { d2m }\n                    </div>\n                    <div className=\"row-list-cell icon-tag-grouping\">\n                        <div>\n                            <FAGlyph name=\"flash\" extraClasses={p.dfA} title=\"Supports Flash Pool\"/>\n                            <FAGlyph name=\"key\" extraClasses={p.deA} title=\"Encrypted\"/>\n                            <FAGlyph name=\"clock-o\" extraClasses={p.doA} title=\"End of Availability\"/>\n                        </div>\n                        { d2i }\n                    </div>\n                </div>\n                { disabledTooltip }\n            </div>\n        );\n    }\n});\n\nvar ShelfList = React.createClass({\n    propTypes: {\n        selection: React.PropTypes.object.isRequired,\n        selectDetails: React.PropTypes.object.isRequired,\n        selectedItem: React.PropTypes.array.isRequired,\n        fire: React.PropTypes.func.isRequired,\n        onClose: React.PropTypes.func,\n        map: React.PropTypes.object.isRequired\n    },\n\n    getInitialState: function() {\n        return {\n            speedFilter: false,\n            modelFilter: false,\n            showEoa: false\n        };\n    },\n\n    componentWillReceiveProps: function(nextProps) {\n        if (!_.isEqual(this.props.selectDetails, nextProps.selectDetails)) {\n            this.setState({\n                speedFilter: false,\n                modelFilter: false,\n                showEoa: false\n            });\n        }\n    },\n\n    componentDidMount: function() {\n        this.refs.FilterSpeedNone.getDOMNode().setAttribute('checked', 'checked');\n        this.refs.FilterModelNone.getDOMNode().setAttribute('checked', 'checked');\n    },\n\n    _getShelfDriveCombos: function(shelfConfigs) {\n        var allShelfDriveCombos = [],\n            hagroup = this.props.selectedItem.length ? this.props.selectedItem[0] : this.props.selectedItem,\n            matrix = this.props.map.inspect(hagroup).config.matrix;\n\n        _.forEach(shelfConfigs, function(shelfConfig) {\n            var drive1, drive1Quantity, drive2, drive2Quantity;\n            if (shelfConfig.drives && shelfConfig.drives.length) {\n                drive1 = shelfConfig.drives[0].drive;\n                drive1Quantity = shelfConfig.drives[0].quantity;\n                if (shelfConfig.drives.length > 1) {\n                    drive2 = shelfConfig.drives[1].drive;\n                    drive2Quantity = shelfConfig.drives[1].quantity;\n                }\n            }\n\n            // fp_support needs to represent the platform limit, not just physical drive support\n            var shelfModel = shelfConfig.shelf.model,\n                d1Model = drive1 && drive1.model,\n                drive1Compat = drive1 ? matrix.checkVersionShelfDrive(shelfConfig.newVersion, shelfModel, d1Model) : {};\n\n            var d2Model = drive2 && drive2.model,\n                drive2Compat = drive2 ? matrix.checkVersionShelfDrive(shelfConfig.newVersion, shelfModel, d2Model) : {};\n\n            allShelfDriveCombos.push({\n                config: shelfConfig,\n                shelf: shelfConfig.shelf.model,\n                _isSellable: shelfConfig.shelf.sellable,\n                _isembedded: shelfConfig.isEmbedded,\n                isMixed: _.isEmpty(drive2) ? false : true,\n                drive1DriveType: drive1 && drive1.type,\n                drive1MarketingCapacity: drive1 && drive1.capacity && drive1.capacity.marketing,\n                drive1Model: drive1 && drive1.model,\n                drive1Quantity: drive1Quantity || 0,\n                drive1Speed: drive1 && drive1.speed,\n                drive1Encrypted: drive1 && drive1.encrypted,\n                drive1FlashPool: drive1 && drive1Compat.fp_support_drive || false,\n                drive1Sellable: drive1 && drive1.sellable,\n                drive2DriveType: drive2 && drive2.type,\n                drive2MarketingCapacity: drive2 && drive2.capacity && drive2.capacity.marketing,\n                drive2Model: drive2 && drive2.model,\n                drive2Quantity: drive2Quantity || 0,\n                drive2Speed: drive2 && drive2.speed,\n                drive2Encrypted: drive2 && drive2.encrypted,\n                drive2FlashPool: drive2 && drive2Compat.fp_support_drive || false,\n                drive2Sellable: drive2 && drive2.sellable || true\n            });\n        });\n\n        allShelfDriveCombos = _.uniq(allShelfDriveCombos, function(combo) { return JSON.stringify(_.omit(combo, 'config')); });\n        allShelfDriveCombos = _.sortBy(allShelfDriveCombos, ['drive1Model', 'drive2Model']);\n        allShelfDriveCombos = _.sortBy(allShelfDriveCombos, ['drive1Encrypted', 'drive2Encrypted']).reverse();\n        allShelfDriveCombos = _.sortBy(allShelfDriveCombos, ['drive1MarketingCapacity', 'drive2MarketingCapacity']);\n        allShelfDriveCombos = _.sortBy(allShelfDriveCombos, ['drive1Quantity', 'drive2Quantity']);\n        allShelfDriveCombos = _.sortBy(allShelfDriveCombos, ['drive1DriveType', 'drive2DriveType']).reverse();\n        allShelfDriveCombos = _.sortBy(allShelfDriveCombos, ['drive1Speed', 'drive2Speed']).reverse();\n        allShelfDriveCombos = _.sortBy(allShelfDriveCombos, 'shelf').reverse();\n        allShelfDriveCombos = _.sortBy(allShelfDriveCombos, 'isMixed');\n\n        return allShelfDriveCombos;\n    },\n\n    _stop: function (event) {\n        if (event) {\n            event.stopPropagation();\n            // event.preventDefault(); // prevent radio button from being checked\n        }\n    },\n\n    _filterSpeedChange: function (event) {\n        this._stop(event);\n        if (event.target.checked) {\n            this._filterChange(event.target.value, this.state.modelFilter, this.state.showEoa);\n        }\n    },\n\n    _filterChangeModel: function (event) {\n        this._stop(event);\n        if (event.target.checked) {\n            this._filterChange(this.state.speedFilter, event.target.value, this.state.showEoa);\n        }\n    },\n\n    _filterShowEoa: function (event) {\n        this._stop(event);\n        this._filterChange(this.state.speedFilter, this.state.modelFilter, true);\n    },\n\n    _filterHideEoa: function (event) {\n        this._stop(event);\n        this._filterChange(this.state.speedFilter, this.state.modelFilter, false);\n    },\n\n    _applyFilter: function (all, speed, model, showEoa) {\n        return this._applyFilterWithProps(all, speed, model, showEoa, this.props);\n    },\n\n    _applyFilterWithProps: function (all, speed, model, showEoa, props) {\n        var shelves = (props.selection.length === 1) ? props.selection[0] : props.selection,\n            isShelf = _(props.selectDetails).has('shelf') ? true : false;\n\n        return _(all)\n            .filter(checkSellable)\n            .filter(checkModel)\n            .filter(checkSpeed)\n            .filter(checkEmbedding)\n            .value();\n\n        function checkEmbedding(combo) {\n            return (!isShelf && !combo._isembedded) ||\n                isShelf &&\n                ((shelves._isembedded === combo._isembedded) ||\n                 (!shelves._isembedded && !combo._isembedded));\n        }\n\n        function checkSpeed(combo) {\n            return !speed ||\n                   (speed === 'split' && combo.drive2Speed) ||\n                   (combo.drive1Speed === Number(speed)) ||\n                   (combo.drive2Speed === Number(speed));\n        }\n\n        function checkModel(combo) {\n            return !model || (combo.shelf === model);\n        }\n\n        function checkSellable(combo) {\n            return showEoa || (combo._isSellable && combo.drive1Sellable && combo.drive2Sellable);\n        }\n    },\n\n    _filterChange: function (speed, model, showEoa) {\n        this.setState({\n            speedFilter: speed,\n            modelFilter: model,\n            showEoa: showEoa\n        });\n    },\n\n    _deleteShelf: function (version, event) {\n        this._stop(event);\n\n        var props = this.props,\n            currentShelf =  props.selection.length ? props.selection[0] : props.selection;\n\n        if (currentShelf) {\n            _.forEach(props.selectedItem, function(s) {\n                props.fire('PROJECT_DELETE_SHELVES', s._id, currentShelf);\n\n                if (s.is_clustered) {\n                    props.fire('PROJECT_SET_CLUSTER_VERSION', s.cluster._id, version);\n                } else {\n                    props.fire('PROJECT_SET_SYSTEM_VERSION', s._id, version);\n                }\n            });\n        }\n\n        this._close(event);\n    },\n\n    _addShelf: function (shelfDriveCombo, addingTo, replacing, event) {\n        this._stop(event);\n\n        var fire = this.props.fire,\n            specs = shelfDriveCombo.config.buildSpec(addingTo, replacing);\n\n        fire('PROJECT_CHANGE_SYSTEMS', specs);\n        this._close(event);\n    },\n\n    _close: function (event) {\n        this.props.onClose(event);\n    },\n\n    _renderShelfFilter: function () {\n        var eSeriesShelfModels = [\"DE6600\", \"DE5600\", \"DE1600\"],\n            fasShelfModels = [\"DS2246\", \"DS4243\", \"DS4246\", \"DS4486\"];\n        var  props = this.props,\n             shelfFilter = [],\n             selector = props.selection.length ? props.selection[0] : props.selection;\n        var filterChangeModel = this._filterChangeModel;\n\n        function renderFilter(shelfmodel) {\n            var inputId = \"Filter\" + shelfmodel,\n                filter = [];\n            filter.push(\n                <input\n                    onChange={ filterChangeModel }\n                    type=\"radio\"\n                    name=\"filterShelvesByModel\"\n                    value={shelfmodel}\n                    id={inputId} />\n            );\n\n            filter.push(\n                <label htmlFor={inputId} className=\"btn btn-default\">\n                    <span>{shelfmodel}</span>\n                </label>\n            );\n\n            return filter;\n        }\n\n        //cheated both ESeries model and shelf model contains E\n        if (selector.model.substring(0, 1) === 'E') {\n            for (var i = 0; i < eSeriesShelfModels.length; i++) {\n                var model = eSeriesShelfModels[i];\n                shelfFilter.push(renderFilter(model));\n            }\n        } else {\n            for (var index = 0; index < fasShelfModels.length; index++) {\n                var fasModel = fasShelfModels[index];\n                shelfFilter.push(renderFilter(fasModel));\n            }\n        }\n\n        return shelfFilter;\n    },\n\n    render: function() {\n        var props = this.props,\n            selection = props.selection,\n            selectDetails = props.selectDetails;\n\n        var isShelf = _.has(selectDetails, 'shelf') ? true : false,\n            shelf = selection.length ? selection[0] : selection,\n            addShelf = this._addShelf;\n\n        var addingTo, replacing;\n\n        if (isShelf) {\n            addingTo = _.pick(selectDetails, ['installation', 'cluster', 'hagroup']);\n            replacing = selectDetails;\n        } else {\n            addingTo = selectDetails;\n        }\n\n        var hagroup = props.selectedItem.length ? props.selectedItem[0] : props.selectedItem,\n            policies = hagroup._policies || {},\n            versionPolicy = policies.version || {},\n            options = versionPolicy.pin ? { version: hagroup.version } : {};\n\n        var guard = props.map.guard(addingTo, options),\n            configs = isShelf ? guard.addingShelf(replacing) : guard.addingShelf();\n\n        var speedFilter = this.state.speedFilter || false,\n            modelFilter = this.state.modelFilter || false,\n            showEoa = this.state.showEoa || false;\n\n        var allCombos = this._getShelfDriveCombos(configs),\n            filteredCombos = this._applyFilterWithProps(allCombos, speedFilter, modelFilter, showEoa, props);\n\n        var enabledItems = [],\n            disabledItems = [],\n            dcssA = '',\n            dcssB = '';\n\n        _.forEach(filteredCombos, function renderCombo(combo) {\n            switch(combo.drive1Speed) {\n                case 10:\n                    dcssA = 'text-blue';\n                    break;\n                case 15:\n                    dcssA = 'text-green';\n                    break;\n                case 50:\n                    dcssA = 'text-purple';\n                    break;\n                default:\n                    dcssA = '';\n            }\n\n            switch(combo.drive2Speed) {\n                case 10:\n                    dcssB = 'text-blue';\n                    break;\n                case 15:\n                    dcssB = 'text-green';\n                    break;\n                case 50:\n                    dcssB = 'text-purple';\n                    break;\n                default:\n                    dcssB = '';\n            }\n\n            if (combo.config.isEnabled) {\n                enabledItems.push(\n                    <ShelfSpecRow enabled={ true } fire={ _.partial(addShelf, combo, addingTo, replacing) }\n                        sm={ combo.shelf }\n                        dcssA={ dcssA }\n                        dgA={ combo.drive1DriveType === 'SSD' ? 'hdd-o' : 'hdd-o' }\n                        dmA={ combo.drive1Model }\n                        dnA={ combo.drive1Quantity }\n                        dcA={ combo.drive1MarketingCapacity }\n                        dtA={ combo.drive1DriveType }\n                        deA={ { 'disable-tag': !combo.drive1Encrypted } }\n                        dfA={ { 'disable-tag': !combo.drive1FlashPool } }\n                        doA={ { 'disable-tag': combo.drive1Sellable } }\n                        dcssB={ dcssB }\n                        dgB={ combo.drive2DriveType === 'SSD' ? 'hdd-o' : 'hdd-o' }\n                        dmB={ combo.drive2Model }\n                        dnB={ combo.drive2Quantity }\n                        dcB={ combo.drive2MarketingCapacity }\n                        dtB={ combo.drive2DriveType }\n                        deB={ { 'disable-tag': !combo.drive2Encrypted } }\n                        dfB={ { 'disable-tag': !combo.drive2FlashPool } }\n                        doB={ { 'disable-tag': combo.drive2Sellable } }\n                        conflicts={ combo.config.conflicts } />\n                );\n            } else {\n                disabledItems.push(\n                    <ShelfSpecRow enabled={ false }\n                        sm={ combo.shelf }\n                        dcssA={ dcssA }\n                        dgA={ combo.drive1DriveType === 'SSD' ? 'hdd-o' : 'hdd-o' }\n                        dmA={ combo.drive1Model }\n                        dnA={ combo.drive1Quantity }\n                        dcA={ combo.drive1MarketingCapacity }\n                        dtA={ combo.drive1DriveType }\n                        deA={ { 'disable-tag': !combo.drive1Encrypted } }\n                        dfA={ { 'disable-tag': !combo.drive1FlashPool } }\n                        doA={ { 'disable-tag': combo.drive1Sellable } }\n                        dcssB={ dcssB }\n                        dgB={ combo.drive2DriveType === 'SSD' ? 'hdd-o' : 'hdd-o' }\n                        dmB={ combo.drive2Model }\n                        dnB={ combo.drive2Quantity }\n                        dcB={ combo.drive2MarketingCapacity }\n                        dtB={ combo.drive2DriveType }\n                        deB={ { 'disable-tag': !combo.drive2Encrypted } }\n                        dfB={ { 'disable-tag': !combo.drive2FlashPool } }\n                        doB={ { 'disable-tag': combo.drive2Sellable } }\n                        conflicts={ combo.config.conflicts } />\n                );\n            }\n        });\n\n        var mode, displayShelfSlotFilterStyle, removeShelfLink;\n\n        if (isShelf) {\n            if (shelf._isembedded) {\n                mode = 'Change Internal Drives';\n                displayShelfSlotFilterStyle = {display: 'none;'};\n            } else {\n                var delConfigs = guard.deletingShelf(replacing),\n                    deleteShelfConfig = _.last(delConfigs),\n                    delAction = _.partial(this._deleteShelf, deleteShelfConfig.newVersion);\n\n                mode = 'Change Shelf';\n                displayShelfSlotFilterStyle = {};\n                removeShelfLink = (\n                    <ActionLink\n                        isToggle={ false }\n                        select={ delAction }\n                        selected={ false }\n                        enabled={ (deleteShelfConfig && deleteShelfConfig.isEnabled) }>\n                        Delete\n                    </ActionLink>\n                );\n            }\n        } else {\n            mode = 'Add Shelf';\n            displayShelfSlotFilterStyle = {};\n        }\n\n        var disabledItemsList;\n\n        if (disabledItems.length > 0) {\n            disabledItemsList = (\n                <div>\n                    { disabledItems }\n                </div>\n            );\n        } else {\n            disabledItemsList = null;\n        }\n\n        return (\n            <div>\n                <ColumnHeader columnTitle={ mode }>\n                    { removeShelfLink }\n                    <ActionLink\n                        isToggle={ false }\n                        select={ this._close }\n                        selected={ false }\n                        enabled={ true }>\n                        Close\n                    </ActionLink>\n                </ColumnHeader>\n                <div>\n                    <div className=\"filter-pane\">\n                        <div className=\"btn-group\">\n                            <input\n                                onChange={ this._filterSpeedChange }\n                                type=\"radio\"\n                                name=\"filterShelvesBySpeed\"\n                                value=\"\"\n                                ref=\"FilterSpeedNone\"\n                                id=\"FilterSpeedNone\" />\n                            <label htmlFor=\"FilterSpeedNone\" className=\"btn btn-default\">\n                                <span> All</span>\n                            </label>\n                            <input\n                                onChange={ this._filterSpeedChange }\n                                type=\"radio\"\n                                name=\"filterShelvesBySpeed\"\n                                value=\"7.2\"\n                                id=\"FilterSpeed72\" />\n                            <label htmlFor=\"FilterSpeed72\" className=\"btn btn-default\">\n                                <span> 7.2K<FAGlyph name={ 'hdd-o' } /></span>\n                            </label>\n                            <input\n                                onChange={ this._filterSpeedChange }\n                                type=\"radio\"\n                                name=\"filterShelvesBySpeed\"\n                                value=\"10\"\n                                id=\"FilterSpeed10\" />\n                            <label htmlFor=\"FilterSpeed10\" className=\"btn btn-default\">\n                                <span className=\"text-blue\"> 10K<FAGlyph name={ 'hdd-o' } /></span>\n                            </label>\n                            <input\n                                onChange={ this._filterSpeedChange }\n                                type=\"radio\"\n                                name=\"filterShelvesBySpeed\"\n                                value=\"15\"\n                                id=\"FilterSpeed15\" />\n                            <label htmlFor=\"FilterSpeed15\" className=\"btn btn-default\">\n                                <span className=\"text-green\"> 15K<FAGlyph name={ 'hdd-o' } /></span>\n                            </label>\n                            <input\n                                onChange={ this._filterSpeedChange }\n                                type=\"radio\"\n                                name=\"filterShelvesBySpeed\"\n                                value=\"50\"\n                                id=\"FilterSpeed50\" />\n                            <label htmlFor=\"FilterSpeed50\" className=\"btn btn-default\">\n                                <span className=\"text-purple\"> SSD<FAGlyph name={ 'hdd-o' } /></span>\n                            </label>\n                            <input\n                                onChange={ this._filterSpeedChange }\n                                type=\"radio\"\n                                name=\"filterShelvesBySpeed\"\n                                value=\"split\"\n                                id=\"FilterSpeedSplit\" />\n                            <label htmlFor=\"FilterSpeedSplit\" className=\"btn btn-default\">\n                                <span className=\"text-orange\"> Mixed<FAGlyph name={ 'code-fork' } /></span>\n                            </label>\n                        </div>\n                        <div className=\"btn-group pull-right\">\n                            <Button\n                                onClick={ this._filterShowEoa }\n                                title=\"toggle show end of availability\"\n                                alignRight= { true }\n                                extraClasses={{\n                                    'btn-default': true,\n                                    'no-border': false,\n                                    'toggled': this.state.showEoa,\n                                }}>\n                                Show EOA\n                            </Button>\n                            <Button\n                                onClick={ this._filterHideEoa }\n                                title=\"toggle hide end of availability\"\n                                alignRight= { true }\n                                extraClasses={{\n                                    'btn-default': true,\n                                    'no-border': false,\n                                    'toggled': !this.state.showEoa,\n                                }}>\n                                Hide EOA\n                            </Button>\n                        </div>\n                    </div>\n\n                    <div className=\"filter-pane\">\n                        <div className=\"btn-group\" style={displayShelfSlotFilterStyle}>\n                            <input\n                                onChange={ this._filterChangeModel }\n                                type=\"radio\"\n                                name=\"filterShelvesByModel\"\n                                value=\"\"\n                                ref=\"FilterModelNone\"\n                                id=\"FilterModelNone\" />\n                            <label htmlFor=\"FilterModelNone\" className=\"btn btn-default\">\n                                <span> All</span>\n                            </label>\n                            { this._renderShelfFilter() }\n                        </div>\n                    </div>\n\n                    <ScrollableRegion top=\"130\">\n                        { enabledItems }\n                        { disabledItemsList }\n                    </ScrollableRegion>\n                </div>\n            </div>\n        );\n    }\n});\n\nmodule.exports = ShelfList;\n","'use strict';\n\nvar React = require('react'),\n    Repeat = require('./repeat'),\n    ListedSystem = require('./system-listed');\n\nvar SystemList = React.createClass({\n    propTypes: {\n        hagroups: React.PropTypes.array.isRequired,\n        isStandAlone: React.PropTypes.bool.isRequired,\n        currentSelection: React.PropTypes.object.isRequired,\n        select: React.PropTypes.func.isRequired\n    },\n\n    render: function() {\n        return (\n            <Repeat seq={ this.props.hagroups }\n                    prop=\"hagroup\"\n                    className={ this.props.isStandAlone ? 'hc-standalones' : ''}>\n                <ListedSystem\n                    isStandAlone={ this.props.isStandAlone }\n                    currentSelection={ this.props.currentSelection }\n                    select={ this.props.select } />\n            </Repeat>\n        );\n    }\n});\n\nmodule.exports = SystemList;\n","'use strict';\n\nvar _ = require('lodash'),\n    React = require('react'),\n    DriveSummary = require('./drive-summary'),\n    clipUtil = require('../../lib/clip/util');\n\nvar ListedSystem = React.createClass({\n    propTypes: {\n        hagroup: React.PropTypes.object.isRequired,\n        isStandAlone: React.PropTypes.bool.isRequired,\n        currentSelection: React.PropTypes.object.isRequired,\n        select: React.PropTypes.func.isRequired\n    },\n\n    isSelected: function(selector, hagroup, isStandAlone) {\n        var isClusterMatch = false,\n            isHagroupMatch = false;\n\n        var selectedCluster = _(selector).has('cluster') ? selector.cluster._id : '',\n            selectedHagroup = _(selector).has('hagroup') ? selector.hagroup._id : '';\n\n        if (selectedCluster) {\n            var cid = hagroup.cluster && hagroup.cluster._id || '';\n            isClusterMatch = (selectedCluster === cid) ? true : false;\n        }\n\n        if (selectedHagroup) {\n            var hid = hagroup._id || '';\n            isHagroupMatch = (selectedHagroup === hid) ? true : false;\n        }\n\n        return isStandAlone ? isHagroupMatch : (isClusterMatch && isHagroupMatch);\n    },\n\n    selectSystem: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        var selector = { hagroup: { _id: this.props.hagroup._id } };\n        this.props.select(selector, 'SystemOverview');\n    },\n\n    render: function() {\n        var hagroup = this.props.hagroup,\n            selected = this.props.currentSelection,\n            isStandAlone = this.props.isStandAlone,\n            isSelected = this.isSelected(selected, hagroup, isStandAlone);\n\n        var controllers = hagroup.controllers || [],\n            nodeCount = isStandAlone ? controllers.length : '',\n            model = isStandAlone ? hagroup.model : hagroup._model;\n\n        var driveDescriptions = clipUtil.getDriveDescriptionsFromXboms([hagroup]),\n            classNames = React.addons.classSet({\n                'system': true,\n                'selectable': true,\n                'selected': isSelected,\n            });\n\n        return (\n            <div className={ classNames } onClick={ this.selectSystem }>\n                <span className={ isStandAlone ? 'name' : 'sub-name' }>\n                    { _(controllers).flatten('name').compact().join(' / ') || 'un-named' }\n                </span>\n                <div className=\"system-components\">\n                    <div className=\"drive-summary-block controller no-overflow\">\n                        <span className=\"drive-count\">{ nodeCount }</span>\n                        <span className=\"fa fa-fw fa-netapp-controller\"></span>\n                        <span className=\"drive-label\">{ model }</span>\n                    </div>\n                    <DriveSummary\n                        hideIfZero={ true }\n                        hideCapacity={ true }\n                        drives={ driveDescriptions } />\n                </div>\n            </div>\n        );\n    }\n});\n\nmodule.exports = ListedSystem;\n","'use strict';\n\nvar _ = require('lodash'),\n    React = require('react'),\n    ColumnHeader = require('./layout/column-header'),\n    ActionLink = require('./layout/action-link'),\n    ScrollableRegion = require('./layout/scrollable-region'),\n    ShelfDetails = require('./shelf-details'),\n    AggregateDetails = require('./aggregate-details'),\n    SystemPolicies = require('./system-policies'),\n    ShelfDriveGroupSummary = require('./hw-shelf-drive-group'),\n    usual = require('../usual-props'),\n    cnst = require('./constants');\n\nvar HardwareDisplay = React.createClass({\n    propTypes: _.merge({\n        systems: React.PropTypes.any.isRequired,\n        select: React.PropTypes.func.isRequired,\n        clearSelection: React.PropTypes.func,\n        selectDetails: React.PropTypes.object.isRequired,\n        col3View: React.PropTypes.string,\n    }, usual.isRequired),\n\n    _addSystem: function(spec, event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        this.props.select();    // Keep current selector, close col 3 (system was altered)\n        var sampledSystem = this._getFirstSystem();\n        this.props.fire('PROJECT_EXPAND_CLUSTER', sampledSystem.cluster._id, spec);\n    },\n    _removeSystem: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        this.props.select();    // Keep current selector, close col 3 (system was altered)\n        var sampledSystem = this._getFirstSystem();\n        this.props.fire('PROJECT_REMOVE_SYSTEM', sampledSystem._id);\n    },\n    _deleteSystem: function(version, event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        var sampledSystem = this._getFirstSystem();\n        this.props.fire('PROJECT_REMOVE_SYSTEM', sampledSystem._id);\n\n        if (version) {\n            if (sampledSystem.is_clustered) {\n                this.props.fire('PROJECT_SET_CLUSTER_VERSION', sampledSystem.cluster._id, version);\n            } else {\n                this.props.fire('PROJECT_SET_SYSTEM_VERSION', sampledSystem._id, version);\n            }\n        }\n\n        this.props.clearSelection();\n    },\n    _getWrappedSystems: function() {\n        var props = this.props,\n            isGroupedSystems = Array.isArray(props.systems),\n            wrappedSystems = isGroupedSystems ? props.systems : [props.systems];\n        return wrappedSystems;\n    },\n    _getFirstSystem: function() {\n        var props = this.props,\n            isGroupedSystems = Array.isArray(props.systems),\n            sampledSystem = isGroupedSystems ? props.systems[0] : props.systems;\n        return sampledSystem;\n    },\n\n    selectShelf: function(shelf, event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        var selector = { shelf: { _id: shelf._id } };\n        this.props.select(selector, cnst.UI_SELECT_ADD_CHANGE_SHELF_DRIVE_LIST);\n    },\n\n    changeSystem: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        this.props.select({}, cnst.UI_SELECT_ADD_CHANGE_SYSTEMS);\n    },\n\n    changeVersion: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        this.props.select({}, 'VersionList');\n    },\n\n    _isSelected: function(currentConfig, selectedConfig) {\n        if (currentConfig && selectedConfig) {\n            if (currentConfig._id === selectedConfig._id) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    renderEmbeddedShelfSummary: function(sampledSystem) {\n        var embeddedShelf = _(sampledSystem.shelves).find({ _isembedded: true }),\n            shelfCSS = React.addons.classSet({\n                'row-list-item': true,\n                'selectable': true,\n                'selected': this._isSelected(embeddedShelf, this.props.selectDetails.shelf),\n            });\n\n        if (!embeddedShelf) {\n            return (<div/>);\n        } else {\n            var hagroup = this._getFirstSystem(),\n                matrix = this.props.map.inspect(hagroup).config.matrix,\n                version = hagroup.version;\n\n\n            var fireChangeEmbeddedDiskShelf = _.partial(this.selectShelf, embeddedShelf),\n                systemsCount = this.props.systems.length || 1,\n                shelfCount = systemsCount,\n                drive_specs = _.isEmpty(embeddedShelf._x_bom) ? [] : embeddedShelf._x_bom.drive_specs,\n                shelfDriveGroupSummaries = _.map(drive_specs, function (driveGroup) {\n                    var compat = matrix.checkVersionShelfDrive(version, embeddedShelf.model, driveGroup.model);\n\n                    return (\n                        <ShelfDriveGroupSummary\n                            driveGroup={ driveGroup }\n                            fpSupport={ compat.fp_support_drive }\n                            shelfCount={ shelfCount } />\n                    );\n                });\n\n            return (\n                <div className={ shelfCSS } onClick={ fireChangeEmbeddedDiskShelf }>\n                    <div className=\"row-list-cell row-list-cell-s\">\n                    </div>\n                    <div className=\"row-list-cell\">\n                        <div>\n                            <span className=\"emphasize\">Internal drives</span>\n                        </div>\n                        {shelfDriveGroupSummaries}\n                    </div>\n                    <span className=\"chevron\">\n                        <span className=\"fa fa-fw fa-chevron-right\"></span>\n                    </span>\n                </div>\n            );\n        }\n    },\n    render: function() {\n        var props = this.props,\n            isGroupedSystems = Array.isArray(props.systems),\n            sampledSystem = this._getFirstSystem(),\n            system_model = sampledSystem.model,\n            names = isGroupedSystems ? '' : _(sampledSystem.controllers).map('name').join('/'),\n            countDom;\n\n        var matrix = this.props.map.inspect(sampledSystem).config.matrix,\n            displayVersion = matrix.getFullNameForVersion(sampledSystem.version);\n\n        var modelWithoutSpaces = system_model.replace(' ', ''),\n            imageModel = modelWithoutSpaces.replace('V', 'FAS'),\n            imageUrl = '../media/img/' + imageModel + '_front_view.png';\n\n        var policies = sampledSystem._policies || {},\n            versionPolicy = policies.version || {},\n            options = versionPolicy.pin ? { version: sampledSystem.version } : {};\n\n        var selector = _.pick(props.selectDetails, ['installation', 'cluster']),\n            guard = props.map.guard(selector, options);\n\n        if (isGroupedSystems && sampledSystem.controllers.length > 1) {\n            var configs = guard.addingSystem(),\n                sampledConfigs = _.where(configs, function match(config) {\n                    return config.isEnabled && (config.configModel === sampledSystem._model);\n                }),\n                sampledConfig = _.first(sampledConfigs);\n\n            //  ensures that we cannot increase the count of SingleNodeClusters\n            if (_.isEmpty(sampledConfig)) {\n                // Guard says there are no valid configs for adding another one\n                countDom = (\n                    <div className=\"row-list-cell row-list-cell-s\">\n                        <span className=\"fa fa-fw fa-minus\" onClick={ this._removeSystem }></span>\n                        <input type=\"text\" value={ props.systems.length } className=\"input-count\" />\n                    </div>\n                );\n            } else {\n                var specs = sampledConfig.buildSpec(props.selectDetails),\n                    addSystem = _.partial(this._addSystem, _.first(specs));\n\n                countDom = (\n                    <div className=\"row-list-cell row-list-cell-s\">\n                        <span className=\"fa fa-fw fa-minus\" onClick={ this._removeSystem }></span>\n                        <input type=\"text\" value={ props.systems.length } className=\"input-count\" />\n                        <span className=\"fa fa-fw fa-plus\" onClick={ addSystem }></span>\n                    </div>\n                );\n            }\n        } else {\n            var replacing = _.pick(props.selectDetails, ['installation', 'cluster', 'hagroup']),\n                delConfigs = guard.deletingSystem(replacing),\n                deleteSystemConfig = _.last(delConfigs),\n                newVersion = deleteSystemConfig ? deleteSystemConfig.newVersion : undefined,\n                delAction = _.partial(this._deleteSystem, newVersion);\n\n            countDom = (\n                <div className=\"row-list-cell row-list-cell-s\">\n                    <span className=\"fa fa-fw fa-trash\" onClick={ delAction }></span>\n                </div>\n            );\n        }\n\n        var embeddedShelfSummary = this.renderEmbeddedShelfSummary(sampledSystem),\n            embeddedShelf = _(sampledSystem.shelves).find({ _isembedded: true }),\n            controllerClassName = React.addons.classSet({\n                'row-list-item': true,\n                'row-list-item-group-next': embeddedShelf,\n                'selectable': true,\n                'selected': this.props.col3View === cnst.UI_SELECT_ADD_CHANGE_SYSTEMS,\n            });\n\n        var automaticOSVersionDisplay,\n            selectOSVersionDisplay,\n            osVersionDisplayCSS = React.addons.classSet({\n                'row-list-item': true,\n                'selectable': true,\n                'selected': this.props.col3View === 'VersionList',\n            });\n\n        if (!versionPolicy.pin) {\n            automaticOSVersionDisplay = (\n                <div>{ displayVersion }</div>\n            );\n        } else {\n            selectOSVersionDisplay = (\n                <div className={ osVersionDisplayCSS } onClick={ this.changeVersion }>\n                    <div className=\"row-list-cell row-list-cell-s\">\n                    </div>\n                    <div className=\"row-list-cell\">\n                        <span>{ displayVersion }</span><br/>\n                    </div>\n                    <span className=\"chevron\">\n                        <span className=\"fa fa-fw fa-chevron-right\"></span>\n                    </span>\n                </div>\n            );\n        }\n\n        return (\n            <ScrollableRegion>\n                <div className=\"row-list-item-grouping\">\n                    <div className={ controllerClassName } onClick={ this.changeSystem }>\n                        { countDom }\n                        <div className=\"row-list-cell row-list-cell-l\">\n                            <span className=\"emphasize\">{ sampledSystem._model }</span><br/>\n                            { automaticOSVersionDisplay }\n                            <span>{ names }</span>\n                        </div>\n                        <div className=\"row-list-cell row-list-cell-m row-list-cell-img hide-contracted-full\">\n                            <img src={ imageUrl } className=\"controller-img\" alt={ system_model } />\n                        </div>\n                        <span className=\"chevron\">\n                            <span className=\"fa fa-fw fa-chevron-right\"></span>\n                        </span>\n                    </div>\n                    { embeddedShelfSummary }\n                    { selectOSVersionDisplay }\n                </div>\n                <ShelfDetails systems={ this._getWrappedSystems() }\n                                 map={ props.map }\n                                 fire={ props.fire }\n                                 select={ this.props.select }\n                                 selected={ this.props.selectDetails }\n                                 className=\"hw-details-level-1\"\n                                 col3View={ this.props.col3View } />\n            </ScrollableRegion>\n        );\n    }\n});\n\n// TODO: AggregatesDisplay is a passthrough to the real AggregateDetails, so remove this middleman\nvar AggregatesDisplay = React.createClass({\n    propTypes: _.merge({\n        systems: React.PropTypes.any.isRequired,\n        aggregateDisplayLanguage: React.PropTypes.string.isRequired,\n        select: React.PropTypes.func.isRequired,\n        clearSelection: React.PropTypes.func,\n        selectDetails: React.PropTypes.object.isRequired,\n        userPreferences: React.PropTypes.object.isRequired,\n    }, usual.isRequired),\n\n    render: function() {\n        return (\n            <ScrollableRegion>\n                <AggregateDetails\n                    systems={ this.props.systems }\n                    aggregateDisplayLanguage={ this.props.aggregateDisplayLanguage }\n                    clearSelection={ this.props.clearSelection }\n                    select={ this.props.select }\n                    selectDetails={ this.props.selectDetails }\n                    userPreferences = { this.props.userPreferences }\n                    { ... usual(this.props) } />\n            </ScrollableRegion>\n        );\n    }\n});\n\nvar CurrentTabDisplay = React.createClass({\n    propTypes: _.merge({\n        currentTab: React.PropTypes.string.isRequired,\n        aggregateTabName: React.PropTypes.string.isRequired,\n        systems: React.PropTypes.any.isRequired,\n        select: React.PropTypes.func.isRequired,\n        clearSelection: React.PropTypes.func,\n        selectDetails: React.PropTypes.object.isRequired,\n        userPreferences: React.PropTypes.object.isRequired,\n        col3View: React.PropTypes.string,\n    }, usual.isRequired),\n\n    render: function() {\n        var props = this.props,\n            currentTabName = (props.aggregateTabName === props.currentTab) ? 'Aggregates' : props.currentTab;\n\n        switch (currentTabName) {\n            case 'Hardware':\n                return (\n                    <HardwareDisplay\n                        systems={ props.systems }\n                        clearSelection={ props.clearSelection }\n                        select={ props.select }\n                        selectDetails={ props.selectDetails }\n                        col3View={ props.col3View }\n                        { ... usual(this.props) } />\n                );\n\n            case 'Aggregates':\n                return (\n                    <AggregatesDisplay\n                        systems={ props.systems }\n                        aggregateDisplayLanguage={ props.aggregateTabName }\n                        clearSelection={ props.clearSelection }\n                        select={ props.select }\n                        selectDetails={ props.selectDetails }\n                        userPreferences= { props.userPreferences }\n                        { ... usual(this.props) } />\n                );\n\n            case 'Policies':\n                return (\n                    // Wrap systems in an array until we refactor the rest of the way up\n                    <SystemPolicies\n                        hagroups={ [props.systems] }\n                        hardwareSelector={ props.selectDetails }\n                        { ... usual(this.props) } />\n                );\n        }\n    }\n});\n\nvar SystemOverview = React.createClass({\n    propTypes: _.merge({\n        systems: React.PropTypes.any.isRequired,\n        select: React.PropTypes.func.isRequired,\n        clearSelection: React.PropTypes.func,\n        selectDetails: React.PropTypes.object.isRequired,\n        userPreferences: React.PropTypes.object.isRequired,\n        col3View: React.PropTypes.string,\n        col2Tab: React.PropTypes.string.isRequired,\n        selectCol2View: React.PropTypes.func.isRequired\n    }, usual.isRequired),\n\n    getInitialState: function() {\n        return {\n            currentTab: this._convertViewtoTabUntilWeRefactor()\n        };\n    },\n\n    _convertViewtoTabUntilWeRefactor: function() {\n        switch (this.props.col2Tab) {\n            case 'SystemOverview': return 'Hardware';\n            case 'Aggregates': return this._aggregateTabName();\n            case 'Policies': return 'Policies';\n            default: return 'Hardware';\n        }\n    },\n\n    _changeTabHardware: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        this.setState({\n            currentTab: 'Hardware'\n        });\n\n        this.props.selectCol2View('SystemOverview');\n    },\n\n    _changeTabAggregates: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        this.setState({\n            currentTab: this._aggregateTabName()\n        });\n\n        this.props.selectCol2View('Aggregates');\n    },\n\n    _aggregateTabName: function() {\n        console.log('determining aggr tab name with systems: ', this.props.systems);\n        var map = this.props.map,\n            systemsAreESeriesMap = _.map(this.props.systems, function(system) {\n                return map.inspect(system).isESeries;\n            }),\n            allSystemsAreESeries = _.every(systemsAreESeriesMap);\n\n        if (allSystemsAreESeries) {\n            return 'Storage Containers';\n        }\n        else {\n            return 'Aggregates';\n        }\n    },\n\n    _changeTabPolicies: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        this.setState({\n            currentTab: 'Policies'\n        });\n\n        this.props.selectCol2View('Policies');\n    },\n\n    render: function() {\n        var props = this.props,\n            aggregateTabName = this._aggregateTabName(),\n            systems = (props.systems.length === 1) ? props.systems[0] : props.systems,\n            systemTitle = (props.systems.length > 1) ? \"Systems Detail\" : \"System Details\",\n            policyTitle = 'Options',\n            tab = this.state.currentTab;\n\n        var title = (tab === 'Hardware') ? systemTitle : (tab === 'Policies') ? policyTitle : tab;\n\n        return (\n            <div>\n                <ColumnHeader columnTitle={ title }>\n                    <ActionLink\n                        isToggle={ true }\n                        select={ this._changeTabHardware }\n                        selected={ tab === 'Hardware' }\n                        enabled={ true }\n                        hideContracted={ true }>\n                        Hardware\n                    </ActionLink>\n                    <ActionLink\n                        isToggle={ true }\n                        select={ this._changeTabAggregates }\n                        selected={ tab === aggregateTabName }\n                        enabled={ true }\n                        hideContracted={ true }>\n                        { aggregateTabName }\n                    </ActionLink>\n                    <ActionLink\n                        isToggle={ true }\n                        select={ this._changeTabPolicies }\n                        selected={ tab === 'Policies' }\n                        enabled={ true }\n                        hideContracted={ true }>\n                        Options\n                    </ActionLink>\n                </ColumnHeader>\n                <CurrentTabDisplay\n                    currentTab={ tab }\n                    aggregateTabName={ aggregateTabName }\n                    systems={ systems }\n                    clearSelection={ props.clearSelection }\n                    selectDetails={ props.selectDetails }\n                    select={ props.select }\n                    userPreferences= { props.userPreferences }\n                    col3View={ props.col3View }\n                    { ... usual(this.props) } />\n            </div>\n        );\n    }\n});\n\nmodule.exports = SystemOverview;\n","'use strict';\n\nvar _ = require('lodash'),\n    React = require('react'),\n    ScrollableRegion = require('./layout/scrollable-region'),\n    FAGlyph = require('./faglyph');\n\nvar SystemPolicies = React.createClass({\n    propTypes: {\n        map: React.PropTypes.object.isRequired,\n        hagroups: React.PropTypes.array.isRequired,\n        hardwareSelector: React.PropTypes.object.isRequired\n    },\n\n    render: function() {\n        var system = _.first(this.props.hagroups) || {},\n            currentPolicies = system._policies || {};\n\n        var addingTo = _.pick(this.props.hardwareSelector, ['installation', 'cluster', 'hagroup']),\n            guard = this.props.map.guard(addingTo),\n            policyOptions = guard.policies(),\n            enabledOptions = _.where(policyOptions, { isEnabled: true }),\n            groupedOptions = _.groupBy(enabledOptions, 'scope'),\n            components = _.map(groupedOptions, createPolicyGroup, this);\n\n        function createPolicyGroup(optionGroup) {\n            // jshint -W040\n            return (\n                <PolicyGroup\n                    { ...this.props }\n                    currentPolicies={ currentPolicies }\n                    optionGroup={ optionGroup } />\n            );\n        }\n\n        return (\n            <ScrollableRegion>\n                { components }\n            </ScrollableRegion>\n        );\n    }\n});\n\nvar PolicyGroup = React.createClass({\n    propTypes: {\n        optionGroup: React.PropTypes.array.isRequired\n    },\n\n    render: function() {\n        var components = _.map(this.props.optionGroup, createPolicyContainer, this);\n\n        function createPolicyContainer(option) {\n            // jshint -W040\n            return (\n                <PolicyContainer\n                    { ...this.props }\n                    scope={ option.scope }\n                    policy={ option.policy }\n                    label={ option.label }\n                    defaultValue={ option.defaultValue }\n                    invertedToggle={ option.inverted }\n                    impactsCluster={ option.impactsCluster }\n                    allowedValues={ option.allowedValues } />\n            );\n        }\n\n        return (\n            <div className=\"row-list-item-grouping\">\n                { components }\n            </div>\n        );\n    }\n});\n\nvar PolicyContainer = React.createClass({\n    propTypes: {\n        scope: React.PropTypes.string.isRequired,\n        policy: React.PropTypes.string.isRequired,\n        allowedValues: React.PropTypes.array,\n        impactsCluster: React.PropTypes.bool.isRequired,\n        map: React.PropTypes.object.isRequired,\n        hagroups: React.PropTypes.array.isRequired,\n        hardwareSelector: React.PropTypes.object.isRequired,\n        fire: React.PropTypes.func.isRequired\n    },\n\n    render: function() {\n        var currentScope = this.props.currentPolicies[this.props.scope] || {},\n            currentPolicy = currentScope[this.props.policy],\n            hasMultipleValues = !_.isEmpty(this.props.allowedValues),\n            isEnabled;\n\n        if (hasMultipleValues) {\n            isEnabled = _.contains(this.props.allowedValues, currentPolicy);\n\n            return (\n                <SelectPolicy\n                    { ...this.props }\n                    currentPolicy={ currentPolicy }\n                    isEnabled={ isEnabled }\n                    handleClick={ this.handleClick } />\n            );\n        } else {\n            isEnabled = (currentPolicy !== undefined) ? currentPolicy : this.props.defaultValue;\n\n            return (\n                <BooleanPolicy\n                    { ...this.props }\n                    isEnabled={ isEnabled }\n                    handleClick={ this.handleClick } />\n            );\n        }\n    },\n\n    handleClick: function(value, event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        var fire = this.props.fire,\n            scope = this.props.scope,\n            sampleHagroup = _.first(this.props.hagroups),\n            policy = {};\n\n        policy[this.props.policy] = value;\n\n        if (this.props.impactsCluster && sampleHagroup && sampleHagroup.is_clustered) {\n            fire('PROJECT_SET_CLUSTER_POLICY', sampleHagroup.cluster._id, scope, policy);\n        } else {\n            _.forEach(this.props.hagroups, firePolicyChange);\n        }\n\n        if ((scope === 'version') && (this.props.policy === 'pin') && (value === false)) {\n            this.handleAutoVersion();\n        }\n\n        function firePolicyChange(hagroup) {\n            fire('PROJECT_SET_SYSTEM_POLICY', hagroup._id, scope, policy);\n        }\n    },\n\n    // We need to force the OS up when switching auto version on\n    // DO NOT COPY THIS PATTERN to bolt on logic to other specific policies!\n    handleAutoVersion: function() {\n        var addingTo = _.pick(this.props.hardwareSelector, ['installation', 'cluster']),\n            guard = this.props.map.guard(addingTo);\n\n        var replacing = _.pick(this.props.hardwareSelector, ['installation', 'cluster', 'hagroup']),\n            proposals = guard.changingVersion(replacing),\n            enabled = _.where(proposals, { isEnabled: true }),\n            versionConfig = _.last(enabled),\n            newVersion = versionConfig ? versionConfig.newVersion : undefined;\n\n        var fire = this.props.fire,\n            sampleHagroup = _.first(this.props.hagroups);\n\n        if (newVersion) {\n            if (sampleHagroup && sampleHagroup.is_clustered) {\n                fire('PROJECT_SET_CLUSTER_VERSION', sampleHagroup.cluster._id, newVersion);\n            } else {\n                _.forEach(this.props.hagroups, fireVersionChange);\n            }\n        }\n\n        function fireVersionChange(hagroup) {\n            fire('PROJECT_SET_SYSTEM_VERSION', hagroup._id, newVersion);\n        }\n    }\n});\n\nvar SelectPolicy = React.createClass({\n    propTypes: {\n        defaultValue: React.PropTypes.string.isRequired,\n        isEnabled: React.PropTypes.bool.isRequired,\n        allowedValues: React.PropTypes.array.isRequired,\n        handleClick: React.PropTypes.func.isRequired\n    },\n\n    render: function() {\n        var allowedValuesList = _.map(this.props.allowedValues, createAllowedValueComponent, this);\n\n        function createAllowedValueComponent(allowedValue) {\n            // jshint -W040\n            return (\n                <SelectOption\n                    { ...this.props }\n                    optionValue={ allowedValue }\n                    handleClick={ this.props.handleClick } />\n            );\n        }\n\n        var value = this.props.isEnabled ? '' : this.props.defaultValue,\n            action = _.partial(this.props.handleClick, value);\n\n        return (\n            <Policy { ...this.props } handleClick={ action }>\n                { allowedValuesList }\n            </Policy>\n        );\n    }\n});\n\nvar SelectOption = React.createClass({\n    propTypes: {\n        currentPolicy: React.PropTypes.string.isRequired,\n        optionValue: React.PropTypes.string.isRequired,\n        isEnabled: React.PropTypes.bool.isRequired,\n        handleClick: React.PropTypes.func.isRequired\n    },\n\n    render: function() {\n        var rowItemStyle = React.addons.classSet({\n                'row-list-item': true,\n                'row-list-item-loose': true,\n                'selectable': this.props.isEnabled,\n                'disabled': !this.props.isEnabled\n            }),\n            checkStyle = (this.props.currentPolicy === this.props.optionValue) ? 'check' : '';\n\n        var setValue = _.partial(this.props.handleClick, this.props.optionValue),\n            action = this.props.isEnabled ? setValue : this.suppressClick;\n\n        return (\n            <div className={ rowItemStyle } onClick={ action }>\n                <div className=\"row-list-cell\">\n                    { this.props.optionValue }\n                </div>\n                <span className=\"chevron\">\n                    <FAGlyph name={ checkStyle } />\n                </span>\n            </div>\n        );\n    },\n\n    suppressClick: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n    }\n});\n\nvar BooleanPolicy = React.createClass({\n    propTypes: {\n        isEnabled: React.PropTypes.bool.isRequired,\n        handleClick: React.PropTypes.func.isRequired\n    },\n\n    render: function() {\n        var action = _.partial(this.props.handleClick, !this.props.isEnabled);\n\n        return (\n            <Policy { ...this.props } handleClick={ action } />\n        );\n    }\n});\n\nvar Policy = React.createClass({\n    propTypes: {\n        label: React.PropTypes.string.isRequired,\n        invertedToggle: React.PropTypes.bool.isRequired,\n        isEnabled: React.PropTypes.bool.isRequired,\n        handleClick: React.PropTypes.func.isRequired\n    },\n\n    render: function() {\n        var rowItemStyle = 'row-list-item selectable row-list-item-loose',\n            toggleOn = this.props.invertedToggle ? 'toggle-off' : 'toggle-on',\n            toggleOff = this.props.invertedToggle ? 'toggle-on' : 'toggle-off',\n            toggleStyle = this.props.isEnabled ? toggleOn : toggleOff;\n\n        return (\n            <div>\n                <div className={ rowItemStyle } onClick={ this.props.handleClick }>\n                    <div className=\"row-list-cell\">\n                        { this.props.label }\n                    </div>\n                    <span className=\"chevron\">\n                        <FAGlyph name={ toggleStyle } />\n                    </span>\n                </div>\n                { this.props.children }\n            </div>\n        );\n    }\n});\n\nmodule.exports = SystemPolicies;\n","'use strict';\n\nvar _ = require('lodash'),\n    React = require('react'),\n    DriveSummary = require('./drive-summary'),\n    SystemList = require('./system-list'),\n    clipUtil = require('../../lib/clip/util');\n\nvar SystemSummary = React.createClass({\n    propTypes: {\n        hagroups: React.PropTypes.array.isRequired,\n        isGrouped: React.PropTypes.bool.isRequired,\n        currentSelection: React.PropTypes.object.isRequired,\n        select: React.PropTypes.func.isRequired\n    },\n\n    render: function() {\n        if(this.props.isGrouped) {\n            return (\n                <GroupedSystemList\n                    hagroups={ this.props.hagroups }\n                    currentSelection={ this.props.currentSelection }\n                    select={ this.props.select } />\n            );\n        } else {\n            return (\n                <SystemList\n                    hagroups={ this.props.hagroups }\n                    isStandAlone={ false }\n                    currentSelection={ this.props.currentSelection }\n                    select={ this.props.select } />\n            );\n        }\n    }\n});\n\nvar GroupedSystemList = React.createClass({\n    propTypes: {\n        hagroups: React.PropTypes.array.isRequired,\n        currentSelection: React.PropTypes.object.isRequired,\n        select: React.PropTypes.func.isRequired\n    },\n\n    _getNodeCounts: function() {\n        var nodeCounts = {};\n\n        _.forEach(this.props.hagroups, function (hagroup) {\n            var before = nodeCounts[hagroup.model] || 0,\n                after = before + hagroup.controllers.length;\n            nodeCounts[hagroup.model] = after;\n        });\n\n        return nodeCounts;\n    },\n\n    _renderNodeCount: function(count, model) {\n        return (\n            <div className=\"drive-summary-block controller\">\n                <span className=\"drive-count\">{ count }</span>\n                <span className=\"fa fa-netapp-controller fa-fw\"></span>\n                <span className=\"drive-label\">{ model }</span>\n            </div>\n        );\n    },\n\n    isSelected: function(selector, hagroup) {\n        var isClusterMatch = false,\n            isHagroupMatch = false;\n\n        var selectedCluster = _(selector).has('cluster') ? selector.cluster._id : '',\n            selectedHagroup = _(selector).has('hagroup') ? selector.hagroup._model : '';\n\n        if (selectedCluster) {\n            var id = hagroup.cluster && hagroup.cluster._id || '';\n            isClusterMatch = (selectedCluster === id) ? true : false;\n        }\n\n        if (selectedHagroup) {\n            var model = hagroup._model || '';\n            isHagroupMatch = (selectedHagroup === model) ? true : false;\n        }\n\n        return isClusterMatch && isHagroupMatch;\n    },\n\n    selectGroup: function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        var selector = { hagroup: { _model: this.props.hagroups[0]._model } };\n        this.props.select(selector, 'SystemOverview');\n    },\n\n    render: function() {\n        var hagroups = this.props.hagroups,\n            selected = this.props.currentSelection,\n            driveDescriptions = clipUtil.getDriveDescriptionsFromXboms(hagroups),\n            classNames = React.addons.classSet({\n                'selectable': true,\n                'selected': this.isSelected(selected, hagroups[0]),\n            });\n\n        return (\n            <div className={ classNames } onClick={ this.selectGroup }>\n                { _.map(this._getNodeCounts(), this._renderNodeCount) }\n                <DriveSummary\n                    hideIfZero={ true }\n                    hideCapacity={ true }\n                    drives={ driveDescriptions } />\n            </div>\n        );\n    }\n});\n\nmodule.exports = SystemSummary;\n","'use strict';\n\nvar React = require('react'),\n    classSet = React.addons.classSet,\n    _ = require('lodash');\n\nvar POSITION_FIXES = {\n        left: function fixLeft(parent, self) {\n            return {\n                left: parent.left - self.width,\n                top: parent.top + parent.height/2 - self.height/2,\n            };\n        },\n        top: function fixTop(parent, self) {\n            return {\n                left: parent.left + parent.width/2 - self.width/2,\n                top: parent.top - self.height + 16,\n            };\n        }\n    };\n\nvar Tooltip = React.createClass({\n    propTypes: {\n        position: function checkPosition(props, propName /*, componentName */) {\n            var position = props[propName];\n            if (!POSITION_FIXES[position]) {\n                throw new Error('unknown position: ' + position);\n            }\n        },\n        title: React.PropTypes.string,\n        titleClassName: React.PropTypes.string,\n    },\n\n    componentDidMount: function() {\n        this.updatePosition();\n        window.addEventListener('resize', this.updatePosition);\n        var parent = this.getDOMNode().parentNode;\n        parent.addEventListener('mouseenter', this._onMouseEnterParent);\n        parent.addEventListener('mouseleave', this._onMouseLeaveParent);\n    },\n\n    componentWillUnmount: function() {\n        window.removeEventListener('resize', this.updatePosition);\n        var parent = this.getDOMNode().parentNode;\n        parent.removeEventListener('mouseenter', this._onMouseEnterParent);\n        parent.removeEventListener('mouseleave', this._onMouseLeaveParent);\n    },\n\n    updatePosition: function () {\n        var self = this.getDOMNode(),\n            selfPos = self.getBoundingClientRect(),\n            parentPos = self.parentNode.getBoundingClientRect(),\n            fixer = POSITION_FIXES[this.props.position],\n            pos = fixer(parentPos, selfPos);\n        this.setState({\n            left: pos.left,\n            top: pos.top,\n        });\n    },\n\n    _onMouseEnterParent: function() {\n        this.updatePosition();\n        this.setState({\n            visible: true,\n        });\n    },\n\n    _onMouseLeaveParent: function() {\n        this.setState({\n            visible: false,\n        });\n    },\n\n    getInitialState: function() {\n        return {\n            left: 0,\n            top: 0,\n            visible: false,\n        };\n    },\n\n    render: function() {\n        var state = this.state,\n            classes = {\n                popover: true,\n            },\n            titleClasses = {\n                'popover-title': true,\n            },\n            mainStyle = {\n                display: 'block', // override Bootstrap CSS default of none\n                visibility: state.visible ? 'visible': 'hidden',\n                position: 'fixed',\n                left: state.left,\n                top: state.top,\n            };\n\n        classes[this.props.position] = true;\n        _.each((this.props.titleClassName || '').split(' '), function (_class) {\n            titleClasses[_class] = true;\n        });\n\n        return (\n            <div className={ classSet(classes) } style={ mainStyle }>\n                <div className=\"arrow\" />\n                {\n                    (!this.props.title) ? null: (\n                        <div className={ classSet(titleClasses) }>\n                            {  lineBreak(this.props.title) }\n                        </div>\n                    )\n                }\n                <div className=\"popover-content\">\n                    { this.props.children }\n                </div>\n            </div>\n        );\n    }\n});\n\nfunction lineBreak(title) {\n    var raw = title.split('\\\\n'),\n        cooked = [];\n\n    for (var idx in raw) {\n        if (idx > 0) {\n            cooked.push(\n                <br/>\n            );\n        }\n        cooked.push(raw[idx]);\n    }\n\n    return cooked;\n}\n\nmodule.exports = Tooltip;\n","'use strict';\n\nvar _ = require('lodash'),\n    React = require('react'),\n    ActionLink = require('./layout/action-link'),\n    ColumnHeader = require('./layout/column-header'),\n    ScrollableRegion = require('./layout/scrollable-region'),\n    Repeat = require('./repeat');\n\nvar VersionList = React.createClass({\n    propTypes: {\n        hagroups: React.PropTypes.array.isRequired,\n        map: React.PropTypes.object.isRequired,\n        hardwareSelector: React.PropTypes.object.isRequired,\n        handleClose: React.PropTypes.func.isRequired,\n        fire: React.PropTypes.func.isRequired\n    },\n\n    render: function() {\n        var addingTo = _.pick(this.props.hardwareSelector, ['installation', 'cluster']),\n            guard = this.props.map.guard(addingTo);\n\n        var replacing = _.pick(this.props.hardwareSelector, ['installation', 'cluster', 'hagroup']),\n            proposals = guard.changingVersion(replacing);\n\n        var sampleHagroup = _.first(this.props.hagroups),\n            matrix = this.props.map.inspect(sampleHagroup).config.matrix;\n\n        return (\n            <div>\n                <ColumnHeader columnTitle={ 'Change OS Version' }>\n                    <ActionLink\n                        isToggle={ false }\n                        select={ this.props.handleClose }\n                        selected={ false }\n                        enabled={ true }>\n                        Close\n                    </ActionLink>\n                </ColumnHeader>\n                <ScrollableRegion>\n                    <Repeat seq={ proposals }\n                            prop=\"proposal\">\n                        <Proposal\n                            matrix={ matrix }\n                            selectedVersion={ this.getCurrentVersion() }\n                            handleSelect={ this.handleVersionChange } />\n                    </Repeat>\n                </ScrollableRegion>\n            </div>\n        );\n    },\n\n    handleVersionChange: function(version, event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        var fire = this.props.fire,\n            sampleHagroup = _.first(this.props.hagroups);\n\n        if (sampleHagroup && sampleHagroup.is_clustered) {\n            fire('PROJECT_SET_CLUSTER_VERSION', sampleHagroup.cluster._id, version);\n        } else {\n            _.forEach(this.props.hagroups, fireVersionChange);\n        }\n\n        this.props.handleClose(event);\n\n        function fireVersionChange(hagroup) {\n            fire('PROJECT_SET_SYSTEM_VERSION', hagroup._id, version);\n        }\n    },\n\n    getCurrentVersion: function() {\n        var sampleHagroup = _.first(this.props.hagroups);\n\n        return sampleHagroup.version;\n    }\n});\n\nvar Proposal = React.createClass({\n    propTypes: {\n        matrix: React.PropTypes.object.isRequired,\n        handleSelect: React.PropTypes.func.isRequired\n    },\n\n    render: function() {\n        var proposal = this.props.proposal,\n            proposalCSS = React.addons.classSet({\n                'row-list-item': true,\n                'selectable': proposal.isEnabled,\n                'disabled': !proposal.isEnabled,\n            }),\n            selectedCheck;\n\n        if (this.props.selectedVersion === proposal.newVersion) {\n            selectedCheck = (\n                <div className=\"chevron\">\n                    <span className=\"fa fa-fw fa-check\"></span>\n                </div>\n            );\n        }\n\n        var displayVersion = this.props.matrix.getFullNameForVersion(proposal.newVersion);\n\n        if (proposal.isEnabled) {\n            var action = _.partial(this.props.handleSelect, proposal.newVersion);\n\n            return (\n                <div className={ proposalCSS } onClick={ action }>\n                    <div className=\"row-list-cell\">\n                        { displayVersion }\n                    </div>\n                    { selectedCheck }\n                </div>\n            );\n        } else {\n            return (\n                <div className={ proposalCSS }>\n                    <div className=\"row-list-cell\">\n                        { displayVersion }\n                    </div>\n                </div>\n            );\n        }\n    }\n});\n\nmodule.exports = VersionList;\n","'use strict';\n\nvar React = require('react'),\n    Masthead = require('../components/masthead'),\n    Footer = require('../components/footer'),\n    ProjectListPanel = require('../components/project-list'),\n    SessionExpireOverlay = require('../components/session-expiration-overlay'),\n    MOTD = require('../components/motd'),\n    retitle = require('../retitle');\n\nvar PortfolioPage = React.createClass({\n    propTypes: {\n        stores: React.PropTypes.object.isRequired,\n        fire: React.PropTypes.func.isRequired,\n    },\n\n    componentDidMount: function() {\n        retitle('My Portfolio');\n    },\n\n    _onPortfolioFetch: function() {\n        this.props.dispatcher.act('PORTFOLIO_FETCH');\n    },\n\n    render: function() {\n        return (\n            <div>\n                <SessionExpireOverlay store={ this.props.stores.userSession } />\n                <Masthead store={ this.props.stores.userSession } title=\"My Portfolio\" />\n                <div id=\"main-panel\">\n                    <div id=\"content\" className=\"indented\">\n                        <div className=\"projects\">\n                            <ProjectListPanel\n                                stores={ this.props.stores }\n                                fire={ this.props.fire } />\n                            <div className=\"motd col-sm-4\">\n                                <MOTD stores={ this.props.stores } />\n                            </div>\n                        </div>\n                    </div>\n                    <Footer />\n                </div>\n            </div>\n        );\n    }\n});\n\nmodule.exports = PortfolioPage;\n","'use strict';\n\nvar React = require('react'),\n    Masthead = require('../components/masthead'),\n    Footer = require('../components/footer'),\n    Project = require('../components/project'),\n    SessionExpireOverlay = require('../components/session-expiration-overlay');\n\nvar ProjectPage = React.createClass({\n    propTypes: {\n        stores: React.PropTypes.object.isRequired,\n        fire: React.PropTypes.func.isRequired,\n        log: React.PropTypes.func.isRequired,\n    },\n\n    getInitialState: function() {\n        return {\n            project: this.props.stores.project.getState()\n        };\n    },\n\n    componentDidMount: function() {\n        this.props.stores.project.watch(this._onChange);\n        this.setState({\n            project: this.props.stores.project.getState(),\n        });\n    },\n\n    componentWillUnmount: function() {\n        this.props.stores.project.unwatch(this._onChange);\n    },\n\n    _onChange: function() {\n        this.setState({\n            project: this.props.stores.project.getState(),\n        });\n        // don't word-process! retitle() only necessary in one watcher\n    },\n\n    _title: function () {\n        var project = this.state.project;\n        if (project.fetching) {\n            return 'Opening Project\\u2026';\n        } else if (project.err) {\n            return 'Error';\n        } else if (project.name === '') {\n            return 'Opening Project';\n        } else {\n            // Truncate long names to prevent pushing other UI elements off the page\n            var fullName = project.name || project.uuid,\n                displayName = (fullName.length > 40) ? fullName.slice(0,40) + '\\u2026' : fullName;\n\n            return (this.state.project.queueStatus.writeQueueLength) ? displayName + ' (Saving)' : displayName;\n        }\n    },\n\n    render: function() {\n        return (\n            <div>\n                <SessionExpireOverlay store={ this.props.stores.userSession } />\n                <Masthead store={ this.props.stores.userSession } title={ this._title() }/>\n                <Project uuid={ this.props.params.uuid }\n                         version={ this.props.params.version }\n                         { ... this.props } />\n                <Footer />\n            </div>\n        );\n    }\n});\n\nmodule.exports = ProjectPage;\n","'use strict';\n\nvar React = require('react'),\n    Masthead = require('../components/masthead'),\n    retitle = require('../retitle');\n\nvar ReleaseNotesPage = React.createClass({\n    propTypes: {\n        stores: React.PropTypes.object.isRequired,\n        fire: React.PropTypes.func.isRequired,\n    },\n\n    componentDidMount: function() {\n        retitle('Release Notes');\n    },\n\n    render: function() {\n        return (\n            <div>\n                <Masthead store={ this.props.stores.userSession } title=\"Release Notes\" />\n                <div id=\"main-panel\">\n                    <div className=\"release-notes\">\n                        <h2>Release Notes Synergy 6 Beta-3 (February 9, 2015)</h2>\n                        <h3>Features:</h3>\n                        <ul>\n                            <li>E Series Platform support</li>\n                            <li>Flash Pool support</li>\n                            <li>Report output in Word format</li>\n                            <li>Enforce system limits and ensure configurations are always valid when shelves/drives are deleted</li>\n                            <li>Root data partitioning for SSD on All Flash FAS (AFF)</li>\n                        </ul>\n                        <h3>Known Bugs:</h3>\n                        <ul>\n                            <li>Session expires after 1 hour. If Synergy becomes unresponsive, click Refresh to login and reestablish a session.</li>\n                            <li>When \"Automatically fill system with aggregates\" is disabled,  Auto- aggregates is still created when new drives are added.</li>\n                            <li>Shelves/drives are not allowed to delete if manual aggregate is assigned to it. Ideally we should allow user to do that and reassigned aggregate to other free drives.</li>\n                            <li>Firefox browsers yield an Unresponsive script message upon first access. Click the Continue button to access Synergy for full functionality.</li>\n                        </ul>\n                        <hr/>\n                        <h2>Release Notes Synergy 6 Beta-2 (December 23, 2014)</h2>\n                        <h3>Features:</h3>\n                        <ul>\n                            <li>Support Root-Data HDD partition</li>\n                            <li>Support manual aggregate</li>\n                            <li>Project can be deleted</li>\n                            <li>UI Enhancements based upon FAB and Insight Feedback</li>\n                        </ul>\n                        <h3>Known Bugs:</h3>\n                        <ul>\n                            <li>Cluster maximum node limit is not considered or restricted</li>\n                            <li>System maximum storage limit is not considered or restricted</li>\n                            <li>Aggregate maximum limit is not considered or restricted</li>\n                            <li>Session expires after 1 hour. If Synergy becomes unresponsive, click Refresh to login and reestablish a session.</li>\n                        </ul>\n                        <hr/>\n                        <h2>Release Notes Synergy 6 Beta-1 (October 20, 2014)</h2>\n                        <h3>Features:</h3>\n                        <ul>\n                            <li>Accessible by employees and partners (Windows/Mac desktop browsers only)</li>\n                            <li>Persistent cloud storage of projects</li>\n                            <li>Project search by name and metadata (tags)</li>\n                            <li>User can add/edit/delete clustered and unclustered controllers to a project.</li>\n                            <li>User can add/edit/delete shelves for a controller</li>\n                            <li>User can specify drives for a shelf</li>\n                            <li>Auto-aggregate creation according to best practices (TR-3838)</li>\n                            <li>Usable capacity calculations are shown in a summary pane</li>\n                        </ul>\n                        <h3>Known Bugs:</h3>\n                        <ul>\n                            <li>Cluster maximum node limit is not considered or restricted</li>\n                            <li>System maximum storage limit is not considered or restricted</li>\n                            <li>Session expires after 1 hour. If Synergy becomes unresponsive, click Refresh to login and reestablish a session.</li>\n                        </ul>\n                        <hr/>\n                        <h3>Beta-1 Patch 1 (November 17, 2014)</h3>\n                        <ul>\n                            <li>UI Enhancements based upon FAB and Insight Feedback</li>\n                            <li>Fix incorrect drive count for NL-SAS in summary result</li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n});\n\nmodule.exports = ReleaseNotesPage;\n","'use strict';\n\n/* global window */\n\nvar SUFFIX = 'Synergy 6',\n    SEPARATOR = ' \\u2013 ';\n\nfunction retitle(title) {\n    if (title) {\n        title = title + SEPARATOR + SUFFIX;\n    } else {\n        title = SUFFIX;\n    }\n\n    if (window && window.document) {\n        window.document.title = title;\n    }\n}\n\nmodule.exports = retitle;\n","'use strict';\n\nvar xform = require('../lib/xform'),\n    assert = require('assert'),\n    ModelMap = require('../lib/model/map'),\n    React = require('react'),\n    _ = require('lodash');\n\n// By the time we hit Hardware, we have a few props we tend to pass all the\n// way down:\n//\n// map - a map of the model\n// fire - the method by which we dispatch change commands\n// log - the method by which we log through to the server\n//\n// <ChildComponent { ... usual(this.props) } /> will get the usual props\n// after exceptions have been thrown for any that are defined but don't\n// look right.\n//\n// propTypes: _.merge({}, usual) to have React check that any usual props\n// have the right type. It's not as strict as what'll happen at the next\n// use of { ... usual (this.props) }, but you'll find out earlier.\n//\n// propTypes: _.merge({}, usual.isRequired) to have React check that any\n// usual props have the right type AND are present.\n\n// detail: ----------------------------------------------------------------\n\n// SPEC maps from prop keys to xform validator functions wearing optional\n// propCheck validators for React:\n\nvar SPEC = {\n        fire: optional(fn()),\n        log: optional(fn()),\n        map: optional(instance(ModelMap)),\n    };\n\n// usual function calls xform with SPEC:\n\nfunction usual(props) {\n    return xform(SPEC, props, 'props');\n}\n\n// usual[key] for use in propTypes:\n\n_.forEach(SPEC, function (checkFn, key) {\n    if (checkFn.propCheck) {\n        usual[key] = checkFn.propCheck;\n    }\n});\n\n// usual.isRequired also maps from key to a propType, but with isRequired\n// where possible. Object.defineProperty makes it available without it\n// appearing in the object's keys, so React won't try to treat isRequired\n// itself as a prop:\n\nObject.defineProperty(usual, 'isRequired', {\n    get: function getReactValidatorsAsRequired() {\n        return _.mapValues(usual, function makeRequired(value) {\n            if (typeof value.isRequired === 'function') {\n                return value.isRequired;\n            } else {\n                return value;\n            }\n        });\n    }\n});\n\nfunction optional(validator) {\n    return propChecked(checkFn, validator.propCheck);\n\n    function checkFn(value, kpath) {\n        if (value === undefined) {\n            return undefined;\n        } else {\n            return validator(value, kpath);\n        }\n    }\n}\n\nfunction fn(arity) {\n    return propChecked(checkFn, React.PropTypes.func);\n\n    function checkFn(value, kpath) {\n        assert.equal(typeof value, 'function', kpath + ': not function');\n        if (typeof arity === 'number') {\n            assert.equal(value.length, arity, kpath + ': need ' + arity + '-arity');\n        }\n        return value;\n    }\n}\n\nfunction instance(Class) {\n    return propChecked(checkFn, React.PropTypes.object);\n\n    function checkFn(value, kpath) {\n        assert(value instanceof Class, 'function', kpath + ': not ' + Class.name);\n        return value;\n    }\n}\n\nfunction propChecked(fn, reactPropCheck) {\n    if (reactPropCheck) {\n        fn.propCheck = reactPropCheck;\n    }\n\n    return fn;\n}\n\nmodule.exports = usual;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    lcprop = require('./lcprop');\n\nvar LODASH_TERMINATORS = [\n        'groupBy',\n    ],\n    LODASH_CHAINERS = {\n        // name: shouldWeKeepFilters\n        'filter': true,\n        'map': false\n    },\n    ARRAY_CHAINERS = [\n        'concat',\n    ];\n\n/***\n * Apply a query API to the results.\n *\n * Goodies:\n *\n *     results.where(x) => _.where(seq, x) // with the API still present\n *     results.where(x).and(y) => results.where(x).where(y) // friendly\n *     results.where.filt1 => only those passing filt1\n *     results.where.filt2 => only those passing filt2\n *     results.where.filt1.and.filt2 => only those passing both\n *\n * Because they're arrays, any result set will NOT have where or and visible\n * when you enumerate their keys. If you apply .where or .and, you get a\n * generic filter method with visible keys for each filter.\n */\n\nfunction addQueryAPI(results, filters, andMode) {\n    assert(results instanceof Array, 'b7b22b45.0');\n    filters = filters || {};\n    assert(typeof filters === 'object' && !_.isArray(filters), 'b7b22b45.1');\n\n    // add the invisible .where function to the array\n\n    Object.defineProperty(results, 'where', {\n        get: _.constant(where),\n        enumerable: false,\n        configurable: true,\n    });\n\n    _.forEach(LODASH_TERMINATORS, addLodashTerminator);\n    _.forEach(LODASH_CHAINERS, addLodashChainer);\n    _.forEach(ARRAY_CHAINERS, addArrayChainer);\n\n    // add the invisible .and function to the array if it's not the first\n    // result in the chain\n\n    if (andMode) {\n        Object.defineProperty(results, 'and', {\n            get: _.constant(where),\n            enumerable: false,\n            configurable: true,\n        });\n    }\n\n    // add the visible filter methods to the where/and function\n    // also add them invisibly to the result set in case you're feeling terse\n\n    _.forEach(filters, addFilter);\n\n    return results; // ----- closures only below this point\n\n    function addLodashTerminator(name) {\n        var fn = _[name];\n        assert.equal(typeof fn, 'function', 'b7b22b45.2: ' + name);\n        Object.defineProperty(results, name, {\n            value: _.partial(fn, results),\n            enumerable: false,\n            configurable: true,\n        });\n    }\n\n    function addLodashChainer(keepFilters, name) {\n        var fn = _[name],\n            newFilters = keepFilters ? filters : {};\n        assert.equal(typeof fn, 'function', 'b7b22b45.2: ' + name);\n        Object.defineProperty(results, name, {\n            value: function () {\n                return feedExtraArgumentsAndChainFrom(fn, arguments, newFilters);\n            },\n            enumerable: false,\n            configurable: true,\n        });\n    }\n\n    function addArrayChainer(name) {\n        var fn = Array.prototype[name];\n        assert.equal(typeof fn, 'function', 'b7b22b45.3: ' + name);\n        Object.defineProperty(results, name, {\n            value: function() {\n                var result = fn.apply(results, arguments);\n                return addQueryAPI(result, filters, false);\n            },\n            enumerable: false,\n            configurable: true,\n        });\n    }\n\n    function addFilter(filter, name) {\n        lcprop(where, name, filtered, true); // visible on where\n\n        function filtered() {\n            return addQueryAPI(_.filter(results, filter), filters, true);\n        }\n    }\n\n    function where(/* args */) {\n        return feedExtraArgumentsAndChainFrom(_.where, arguments);\n    }\n\n    function feedExtraArgumentsAndChainFrom(fn, _arguments, newFilters) {\n        newFilters = newFilters || filters; // {} is truthy, thus kept\n        var args = [ results ].concat(_.toArray(_arguments));\n        return addQueryAPI(fn.apply(results, args), newFilters, true);\n    }\n}\n\nmodule.exports = addQueryAPI;\n","'use strict';\n\nvar assert = require('assert'),\n    util = require('util'),\n    _ = require('lodash');\n\n/**\n * Abstract client cache with an asynchronous interface so we can use\n * async back-ends such as IndexedDB.\n */\n\nfunction ClientCache() {\n    assert(this instanceof ClientCache, 'use new');\n    assert(typeof this._init === 'function', 'define _init');\n    assert(typeof this._get === 'function', 'define _get');\n    assert(typeof this._set === 'function', 'define _set');\n    this.poisoned = {};\n}\n\n/**\n * Initialise the client cache. MUST call back with either an error\n * as the first argument (failed), or a falsey first argument and either\n * true (OK and ready) or false (not supported) as the second.\n */\n\nClientCache.prototype.init = function init(callback) {\n    assert(typeof callback === 'function');\n    var name = this.constructor.name;\n\n    function onCompletion(err, supported) {\n        if (err) {\n            try {\n                assert(err instanceof Error);\n                assert(arguments.length === 1);\n            } catch (err2) {\n                console.error('cache:', name, '_init mis-reports errors');\n            }\n            console.error('cannot initialise', name, err);\n            callback(err);\n            return;\n        } else {\n            try {\n                assert(typeof supported === 'boolean');\n            } catch (err3) {\n                console.error('cache:', name, '_init mis-reports success');\n            }\n            callback(null, !!supported);\n        }\n    }\n\n    try {\n        this._init(onCompletion);\n    } catch (err4) {\n        callback(err4);\n    }\n};\n\n/**\n * Get a value from the cache. Wraps backing _get method. Logs crashes and\n * failures, calling back as if the value is absent in both cases. If the\n * most recent set for a key failed, calls back as if the key is absent.\n */\n\nClientCache.prototype.get = function get(key, callback) {\n    assert(typeof key === 'string');\n    assert(typeof callback === 'function');\n\n    var value;\n\n    function onValue(err, value) {\n        if (err) {\n            console.error('cache: error getting', key, err);\n            value = undefined;\n        }\n        callback(null, value);\n        callback = _.noop;\n    }\n\n    if (this.poisoned[key]) {\n        callback(null, undefined);\n        return;\n    }\n\n    try {\n        value = this._get(key, onValue);\n    } catch (err) {\n        console.error('cache: crash getting', key, err);\n        callback(null, undefined);\n    }\n};\n\n/**\n * Set a value in the cache. Wraps backing _set method. Logs crashes and\n * failures, calling back as if the operation succeeded but poisoning the\n * key so that subsequent gets fail silently until a later set succeeds.\n */\n\nClientCache.prototype.set = function set(key, value, callback) {\n    assert(typeof key === 'string');\n    assert(typeof callback === 'function');\n    var poisoned = this.poisoned;\n\n    function onCompletion(err) {\n        if (err) {\n            console.error('cache: error setting', key, err);\n            poisoned[key] = true;\n        } else {\n            delete poisoned[key];\n        }\n\n        callback(null);\n        callback = _.noop;\n    }\n\n    try {\n        this._set(key, value, onCompletion);\n    } catch (err) {\n        console.error('cache: crash setting', key, err);\n        poisoned[key] = true;\n        callback(null);\n    }\n};\n\n/**\n * Remove a value from the cache. Wraps backing _remove method. Logs crashes and\n * failures, calling back as if the operation succeeded but poisoning the\n * key so that subsequent gets fail silently until a later set or remove succeeds.\n */\n\nClientCache.prototype.remove = function remove(key, callback) {\n    assert(typeof key === 'string');\n    assert(typeof callback === 'function');\n    var poisoned = this.poisoned;\n\n    function onCompletion(err) {\n        if (err) {\n            console.error('cache: error removing', key, err);\n            poisoned[key] = true;\n        } else {\n            delete poisoned[key];\n        }\n\n        callback(null);\n        callback = _.noop;\n    }\n\n    try {\n        this._remove(key, onCompletion);\n    } catch (err) {\n        console.error('cache: crash removing', key, err);\n        poisoned[key] = true;\n        callback(null);\n    }\n};\n\n/**\n * A do-nothing fallback cache.\n */\n\nfunction NullCache() {\n    assert(this instanceof NullCache, 'use new');\n    ClientCache.call(this);\n    this.ok = true;\n}\n\nutil.inherits(NullCache, ClientCache);\n\nNullCache.prototype._init = function _init(callback) {\n    callback(null, true);\n};\n\nNullCache.prototype._get = function _get(key, callback) {\n    callback(null, undefined);\n};\n\nNullCache.prototype._set = function _set(key, value, callback) {\n    callback(null);\n};\n\nNullCache.prototype._remove = function _remove(key, callback) {\n    callback(null);\n};\n\n/**\n * A cache based on HTML5 Local Storage.\n */\n\nfunction LocalStorageCache() {\n    assert(this instanceof LocalStorageCache, 'use new');\n    ClientCache.call(this);\n}\n\nutil.inherits(LocalStorageCache, ClientCache);\n\nLocalStorageCache.prototype._init = function _init(callback) {\n    var sentinel = (new Date()).toString(),\n        match = false;\n\n    try {\n        this.storage = window.localStorage;\n        this.storage.setItem(sentinel, sentinel);\n        match = (this.storage.getItem(sentinel) === sentinel) ? true : false;\n        this.storage.removeItem(sentinel);\n    } catch (err) {\n        // an inability to resolve window.localStorage => not supported\n        // an inability to access get/set item methods => not supported\n        callback(null, false);\n        return;\n    }\n\n    if (match) {\n        // works OK => ready\n        callback(null, true); // ok\n    } else {\n        // failing to give values back accurately => error\n        callback(new Error('sentinel mismatch'));\n    }\n};\n\nLocalStorageCache.prototype._get = function _get(key, callback) {\n    var repr = this.storage.getItem(key),\n        value = (repr === undefined) ? undefined : JSON.parse(repr);\n    callback(null, value);\n};\n\nLocalStorageCache.prototype._set = function _set(key, value, callback) {\n    this.storage.setItem(key, (value === undefined) ? undefined : JSON.stringify(value));\n    callback(null);\n};\n\nLocalStorageCache.prototype._remove = function _remove(key, callback) {\n    this.storage.removeItem(key);\n    callback(null);\n};\n\nvar ENGINES = [ LocalStorageCache, NullCache ];\n\n/**\n * Get a working client cache, even if it does nothing.\n */\n\nfunction getClientCache(callback) {\n    assert(typeof callback === 'function');\n\n    var remaining = _.clone(ENGINES),\n        engine,\n        Engine;\n\n    function onInit(err, ok) {\n        if (err) {\n            return tryNext();\n        }\n\n        if (ok) {\n            callback(null, engine);\n        } else {\n            tryNext();\n        }\n    }\n\n    function tryNext() {\n        Engine = _.first(remaining);\n        assert(typeof Engine === 'function');\n        remaining = _.rest(remaining);\n        engine = new Engine();\n        engine.init(onInit);\n    }\n\n    tryNext();\n}\n\nmodule.exports = getClientCache;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash');\n\nfunction classifyDrive(drive) {\n    assert(typeof drive.rpm === 'number');\n    if (drive.rpm >= 50) {\n        return 'SSD';\n    } else if (drive.rpm < 9) {\n        return 'capacity';\n    } else {\n        return 'performance';\n    }\n}\n\nfunction byClassification(drives) {\n    return _.reduce(drives, function (result, drive) {\n        var _class = classifyDrive(drive),\n            rawtb = (drive.rawgb * drive._count) / 1000;\n\n        result.count[_class] = (result.count[_class] || 0) + drive._count;\n        result.rawtb[_class] = (result.rawtb[_class] || 0) + rawtb;\n        return result;\n    }, { rawtb: {}, count: {}});\n}\n\nfunction describe(query) {\n    assert(typeof query === 'function');\n\n    function countBy(qatts, att) {\n        return _.reduce(query(qatts).matches, function (result, value) {\n            result[value[att]] = (result[value[att]] || 0) + value._count;\n            return result;\n        }, {});\n    }\n\n    function uniques(qatts, att) {\n        return _.uniq(_.keys(countBy(qatts, att)));\n    }\n\n    return {\n        nodes: countBy({ _type: 'node' }, 'model'),\n        shelves: countBy({ _type: 'shelf' }, 'model'),\n        versions: uniques({ _type: 'node' }, 'version'),\n        modes: uniques({ _type: 'node' }, 'mode'),\n        drives: byClassification(query({ _type: 'drive' }).matches)\n    };\n}\n\nmodule.exports = describe;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    Unit = require('../units.js'),\n    addQueryAPI = require('../add-query-api');\n\nvar SLICE_EXTRACT = /^(.*)(P[0-9]+)$/;\n\nvar sliceUsedBlocksToRSGB = _.memoize(function sliceUsedBlocksToRSGB(usedBlocks) {\n    assert.equal(typeof usedBlocks, 'number', '9c277e6d.t ' + typeof usedBlocks);\n    assert(usedBlocks > 0, '9c277e6d.v ' + usedBlocks);\n    return new Unit(4, 'KiB').mult(usedBlocks).value_gb;\n});\n\nfunction deviceInfoFromHagroup(hagroup) {\n    assert.equal(hagroup._type, 'hagroup', 'c2b35515');\n\n    var infoByDeviceId = {};\n\n    var results = _.flatten([\n        deviceInfosFromShelves(),\n        deviceInfosFromRootDataSlices(),\n        deviceInfosFromStoragePoolSlices()\n    ]);\n\n    _.forEach(hagroup.controllers || [], recordConsumptionByControllerAggregates);\n\n    return addQueryAPI(results, DEVICE_FILTERS);\n\n    function recordConsumptionByControllerAggregates(controller) {\n        _.forEach(controller.aggregates || [], recordConsumptionByAggregate);\n\n        function recordConsumptionByAggregate(aggregate) {\n            var aggrInfo = {\n                    _id: aggregate._id,\n                    _manual: aggregate._manual,\n                    _type: aggregate._type,\n                    _root: aggregate.is_root_aggregate,\n                    controller: controller._id,\n                    name: aggregate.name,\n                },\n                raidGroups = aggregate._raid_groups || [];\n\n            _.forEach(raidGroups, _.partial(recordConsumptionByRaidGroupLikeObject, aggrInfo));\n            _.forEach(raidGroups, recordConsumptionByRaidGroupLikeObject);\n        }\n    }\n\n    function recordConsumptionByRaidGroupLikeObject(info, rg) {\n        // if we're fed info (probably via _.partial), we use that;\n        // otherwise we extract info from the raid group\n        if (arguments.length === 1) {\n            rg = info;\n            info = _.pick(rg, '_id', '_type', 'cache', '_manual');\n        }\n\n        // now the work:\n        _.forEach(rg._devices, function (id) {\n            recordConsumption(id, info);\n        });\n    }\n\n    function recordConsumption(id, consumer) {\n        assert.equal(typeof id, 'string', '55da1eb8.1');\n        assert.equal(typeof consumer, 'object', '55da1eb8.2');\n\n        var info = infoByDeviceId[id];\n        if (!info) {\n            return;\n        }\n\n        consumer = _.defaults({}, consumer, { direct: true });\n        info.consumers.push(consumer);\n\n        if (info.parentId) {\n            consumer = _.merge({}, consumer, { direct: false });\n            recordConsumption(info.parentId, _.merge({}, consumer, {\n                direct: false,\n            }));\n        }\n    }\n\n    function deviceInfosFromShelves() {\n        return _(hagroup.shelves)\n            .map(deviceInfosFromShelf)\n            .flatten()\n            .value();\n    }\n\n    function deviceInfosFromShelf(shelf) {\n        var _x_bom = shelf._x_bom,\n            shelfResults = [];\n\n        for (var idx in _x_bom.drive_specs) {\n\n            var spec = _x_bom.drive_specs[idx],\n                members = _x_bom.drive_spec_members[idx];\n            for (var midx in members) {\n\n                var id = members[midx],\n                    info = {\n                        id: id,\n                        spec: spec, // still includes \"quantity\"; sorry\n                                    // ... but they're singletons, so\n                                    // quite memory efficient\n                        virtual: false,\n                        shelf: shelf._id,\n                        hagroup: hagroup._id,\n                        consumers: []\n                    };\n\n                infoByDeviceId[id] = info;\n                shelfResults.push(info);\n            }\n        }\n\n        return shelfResults;\n    }\n\n    function deviceInfosFromRootDataSlices() {\n        return _(hagroup.controllers)\n            .map(deviceInfosFromRootDataSliceAssignedTo)\n            .flatten()\n            .value();\n    }\n\n    function deviceInfosFromRootDataSliceAssignedTo(controller) {\n        return _(controller._assigned_storage || [])\n            .map('slice_details')\n            .map(deviceInfosFromRootDataSlice)\n            .flatten()\n            .value();\n\n        function deviceInfosFromRootDataSlice(sliceDetails) {\n            return _.map(sliceDetails.devices, deviceInfoFromRootDataSliceMember);\n\n            function deviceInfoFromRootDataSliceMember(id) {\n                var slice = sliceDetails.slice,\n                    parentId = unslice(id),\n                    info = mkInfoForSlice(id, parentId, slice, 'root', sliceDetails.used_blocks, controller._id);\n\n                recordConsumption(parentId, {\n                    _type: 'slice',\n                    _id: id,\n                    slice: slice,\n                    sliceType: slice === 'P2' ? 'root' : 'data'\n                });\n\n                return info;\n            }\n        }\n    }\n\n    function deviceInfosFromStoragePoolSlices() {\n        return _(hagroup.controllers)\n            .map(deviceInfosFromStoragePoolSlicesOn)\n            .flatten()\n            .value();\n    }\n\n    function deviceInfosFromStoragePoolSlicesOn(controller) {\n        return _(controller.storage_pools || [])\n            .map(deviceInfosFromStoragePool)\n            .flatten()\n            .value();\n\n        function deviceInfosFromStoragePool(pool) {\n\n            recordConsumptionByRaidGroupLikeObject(pool);\n            return _(pool._allocations)\n                .map(deviceInfosFromAllocation)\n                .flatten()\n                .value();\n\n            function deviceInfosFromAllocation(allocation) {\n                return allocation.devices.map(deviceInfoFromDeviceInAllocation);\n\n                function deviceInfoFromDeviceInAllocation(id) {\n\n                    var slice = allocation.slice,\n                        parentId = unslice(id),\n                        info = mkInfoForSlice(id, parentId, slice, 'fpsp', allocation.used_blocks);\n\n                    recordConsumption(parentId, {\n                        _type: 'slice',\n                        _id: id,\n                        slice: slice,\n                        sliceType: 'fp',\n                    });\n\n                    return info;\n                }\n            }\n        }\n    }\n\n    function mkInfoForSlice(id, parentId, slice, why, used_blocks, controllerId) {\n        assert.equal(typeof id, 'string', '85724289.1');\n        assert.equal(typeof parentId, 'string', '85724289.2');\n        assert.equal(typeof slice, 'string', '85724289.3');\n        assert.equal(typeof why, 'string', '85724289.4');\n        assert.equal(typeof used_blocks, 'number', '85724289.5');\n        if (controllerId) {\n            assert.equal(typeof controllerId, 'string', '85724289.6');\n        }\n\n        var parentInfo = infoByDeviceId[parentId],\n            partialSpec = _.omit(parentInfo.spec, 'quantity', 'rsgb', 'slice', '_from_parent'),\n            spec = _.merge({}, partialSpec, {\n                rsgb: sliceUsedBlocksToRSGB(used_blocks),\n                slice: slice,\n                _from_parent: _.keys(partialSpec),\n            }),\n            info = {\n                id: id,\n                spec: spec,\n                virtual: true,\n                slice: slice,\n                why: why,\n                parentId: parentId,\n                shelf: parentInfo.shelf._id,\n                hagroup: hagroup._id,\n                consumers: []\n            };\n\n        if (controllerId && slice === 'P2') {\n            // record slice \"ownership\" information\n            // P2 only because we might split data any number of ways\n            spec._for_controller = controllerId;\n        }\n\n        infoByDeviceId[id] = info;\n\n        return info;\n    }\n}\n\nfunction unslice(deviceId) {\n    var match = deviceId.match(SLICE_EXTRACT);\n    if (match) {\n        return match[1];\n    } else {\n        return deviceId;\n    }\n}\n\nvar DEVICE_FILTERS = {\n        physical: physical,\n        virtual: virtual,\n        spare: spare,\n        used: used,\n        unused: unused,\n        locked: locked,\n        notroot: notroot,\n        unlocked: unlocked,\n        storagepool: storagepool\n    };\n\nfunction physical(info) {\n    return !info.virtual;\n}\n\nfunction virtual(info) {\n    return !!info.virtual;\n}\n\nfunction spare(info) {\n    return info.consumers.length === 0;\n}\n\nfunction unused(info) {\n    return spare(info);\n}\n\nfunction used(info) {\n    return info.consumers.length > 0;\n}\n\nfunction notroot(info) {\n    return !_.any(info.consumers, { _root: true });\n}\n\nfunction unlocked(info) {\n    return !_.any(info.consumers, { _manual: true });\n}\n\nfunction locked(info) {\n    return _.any(info.consumers, { _manual: true });\n}\n\nfunction storagepool(info) {\n    return !!info.virtual && info.why === 'fpsp';\n}\n\nmodule.exports = {\n    from: {\n        hagroup: deviceInfoFromHagroup\n    },\n    filters: DEVICE_FILTERS\n};\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    CountingBag = require('../counting-bag'),\n    ObjectWalker = require('../object-walker');\n\nfunction tagDrivesFromShelfBom(add, _shelf) {\n    var _driveSpecs = _shelf.maybe('_x_bom.drive_specs');\n    if (_driveSpecs.exists) {\n        for (var idx in _driveSpecs.value) {\n            var _driveSpec = _driveSpecs.get(idx),\n                tag = {\n                    _type: 'drive',\n                    model: _driveSpec.get('model').value,\n                    rawgb: _driveSpec.has('rawgb') ? _driveSpec.get('rawgb').value : 0,\n                    type: _driveSpec.get('type').value,\n                    rpm: _driveSpec.get('rpm').value,\n                },\n                quantity = _driveSpec.has('quantity') ? _driveSpec.get('quantity').value : 0;\n            add(tag, quantity);\n        }\n    }\n}\n\nfunction tagShelf(add, _shelf) {\n    if(_shelf.has('model')) {\n        add({\n            _type: 'shelf',\n            model: _shelf.get('model').value\n        });\n    }\n\n    tagDrivesFromShelfBom(add, _shelf);\n}\n\nfunction tagShelves(add, _shelves) {\n    if (_shelves.exists) {\n        for (var idx in _shelves.value) {\n            tagShelf(add, _shelves.get(idx));\n        }\n    }\n}\n\nfunction tagHaGroups(add, hagroups) {\n    var nodeCount,\n        nodeModel,\n        nodeMode,\n        nodeVersion;\n\n    function mustMatchIfBothPresent(base, path1, path2) {\n        assert(ObjectWalker.isWrapped(base));\n        var m1 = base.maybe(path1),\n            m2 = base.maybe(path2);\n        if (m1.exists && m2.exists) {\n            assert(m1.value === m2.value, [\n                m1.path,\n                'must match',\n                m2.path,\n                'if both are present']);\n        }\n    }\n\n    for (var idx in hagroups) {\n        var _hagroup = new ObjectWalker(\n                hagroups[idx],\n                [ 'synergy_model','hagroups', idx ]);\n        _hagroup.assert(_.isPlainObject, 'expected object');\n\n        nodeCount = null;\n        nodeModel = null;\n        nodeMode = null;\n        nodeVersion = undefined;\n\n        if (_hagroup.has('_model')) {\n            add({\n                _type: 'config',\n                config: _hagroup.value._model\n            });\n        }\n\n        if (_hagroup.has('model')) {\n            nodeModel = _hagroup.get('model').value;\n        }\n\n        if (_hagroup.has('is_clustered')) {\n            nodeMode = _hagroup.get('is_clustered').value ? 'c-mode': '7-mode';\n        }\n\n        if (_hagroup.has('controllers') && _hagroup.value.controllers && _hagroup.value.controllers.length) {\n            nodeCount = _hagroup.value.controllers.length;\n        }\n\n        if (_hagroup.has('version')) {\n            nodeVersion = _hagroup.get('version').value;\n        }\n\n        if (_hagroup.has('_x_bom') && !_.isEmpty(_hagroup.value._x_bom) && _hagroup.value._x_bom.system) {\n            mustMatchIfBothPresent(_hagroup, 'model', '_x_bom.system.system_model');\n            mustMatchIfBothPresent(_hagroup, 'system_is_clustered', '_x_bom.system.is_clustered');\n        }\n\n        assert(nodeCount !== null, _hagroup.path + ': could not determine node count');\n        assert(nodeModel !== null, _hagroup.path + ': could not determine node model');\n        assert(nodeMode !== null, _hagroup.path + ': could not determine node mode');\n\n        add({\n            _type: 'node',\n            model: nodeModel,\n            version: nodeVersion,\n            mode: nodeMode\n        }, nodeCount);\n\n        tagShelves(add, _hagroup.maybe('shelves'));\n    }\n}\n\nfunction sum(_sum, num) {\n    return _sum + num;\n}\n\nfunction distill(clip) {\n    assert(clip);\n\n    assert(!('hagroups' in clip), 'repair');\n\n    var bag = new CountingBag(),\n        add = bag.add.bind(bag);\n\n    if (clip.synergy_model) {\n        if (clip.synergy_model.hagroups) {\n            tagHaGroups(add, clip.synergy_model.hagroups);\n        }\n    }\n\n    var dump = bag.dump();\n\n    function query(atts) {\n        if (atts) {\n            var matches = _.where(dump, atts),\n                count = _.reduce(_.pluck(matches, '_count'), sum);\n\n            return {\n                matches: matches,\n                _count: count,\n            };\n        } else {\n            return dump;\n        }\n    }\n\n    return query;\n}\n\nmodule.exports = distill;\n","'use strict';\n\nvar assert = require('assert'),\n    xform = require('../xform'),\n    repairClip = require('./repair'),\n    uuid = require('uuid'),\n    Constants = require('../constants'),\n    _ = require('lodash');\n\n// jshint camelcase: false\n\n// Before adding properties, please carefully cross-check with the\n// management API. As this file will become a de-facto description of a\n// correct Synergy model, feel free to include fields we don't yet need.\n// Mark such fields with a spec of 'false'.\n\n// If adding a prop for which the value will be an object, you MUST\n// provide an object to define its spec so we know what it'll look like.\n\nfunction arrayOf(_type) {\n    return function checker(value, kpath) {\n        assert(_.isArray(value), kpath + ': not array; was ' + typeof value);\n\n        if (typeof _type === 'string') {\n            _.forEach(value, function checkEntry(entry) {\n                assert.equal(typeof entry, _type, kpath + ': not array of ' + _type);\n            });\n            return value;\n        } else if (typeof _type === 'function') {\n            return _.map(value, function (member, index) {\n                return _type(member, kpath + '[' + index + ']');\n            });\n        } else {\n            assert(false, kpath + ': invalid arrayOf argument');\n        }\n    };\n}\n\nfunction slice(value, kpath) {\n    if (typeof value === 'string' && value.match(/^P[0-9]+$/)) {\n        return value;\n    } else {\n        throw new Error(kpath + ': not slice: ' + value);\n    }\n}\n\n// SHOUTING_STANDS_OUT\n\nvar REMOVED = false,\n    DEFAULT = xform.setdefault,\n    CONST = xform.constant,\n    UUID = DEFAULT(uuid, checkUUID);\n\nfunction OPTIONAL_UUID(value, kpath) {\n    if (!value) { // includes null, which we've been leaving behind\n        return undefined;\n    } else {\n        return checkUUID(value, kpath);\n    }\n}\n\nfunction checkUUID(value, kpath) {\n    try {\n        uuid.parse(value);\n        return value;\n    } catch (err) {\n        throw new Error(kpath + ': invalid UUID: ' + value);\n    }\n}\n\nfunction FIXBOOL(value, kpath) {\n    if (typeof value === 'number') {\n        return !!value;\n    }\n\n    if (_.has(FIXBOOL, value)) {\n        return FIXBOOL[value];\n    } else {\n        throw new Error(kpath + ': can\\'t fix to bool: ' + value);\n    }\n}\n\n_.merge(FIXBOOL, {\n    undefined: false,\n    null: false,\n    yes: true,\n    no: false,\n    true: true,\n    false: false,\n});\n\nvar SPEC = {\n        _x_project_name: true,\n        _x_original_timestamp: true,\n        _x_archived: true,\n        _uuid: true,\n        _version: true,\n        _timestamp: true,\n        _type: true,\n        synergy_model: {\n            clusters: [{ // audited vs mainN gkidd 2014-07-3\n                _id: UUID,\n                _type: CONST('cluster'),\n                contact: false,\n                location: false,\n                name: true,\n                serial_number: false,\n                uuid: false, // theirs, not ours\n                rdb_uuid: false,\n            }],\n            hagroups: [{\n                _id: UUID,\n                _model: true,\n                _type: CONST('hagroup'),\n                _x_bom: {\n                    system: {\n                        _platformIndex: true,\n                        _configurationIndex: true,\n                        _version: true,\n                        _model: true,\n                        _family: true,\n                        _number: true,\n                        _config: true,\n                        _dedicated_root_aggregate: true,\n                        _spare_allocation_strategy: true,\n                        _messages: false\n                    },\n                    cards: [{\n                        count: true,\n                        card_model: true,\n                        description: true,\n                    }],\n                    shelves: [{\n                        _id: false, // how can we have just one ID?\n                        _type: CONST('shelf'),\n                        _shelfIndex: true,\n                        _drive1Index: true,\n                        _drive2Index: true,\n                        count: true,\n                        model: true,\n                        _code: false,\n                        drive1count: true,\n                        drive1model: true,\n                        drive1rawgb: true,\n                        drive2count: true,\n                        drive2model: true,\n                        drive2rawgb: true,\n                        _description: true,\n                        _messages: false,\n                    }]\n                },\n                _policies: {\n                    ADP: {\n                        prohibitedByUser: DEFAULT(false)\n                    },\n                    Aggregates: {\n                        manual: DEFAULT(false),\n                        ssdsForFlashPool: DEFAULT(true)\n                    },\n                    storage_pools: {\n                        auto_fill: DEFAULT(true)\n                    },\n                    version: {\n                        pin: DEFAULT(true)\n                    },\n                    spare_allocation: {\n                        enforce: DEFAULT(Constants.POLICIES.SPARES.DEFAULT)\n                    }\n                },\n                is_clustered: true, // ONTAPI: system-get-info\n                model: true,\n                sys_version: true, // in TCLIP docs; absent from built models\n                cluster: {\n                    _id: UUID,\n                    _type: false, // this is a partial ref, NOT the real object\n                    name: true,\n                },\n                controllers: [{\n                    _id : true,\n                    _type: CONST('controller'),\n                    name: true,\n                    aggregates: [{\n                        _id: UUID,\n                        _strategy: false, // internal?\n                        _type: CONST('aggregate'),\n                        _manual: true,\n                        _controller: false, // internal - added back during map creation.\n                        name: true,\n                        block_type: true,\n                        raid_type: true, // Was: raidType\n                        cache_raid_type: true, // Was: cacheRaidType\n                        is_hybrid: true, // Was: isHybrid (aggr-create, option-name, 'is_flash_pool_caching_enabled' and 'hybrid_enabled') also is_hybrid\n                        is_mirrored: true, // Was: isSyncMirrored\n                        is_root_aggregate: true, // Was: isDedicatedRoot VERY much doubt this is fron ONTAPI (aggr-create, option-name, 'root')\n                        _snapreserve_proportion: true, // Was: snapReserveProportion\n                        _ddpreserve: true, // for E-Series with RaidType.DDP\n                        _cache_storage_pool_id: REMOVED,\n                        _raid_groups: [{\n                            // forced because we can't depend on unique aggr names\n                            _id: UUID,\n                            _type: CONST('raidgroup'),\n                            name: true,\n                            _devices: arrayOf('string'),\n                            __deviceSpecs: false, // to reconstruct after HW change\n                            cache: DEFAULT(false), // TODO: check name vs ONTAPI\n                            plex_number: true\n                        }]\n                    }],\n                    storage_pools: [{ // audited vs mainN gkidd 2015-01-28\n                        // WARNING: these can be used by any aggregate in\n                        // the HA group, but are owned by one controller for\n                        // spare drive replacement purposes.\n                        _id: UUID,\n                        _type: CONST('storage_pool'),\n                        name: true, // unique across cluster\n                        type: DEFAULT('ssd'),\n                        _manual: true,\n                        _controller: false, // internal - added back during map creation.\n                        raid_type: true,\n                        _devices: arrayOf('string'), // WHOLE DRIVES\n                        __deviceSpecs: false, // to reconstruct after HW change\n                        _allocations: [{\n                            slice: slice,\n                            used_blocks: true,\n                            devices: arrayOf('string'),\n                            __deviceSpecs: false, // to reconstruct after HW change\n                            aggr_id: OPTIONAL_UUID, // undefined if unused\n                        }]\n                    }],\n                    // note: only lists root sliced devices, not\n                    // storage pool allocation unit devices\n                    _assigned_storage: [{\n                        slice_details: {\n                            slice: slice,\n                            used_blocks: true,\n                            devices: arrayOf('string')\n                        }\n                    }]\n                }],\n                shelves: [{\n                    _id: UUID,\n                    _type: CONST('shelf'),\n                    _x_bom: {\n                        drive_specs: [{\n                            model: true,\n                            rawgb: true,\n                            rsgb: true,\n                            rpm: true,\n                            type: true,\n                            encrypted: true,\n                            fp_support: FIXBOOL,\n                            quantity: true // TODO: really?\n                        }],\n                        drive_spec_members: arrayOf(arrayOf('string'))\n                    },\n                    _description: true,\n                    'model': true,\n                    'serial_number': true,\n                    'bay_count': true,\n                    'rack_units': false,\n                    'type': true,\n                    '_isembedded': true,\n                    'channel_name': false,\n                    'shelf_number': true,\n                    'shelf_rack_number': false,\n                    'shelf_rack_position': false\n                }],\n                version: true\n                /* apparently not on new Synergy Mobile -dev models\n                drives: [{ // auditing vs devN aggr-disk-info and storage-disk gkidd 2014-10-22\n                    // REPAIR DOES NOT YET MOVE ALL THESE FROM THEIR LEGACY KEYS\n                    _id: UUID,\n                    effective_disk_rpm: false,\n                    effective_disk_type: false,\n                    is_cache: false,\n                    model: true,\n                    name: false, // disk name, e.g. 0a.2\n                    owner: true, // owning controller\n                    physical_size: true, // not yet provided by Synergy 5; bytes; convert?\n                    rpm: true, //ok\n                    shelf: true, // string!?\n                    shelf_bay: true,\n                    shelf_uid: false, // esp handy for resolving asup\n                    type: true, // ok\n                    usable_size: true, // not yet provided by Synergy 5; bytes; convert?\n                    // TODO: make possible to get capacity for 3rd party drives\n                }]*/\n            }]\n        }\n    };\n\nfunction reduce(envelope) {\n    assert(envelope);\n    return xform(SPEC, repairClip(envelope), 'clip');\n}\n\nmodule.exports = reduce;\n","'use strict';\n\n/**\n * Table of drive encryption hard-coded so we don't have to take an additional\n * dependency on the product data to repair clips we broke over the last\n * few weeks.\n *\n * Updates from EPIC should not be necessary once we stop breaking the\n * models.\n */\n\nvar encryptedByModel = {\n    'E-X4021A': true,\n    'E-X4021B': true,\n    'E-X4022A': true,\n    'E-X4022B': true,\n    'E-X4023A': true,\n    'E-X4023B': true,\n    'E-X4024A': true,\n    'E-X4024B': true,\n    'E-X4025A': true,\n    'E-X4025B': true,\n    'E-X4026A': true,\n    'E-X4026B': true,\n    'E-X4027A': true,\n    'E-X4028A': false,\n    'E-X4030A': false,\n    'E-X4034A': false,\n    'E-X4034B': false,\n    'E-X4035A': false,\n    'E-X4035B': false,\n    'E-X4036A': false,\n    'E-X4036B': false,\n    'E-X4037B': false,\n    'E-X4038A': false,\n    'E-X4038B': false,\n    'E-X4039A': true,\n    'E-X4039B': true,\n    'E-X4041B': false,\n    'E-X4043B': false,\n    'E-X4044B': false,\n    'E-X4045A': true,\n    'E-X4046A': false,\n    'E-X4047A': true,\n    'E-X4048A': false,\n    'E-X4049B': true,\n    'E-X4051B': false,\n    'E-X4052B': true,\n    'E-X4053B': false,\n    'E-X4054B': true,\n    'E-X4055B': false,\n    'E-X4057A': false,\n    'E-X4058A': true,\n    'E-X4059A': false,\n    'E-X4060A': false,\n    'E-X4061A': true,\n    'E-X4062A': false,\n    'X233A': false,\n    'X233B': false,\n    'X234A': false,\n    'X234B': false,\n    'X235A': false,\n    'X235B': false,\n    'X236A': false,\n    'X262A': false,\n    'X262B': false,\n    'X266A': false,\n    'X266B': false,\n    'X267A': false,\n    'X268A': false,\n    'X269A': false,\n    'X270A': false,\n    'X271A': false,\n    'X272A': false,\n    'X272B': false,\n    'X273A': false,\n    'X273B': false,\n    'X274A': false,\n    'X274B': false,\n    'X275A': false,\n    'X276A': false,\n    'X278A': false,\n    'X279A': false,\n    'X280B': false,\n    'X282B': false,\n    'X283B': false,\n    'X286A': false,\n    'X287A': false,\n    'X289A': false,\n    'X290A': false,\n    'X291A': false,\n    'X292A': false,\n    'X294A': false,\n    'X298A': false,\n    'X299A': false,\n    'X302A': false,\n    'X306A': false,\n    'X308A': false,\n    'X309A': true,\n    'X310A': false,\n    'X315A': true,\n    'X316A': false,\n    'X410A': false,\n    'X411A': false,\n    'X412A': false,\n    'X414A': true,\n    'X415A': true,\n    'X416A': true,\n    'X417A': true,\n    'X421A': false,\n    'X422A': false,\n    'X423A': false,\n    'X425A': false,\n    'X431A': false,\n    'X432A': false,\n    'X433A': false,\n    'X435A': false,\n    'X438A': false,\n    'X439A': false,\n    'X440A': true,\n    'X441A': false,\n    'X442A': false,\n    'X446A': false,\n    'X446B': false,\n    'X447A': false,\n    'X448A': false,\n    'X449A': false,\n    'X477A': false,\n    'X478A': false,\n    'X480A': false,\n    'X486A': false,\n    'X487A': false,\n    'X488A': false,\n    'X489A': false,\n    'X494A': true,\n    'X495A': true,\n    'X575A': false,\n    'X576A': false\n};\n\nmodule.exports = encryptedByModel;\n","'use strict';\n\n/**\n * Table of drive flash pool suport hard-coded so we don't have to take an additional\n * dependency on the product data to repair clips we broke over the last\n * few weeks.\n *\n * Updates from EPIC should not be necessary once we stop breaking the\n * models.\n */\n\nvar FpByModel = {\n    'E-X4021A': 'no',\n    'E-X4021B': 'no',\n    'E-X4022A': 'no',\n    'E-X4022B': 'no',\n    'E-X4023A': 'no',\n    'E-X4023B': 'no',\n    'E-X4024A': 'no',\n    'E-X4024B': 'no',\n    'E-X4025A': 'no',\n    'E-X4025B': 'no',\n    'E-X4026A': 'no',\n    'E-X4026B': 'no',\n    'E-X4027A': 'no',\n    'E-X4028A': 'no',\n    'E-X4030A': 'no',\n    'E-X4034A': 'no',\n    'E-X4034B': 'no',\n    'E-X4035A': 'no',\n    'E-X4035B': 'no',\n    'E-X4036A': 'no',\n    'E-X4036B': 'no',\n    'E-X4037B': 'no',\n    'E-X4038A': 'no',\n    'E-X4038B': 'no',\n    'E-X4039A': 'no',\n    'E-X4039B': 'no',\n    'E-X4041B': 'no',\n    'E-X4043B': 'no',\n    'E-X4044B': 'no',\n    'E-X4045A': 'no',\n    'E-X4046A': 'no',\n    'E-X4047A': 'no',\n    'E-X4048A': 'no',\n    'E-X4049B': 'no',\n    'E-X4051B': 'no',\n    'E-X4052B': 'yes',\n    'E-X4053B': 'yes',\n    'E-X4054B': 'yes',\n    'E-X4055B': 'yes',\n    'E-X4057A': 'no',\n    'E-X4058A': 'no',\n    'E-X4059A': 'no',\n    'E-X4060A': 'no',\n    'E-X4061A': 'no',\n    'E-X4062A': 'no',\n    'X233A': 'no',\n    'X233B': 'no',\n    'X234A': 'no',\n    'X234B': 'no',\n    'X235A': 'no',\n    'X235B': 'no',\n    'X236A': 'no',\n    'X262A': 'no',\n    'X262B': 'no',\n    'X266A': 'no',\n    'X266B': 'no',\n    'X267A': 'no',\n    'X268A': 'no',\n    'X269A': 'no',\n    'X270A': 'no',\n    'X271A': 'no',\n    'X272A': 'no',\n    'X272B': 'no',\n    'X273A': 'no',\n    'X273B': 'no',\n    'X274A': 'no',\n    'X274B': 'no',\n    'X275A': 'no',\n    'X276A': 'no',\n    'X278A': 'no',\n    'X279A': 'no',\n    'X280B': 'no',\n    'X282B': 'no',\n    'X283B': 'no',\n    'X286A': 'no',\n    'X287A': 'no',\n    'X289A': 'no',\n    'X290A': 'no',\n    'X291A': 'no',\n    'X292A': 'no',\n    'X294A': 'no',\n    'X298A': 'no',\n    'X299A': 'no',\n    'X302A': 'no',\n    'X306A': 'no',\n    'X308A': 'no',\n    'X309A': 'no',\n    'X310A': 'no',\n    'X315A': 'no',\n    'X316A': 'yes',\n    'X410A': 'no',\n    'X411A': 'no',\n    'X412A': 'no',\n    'X414A': 'no',\n    'X415A': 'no',\n    'X416A': 'no',\n    'X417A': 'no',\n    'X421A': 'no',\n    'X422A': 'no',\n    'X423A': 'no',\n    'X425A': 'yes',\n    'X431A': 'no',\n    'X432A': 'no',\n    'X433A': 'no',\n    'X435A': 'no',\n    'X438A': 'yes',\n    'X439A': 'yes',\n    'X440A': 'no',\n    'X441A': 'yes',\n    'X442A': 'no',\n    'X446A': 'yes',\n    'X446B': 'yes',\n    'X447A': 'yes',\n    'X448A': 'yes',\n    'X449A': 'yes',\n    'X477A': 'yes',\n    'X478A': 'no',\n    'X480A': 'no',\n    'X486A': 'no',\n    'X487A': 'no',\n    'X488A': 'no',\n    'X489A': 'yes',\n    'X494A': 'no',\n    'X495A': 'no',\n    'X575A': 'yes',\n    'X576A': 'yes'\n};\n\nmodule.exports = FpByModel;\n","'use strict';\n\nvar assert = require('assert'),\n    uuid = require('uuid'),\n    repairShelves = require('./shelves'),\n    Constants = require('../../constants'),\n    _ = require('lodash');\n\n// jshint camelcase: false\n\nfunction correctLegacyModelPosition(clip) {\n    assert(clip);\n\n    if (!clip.hagroups) {\n        return;\n    }\n\n    assert(!clip.synergy_model, 'clip has both hagroups AND synergy_model');\n\n    clip.synergy_model = {\n        hagroups: clip.hagroups\n    };\n\n    delete clip.hagroups;\n}\n\nfunction repairIsClusteredType(ob) {\n    if (typeof ob.is_clustered === 'string') {\n        ob.is_clustered = ob.is_clustered === 'true';\n    }\n}\n\nfunction repairIsClustered(ob) {\n    if (ob._x_bom && ob._x_bom.system) {\n        repairIsClusteredType(ob._x_bom.system);\n\n        if (ob.is_clustered === null || ob.is_clustered === undefined) {\n            ob.is_clustered = ob._x_bom.system.is_clustered;\n        }\n    } else {\n        if (ob.is_clustered === null || ob.is_clustered === undefined) {\n            ob.is_clustered = false;\n        }\n    }\n\n    repairIsClusteredType(ob);\n}\n\nfunction repairClusterMembership(hagroup) {\n    if (hagroup.is_clustered && !_.has(hagroup, 'cluster')) {\n        hagroup.cluster = { _id: uuid() };\n    }\n}\n\nfunction defaultOrAssertSame(target, tkey, source, skey) {\n    if (tkey in target) {\n        assert.equal(\n            target[tkey],\n            source[skey],\n            skey + ' mismatch');\n    } else {\n        target[tkey] = source[skey];\n    }\n}\n\nfunction updateBomDriveDetail(hagroup) {\n    if (!(hagroup.drives && hagroup._x_bom && hagroup._x_bom.shelves)) {\n        return;\n    }\n\n    var detailsByModel = {};\n\n    function inhale(drive) {\n        var model = drive.model;\n        if (model && !(model in detailsByModel)) {\n            detailsByModel[model] = {\n                rpm: drive.rpm,\n                type: drive.type\n            };\n        }\n    }\n\n    function exhale(shelfgroup) {\n        if (shelfgroup.drive1model) {\n            var details1 = detailsByModel[shelfgroup.drive1model];\n            defaultOrAssertSame(shelfgroup, 'drive1rpm', details1, 'rpm');\n            defaultOrAssertSame(shelfgroup, 'drive1type', details1, 'type');\n        }\n\n        if (shelfgroup.drive2model) {\n            var details2 = detailsByModel[shelfgroup.drive2model];\n            defaultOrAssertSame(shelfgroup, 'drive2rpm', details2, 'rpm');\n            defaultOrAssertSame(shelfgroup, 'drive2type', details2, 'type');\n        }\n    }\n\n    assert(hagroup.drives instanceof Array);\n    assert(hagroup._x_bom.shelves instanceof Array);\n    _.forEach(hagroup.drives, inhale);\n    _.forEach(hagroup._x_bom.shelves, exhale);\n}\n\nfunction renameProp(ob, key1, key2) {\n    if (_.has(ob, key1)) {\n        var what = 'renaming ' + key1 + ' to ' + key2;\n        assert.equal(_.hasOwnProperty(ob, key2), false, 'clash ' + what);\n        ob[key2] = ob[key1];\n        delete ob[key1];\n    }\n}\n\nfunction renameShelfProperties(hagroup) {\n    if (!hagroup.shelves) {\n        return;\n    }\n\n    _.forEach(hagroup.shelves, function fixShelfProperties(shelf) {\n        renameProp(shelf, 'shelf_model', 'model');\n        renameProp(shelf, 'serial_no', 'serial_number');\n\n        delete shelf.shelf_type;\n    });\n}\n\nfunction renameShelfXbomProperties(hagroup) {\n    if (!hagroup.shelves) {\n        return;\n    }\n\n    _.forEach(hagroup.shelves, function fixShelfProperties(shelf) {\n        shelf._type = 'shelf';\n\n        var drive_specs = _.isEmpty(shelf._x_bom) ? [] : shelf._x_bom.drive_specs;\n\n        _.forEach(drive_specs, function fixShelfProperties(xbom) {\n            renameProp(xbom, 'driveType', 'type');\n            renameProp(xbom, 'marketingCapacity', 'rawgb');\n            renameProp(xbom, 'rightSizedCapacity', 'rsgb');\n            renameProp(xbom, 'speed', 'rpm');\n        });\n    });\n}\n\nfunction renameDriveProperties(hagroup) {\n    if (!hagroup.drives) {\n        return;\n    }\n\n    _.forEach(hagroup.drives, function fixDriveProperties(drive) {\n        renameProp(drive, 'disk_model', 'model');\n        renameProp(drive, 'disk_type', 'type');\n    });\n}\n\nfunction repairController(controller) {\n    controller._type = 'controller';\n\n    if (controller.aggregates === null) {\n        delete controller.aggregates;\n    }\n\n    if (controller.volumes === null) {\n        delete controller.volumes;\n    }\n}\n\nfunction repairControllerName(hagroup) {\n    if (!hagroup.controllers || !hagroup._x_bom || !hagroup._x_bom.system || !hagroup._x_bom.system.names) {\n        return;\n    }\n\n    var controllerNamesfromXbom = hagroup._x_bom.system.names.split('/');\n\n    _.forEach(hagroup.controllers, function setName(controller, index) {\n        if (!controller.name && controllerNamesfromXbom[index]) {\n            controller.name = controllerNamesfromXbom[index];\n        }\n    });\n}\n\nfunction repairVersion(hagroup) {\n    if (hagroup.version || !hagroup._x_bom || !hagroup._x_bom.system || !hagroup._x_bom.system.version) {\n        return;\n    }\n\n    hagroup.version = hagroup._x_bom.system.version;\n}\n\nfunction repairVersionNumber(hagroup) {\n    if (typeof hagroup.version !== 'string') {\n        return;\n    }\n\n    var parts = hagroup.version.split(' ');\n\n    parts[0] = parts[0].toUpperCase();\n    hagroup.version = parts.join(' ');\n}\n\nfunction repairPolicies(hagroup) {\n    hagroup._policies = hagroup._policies || {};\n\n    _.defaults(hagroup._policies, {\n        version: {\n            pin: true\n        },\n        spare_allocation: {\n            enforce: Constants.POLICIES.SPARES.DEFAULT\n        }\n    });\n}\n\nfunction repairHaGroup(hagroup) {\n    hagroup._type = 'hagroup';\n\n    repairIsClustered(hagroup);\n    repairClusterMembership(hagroup);\n\n    if (_.has(hagroup, 'system_model')) {\n        hagroup.model = hagroup.system_model;\n        delete hagroup.system_model;\n    }\n\n    renameDriveProperties(hagroup);\n    updateBomDriveDetail(hagroup);\n    renameShelfProperties(hagroup);\n    renameShelfXbomProperties(hagroup);\n    repairShelves.repairShelvesXboms(hagroup);\n\n    if (hagroup.controllers) {\n        _.forEach(hagroup.controllers, repairController);\n    }\n\n    repairControllerName(hagroup);\n    repairVersion(hagroup);\n    repairVersionNumber(hagroup);\n    repairPolicies(hagroup);\n}\n\nfunction repairCluster(cluster) {\n    cluster._type = 'cluster';\n}\n\nfunction repair(clip) {\n    clip = _.cloneDeep(clip);\n\n    correctLegacyModelPosition(clip);\n    if (!(clip.synergy_model && clip.synergy_model.hagroups)) {\n        return clip;\n    }\n\n    _.each(clip.synergy_model.hagroups, repairHaGroup);\n    _.each(clip.synergy_model.clusters || [], repairCluster);\n\n    return clip;\n}\n\nrepair.shelves = repairShelves;\nmodule.exports = repair;\n","'use strict';\n\n/**\n * Table of drive RPM hard-coded so we don't have to take an additional\n * dependency on the product data to repair clips we broke over the last\n * few weeks.\n *\n * Updates from EPIC should not be necessary once we stop breaking the\n * models.\n */\n\nvar rpmByModel = {\n    'E-X4021A': 7.2,\n    'E-X4021B': 7.2,\n    'E-X4022A': 7.2,\n    'E-X4022B': 7.2,\n    'E-X4023A': 7.2,\n    'E-X4023B': 7.2,\n    'E-X4024A': 7.2,\n    'E-X4024B': 7.2,\n    'E-X4025A': 10,\n    'E-X4025B': 10,\n    'E-X4026A': 10,\n    'E-X4026B': 10,\n    'E-X4027A': 15,\n    'E-X4028A': 50,\n    'E-X4030A': 50,\n    'E-X4034A': 7.2,\n    'E-X4034B': 7.2,\n    'E-X4035A': 7.2,\n    'E-X4035B': 7.2,\n    'E-X4036A': 10,\n    'E-X4036B': 10,\n    'E-X4037B': 7.2,\n    'E-X4038A': 10,\n    'E-X4038B': 10,\n    'E-X4039A': 10,\n    'E-X4039B': 10,\n    'E-X4041B': 50,\n    'E-X4043B': 50,\n    'E-X4044B': 7.2,\n    'E-X4045A': 7.2,\n    'E-X4046A': 7.2,\n    'E-X4047A': 7.2,\n    'E-X4048A': 7.2,\n    'E-X4049B': 10,\n    'E-X4051B': 10,\n    'E-X4052B': 10,\n    'E-X4053B': 10,\n    'E-X4054B': 10,\n    'E-X4055B': 10,\n    'E-X4057A': 50,\n    'E-X4058A': 50,\n    'E-X4059A': 50,\n    'E-X4060A': 50,\n    'E-X4061A': 50,\n    'E-X4062A': 50,\n    'X233A': 10,\n    'X233B': 10,\n    'X234A': 10,\n    'X234B': 10,\n    'X235A': 10,\n    'X235B': 10,\n    'X236A': 10,\n    'X262A': 7.2,\n    'X262B': 7.2,\n    'X266A': 5.4,\n    'X266B': 7.2,\n    'X267A': 7.2,\n    'X268A': 7.2,\n    'X269A': 7.2,\n    'X270A': 10,\n    'X271A': 15,\n    'X272A': 10,\n    'X272B': 10,\n    'X273A': 15,\n    'X273B': 15,\n    'X274A': 10,\n    'X274B': 10,\n    'X275A': 15,\n    'X276A': 10,\n    'X278A': 15,\n    'X279A': 15,\n    'X280B': 7.2,\n    'X282B': 7.2,\n    'X283B': 7.2,\n    'X286A': 15,\n    'X287A': 15,\n    'X289A': 15,\n    'X290A': 15,\n    'X291A': 15,\n    'X292A': 15,\n    'X294A': 7.2,\n    'X298A': 7.2,\n    'X299A': 7.2,\n    'X302A': 7.2,\n    'X306A': 7.2,\n    'X308A': 7.2,\n    'X309A': 7.2,\n    'X310A': 7.2,\n    'X315A': 7.2,\n    'X316A': 7.2,\n    'X410A': 15,\n    'X411A': 15,\n    'X412A': 15,\n    'X414A': 15,\n    'X415A': 15,\n    'X416A': 10,\n    'X417A': 10,\n    'X421A': 10,\n    'X422A': 10,\n    'X423A': 10,\n    'X425A': 10,\n    'X431A': 7.2,\n    'X432A': 7.2,\n    'X433A': 7.2,\n    'X435A': 50,\n    'X438A': 50,\n    'X439A': 50,\n    'X440A': 50,\n    'X441A': 50,\n    'X442A': 50,\n    'X446A': 50,\n    'X446B': 50,\n    'X447A': 50,\n    'X448A': 50,\n    'X449A': 50,\n    'X477A': 7.2,\n    'X478A': 7.2,\n    'X480A': 7.2,\n    'X486A': 10,\n    'X487A': 10,\n    'X488A': 10,\n    'X489A': 10,\n    'X494A': 10,\n    'X495A': 10,\n    'X575A': 50,\n    'X576A': 50\n};\n\nmodule.exports = rpmByModel;\n","'use strict';\n\n/**\n * Table of drive right-sized capacity hard-coded so we don't have to take an additional\n * dependency on the product data to repair clips we broke over the last\n * few weeks.\n *\n * Updates from EPIC should not be necessary once we stop breaking the\n * models.\n */\n\nvar rsgbByModel = {\n    'E-X4021A': 3000.016402432,\n    'E-X4021B': 3000.016402432,\n    'E-X4022A': 3000.016402432,\n    'E-X4022B': 3000.016402432,\n    'E-X4023A': 1999.8226718720002,\n    'E-X4023B': 1999.8226718720002,\n    'E-X4024A': 1999.8226718720002,\n    'E-X4024B': 1999.8226718720002,\n    'E-X4025A': 899.6088166400001,\n    'E-X4025B': 899.6088166400001,\n    'E-X4026A': 599.5505909760001,\n    'E-X4026B': 599.5505909760001,\n    'E-X4027A': 599.5505909760001,\n    'E-X4028A': 799.589766144,\n    'E-X4030A': 799.589766144,\n    'E-X4034A': 3000.016402432,\n    'E-X4034B': 3000.016402432,\n    'E-X4035A': 3000.016402432,\n    'E-X4035B': 3000.016402432,\n    'E-X4036A': 899.6088166400001,\n    'E-X4036B': 899.6088166400001,\n    'E-X4037B': 1999.8226718720002,\n    'E-X4038A': 899.6088166400001,\n    'E-X4038B': 899.6088166400001,\n    'E-X4039A': 899.6088166400001,\n    'E-X4039B': 899.6088166400001,\n    'E-X4041B': 799.6292055040001,\n    'E-X4043B': 799.6292055040001,\n    'E-X4044B': 1999.8226718720002,\n    'E-X4045A': 4007.2936077393924,\n    'E-X4046A': 4007.2936077393924,\n    'E-X4047A': 4007.2936077393924,\n    'E-X4048A': 4007.2936077393924,\n    'E-X4049B': 599.5505909760001,\n    'E-X4051B': 599.5505909760001,\n    'E-X4052B': 1199.7194076160001,\n    'E-X4053B': 1199.7194076160001,\n    'E-X4054B': 1199.7194076160001,\n    'E-X4055B': 1199.7194076160001,\n    'E-X4057A': 400.08801382400003,\n    'E-X4058A': 799.6292055040001,\n    'E-X4059A': 1600.3209205760002,\n    'E-X4060A': 400.08801382400003,\n    'E-X4061A': 799.6292055040001,\n    'E-X4062A': 1600.3209205760002,\n    'X233A': 17.825792,\n    'X233B': 17.825792,\n    'X234A': 35.651584,\n    'X234B': 35.651584,\n    'X235A': 71.303168,\n    'X235B': 71.303168,\n    'X236A': 142.606336,\n    'X262A': 221.64570112,\n    'X262B': 221.64570112,\n    'X266A': 287.7292544,\n    'X266B': 287.7292544,\n    'X267A': 443.66417100800004,\n    'X268A': 666.428506112,\n    'X269A': 888.7266181120001,\n    'X270A': 35.651584,\n    'X271A': 35.651584,\n    'X272A': 71.303168,\n    'X272B': 71.303168,\n    'X273A': 71.303168,\n    'X273B': 71.303168,\n    'X274A': 142.606336,\n    'X274B': 142.606336,\n    'X275A': 142.606336,\n    'X276A': 285.212672,\n    'X278A': 142.606336,\n    'X279A': 285.212672,\n    'X280B': 221.64570112,\n    'X282B': 443.66417100800004,\n    'X283B': 666.428506112,\n    'X286A': 142.606336,\n    'X287A': 285.212672,\n    'X289A': 438.304768,\n    'X290A': 587.2025600000001,\n    'X291A': 438.304768,\n    'X292A': 587.2025600000001,\n    'X294A': 1777.824956416,\n    'X298A': 888.7266181120001,\n    'X299A': 1777.824956416,\n    'X302A': 888.7266181120001,\n    'X306A': 1777.824956416,\n    'X308A': 2661.858410496,\n    'X309A': 2661.858410496,\n    'X310A': 443.66417100800004,\n    'X315A': 3992.7844700160003,\n    'X316A': 5887.356829696,\n    'X410A': 285.212672,\n    'X411A': 438.304768,\n    'X412A': 587.2025600000001,\n    'X414A': 587.2025600000001,\n    'X415A': 587.2025600000001,\n    'X416A': 587.2025600000001,\n    'X417A': 898.629632,\n    'X421A': 438.304768,\n    'X422A': 587.2025600000001,\n    'X423A': 898.629632,\n    'X425A': 1197.8428907520001,\n    'X431A': 443.66417100800004,\n    'X432A': 666.428506112,\n    'X433A': 888.7266181120001,\n    'X435A': 476.550529024,\n    'X438A': 399.826223104,\n    'X439A': 1600.0588185600002,\n    'X440A': 799.9030558720001,\n    'X441A': 99.767812096,\n    'X442A': 88.68226662400001,\n    'X446A': 199.787282432,\n    'X446B': 199.787282432,\n    'X447A': 799.9030558720001,\n    'X448A': 199.787282432,\n    'X449A': 799.9030558720001,\n    'X477A': 3992.7844700160003,\n    'X478A': 2947.7998428160004,\n    'X480A': 3930.3973437440004,\n    'X486A': 438.304768,\n    'X487A': 587.2025600000001,\n    'X488A': 898.629632,\n    'X489A': 1197.8428907520001,\n    'X494A': 587.2025600000001,\n    'X495A': 898.629632,\n    'X575A': 399.826223104,\n    'X576A': 1600.0588185600002\n};\n\nmodule.exports = rsgbByModel;\n","'use strict';\n\nvar assert = require('assert'),\n    encryptedByModel = require('./encrypted-table'),\n    fpByModel = require('./fp-table'),\n    rpmByModel = require('./rpm-table'),\n    rsgbByModel = require('./rsgb-table'),\n    uuid = require('uuid'),\n    _ = require('lodash');\n\nfunction _parseShelfDescriptionToXbom(d) {\n    var drivesStrings = d.split('with')[1].split('and');\n    var drives = _.map(drivesStrings, function(ds) {\n        var quantitySplit = ds.trim().split('x ');\n        var driveModel = quantitySplit[1].trim().split(' ')[0];\n        return { model: driveModel, quantity: quantitySplit[0] };\n    });\n    return drives;\n}\n\nfunction _fixShelvesMissingXbomFromShelfDescription(s) {\n    if (!s._x_bom && s._description) {\n        var drive_specs = _parseShelfDescriptionToXbom(s._description);\n        s._x_bom = { drive_specs: drive_specs };\n    }\n\n    return s;\n}\n\nfunction RawGBCacheFromMainBOM(hagroup) {\n    assert(this instanceof RawGBCacheFromMainBOM, 'use new');\n\n    var entries = this;\n\n    if (hagroup._x_bom && hagroup._x_bom.shelves) {\n        _.forEach(hagroup._x_bom.shelves, function cacheDriveSizes(shelf) {\n            if (shelf.drive1model) {\n                entries[shelf.drive1model] = shelf.drive1rawgb;\n            }\n            if (shelf.drive2model) {\n                entries[shelf.drive2model] = shelf.drive2rawgb;\n            }\n        });\n    }\n}\n\nfunction correctBetaXbom(shelf) {\n    if (_.isArray(shelf._x_bom)) {\n        shelf._x_bom = { drive_specs: shelf._x_bom };\n    }\n\n    return shelf;\n}\n\nfunction assignShelfIdIfMissing(shelf) {\n    if (!shelf._id) {\n        shelf._id = uuid();\n    }\n}\n\nfunction populateDriveSpecMembersIfMissing(shelf) {\n    function buildMembersForSpecs(owningShelfId, driveSpecs) {\n        var buildResults = [],\n            currentCarrierSlot = 1;\n\n        _.forEach(driveSpecs, function(driveSpec) {\n            var members = [];\n\n            _.forEach(_.range(driveSpec.quantity), function() {\n                var deviceId = '!' + owningShelfId.slice(0, 8) + '.' + currentCarrierSlot++;\n\n                members.push(deviceId);\n            });\n\n            buildResults.push(members);\n        });\n\n\n        return buildResults;\n    }\n\n    if (shelf._x_bom && (!shelf._x_bom.drive_spec_members || shelf._x_bom.drive_spec_members.length === 0)) {\n        shelf._x_bom.drive_spec_members = buildMembersForSpecs(shelf._id, shelf._x_bom.drive_specs);\n    }\n}\n\nfunction fixShelvesXbomsGivenDrives(hagroup) {\n    // do not use _.memoize, else cloned results\n    function findShelfByNumber(i) {\n        return _.find(hagroup.shelves, { shelf_number: i });\n    }\n\n    var capCache = new RawGBCacheFromMainBOM(hagroup),\n        reportedShelfProblems = false;\n\n    _.forEach(hagroup.drives, function (d) {\n        // if we dont find? omitted because shelf already had good _x_bom?\n        var shelf = findShelfByNumber(d.shelf);\n\n        if (!shelf) {\n            if (!reportedShelfProblems) {\n                reportedShelfProblems = true;\n                console.error('WARNING: drive information lacks shelf number');\n            }\n            return; // in other words continue\n        }\n\n        // try more appropriate name first; fall back to observed\n        var model = d.model || d.disk_model,\n            type = d.type || d.disk_type,\n            rawgb = d.rawgb || capCache[model] || 0;\n\n        if (!(shelf._x_bom && shelf._x_bom.drive_specs)) {\n            shelf._x_bom = {\n                drive_specs: [],\n                drive_spec_members: []\n            };\n        }\n\n        var entry = _.find(shelf._x_bom.drive_specs, { model: model });\n\n        if (entry) {\n            entry.quantity++;\n        } else {\n            entry = {\n                quantity: 1,\n                model: model,\n            };\n            shelf._x_bom.drive_specs.push(entry);\n        }\n\n        // If the entry doesn't know this drive metadata, copy it in from\n        // our cache\n        _.defaults(entry, {\n            type: type,\n            rpm: d.rpm,\n            rawgb: rawgb,\n        });\n    });\n}\n\nfunction repairShelvesXbomByLookup(shelves) {\n    _.forEach(shelves, function (shelf) {\n        var drive_specs = _.isEmpty(shelf._x_bom) ? [] : shelf._x_bom.drive_specs;\n\n        _.forEach(drive_specs, function (driveSpec) {\n            // indexing by undefined is OK, so:\n            driveSpec.rpm = driveSpec.rpm || rpmByModel[driveSpec.model];\n            driveSpec.rsgb = driveSpec.rsgb || rsgbByModel[driveSpec.model];\n\n            if (driveSpec.fp_support === undefined) {\n                driveSpec.fp_support = fpByModel[driveSpec.model];\n            }\n\n            if (driveSpec.encrypted === undefined) {\n                driveSpec.encrypted = encryptedByModel[driveSpec.model];\n            }\n        });\n    });\n\n}\nfunction repairShelvesXboms(hagroup) {\n    if (hagroup.shelves) {\n        if (hagroup.drives) {\n            fixShelvesXbomsGivenDrives(hagroup);\n            _.forEach(hagroup.shelves, assignShelfIdIfMissing);\n            _.forEach(hagroup.shelves, populateDriveSpecMembersIfMissing);\n        } else {\n            _.forEach(hagroup.shelves, _fixShelvesMissingXbomFromShelfDescription);\n            _.forEach(hagroup.shelves, correctBetaXbom);\n            _.forEach(hagroup.shelves, assignShelfIdIfMissing);\n            _.forEach(hagroup.shelves, populateDriveSpecMembersIfMissing);\n        }\n\n        repairShelvesXbomByLookup(hagroup.shelves);\n    }\n}\n\nmodule.exports = {\n    _parseShelfDescriptionToXbom:_parseShelfDescriptionToXbom,\n    _fixShelvesMissingXbomFromShelfDescription:_fixShelvesMissingXbomFromShelfDescription,\n    repairShelvesXboms:repairShelvesXboms,\n    fixShelvesXbomsGivenDrives:fixShelvesXbomsGivenDrives\n};\n","'use strict';\n\nvar  describe = require('./describe'),\n    distill = require('./distill'),\n    repair = require('./repair'),\n    assert = require('assert'),\n    _ = require('lodash');\n\nfunction _wrapSystems(systems) {\n\tvar hagroups = [],\n            fake = {\n                synergy_model: {\n                    hagroups: hagroups\n                }\n            };\n\n        _.forEach(systems, function addSystem(system) {\n            hagroups.push(system);\n        });\n\n     return fake;\n}\n\nfunction distillSystems(systems) {\n\tvar fake = _wrapSystems(systems);\n\treturn distill(repair(fake));\n}\n\nfunction distillSystem(system) {\n\tassert(system instanceof Object);\n\treturn distillSystems([system]);\n}\n\nfunction describeSystems(systems) {\n\tassert(systems instanceof Array);\n    return describe(distillSystems(systems));\n}\n\nfunction describeSystem(system) {\n\tassert(system instanceof Object);\n\treturn describeSystems([system]);\n}\n\nfunction classifyDrive(drive) {\n    assert(typeof (drive.rpm || drive.driveSpeed) === 'number', drive );\n    var driveRpm = drive.rpm || drive.driveSpeed;\n    if (driveRpm >= 50) {\n        return 'SSD';\n    } else if (driveRpm < 9) {\n        return 'capacity';\n    } else {\n        return 'performance';\n    }\n}\n\nfunction getDriveDescriptionsFromXboms(systems) {\n    var driveDescriptions = {count: {SSD: 0, capacity: 0, performance: 0}, rawtb: {SSD: 0, capacity: 0, performance: 0}};\n    _(systems).flatten('shelves').flatten('_x_bom').flatten('drive_specs').forEach(function(d) {\n        if(d) {\n            var classification = classifyDrive(d);\n\n            driveDescriptions.count[classification] += typeof d.quantity === 'number' ? d.quantity : parseInt(d.quantity); // TODO: _x_bom.quantity should be an int\n            driveDescriptions.rawtb[classification] += d.rawgb / 1000.0;\n        }\n    });\n\n    return driveDescriptions;\n}\n\nmodule.exports = {\n    describeSystems: describeSystems,\n    describeSystem: describeSystem,\n    distillSystem: distillSystem,\n    classifyDrive:classifyDrive,\n    getDriveDescriptionsFromXboms:getDriveDescriptionsFromXboms,\n};\n","'use strict';\n\nmodule.exports = {\n    PROJECT_LIST_PATH: '/projects/list',\n    PROJECT_LOAD_PATH: '/projects/load',\n    PROJECT_ADJUST_PATH: '/projects/adjust',\n    PROJECT_REPLACE_PATH: '/projects/replace',\n    PROJECT_INFO_PATH: '/projects/info',\n    CLIENT_LOG_PATH: '/log',\n    PROJECT_INFO_CONCURRENCY: 5,\n    SERVER_READ_CONCURRENCY: 5,\n    SERVER_WRITE_CONCURRENCY: 5,\n    PLATFORM_OPTIONS_GET_PATH: '/platform/options',\n    UNWANTED_METADATA: [\n        '_x_metrics',\n        '_x_gps_position',\n        '_x_localization',\n        '_x_statistics',\n        '_x_generator',\n        '_x_log'\n    ],\n    CONFIG_GROUPS: {\n        // please keep these unique, even if they're nested\n        FAS: 'FAS',\n        FAS_CMODE_NORMAL: 'c-mode',\n        FAS_CMODE_MCC: 'mcc',\n        FAS_7MODE_NORMAL: '7-mode',\n        FAS_7MODE_MC: '7mc',\n        FAS_VSERIES: 'V',\n        E: 'E',\n        E_NORMAL: 'e-series',\n        EF_NORMAL: 'ef-series'\n    },\n    LIMIT_TYPES: {\n        ENABLED: 'ENABLED',\n        VERSION: 'VERSION',\n        NAS_NODES: 'NAS_NODES',\n        CAPACITY_GB: 'CAPACITY_GB',\n        EMBEDDED: 'EMBEDDED',\n        DRIVE_TOTAL: 'DRIVE_TOTAL',\n        DRIVE_SATA: 'DRIVE_SATA',\n        DRIVE_FC: 'DRIVE_FC',\n        DRIVE_SAS: 'DRIVE_SAS',\n        DRIVE_SSD: 'DRIVE_SSD',\n        EXT_SHELVES: 'EXT_SHELVES',\n        AGGR_MANUAL: 'AGGR_MANUAL',\n        AGGR_SIZE_64_TB: 'AGGR_SIZE_64_TB',\n        AGGR_MIN_FP_DRIVES: 'AGGR_MIN_FP_DRIVES',\n        CACHE_NO_FLASH: 'CACHE_NO_FLASH',\n        PRODUCTLINE: 'PRODUCTLINE',\n        HARDWARE_SHELF: 'HARDWARE_SHELF',\n        DRIVE_NSE: 'DRIVE_NSE'\n    },\n    LIMIT_REASONS: {\n        ENABLED: 'Config limit reached.',\n        VERSION: 'Outside OS version range.',\n        NAS_NODES: 'Max NAS node limit reached.',\n        CAPACITY_GB: 'Max capacity reached.',\n        EMBEDDED: 'Embedded shelf.',\n        DRIVE_TOTAL: 'Max drive limit reached.',\n        DRIVE_SATA: 'Max SATA drive limit reached.',\n        DRIVE_FC: 'Max FC drive limit reached.',\n        DRIVE_SAS: 'Max SAS drive limit reached.',\n        DRIVE_SSD: 'Max SSD drive limit reached.',\n        EXT_SHELVES: 'Max external shelves limit reached.',\n        AGGR_MANUAL: 'Impacts devices used by a manual aggregate.',\n        AGGR_SIZE_64_TB: 'Manual aggregates would exceed the size limit.',\n        AGGR_MIN_FP_DRIVES: 'Manual flash pool does not have enough drives.',\n        CACHE_NO_FLASH: 'Manual flash pool would exceed the size limit.',\n        PRODUCTLINE: 'Only one product line per project.',\n        HARDWARE_SHELF: 'Existing shelf hardware not supported.',\n        DRIVE_NSE: 'Mixing encrypting and nonencrypting disks.'\n    },\n    POLICIES: {\n        SPARES: {\n            DEFAULT: 'Balanced',\n            ALLOWED: ['Minimum', 'Balanced', 'Maximum'],\n        },\n    }\n};\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash');\n\n/**\n * Counts unique items put into it.\n */\n\nfunction CountingBag() {\n    assert(this instanceof CountingBag);\n    this._contents = {};\n    this._counts = {};\n}\n\nCountingBag.prototype._makeStableClone = function (item) {\n    var keys = _(item).keys().sort().value();\n    return _.pick(item, keys);\n};\n\nCountingBag.prototype.add = function (item, count) {\n    if (count === undefined) {\n        count = 1;\n    }\n\n    assert(_.isPlainObject(item));\n    assert(_.isNumber(count));\n    assert(arguments.length <= 2);\n    assert(!('_count' in item), '\\'_count\\' key is reserved');\n    assert(_.keys(item).length, 'zero-size objects are pointless');\n\n    var clone = this._makeStableClone(item),\n        key = JSON.stringify(clone);\n    if (key in this._counts) {\n        this._counts[key] += count;\n    } else {\n        this._counts[key] = count;\n        this._contents[key] = clone;\n    }\n};\n\nCountingBag.prototype.dump = function () {\n    assert(arguments.length === 0);\n\n    var results = [];\n\n    for (var key in this._counts) {\n        var count = this._counts[key],\n            item = this._contents[key];\n        item._count = count; // does not affect later add or dump\n        results.push(item);\n    }\n\n    return results;\n};\n\nmodule.exports = CountingBag;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash');\n\n/**\n * Adapt an async function with one non-callback argument into an async\n * function taking two non-callback arguments -- the first one the scope --\n * that *might not* call back.\n *\n * Usage situation: if you want to only ever have one in-the-air request\n * and at most one waiting, for a given scope e.g. object being modified.\n *\n * Tip: curry or partial the scope argument to get the original API back\n * (except for the callback guarantee).\n */\n\nfunction debounce(asyncFunction) {\n    var scopeToStatusMap = { };\n\n    function getScopeStatus(scope) {\n        if (_.has(scopeToStatusMap, scope)) {\n            return scopeToStatusMap[scope];\n        } else {\n            var scopeStatus = scopeToStatusMap[scope] = [];\n            return scopeStatus;\n        }\n    }\n\n    function debounced(scope, arg, callback) { // same API, but with scope\n        assert.equal(arguments.length, 3, 'debounced: expected 3 arguments');\n        assert.equal(typeof callback, 'function');\n        assert.equal(typeof scope, 'string');\n\n        var scopeStatus = getScopeStatus(scope);\n\n        function ourCallback() {\n            // Must callback before next request in case callback alters pending request\n            // Must callback before shifting queue in case callback generates a new request\n            // console.error('=== debounced: calling back for', scopeStatus[0][0], 'with', arguments);\n            // jshint -W040\n            scopeStatus[0][1].apply(this, arguments);\n\n            scopeStatus.shift();\n\n            if (scopeStatus[0]) {\n                var next_arg = scopeStatus[0][0];\n                // console.error('=== debounced: calling late for', next_arg);\n                // setImmediate(asyncFunction, next_arg, ourCallback);\n                asyncFunction(next_arg, ourCallback);\n            }\n        }\n\n        if (scopeStatus.length) { // something is already in the air\n            if (scopeStatus.length > 1) {\n                // Always callback, if the request is skipped, report it as an error\n                var skipped = scopeStatus.pop();\n                // console.error('=== debounced: skipped', skipped[0]);\n                // jshint -W040\n                skipped[1].apply(this, [new Error('Skipped')]);\n            }\n        } else { // idle\n            // console.error('=== debounced: calling for', arg);\n            // setImmediate(asyncFunction, arg, ourCallback);\n            asyncFunction(arg, ourCallback);\n        }\n\n        scopeStatus.push([ arg, callback ]);\n    }\n\n    return debounced;\n}\n\nmodule.exports = debounce;\n","'use strict';\n\nvar assert = require('assert'),\n    events = require('events'),\n    util = require('util'),\n    _ = require('lodash');\n\nvar CHANGE_EVENT_NAME = 'change';\n\n/**\n * Simple Flux-style dispatcher.\n * Sends events to stores in the order they're declared.\n * No attempt to have stores wait for other stores.\n */\n\nfunction Dispatcher(stores, log) {\n    assert(this instanceof Dispatcher, 'use new');\n    assert(stores instanceof Array, 'invalid stores');\n    assert.equal(typeof log, 'function', 'log function');\n\n    this._stores = stores;\n    this.log = log;\n\n    events.EventEmitter(this);\n\n    var _this = this;\n    this._stores.forEach(function listenTo(store) {\n        store.watch(function storeChanged() {\n            _this.emit(CHANGE_EVENT_NAME, store);\n        });\n    });\n}\n\nutil.inherits(Dispatcher, events.EventEmitter);\n\n/**\n * Send the dispatcher a change event to be forwarded to the stores.\n */\nDispatcher.prototype.act = function() {\n    var everHandled = false,\n        args = arguments,\n        actionArguments = _.toArray(arguments),\n        action = actionArguments.shift().toLowerCase();\n\n    this.emit('dispatch', {\n        action: action,\n        args: actionArguments,\n    });\n\n    this.log([ 'dispatch', action ], {\n        action: action,\n        args: actionArguments\n    });\n\n    this._stores.forEach(function forwardTo(store) {\n        var handled = store.act.apply(store, args);\n        everHandled = everHandled || handled;\n    });\n\n    if (!everHandled) {\n        this.log.error('no store handled event:', args[0]);\n    }\n\n    this.emit('dispatched', {\n        action: action,\n        args: actionArguments,\n        handled: everHandled\n    });\n};\n\n/**\n * Subscribe to change notifications.\n */\n\nDispatcher.prototype.watch = function watch(fn) {\n    this.on(CHANGE_EVENT_NAME, fn);\n};\n\n/**\n * Unsubscribe from change notifications.\n */\n\nDispatcher.prototype.unwatch = function unwatch(fn) {\n    this.removeListener(CHANGE_EVENT_NAME, fn);\n};\n\nmodule.exports = Dispatcher;\n","'use strict';\n\nvar util = require('util'),\n    _ = require('lodash');\n\nfunction dump(ob) {\n    var args = _.toArray(arguments);\n\n    switch (args.length) {\n        case 0:\n            return; // called just to make jshint happy\n        case 1:\n            args = args[0];\n            break;\n        default:\n            break;\n    }\n\n    var location = new Error().stack.split('\\n')[2].replace(/^[ ]+/, '--- ') + '\\n';\n\n    try {\n        console.error(\n            location + util.inspect(args, {\n                depth: null,\n                colors: process.stderr.isTTY,\n                customInspect: false,\n            }));\n    } catch (err) {\n        console.error(location, args);\n    }\n\n    return ob;\n}\n\nmodule.exports = dump;\n","'use strict';\n\nvar _ = require('lodash'),\n    assert = require('assert');\n\nvar TYPE = 0,\n    DEFAULT = 1,\n    FIX = 2;\n\nfunction enforce(spec, ob) {\n    assert(_.isPlainObject(ob), 'bad object');\n    assert(_.isPlainObject(spec), 'bad spec');\n\n    var extras = _.omit(ob, _.keys(spec)),\n        result = {};\n\n    assert(_.keys(extras).length === 0, 'bad key(s): ' + _.keys(extras).join(', '));\n\n    _.forEach(spec, copyOrSetDefault);\n    return result;\n\n    function copyOrSetDefault(spec, key) {\n        if (typeof spec === 'string' || typeof spec === 'function') {\n            spec = [ spec ];\n        }\n\n        assert(_.isArray(spec), 'bad spec for ' + key + ': ' + spec);\n        assert(spec.length >= 1 && spec.length <= 3, 'bad spec length for ' + key);\n\n        var value;\n\n        if (_.has(ob, key)) {\n            value = ob[key];\n        } else {\n            assert(_.has(spec, DEFAULT), 'no default for ' + key);\n            value = spec[DEFAULT];\n        }\n\n        if (_.has(spec, TYPE)) {\n            if (typeof spec[TYPE] === 'function') {\n                assert(value instanceof spec[TYPE], 'bad class for ' + key);\n            } else {\n                assert.equal(typeof spec[TYPE], 'string', 'bad spec type for ' + key);\n                assert.equal(typeof value, spec[TYPE], 'invalid type for ' + key);\n            }\n        }\n\n        if (_.has(spec, FIX)) {\n            result[key] = spec[FIX](value);\n        } else {\n            result[key] = value;\n        }\n    }\n}\n\nmodule.exports = enforce;\n","'use strict';\n\nvar _ = require('lodash'),\n    assert = require('assert'),\n    // jshint -W098\n    version = require('../version');\n\n/**\n * Maps feature names to values indicating whether or not they are\n * enabled. Feature names MUST begin with `FEATURE_` and end with\n * `_ENABLED` to ensure\n *\n * a) we can easily find all uses of feature toggles, and\n * b) getting a feature name wrong fails safe to disabled\n */\n\nvar TOGGLES = {\n        // TODO: depend on version; remove -W098 above\n        FEATURE_FP_MANUAL_ENABLED: version.branch === 'develop'\n    };\n\n// export a version of TOGGLES in which:\n// - all keys are checked against FEATURE_*_ENABLED\n// - all values are coerced to a boolean value\n// - the object is frozen so we can't mutate it by accident\n\nmodule.exports = _.mapValues(TOGGLES, function boolify(value, key) {\n    assert(key.match(/^FEATURE_[A-Z0-9_]+_ENABLED$/), 'bad toggle name');\n    return !!value;\n});\n\nif (Object.freeze) {\n    Object.freeze(module.exports);\n}\n","'use strict';\n\n/**\n * Add property to _this which is resolved by getter.\n * getter is called lazily, and the result cached.\n * getter is called bound to _this.\n */\n\nfunction addLazyCachedProp(_this, name, getter, visible) {\n    var tried = false,\n        value,\n        err;\n\n    function once() {\n        if (tried) {\n            if (err) {\n                throw err;\n            } else {\n                return value;\n            }\n        } else {\n            tried = true;\n            try {\n                value = getter.call(_this);\n                return value;\n            } catch (e) {\n                err = e;\n                throw err;\n            }\n        }\n    }\n\n    Object.defineProperty(_this, name, {\n        get: once,\n        enumerable: visible === undefined ? true : visible,\n    });\n}\n\nmodule.exports = addLazyCachedProp;\n","'use strict';\n\n\nvar assert = require('assert'),\n    _ = require('lodash');\n\nfunction LogApiHost(logfn, options) {\n    assert(typeof logfn === 'function');\n    options = this.options = _.clone(options || {});\n    var console = (options.console = options.console || getLimitedConsole());\n\n    // bind this.log, manually preserving arity and name\n    // calls to this method are forwarded upstream\n    this.log = function log(tags, entry) {\n        assert.equal(arguments.length, 2, 'log: 2-arity');\n        logfn.call(options.bind, tags, entry);\n        var tagrep = tags.join(', ');\n        if (_.contains(tags, 'error') || entry.err || entry instanceof Error) {\n            console.error(tagrep, entry);\n        } else if (_.contains(tags, 'warn')) {\n            console.warn(tagrep, entry);\n        } else {\n            console.debug(tagrep, entry);\n        }\n    };\n\n    // add console-style handlers, which don't get forwarded upstream\n    _.forEach([ 'info', 'debug', 'warn', 'error' ], this._addLevelHandler, this);\n}\n\nLogApiHost.prototype._addLevelHandler = function _addLevelHandler(level) {\n    var warned = false,\n        _console = this.options.console;\n\n    this[level] = this.log[level] = logAtLevel;\n    return;\n\n    function warnFirst() {\n        if (!warned) {\n            _console.warn('log.' + level + ' provides local logging ONLY');\n            warned = true;\n        }\n    }\n\n    function logAtLevel() {\n        warnFirst();\n        _console[level].apply(_console, arguments);\n    }\n};\n\nfunction getLimitedConsole() {\n    if (global && !_.isEmpty(global.console)) {\n        return global.console;\n    } else if (window && !_.isEmpty(window.console)) {\n        return window.console;\n    } else {\n        return {\n            debug: _.noop,\n            info: _.noop,\n            warn: _.noop,\n            error: _.noop\n        };\n    }\n}\n\nmodule.exports = LogApiHost;\n","'use strict';\n\nvar aggregateTypes = {\n    AGGR_32_BIT: '32_bit',\n    AGGR_64_BIT: '64_bit',\n    VOL_GROUP: 'Volume_Group'\n};\n\nmodule.exports = aggregateTypes;\n","'use strict';\n/*jshint unused:false */\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    RaidLimits = require('./raid-limits'),\n    RaidTypes = require('./raid-types'),\n    Unit = require('../../units'),\n    AggregateTypes = require('./aggregate-types'),\n    AggregateReporter = require('./aggregateReporter');\n\nfunction AggregateLimitFinder(hagi) {\n    assert(hagi, 'Must provide a hagroup inspector to find limits');\n    this._hagi = hagi;\n    this._limits = hagi.limits;\n    this._raidTypes = new RaidTypes();\n    this._raidLimits = new RaidLimits();\n}\n\n/*\n    NOTE: Allow override of raid-size for situations like manual aggregates. If missing, find best rs.\n*/\n\nAggregateLimitFinder.prototype.maxDataDevices = function maxDataDevices(spec, count, aggrType, raidType, raidSize) {\n    var effectiveRaidSize = (raidSize) ? raidSize : this._determineEstimatedRaidSize(spec, count, raidType),\n        limit = this._aggrLimitTBUnit(aggrType);\n\n    return this._deviceLimit(spec, count, limit, aggrType, raidType, effectiveRaidSize);\n};\n\nAggregateLimitFinder.prototype.maxCacheDevices = function maxCacheDevices(spec, count, aggrType, raidType, raidSize) {\n    var effectiveRaidSize = (raidSize) ? raidSize : this._determineEstimatedRaidSize(spec, count, raidType),\n        limit = this._aggrCacheLimitTBUnit();\n\n    return this._deviceLimit(spec, count, limit, aggrType, raidType, effectiveRaidSize);\n};\n\nAggregateLimitFinder.prototype._deviceLimit = function _deviceLimit(spec, count, limit, aggregateType, raidType, raidSize) {\n    if (raidType === this._raidTypes.RAID_5 || raidType === this._raidTypes.RAID_6) {\n        return Math.min(count, 30);\n    }\n\n    if (raidType === this._raidTypes.DDP) {\n        return count;\n    }\n\n    var dataDrivesPerRg = this._numberOfEstimatedDataDrivesPerRg(raidType, raidSize),\n        numberOfRaidGroups = Math.floor(count / raidSize) + 1,\n        typeOfAggregateLimitTb = this._aggrLimitTBUnit(aggregateType);\n\n    if (limit) {\n        var perRaidGroupCapacityInGb = this._estimatedCapacityFASPerRaidGroupInGB(spec, dataDrivesPerRg),\n            howManyRaidGroups = Math.min(Math.floor(typeOfAggregateLimitTb.value_gb / perRaidGroupCapacityInGb), numberOfRaidGroups);\n\n        return Math.min(count, howManyRaidGroups * raidSize);\n    }\n    else {\n        return count;\n    }\n};\n\nAggregateLimitFinder.prototype._determineEstimatedRaidSize = function _determineEstimatedRaidSize(spec, count, raidType) {\n    return this._hagi.lookup.lowestOverheadRaidSize(spec, raidType, count);\n};\n\nAggregateLimitFinder.prototype._aggrLimitTBUnit = function _aggrLimitTBUnit(aggrType) {\n    var limits = this._limits,\n        tbSize = (aggrType === AggregateTypes.AGGR_32_BIT) ? limits.aggr.size_32_tb : limits.aggr.size_64_tb;\n\n    return new Unit(tbSize, 'TB');\n};\n\nAggregateLimitFinder.prototype._aggrCacheLimitTBUnit = function _aggrCacheLimitTBUnit() {\n    var currentCacheCapacity = this._currentSystemCacheCapacity(),\n        platformCacheLimit = new Unit(this._limits.cache_with_flash, 'TB'),\n        delta = platformCacheLimit.subtract(currentCacheCapacity).value;\n\n    console.log('platform capacity: ', platformCacheLimit.value);\n    console.log('current capacity: ', currentCacheCapacity.value);\n    console.log('delta: ', delta);\n\n    if (delta < 0) {\n        delta = 0;\n    }\n\n    return new Unit(delta, 'TB');\n};\n\nAggregateLimitFinder.prototype._currentSystemCacheCapacity = function _currentSystemCacheCapacity() {\n    var aggregateReporter = new AggregateReporter(this._hagi),\n        versionNumber = this._hagi.versionNumber,\n        controllers = _.map(this._hagi.hagroup, 'controllers'),\n        aggregates = _.map(controllers, 'aggregates'),\n        capacities = _.map(aggregates, cacheCapacityForAggr),\n        total = _.reduce(capacities, function(sum, n) {\n            return sum + n;\n        }) || 0;\n\n    return new Unit(total, 'GB').to('TB');\n\n    function cacheCapacityForAggr(aggregate) {\n        var report = aggregateReporter.createAggregateReport(aggregate, versionNumber);\n        return report.cacheCapacity;\n    }\n};\n\nAggregateLimitFinder.prototype._numberOfEstimatedDataDrivesPerRg = function _numberOfEstimatedDataDrivesPerRg(raidType, estimatedRaidSize) {\n    return this._raidTypes.driveRolesForRaidType(raidType, estimatedRaidSize).data;\n};\n\nAggregateLimitFinder.prototype._estimatedCapacityFASPerRaidGroupInGB = function _estimatedCapacityFASPerRaidGroupInGB(deviceSpec, dataDeviceCount) {\n    var waflModifier = 0.9,\n        fixedOverhead = new Unit(20.5, 'MiB'),\n        diskCapacity = new Unit(deviceSpec.rsgb, 'GB'),\n        perDriveCapacityUnit = new Unit(diskCapacity.subtract(fixedOverhead).value_gb * waflModifier);\n\n    return perDriveCapacityUnit.value_gb * dataDeviceCount;\n};\n\nmodule.exports = AggregateLimitFinder;\n","'use strict';\n/* jshint unused:false */\n\nvar _ = require('lodash'),\n    util = require('util'),\n    assert = require('assert'),\n    Unit = require('../../units'),\n    RaidTypes = require('./raid-types');\n\nfunction AggregateReporter(owningHagi) {\n    assert(owningHagi, 'Must provide the hagroup inspector which owns the aggregates to report on.');\n\n    this.hagi = owningHagi;\n    this.aggregates = {};\n}\n\nAggregateReporter.prototype.createAggregateReport = function createAggregateReport(aggregate, versionNumber) {\n    assert(aggregate, 'Cannot create a report without an aggregate');\n\n    this._addAggregateForComputing(aggregate);\n\n    var aggregateId = aggregate._id,\n        summary = this._buildSummary(aggregateId, versionNumber),\n        report = this._packageAggregateReport(aggregateId, summary);\n\n    this._removeAggregateBecauseDone(aggregateId);\n\n    return report;\n};\n\nAggregateReporter.prototype._addAggregateForComputing = function(aggregate) {\n    this.aggregates[aggregate._id] = aggregate;\n};\n\nAggregateReporter.prototype._removeAggregateBecauseDone = function(aggregateId) {\n    delete this.aggregates[aggregateId];\n};\n\nAggregateReporter.prototype._packageAggregateReport = function _packageAggregateReport(aggregateId, summary) {\n    return {\n        aggregateId: aggregateId,\n        summary: summary\n    };\n};\n\nAggregateReporter.prototype._buildSummary = function _buildSummary(aggregateId, versionNumber) {\n    var _this = this,\n        aggregate = this.aggregates[aggregateId],\n        aggregateCapacitySummary = {\n            isRootAggregate: aggregate.is_root_aggregate,\n            containsVirtualDevices: false,\n            rootCapacity: 0.0,\n            usableCapacity: 0.0,\n            cacheCapacity: 0.0,\n            snapReserveCapacity: 0.0,\n            totalCapacity: 0.0,\n            driveRoleSummary: {\n                total: 0,\n                data: 0,\n                parity: 0,\n                dparity: 0,\n                reserve: 0,\n                cache: 0,\n                cacheData: 0,\n                physical: {\n                    total: 0,\n                    data: 0,\n                    parity: 0,\n                    dparity: 0,\n                    reserve: 0,\n                    cache: 0\n                },\n                virtual: {\n                    total: 0,\n                    data: 0,\n                    parity: 0,\n                    dparity: 0,\n                    reserve: 0,\n                    cache: 0\n                }\n            },\n            usableCapacityByType: {},\n            driveSpecSummary: {}\n        };\n\n    _.forEach(aggregate._raid_groups, function (raidGroup) {\n        if (raidGroup.__deviceSpecs) {\n            _this._addRaidGroupSummaryToAggregateCapacitySummary(aggregateCapacitySummary, aggregateId, raidGroup, versionNumber);\n        }\n        else {\n            console.warn('Cannot compute capacity for raid group for aggrId ' + aggregateId + ', missing __deviceSpecs');\n        }\n    });\n\n    return aggregateCapacitySummary;\n};\n\nAggregateReporter.prototype._addRaidGroupSummaryToAggregateCapacitySummary = function _addRaidGroupSummaryToAggregateCapacitySummary(aggregateCapacitySummary, aggregateId, raidGroup, versionNumber) {\n    var _this = this,\n        raidTypes = new RaidTypes(),\n        raidType = _this._raidTypeFor(aggregateId, raidGroup),\n        raidGroupDeviceCount = raidGroup._devices.length,\n        ddpReserve = (this.hagi.isESeries) ? _this.aggregates[aggregateId]._ddpreserve : 0,\n        driveRoles = this._handleDDPReserveDrivesIfNecessary(raidTypes.driveRolesForRaidType(raidType, raidGroupDeviceCount), raidType, ddpReserve),\n        lcdSpec = this._lowestCommonDenominatorDriveSpecForRaidGroup(raidGroup),\n        snapReserveProportion = (this.hagi.isESeries) ? 0 : _this.aggregates[aggregateId]._snapreserve_proportion,\n        raidGroupYield = _this._getRaidGroupYield(aggregateId, lcdSpec, raidType, driveRoles, raidGroup.cache, versionNumber),\n        usableCapacity = _this._getUsableCapacityFromDeviceSpec(raidGroupYield, snapReserveProportion),\n        lcdSpecIsVirtual = !!lcdSpec.spec.slice;\n\n    if (raidGroup.cache) {\n        if (lcdSpecIsVirtual) {\n            aggregateCapacitySummary.driveRoleSummary.virtual.cache += raidGroup._devices.length;\n        } else {\n            aggregateCapacitySummary.driveRoleSummary.physical.cache += raidGroup._devices.length;\n        }\n        aggregateCapacitySummary.driveRoleSummary.cacheData += driveRoles.data;\n        aggregateCapacitySummary.cacheCapacity += usableCapacity;\n    }\n    else {\n        aggregateCapacitySummary.driveRoleSummary.data += driveRoles.data;\n        aggregateCapacitySummary.driveRoleSummary.parity += driveRoles.parity;\n        aggregateCapacitySummary.driveRoleSummary.dparity += driveRoles.dparity;\n        if (lcdSpecIsVirtual) {\n            aggregateCapacitySummary.driveRoleSummary.virtual.data += driveRoles.data;\n            aggregateCapacitySummary.driveRoleSummary.virtual.parity += driveRoles.parity;\n            aggregateCapacitySummary.driveRoleSummary.virtual.dparity += driveRoles.dparity;\n        } else {\n            aggregateCapacitySummary.driveRoleSummary.physical.data += driveRoles.data;\n            aggregateCapacitySummary.driveRoleSummary.physical.parity += driveRoles.parity;\n            aggregateCapacitySummary.driveRoleSummary.physical.dparity += driveRoles.dparity;\n        }\n        aggregateCapacitySummary.snapReserveCapacity += snapReserveProportion * raidGroupYield;\n\n        if (aggregateCapacitySummary.isRootAggregate) {\n            aggregateCapacitySummary.rootCapacity += usableCapacity;\n        }\n        else {\n            aggregateCapacitySummary.usableCapacity += usableCapacity;\n        }\n\n        if (!raidGroup.cache) {\n            var lcdDriveType = lcdSpec.spec.type;\n\n            if (_.has(aggregateCapacitySummary.usableCapacityByType, lcdDriveType)) {\n                aggregateCapacitySummary.usableCapacityByType[lcdDriveType] += usableCapacity;\n            }\n            else {\n                aggregateCapacitySummary.usableCapacityByType[lcdDriveType] = usableCapacity;\n            }\n        }\n    }\n\n    aggregateCapacitySummary.driveRoleSummary.reserve += driveRoles.reserve;\n    aggregateCapacitySummary.driveRoleSummary.total += raidGroup._devices.length;\n\n    if (lcdSpecIsVirtual) {\n        aggregateCapacitySummary.driveRoleSummary.virtual.reserve += driveRoles.reserve;\n        aggregateCapacitySummary.driveRoleSummary.virtual.total += raidGroup._devices.length;\n    } else {\n        aggregateCapacitySummary.driveRoleSummary.physical.reserve += driveRoles.reserve;\n        aggregateCapacitySummary.driveRoleSummary.physical.total += raidGroup._devices.length;\n    }\n    aggregateCapacitySummary.totalCapacity += raidGroupYield;\n\n    var doesDataSliceExist = this._isPartitionPresentInRaidGroup(raidGroup, 'P1'),\n        doesRootSliceExist = this._isPartitionPresentInRaidGroup(raidGroup, 'P2'),\n        partitionType = null;\n\n    if (doesRootSliceExist || doesDataSliceExist) {\n        partitionType = (doesRootSliceExist) ? 'root' : 'data';\n    }\n\n    _.forEach(raidGroup.__deviceSpecs, function(device) {\n        var deviceIsVirtual = !!device.spec.slice;\n\n        aggregateCapacitySummary.containsVirtualDevices = aggregateCapacitySummary.containsVirtualDevices || deviceIsVirtual;\n\n        if (!_.has(aggregateCapacitySummary.driveSpecSummary, device.spec.rsgb)) {\n            if (device.spec._for_storage_pool) {\n                partitionType = 'cache';\n            }\n\n            aggregateCapacitySummary.driveSpecSummary[device.spec.rsgb] = {\n                isVirtual: deviceIsVirtual,\n                virtualPartitionType: partitionType,\n                rawgb: device.spec.rawgb,\n                rsgb: device.spec.rsgb,\n                type: device.spec.type,\n                rpm: device.spec.rpm,\n                count: device.count\n            };\n        }\n        else {\n            aggregateCapacitySummary.driveSpecSummary[device.spec.rsgb].count += device.count;\n        }\n    });\n};\n\nAggregateReporter.prototype._findStoragesPoolWithAggregateId = function _findStoragesPoolWithAggregateId(aggregateId) {\n    var allStoragePools = this.hagi.storagePools(),\n        storagePoolOwnershipMap = _.map(allStoragePools, function(storagePool) {\n            return {\n                id: storagePool._id,\n                aggrIds: _.without(_.map(storagePool._allocations, function(allocation) {\n                    return allocation.aggr_id;\n                }), undefined)\n            };\n        }),\n        storagePoolWithAggrMap = _.where(storagePoolOwnershipMap, function(ownership) {\n            return _.contains(ownership.aggrIds, aggregateId);\n        });\n\n    if (storagePoolWithAggrMap && storagePoolWithAggrMap.length > 0) {\n        var ownership = _.first(storagePoolWithAggrMap);\n\n        var result = _.where(allStoragePools, { _id: ownership.id });\n        return result;\n    } else {\n        return [];\n    }\n};\n\nAggregateReporter.prototype._handleDDPReserveDrivesIfNecessary = function _handleDDPReserveDrivesIfNecessary(driveRolesFromRaidType, raidType, ddpReserveCount) {\n    var raidTypes = new RaidTypes();\n\n    if (this.hagi.isESeries) {\n        switch (raidType) {\n            case raidTypes.DDP:\n                var drivesInVolGroup = driveRolesFromRaidType.data,\n                    newReserveDrives = ddpReserveCount === undefined ? raidTypes._getDdpReserveRecommendation(drivesInVolGroup) : ddpReserveCount;\n\n                driveRolesFromRaidType.data -= newReserveDrives;\n                driveRolesFromRaidType.reserve = newReserveDrives;\n                break;\n        }\n    }\n\n    return driveRolesFromRaidType;\n};\n\nAggregateReporter.prototype._isPartitionPresentInRaidGroup = function(raidGroup, partition) {\n    return _.any(raidGroup._devices, function(deviceId) {\n        return _.contains(deviceId, partition);\n    });\n};\n\nAggregateReporter.prototype._lowestCommonDenominatorDriveSpecForRaidGroup = function(raidGroup) {\n    /*\n        Scenario:\n            We have multiple types of drives in raid group, with different capacities. We need the smallest right-sized capacity\n            as that is what will actually get used for capacity.\n    */\n\n    var sortedDeviceList = _.sortBy(raidGroup.__deviceSpecs, function(device) {\n            if (!device.spec) {\n                // no risk if console object missing, as we're about to\n                // crash anyway\n                console.error('bad __deviceSpecs in raid group', raidGroup);\n            }\n            return device.spec.rsgb;\n        });\n\n    return _.first(sortedDeviceList);\n};\n\nAggregateReporter.prototype._raidTypeFor = function _raidTypeFor(aggregateId, raidGroup) {\n    var _this = this,\n        aggregate = _this.aggregates[aggregateId];\n\n    return raidGroup.cache ? aggregate.cache_raid_type : aggregate.raid_type;\n};\n\nAggregateReporter.prototype._getRawCapacityFromDeviceSpec = function _getRawCapacityFromDeviceSpec(deviceSpec, driveRoles) {\n    var _this = this,\n        rawCapacityPerDisk = new Unit(deviceSpec.spec.rawgb, 'GB'),\n        rawCapacity = rawCapacityPerDisk.mult(driveRoles.data + driveRoles.parity + driveRoles.dparity);\n\n    return rawCapacity.value_gb;\n};\n\nAggregateReporter.prototype._getRaidGroupYield = function _getRaidGroupYield(aggregateId, deviceSpec, raidType, driveRoles, isCache, versionNumber) {\n    var _this = this,\n        aggregate = _this.aggregates[aggregateId],\n        perDiskYield = _this._determinePerDataDiskYield(deviceSpec, isCache),\n        mirrorDivider = (aggregate.is_mirrored) ? 2 : 1,\n        snapReserve = aggregate._snapreserve_proportion,\n        raidGroupYield = (this.hagi.isESeries) ? this._getESeriesVolumeGroupYield(deviceSpec, raidType, driveRoles, versionNumber) :\n                                                 perDiskYield.mult(driveRoles.data).to('GiB').value / mirrorDivider;\n\n    return raidGroupYield;\n};\n\nAggregateReporter.prototype._getESeriesVolumeGroupYield = function _getESeriesVolumeGroupYield(deviceSpec, raidType, driveRoles, versionNumber) {\n    var raidTypes = new RaidTypes();\n\n    if (raidType !== raidTypes.DDP) {\n        var perDiskYield = this._perDiskYieldESeries(deviceSpec, versionNumber);\n        var totalYield = perDiskYield.mult(driveRoles.data).to('GiB').value;\n\n        return raidTypes.isMirrored(raidType) ? totalYield / 2 : totalYield;\n    }\n\n    var diskCapacity = this._perDiskYieldESeries(deviceSpec, versionNumber),\n        driveCount = driveRoles.data + driveRoles.reserve,\n        reserveCount = driveRoles.reserve;\n\n    var stripeWidth = 10,\n        maxStripes = 500000,\n        pieceSizeBlocks = 1048576,\n        userBlockPerStripe = new Unit(8388608, 'KiB'),\n        diskCapBlocks = Math.floor(diskCapacity.value * 1024 * 1024 * 1024 / 512),\n        diskCapMinusReserve = diskCapBlocks - (pieceSizeBlocks * 5),\n        diskCapExtents = diskCapMinusReserve / pieceSizeBlocks;\n\n    var driveCountErrorCode = this._getESeriesDriveCountErrorCode(driveCount),\n        driveCapacityErrorCode = this._getESeriesDDPDiskErrorCode(diskCapExtents),\n        percentError = this._getESeriesPercentError(driveCountErrorCode, driveCapacityErrorCode);\n\n    var totalStripesNoError = Math.min((driveCount * diskCapExtents) / stripeWidth, maxStripes);\n\n    var totalStripesWithErrorDecimal = Math.min((driveCount * diskCapExtents / stripeWidth) * ((100 - percentError) / 100), maxStripes),\n        totalStripesWithError = Math.floor(totalStripesWithErrorDecimal);\n\n    var reservedSpaceStripes = Math.floor(reserveCount * totalStripesWithError / driveCount),\n        userSpaceStripes = totalStripesWithError - reservedSpaceStripes,\n        userSpaceBlocks = userBlockPerStripe.mult(userSpaceStripes); // KiB, Unit object\n\n    var spaceAvailableInGiBUnit = new Unit(Math.round((((userSpaceBlocks.value / 2) / 1024) / 1024)), 'GiB');\n\n    return spaceAvailableInGiBUnit.value;\n};\n\nAggregateReporter.prototype._getESeriesPercentError = function _getESeriesPercentError(driveCountErrorCode, driveCapacityErrorCode) {\n    var eSeriesErrorCalcCode = util.format('%s-%s', driveCountErrorCode, driveCapacityErrorCode);\n\n    switch (eSeriesErrorCalcCode) {\n        case '11-268':\n        case '11-553':\n            return 4.0;\n        case '11-833':\n        case '11-926':\n        case '11-1112':\n            return 3.5;\n        case '11-1671':\n        case '11-1858':\n        case '11-3721':\n        case '11-5584':\n        case '37-268':\n            return 2.0;\n        case '37-553':\n            return 2.0;\n        case '11-7447':\n        case '37-833':\n        case '37-926':\n        case '37-1112':\n            return 1.5;\n        case '37-1671':\n        case '37-1858':\n        case '37-3721':\n        case '37-5584':\n            return 1.0;\n        case '37-7447':\n            return 0.5;\n    }\n\n    return 0;\n};\n\nAggregateReporter.prototype._getESeriesDriveCountErrorCode = function _getESeriesDriveCountErrorCode(driveCount) {\n    if (driveCount > 10 && driveCount < 36) {\n        return 11;\n    } else if (driveCount > 36 && driveCount < 64) {\n        return 37;\n    } else if (driveCount > 63 && driveCount < 66) {\n        return 65;\n    }\n\n    return 0;\n};\n\nAggregateReporter.prototype._getESeriesDDPDiskErrorCode = function _getESeriesDDPDiskErrorCode(diskCapExtents) {\n    if (diskCapExtents > 267 && diskCapExtents < 553) {\n        return 268;\n    } else if (diskCapExtents > 552 && diskCapExtents < 833) {\n        return 553;\n    } else if (diskCapExtents > 882 && diskCapExtents < 927) {\n        return 883;\n    } else if (diskCapExtents > 925 && diskCapExtents < 1111) {\n        return 926;\n    } else if (diskCapExtents > 926 && diskCapExtents < 1672) {\n        return 1671;\n    } else if (diskCapExtents > 1671 && diskCapExtents < 1859) {\n        return 1858;\n    } else if (diskCapExtents > 1858 && diskCapExtents < 3722) {\n        return 3721;\n    } else if (diskCapExtents > 3721 && diskCapExtents < 5585) {\n        return 5584;\n    } else if (diskCapExtents > 5584 && diskCapExtents < 7448) {\n        return 7447;\n    }\n\n    return 0;\n};\n\nAggregateReporter.prototype._getUsableCapacityFromDeviceSpec = function _getUsableCapacityFromDeviceSpec(raidGroupYield, snapReserve) {\n    var usableCapacity = raidGroupYield * (1 - snapReserve);\n\n    return usableCapacity;\n};\n\nAggregateReporter.prototype._determinePerDataDiskYield = function _determinePerDataDiskYield(deviceSpec, isCache) {\n    if (!this.hagi.isESeries) {\n        return this._perDiskYieldFAS(deviceSpec, isCache);\n    }\n};\n\nAggregateReporter.prototype._perDiskYieldFAS = function _perDiskYieldFAS(deviceSpec, isCache) {\n    var waflModifier = (isCache) ? 1 : 0.9, // Account for no WAFL on cache\n        fixedOverhead = new Unit(20.5, 'MiB'),\n        diskCapacity = new Unit(deviceSpec.rsgb || deviceSpec.spec.rsgb, 'GB');\n\n    return new Unit(diskCapacity.subtract(fixedOverhead).value_gb * waflModifier);\n};\n\n// Account for different E-Series raid types\nAggregateReporter.prototype._perDiskYieldESeries = function _perDiskYieldESeries(deviceSpec, versionNumber) {\n    var num = versionNumber ? versionNumber : this.hagi.versionNumber;\n\n    return this._capacityAfterDACOverheadsESeries(deviceSpec, num);\n};\n\nAggregateReporter.prototype._capacityAfterDACOverheadsESeries = function _capacityAfterDACOverheadsESeries(deviceSpec, versionNumber) {\n    var isSantricity82 = versionNumber.indexOf('8.2') === 0,\n        fixedOverhead = (isSantricity82) ? new Unit(5, 'GiB') : new Unit(0.5, 'GiB'),\n        diskCapacity = new Unit(deviceSpec.spec.rsgb, 'GB');\n\n    return diskCapacity.subtract(fixedOverhead).to('GiB');\n};\n\nAggregateReporter.prototype._nullToZero = function(val) {\n    if (val === undefined || val === null) {\n        return 0.0;\n    }\n    else {\n        return val;\n    }\n};\n\nmodule.exports = AggregateReporter;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    uuid = require('uuid'),\n    dump = require('../../dump'),\n    mutil = require('../util');\n\ndump(); // make linter happy\n\nfunction ComponentBuilder(hagi) {\n    this._hagi = hagi;\n    this._specById = this._get_specById();\n}\n\nComponentBuilder.prototype.makeAggregate = function makeAggregate(controllerId, deviceGroup, deviceCount, props) {\n    assert(this instanceof ComponentBuilder);\n    assert.equal(typeof controllerId, 'string');\n    assert.equal(typeof deviceGroup, 'object');\n    assert.equal(typeof deviceCount, 'number');\n    assert(!props || _.isPlainObject(props));\n    assert(deviceCount <= deviceGroup.devices.length);\n\n    var defaultProps = this._hagi.lookup.defaultAggrProps(deviceCount);\n\n    var aggr = _.merge({}, defaultProps, {\n            _manual: false,\n            _controller: controllerId,\n            name: 'aggr' + uuid().slice(0, 8),\n        }, props || {});\n\n    if (!aggr._raid_groups) {\n        aggr._raid_groups = this.makeRaidGroups(deviceGroup, deviceCount, aggr) || [];\n    }\n\n    return aggr;\n};\n\nComponentBuilder.prototype.makeRaidGroups = function makeRaidGroups(deviceGroup, deviceCount, aggr, raidSize) {\n    assert(this instanceof ComponentBuilder);\n    assert(_.isPlainObject(deviceGroup));\n    assert(_.isNumber(deviceCount));\n    assert(_.isPlainObject(aggr));\n    assert(deviceCount <= deviceGroup.devices.length);\n    var callerRaidSize = (raidSize) ? raidSize : this._defaultRaidSize(deviceGroup, deviceCount, aggr.raid_type),\n        raidCount = Math.ceil(deviceCount / callerRaidSize),\n        deficiencies = (raidCount * callerRaidSize) - deviceCount,\n        soFar = 0,\n        groups = [],\n        devices = deviceGroup.devices,\n        group,\n        lastSpec,\n        lastSpecEntry;\n\n    while (deficiencies > raidCount) {\n        // TR3838 July 2014: \"NetApp recommends that the aggregate not be\n        // deficient more than the number of drives equal to one less than\n        // the number of RAID groups (otherwise you would just pick the\n        // next-lowest RAID group size).\"\n        callerRaidSize -= 1;\n        deficiencies -= raidCount;\n    }\n\n    while(soFar < deviceCount) {\n        var effRaidSize = (groups.length >= deficiencies) ? callerRaidSize : callerRaidSize - 1,\n            thisSize = _.min([ effRaidSize, deviceCount - soFar ]),\n            theseDevices = devices.splice(0, thisSize);\n\n        group = {\n            _id: uuid(),\n            _type: 'raidgroup',\n            name: 'rg' + groups.length,\n            _devices: [],\n            __deviceSpecs: [],\n            cache: false,\n            plex_number: 0\n        };\n\n        lastSpec = null;\n        lastSpecEntry = null;\n       _.forEach(theseDevices, pushDevice, this);\n\n        groups.push(group);\n        soFar += group._devices.length;\n    }\n\n    return groups;\n\n    function pushDevice(id) {\n        // jshint -W040\n        assert(this instanceof ComponentBuilder);\n        group._devices.push(id);\n        var spec = this._specById[id];\n        if (spec === lastSpec || _.isEqual(spec, lastSpec)) {\n            lastSpecEntry.count ++;\n        } else {\n            lastSpec = spec;\n            lastSpecEntry = {\n                spec: spec,\n                count: 1,\n            };\n            group.__deviceSpecs.push(lastSpecEntry);\n        }\n    }\n};\n\nComponentBuilder.prototype._defaultRaidSize = function _defaultRaidSize(deviceGroup, count, raidType) {\n    var raidSpec = _.merge({}, deviceGroup.spec, {\n            type: mutil.rpmToEffectiveDriveType(deviceGroup.spec.rpm),\n            _type_faked: true,\n        }),\n        raidSize = this._hagi.lookup.lowestOverheadRaidSize(\n            raidSpec,\n            raidType,\n            count\n        );\n\n    return raidSize;\n};\n\n/*\n    No immediate way around this\n*/\nComponentBuilder.prototype._get_specById = function GSBI() {\n    assert(this instanceof ComponentBuilder);\n    var result = {};\n    _.forEach(this._hagi.deviceInfo, function (info) {\n        result[info.id] = info.spec;\n    });\n    return result;\n};\n\nmodule.exports = ComponentBuilder;\n","'use strict';\n\nvar _ = require('lodash'),\n    assert = require('assert'),\n    uuid = require('uuid'),\n    util = require('util'),\n    ComponentBuilder = require('./component-builder'),\n    RaidTypes = require('./raid-types');\n\n/*\n    ManualAggregatePlanner(hagi, currentAggregate)\n*/\nfunction ManualAggregateBuilder(hagi, currentAggregate, requestedRaidSize) {\n    assert(hagi, 'Must provide a hagroup inspector');\n\n    this._hagi = hagi;\n    this._raidTypes = new RaidTypes();\n    this.name = 'manual';\n    this._requestedRaidSize = requestedRaidSize; // What the user requested, what we were able to actually do different (Note: aggr doesn't manage raid size)\n    this._componentBuilder = new ComponentBuilder(this._hagi);\n    this.aggregate = currentAggregate || this._makeAggregateBoilerplate();\n    this._setRaidSizeIfMissing();\n}\n\n/*\n    Guard:\n        Can we make this HW change (Remove / change shelf and manual aggr satisfy itself)\n        ** Need to include ability to provide version\n*/\n\nManualAggregateBuilder.prototype.bestPracticeRaidSize = function bestPracticeRaidSize(spec, raidType, count) {\n    return this._hagi.lookup.lowestOverheadRaidSize(spec, raidType, count);\n};\n\nManualAggregateBuilder.prototype.bestPracticeDDPReserve = function bestPracticeDDPReserve(count) {\n    return this._hagi.lookup.reserveRecommendationForDDP(count);\n};\n\nManualAggregateBuilder.prototype.setRaidType = function setRaidType(newRaidType, forCache) {\n    assert(_.contains(this.availableRaidTypes(), newRaidType), 'Cannot assign raid type, it is not available on system');\n\n    if (forCache) {\n        this.aggregate.cache_raid_type = newRaidType;\n    }\n    else {\n        this.aggregate.raid_type = newRaidType;\n    }\n\n    this._respondToMutation();\n};\n\nManualAggregateBuilder.prototype.setBlockType = function setBlockType(newBlockType) {\n    assert(_.contains(this.availableBlockTypes(), newBlockType), 'Cannot assign aggregate block type, it is not available on this system');\n\n    this.aggregate.block_type = newBlockType;\n    this._respondToMutation();\n};\n\nManualAggregateBuilder.prototype.setDeviceAndCount = function setDeviceAndCount(spec, count) {\n    assert(!this._isDeviceGroup(spec), 'You should not be passing a device group in, only spec and count');\n\n    if (!this._requestedRaidSize) {\n        this._requestedRaidSize = this.bestPracticeRaidSize(spec, this.aggregate.raid_type, count);\n    }\n\n    // Device Group Here\n    var deviceGroup = this._deviceGroupForSpec(spec);\n\n    assert(deviceGroup.devices.length >= count, 'Attempted to set spec with insufficient number of devices');\n    this._rebuildRaidGroups(false, deviceGroup, count);\n};\n\nManualAggregateBuilder.prototype.setRaidSize = function setRaidSize(newRaidSize) {\n    this._requestedRaidSize = newRaidSize;\n    this._respondToMutation();\n};\n\nManualAggregateBuilder.prototype.setDDPReserve = function setDDPReserve(newDdpReserve) {\n    this.aggregate._ddpreserve = newDdpReserve;\n    this._respondToMutation();\n};\n\nManualAggregateBuilder.prototype.setController = function setController(newController) {\n    this.aggregate._controller = newController._id;\n};\n\nManualAggregateBuilder.prototype.setName = function setName(newName) {\n    this.aggregate.name = newName;\n};\n\nManualAggregateBuilder.prototype.setSnapReserve = function setSnapReserve(newSnapReserveProportion) {\n    /*\n        TODO MAYBE: Enforce 0-1 (percentage)\n    */\n\n    this.aggregate._snapreserve_proportion = newSnapReserveProportion;\n};\n\nManualAggregateBuilder.prototype.availableDeviceGroupsForAggregate = function availableDeviceGroupsForAggregate() {\n    return this._availableAggrDeviceGroups();\n};\n\nManualAggregateBuilder.prototype.deviceSummary = function deviceSummary() {\n    var dataDeviceGroups = this._currentAggrDeviceGroups(false),\n        cacheDeviceGroups = this._currentAggrDeviceGroups(true),\n        dataDeviceGroup = safeSpecAndCount(dataDeviceGroups),\n        cacheDeviceGroup = safeSpecAndCount(cacheDeviceGroups),\n        summary = {\n            data: dataDeviceGroup,\n            cache: cacheDeviceGroup\n        };\n\n    function safeSpecAndCount(groups) {\n        if (!groups || groups.length === 0) {\n            return {\n                spec: null,\n                count: 0\n            };\n        }\n\n        var group = _.first(groups);\n\n        return {\n            spec: group.spec,\n            count: group.devices.length\n        };\n    }\n\n    return summary;\n};\n\nManualAggregateBuilder.prototype.availableRaidTypes = function availableRaidTypes() {\n    return this._hagi.lookup.possibleRaidTypes;\n};\n\nManualAggregateBuilder.prototype.availableBlockTypes = function availableBlockTypes() {\n    return this._hagi.lookup.possibleAggrTypes;\n};\n\nManualAggregateBuilder.prototype.availableControllers = function availableControllers() {\n    return this._hagi.controllers;\n};\n\nManualAggregateBuilder.prototype.containerLanguage = function containerLanguage() {\n    return (this._hagi.isESeries) ? 'Volume Group' : 'Aggregate';\n};\n\nManualAggregateBuilder.prototype.systemLimits = function systemLimits() {\n    return this._hagi.limits;\n};\n\nManualAggregateBuilder.prototype.currentRaidSize = function currentRaidSize() {\n    return this._actualRaidSize();\n};\n\nManualAggregateBuilder.prototype.requestedRaidSize = function requestedRaidSize() {\n    return this._requestedRaidSize;\n};\n\nManualAggregateBuilder.prototype.deviceLimits = function deviceLimits(forCache) {\n    var activeDevice = this._activeDeviceForAggregate(forCache),\n        lookup = this._hagi.lookup,\n        limits = {\n            spec: {},\n            min: 0,\n            max: 0\n        };\n\n    if (activeDevice) {\n        var raidType = this._currentRaidType(forCache),\n            aggrType = this.aggregate.block_type,\n            deviceSpec = activeDevice.spec,\n            activeCount = this._deviceGroupForSpec(deviceSpec).devices.length,\n            minForRaidType = this._absoluteMinRaidSize(raidType),\n            maxToLimit = lookup.maxAggrDataDeviceCount(deviceSpec, activeCount, aggrType, raidType);\n\n        limits.spec = deviceSpec;\n        limits.min = minForRaidType;\n        limits.max = maxToLimit;\n    }\n\n    return limits;\n};\n\nManualAggregateBuilder.prototype.raidSizeLimits = function raidSizeLimits(forCache) {\n    var activeDevice = this._activeDeviceForAggregate(forCache),\n        limits = {\n            spec: {},\n            min: 0,\n            max: 0\n        };\n\n    if (activeDevice) {\n        var lookup = this._hagi.lookup,\n            raidType = this._currentRaidType(forCache),\n            deviceSpec = activeDevice.spec,\n            activeCount = this._deviceGroupForSpec(deviceSpec).devices.length,\n            raidLimits = lookup.raidLimits(deviceSpec, raidType),\n            hardMinimum = this._absoluteMinRaidSize(raidType);\n\n        limits.spec = deviceSpec;\n        limits.min = hardMinimum;\n        limits.max = Math.min(activeCount, raidLimits.maximumSize);\n    }\n\n    return limits;\n};\n\nManualAggregateBuilder.prototype._setRaidSizeIfMissing = function _setRaidSizeIfMissing() {\n    if (this.aggregate && !this._requestedRaidSize) {\n        if (this.aggregate._raid_groups) {\n            this._requestedRaidSize = this._actualRaidSize();\n        }\n    }\n};\n\nManualAggregateBuilder.prototype._actualRaidSize = function _actualRaidSize() {\n    if (this.aggregate && this.aggregate._raid_groups) {\n        return _.max(_.map(this.aggregate._raid_groups, deviceCountInRaidGroup));\n    }\n\n    function deviceCountInRaidGroup(raidGroup) {\n        return raidGroup._devices.length;\n    }\n};\n\nManualAggregateBuilder.prototype._currentRaidType = function _currentRaidType(forCache) {\n    return (forCache) ? this.aggregate.cache_raid_type : this.aggregate.raid_type;\n};\n\nManualAggregateBuilder.prototype._activeDeviceForAggregate = function _activeDeviceForAggregate(forCache) {\n    var currentAggregateDeviceGroups = this._currentAggrDeviceGroups(forCache),\n        activeDevice = null;\n\n    if (currentAggregateDeviceGroups && currentAggregateDeviceGroups.length > 0) {\n        var sortedDeviceGroups = _.sortBy(currentAggregateDeviceGroups, sortByCapacity);\n\n        activeDevice = _.first(sortedDeviceGroups);\n    }\n\n    function sortByCapacity(deviceGroup) {\n        return deviceGroup.spec.rsgb;\n    }\n\n    return activeDevice;\n};\n\nManualAggregateBuilder.prototype._transform = function _transform(devices) {\n    return this._hagi.transformDriveInfoSequence(devices);\n};\n\nManualAggregateBuilder.prototype._availableAggrDeviceGroups = function _availableAggrDeviceGroups() {\n    var unusedDevices = this._unusedAggrDevices(),\n        currentDevices = this._currentAggrDevices();\n\n    return this._transform(unusedDevices.concat(currentDevices));\n};\n\nManualAggregateBuilder.prototype._currentAggrDeviceGroups = function _currentAggrDeviceGroups(forCache) {\n    return this._transform(this._currentAggrDevices(forCache));\n};\n\nManualAggregateBuilder.prototype._unusedAggrDevices = function _unusedAggrDevices() {\n    return this._hagi.latestDeviceInfo().where.unlocked.and.notroot;\n};\n\nManualAggregateBuilder.prototype._currentAggrDevices = function _currentAggrDevices(forCache) {\n    var _this = this,\n        allDevices = this._hagi.latestDeviceInfo(),\n        ownedByAggregate = _.where(allDevices, forAggregate);\n\n    return this._filterCacheDevices(ownedByAggregate, forCache);\n\n    function forAggregate(device) {\n        return _.any(device.consumers, containsId);\n\n        function containsId(consumer) {\n            return _this.aggregate && consumer._id === _this.aggregate._id;\n        }\n    }\n};\n\n/*\n    Will return only devices that are either for cache or not, after being given a device chain\n*/\nManualAggregateBuilder.prototype._filterCacheDevices = function _filterCacheDevices(devices, forCache) {\n    var roleMap = {},\n        _this = this;\n\n    buildRoleMap();\n    forCache = !!forCache;\n\n    return _.where(devices, filterForCache);\n\n    function filterForCache(device) {\n        return _.has(roleMap, device.id) && roleMap[device.id] === forCache;\n    }\n\n    function buildRoleMap() {\n        if (!_this.aggregate) {\n            return;\n        }\n\n        _.forEach(_this.aggregate._raid_groups, mapRaidGroup);\n\n        function mapRaidGroup(rg) {\n            _.forEach(rg._devices, addDeviceToMap);\n\n            function addDeviceToMap(deviceId) {\n                roleMap[deviceId] = rg.cache;\n            }\n        }\n    }\n};\n\nManualAggregateBuilder.prototype._absoluteMinRaidSize = function _absoluteMinRaidSize(raidType) {\n    return this._raidTypes.minRaidSize(raidType);\n};\n\nManualAggregateBuilder.prototype._makeAggregateBoilerplate = function makeBoilerplate() {\n    var lookup = this._hagi.lookup,\n        defaultProps = lookup.defaultAggrProps();\n\n    var newAggregate = _.merge({}, defaultProps, {\n        _strategy: this.name,\n        _manual: true,\n        _controller: this._defaultController()._id,\n        name: this._defaultName()\n    });\n\n    newAggregate._raid_groups = this._makeDefaultRaidGroups(newAggregate);\n\n    return newAggregate._raid_groups.length ? newAggregate : null;\n};\n\nManualAggregateBuilder.prototype._makeDefaultRaidGroups = function _makeDefaultRaidGroups(forAggr) {\n    var _this = this,\n        defaultDeviceGroup = this._defaultRaidGroupDeviceGroup();\n\n    if (!defaultDeviceGroup) {\n        return [];\n    }\n\n    var raidType = defaultRaidType(defaultDeviceGroup);\n\n    if (!raidType) {\n        return [];\n    }\n\n    forAggr.raid_type = raidType;\n\n    var lookup = this._hagi.lookup,\n        aggrType = forAggr.block_type,\n        spec = defaultDeviceGroup.spec,\n        totalDefaultDevices = defaultDeviceGroup.devices.length,\n        deviceCount = lookup.maxAggrDataDeviceCount(spec, totalDefaultDevices, aggrType, raidType);\n\n    if (deviceCount < this._absoluteMinRaidSize(raidType)) {\n        return [];\n    }\n\n    this._requestedRaidSize = this.bestPracticeRaidSize(spec, raidType, deviceCount);\n\n    return this._componentBuilder.makeRaidGroups(defaultDeviceGroup, deviceCount, forAggr, this._requestedRaidSize);\n\n    function defaultRaidType(deviceGroup) {\n        var hagi = _this._hagi,\n            prefferedRaidType = (hagi.isESeries) ? _this._raidTypes.DDP : _this._raidTypes.RAID_DP,\n            systemRaidTypes = _(hagi.lookup.possibleRaidTypes)\n                                .where(enoughDevicesForType)\n                                .sortBy(rank)\n                                .value();\n\n        function enoughDevicesForType(type) {\n            return deviceGroup.devices.length >= _this._absoluteMinRaidSize(type);\n        }\n\n        function rank(type) {\n            return type === prefferedRaidType ? 0 : 1;\n        }\n\n        return _.first(systemRaidTypes);\n    }\n};\n\nManualAggregateBuilder.prototype._defaultRaidGroupDeviceGroup = function _defaultRaidGroupDeviceGroup() {\n    var _this = this,\n        availableDevices = this.availableDeviceGroupsForAggregate();\n\n    function deviceCount(item) {\n        return item.devices.length;\n    }\n\n    function deviceIfADPMeetsMin(/* device */) {\n        if (!_this._hagi.isESeries) {\n            /*\n                TODO: Check for ADP and ensure at least 3 devices (ADP can only use RAID_DP)\n            */\n        }\n\n        return true;\n    }\n\n    if (availableDevices) {\n        var sortedDevices = _(availableDevices)\n                .where(deviceIfADPMeetsMin)\n                .sortBy(deviceCount)\n                .reverse()\n                .value();\n\n        return (sortedDevices.length) ? _.first(sortedDevices) : null;\n    }\n\n    return null;\n};\n\nManualAggregateBuilder.prototype._defaultController = function defaultController() {\n    var controllers = this._hagi.controllers;\n\n    assert(controllers, 'hagroup is missing controllers');\n    return _.first(controllers);\n};\n\nManualAggregateBuilder.prototype._defaultName = function defaultName() {\n    var language = this.containerLanguage();\n\n    return util.format('%s_%s', language, uuid().slice(0, 8));\n};\n\nManualAggregateBuilder.prototype._deviceGroupForSpec = function _deviceGroupForSpec(spec) {\n    var deviceGroups = this.availableDeviceGroupsForAggregate();\n\n    if (!deviceGroups || deviceGroups.length === 0) {\n        return false;\n    }\n\n    var filtered = _(deviceGroups)\n            .filter()\n            .where(specMatchesSearch)\n            .value();\n\n    return (filtered && filtered.length > 0) ? _.first(filtered) : null;\n\n    function specMatchesSearch(deviceGroup) {\n        return _.isEqual(deviceGroup.spec, spec);\n    }\n};\n\nManualAggregateBuilder.prototype._respondToMutation = function _respondToMutation() {\n    // Housekeeping\n    this._rebuildRaidGroups();\n};\n\nManualAggregateBuilder.prototype._rebuildRaidGroups = function _rebuildRaidGroups(forCache, withSpecificDeviceGroup, havingCount) {\n    forCache = !!forCache;\n\n    if (withSpecificDeviceGroup) {\n        if (!(withSpecificDeviceGroup instanceof Array)) {\n            withSpecificDeviceGroup = [withSpecificDeviceGroup];\n        }\n    }\n\n    var _this = this,\n        aggregateDataDeviceGroups = withSpecificDeviceGroup || this._currentAggrDeviceGroups(forCache),\n        cacheRaidGroups = _.where(this.aggregate._raid_groups, isCacheRg),\n        newRaidGroups = _.flatten(_.map(aggregateDataDeviceGroups, buildRaidGroupsForDevice));\n\n    if (cacheRaidGroups.length) {\n        newRaidGroups.push.apply(newRaidGroups, cacheRaidGroups);\n    }\n\n    function buildRaidGroupsForDevice(deviceGroup) {\n        var groupCount = havingCount || deviceGroup.devices.length;\n        return _this._componentBuilder.makeRaidGroups(deviceGroup, groupCount, _this.aggregate, _this._requestedRaidSize);\n    }\n\n    function isCacheRg(rg) {\n        return rg.cache;\n    }\n\n    this.aggregate._raid_groups = newRaidGroups;\n};\n\nManualAggregateBuilder.prototype._isDeviceGroup = function _isDeviceGroup(obj) {\n    var isObject = _.isPlainObject(obj),\n        hasSpec = _.has(obj, 'spec'),\n        hasDevices = _.has(obj, 'devices'),\n        specIsObject = hasSpec && _.isPlainObject(obj.spec),\n        devicesIsArray = hasDevices && (obj.devices instanceof Array);\n\n    return isObject && specIsObject && devicesIsArray;\n};\n\nmodule.exports = ManualAggregateBuilder;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    dump = require('../../dump'),\n    SlicedRootAggregateProposer = require('./plans/propose-root-sliced'),\n    UnlicedRootAggregateProposer = require('./plans/propose-root-unsliced'),\n    DataAggregateProposer = require('./plans/propose-data'),\n    ESeriesDrivePoolProposer = require('./plans/propose-ddp'),\n    AggregateReporter = require('./aggregateReporter'),\n    mutil = require('../util');\n\ndump(); // make linter happy\n\nvar PROPOSERS = [\n        SlicedRootAggregateProposer,\n        UnlicedRootAggregateProposer,\n        DataAggregateProposer,\n        ESeriesDrivePoolProposer\n    ];\n\nfunction AggregatePlanner(hagi) {\n    assert(this instanceof AggregatePlanner);\n    assert(hagi);\n\n    this.hagi = hagi;\n\n    this.proposers = _.clone(PROPOSERS);\n}\n\n/**\n * Return new planned aggregates for the hagroup named in hagi.\n */\n\nAggregatePlanner.prototype.bestPlan = function bestPlan() {\n    assert(this instanceof AggregatePlanner);\n\n    var hagi = this.hagi;\n\n    var deviceGroups = availableDevicesGroupedByUtility(hagi),\n        preserved = hagi.aggregates.where.manual,\n        attempts = this.makeAttempts(deviceGroups, preserved),\n        sortedAttempts = _.sortBy(attempts, this.scoreAttempt, this),\n        winner = _.last(sortedAttempts),\n        newAggregates = winner ? winner.slice(preserved.length) : [];\n\n    return newAggregates;\n};\n\nAggregatePlanner.prototype.scoreAttempt = function scoreAttempt(attempt) {\n    assert(this instanceof AggregatePlanner);\n    var aggrByController = _.groupBy(attempt, '_controller'),\n        yieldsByController = _.mapValues(aggrByController, this._estimateAggrsDataYield, this),\n        yields = _.values(yieldsByController),\n        // intervene here to add penalty factor for lopsided yield\n        aggrCountPenaltyFactor = 1 - 0.02 * attempt.length;\n\n    return sum(yields) * aggrCountPenaltyFactor;\n};\n\nAggregatePlanner.prototype._estimateAggrsDataYield = function _estimateAggrsDataYield(aggrs) {\n    return sum(_.map(aggrs, this._estimateAggrDataYield, this));\n};\n\nAggregatePlanner.prototype._estimateAggrDataYield = function _estimateAggrDataYield(aggr) {\n    assert(this instanceof AggregatePlanner);\n    var report = new AggregateReporter(this.hagi).createAggregateReport(aggr).summary,\n        usableGiB = report.usableCapacity, // unit?\n        minRootMiB = this.hagi.limits.aggr.root_aggr_size_mib,\n        minRootGiB = minRootMiB / 1024;\n\n    if (aggr.is_root_aggregate) {\n\n        // If the aggregate is homogeonous and has the same drive count as\n        // the minimum required, we treat the aggregate as a dedicated root\n        // and don't give it credit for any data yield even if due to drive\n        // rounding it has significantly greater capacity than required.\n        //\n        // Otherwise, we treat the aggregate as a non-dedicated root and\n        // give it credit for any data capacity over the minimum required.\n\n        var firstSpec = aggr._raid_groups[0].__deviceSpecs[0].spec,\n            minCount = this.hagi.lookup.minimalRootAggregateDriveCount(firstSpec, aggr.raid_type),\n            isDedicated = aggr._raid_groups.length === 1 &&\n                          aggr._raid_groups[0].__deviceSpecs.length === 1 &&\n                          aggr._raid_groups[0]._devices.length === minCount;\n\n        if (isDedicated || this.hagi.configGroup.id === 'c-mode') {\n            return 0;\n        } else if (usableGiB > 0) {\n            console.error('TODO: remove non-dedicated root compensation code');\n            return usableGiB;\n        } else {\n            assert(report.rootCapacity > 0); // how can these both be 0?\n            return report.rootCapacity - minRootGiB; // TODO: ensure unit not mismatched\n        }\n    } else {\n        return usableGiB;\n    }\n};\n\n/**\n * Make a proposer. Performed fresh each round of makeAttempts.\n */\n\nAggregatePlanner.prototype.makeProposers = function makeProposers(deviceGroups, aggregates) {\n    assert(this instanceof AggregatePlanner);\n    assert(_.isArray(deviceGroups));\n    assert(_.isArray(aggregates));\n\n    deviceGroups = _.clone(deviceGroups);\n    aggregates = _.clone(aggregates);\n\n    return _.map(PROPOSERS, create, this);\n\n    function create(Proposer) {\n        // jshint -W040\n        assert(this instanceof AggregatePlanner);\n        return new Proposer(this.hagi, deviceGroups, aggregates);\n    }\n};\n\n/**\n * Make many attempts to consume deviceGroups and extend aggregates.\n * Returns an array of possibilities, each one of which is an array of\n * aggregates starting with the original aggregates to assist scoring.\n */\n\nAggregatePlanner.prototype.makeAttempts = function makeAttempts(deviceGroups, aggregates, depth) {\n    // Recursive, but only to a depth matching the number of different kinds\n    // of devices we were fed.\n    assert(this instanceof AggregatePlanner);\n    aggregates = aggregates || [];\n    depth = depth || 0;\n    assert(deviceGroups instanceof Array);\n    assert(aggregates instanceof Array);\n    assert.equal(typeof depth, 'number');\n    assert(_.all(aggregates, _.isPlainObject));\n\n    if (!deviceGroups.length) {\n        return [ aggregates ];\n    }\n\n    // NEXT: separate out the getting possible plans part from the\n    // recursing part. Might work out best if the function(s) providing\n    // the plans can return 0+ plans.\n\n    var proposals = _(this.makeProposers(deviceGroups, aggregates))\n            .map(propose, this)            // -> array of (array|null)\n            .filter()                      // -> array of arrays\n            .value();\n\n    assert(_.all(proposals, _.isPlainObject));\n\n    var newTails = [];\n\n    _.forEach(proposals, function pushNewTails(proposal) {\n        switch (proposal.mode) {\n            case 'all':\n                return newTails.push(proposal.aggregates);\n            case 'any':\n                return _.forEach(proposal.aggregates, function (aggr) {\n                    newTails.push([ aggr ]);\n                });\n            default:\n                throw new Error('fan out mode');\n        }\n    });\n\n    assert(_.all(newTails, _.isArray));\n\n    var results = []; // array of arrays of objects, we hope\n\n    _.forEach(newTails, function (tail) {\n        assert(this instanceof AggregatePlanner);\n        assert(tail instanceof Array);\n        assert(tail.length > 0);\n        assert(_.all(tail, _.isPlainObject));\n\n        var proposalsFromTail = _.bind(proposeAgain, this)(tail);\n\n        _.forEach(proposalsFromTail, function (proposal) {\n            assert(proposal instanceof Array);\n            assert(_.all(proposal, _.isPlainObject));\n            results.push(proposal);\n        });\n    }, this);\n\n    return results;\n\n    // Apply a proposal function to get a list of proposed lists of new\n    // aggregates. If no aggregates are proposed, return null so that\n    // the filter can easily take it out.\n    function propose(proposer) {\n        // jshint -W040\n        assert(this instanceof AggregatePlanner);\n        assert.equal(typeof proposer.propose, 'function');\n\n        var proposal = proposer.propose.call(proposer, deviceGroups, aggregates);\n\n        checkProposal(proposal);\n        if (proposal) {\n            if (proposal.aggregates.length === 0) {\n                return null;\n            }\n        }\n        return proposal;\n    }\n\n    function checkProposal(proposal) {\n        if (proposal) {\n            assert(_.isPlainObject(proposal));\n            assert(proposal.mode === 'any' || proposal.mode === 'all');\n            assert(proposal.aggregates instanceof Array);\n            if (proposal.aggregates.length > 0) {\n                assert(_.all(proposal.aggregates, _.isPlainObject));\n            }\n        }\n    }\n\n    function proposeAgain(newAggregates) {\n        // jshint -W040\n        assert(this instanceof AggregatePlanner);\n        var remainingDeviceGroups = filterDeviceGroupsRemovingDevicesUsedBy(deviceGroups, newAggregates),\n            allAggregates = aggregates.concat(newAggregates),\n            resultsStartingHere = this.makeAttempts(remainingDeviceGroups, allAggregates, depth + 1);\n\n        if (resultsStartingHere.length) {\n            return resultsStartingHere; // Continue the merry dance.\n        } else {\n            return [ allAggregates ];   // That's all, folks.\n        }\n    }\n};\n\nfunction sum(seq) {\n    return _.reduce(seq, function accsum(sum, n) {\n        return sum + n;\n    });\n}\n\nfunction filterDeviceGroupsRemovingDevicesUsedBy(deviceGroups, aggregates) {\n    assert(deviceGroups instanceof Array);\n    assert(aggregates instanceof Array);\n    var consumedDevices = _(aggregates)\n            .map('_raid_groups').flatten()\n            .map('_devices').flatten()\n            .value(),\n        wasConsumed = _.partial(_.has, _.zipObject(consumedDevices)),\n        result = filterDeviceGroupsByConstraint(deviceGroups, not(wasConsumed));\n    return result;\n}\n\nfunction not(fn) {\n    return function () {\n        return !fn.apply({}, arguments);\n    };\n}\n\nfunction filterDeviceGroupsByConstraint(deviceGroups, constraint) {\n    return _.filter(_.map(deviceGroups, adjustDeviceGroup));\n\n    function adjustDeviceGroup(deviceGroup) {\n        var newDevices = _.filter(deviceGroup.devices, constraint);\n        if (newDevices.length) {\n            return {\n                spec: deviceGroup.spec,\n                devices: newDevices,\n            };\n        } else {\n            return null;\n        }\n    }\n}\n\nfunction availableDevicesGroupedByUtility(hagi) {\n    assert(hagi);\n\n    var unlocked = hagi.deviceInfo.where.unlocked,\n        avoidFPSSD = getFPSSDAvoidance(hagi, unlocked);\n\n    var availableBySpecKey = unlocked\n            .and(useful)\n            .groupBy(mutil.minimalSpecKey);\n    return _.map(availableBySpecKey, unpack);\n\n    function useful(info) {\n        var spec = info.spec,\n            virtual = info.virtual,\n            physical = !virtual,\n            unSliced = physical && !_.any(info.consumers, { _type: 'slice' }),\n            sliceOrUnSliced = virtual || unSliced,\n            avoidedSSD = avoidFPSSD && spec.type === 'SSD' && spec.fp_support;\n\n        return sliceOrUnSliced && !avoidedSSD;\n    }\n\n    function unpack(infos, key) {\n        return {\n            spec: JSON.parse(key),\n            devices: _.map(infos, 'id')\n        };\n    }\n}\n\nfunction getFPSSDAvoidance(hagi, infos) {\n    var fpParticipants = infos.where.physical.and(fpOK).groupBy(isSSD),\n        fpLikely = _.keys(fpParticipants).length > 1; // SSD and non-SSD\n\n    // TODO: fix policies\n    var policies = hagi.hagroup._policies || {},\n        aggrPolicies = policies.Aggregates || {},\n        ssdsForFlashPool = aggrPolicies.ssdsForFlashPool;\n\n    if (ssdsForFlashPool === undefined) {\n        ssdsForFlashPool = true;\n    }\n\n    return ssdsForFlashPool && fpLikely;\n\n    function isSSD(info) {\n        return info.spec.type === 'SSD';\n    }\n\n    function fpOK(info) {\n        return !!info.spec.fp_support;\n    }\n}\n\nmodule.exports = function planAggregates(hagi) {\n    var worker = new AggregatePlanner(hagi);\n    return worker.bestPlan();\n};\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    lcprop = require('../../../lcprop'),\n    dump = require('../../../dump'),\n    ComponentBuilder = require('../component-builder');\n\ndump(); // make linter happy\n\nfunction AggregateProposer(hagi, deviceGroups, aggregates) {\n    assert(this instanceof AggregateProposer);\n    assert(hagi);\n    assert(_.isArray(deviceGroups));\n    assert(_.isArray(aggregates));\n\n    this.hagi = hagi;\n    this.deviceGroups = deviceGroups;\n    this.aggregates = aggregates;\n\n    // ensure concrete classes provide vital properties\n    assert.equal(typeof this.propose, 'function');\n    assert.equal(typeof this.name, 'string');\n\n    // add read-only cached lazy props\n    lcprop(this, 'controllerIds', this._get_controllerIds);\n    lcprop(this, 'controllersWithoutRoot', this._get_controllersWithoutRoot);\n    lcprop(this, 'isFAS', this._get_isFAS);\n    lcprop(this, 'knownAggregatesInHagroupIncludingProposed', this._get_knownAggregatesInHagroupIncludingProposed);\n    lcprop(this, 'rootSliceCountForSystem', this._get_rootSliceCountForSystem);\n    lcprop(this, 'specById', this._get_specById);\n\n    this.componentBuilder = new ComponentBuilder(hagi);\n}\n\n/**\n * Find a non-conflicting name for a new aggregate on the controller, using\n * the controller name and suffix as a basis. Required here because we're\n * taking into account real aggregates on other HA groups in the cluster,\n * but the proposed aggregates on this HA group.\n */\n\nAggregateProposer.prototype.getNonConflictingAggregateName = function ANIT(controller, suffix) {\n    // long assertion block; sorry\n    suffix = suffix || 'aggr';\n    assert.equal(typeof suffix, 'string');\n    controller = this.findControllerDespiteAmbiguousReference(controller);\n\n    var controllerName = controller.name || controller._id.slice(0, 8),\n        cleanPrefix = controllerName.toLowerCase().replace(/[^a-z0-9_]+/g, '_'),\n        startingWith = cleanPrefix + '_' + suffix,\n        names = _.map(this.knownAggregatesInHagroupIncludingProposed, 'name'),\n        map = _.zipObject(names),\n        isTaken = _.partial(_.has, map),\n        idx;\n\n    if (!isTaken(startingWith)) {\n        return startingWith;\n    }\n\n    for (idx = 0; isTaken(startingWith + idx); idx++) {\n        // idx++ above already took care of it\n    }\n\n    return startingWith + idx;\n};\n\n/**\n * Resolve an ambiguous controller reference into a controller object.\n * Public because it might be useful.\n */\n\nAggregateProposer.prototype.findControllerDespiteAmbiguousReference = function FCDAR(controller) {\n    assert(this instanceof AggregateProposer);\n    if (typeof controller === 'string') {\n        return this.hagi.find.controller(controller);\n    } else {\n        assert(_.isPlainObject(controller));\n        assert.equal(typeof controller._id, 'string');\n        return this.hagi.find.controller(controller._id);\n    }\n};\n\n/**\n * Return a value indicating whether, according to the proposed aggregates,\n * the referenced controller has a root aggregate.\n */\n\nAggregateProposer.prototype.isMissingRootAggregateFor = function MRAF(controller) {\n    assert(this instanceof AggregateProposer);\n    controller = this.findControllerDespiteAmbiguousReference(controller);\n    return !_.some(this.aggregates, {\n        _controller: controller._id,\n        is_root_aggregate: true\n    });\n};\n\n/**\n * Count the drives matching spec from all the aggregates on a controller.\n */\n\n AggregateProposer.prototype.liveDevicesForSpecAndController = function liveDevicesForSpecAndController(spec, controller) {\n    assert(this instanceof AggregateProposer);\n    assert(_.isPlainObject(spec));\n    controller = this.findControllerDespiteAmbiguousReference(controller);\n    assert(_.isPlainObject(controller));\n\n    var count = 0;\n\n    _(this.aggregates)\n        .where({ _controller: controller._id })\n        .map('_raid_groups').flatten()\n        .map('_devices').flatten()\n        .map(getSpecById, this)\n        .where(spec)\n        .forEach(increment);\n\n    return count;\n\n    function getSpecById(id) {\n        // jshint -W040\n        assert(this instanceof AggregateProposer);\n        return this.specById[id];\n    }\n\n    function increment() {\n        count += 1;\n    }\n};\n\n/**\n * Report the spares required for count plus any extra arguments.\n * If count is 0, assumes this is the first raid group being added.\n */\n\nAggregateProposer.prototype.sparesFor = function sparesFor(count) {\n    assert.equal(typeof count, 'number');\n\n    var total = count;\n    for (var idx = 1; idx < arguments.length; idx++) {\n        assert.equal(typeof arguments[idx], 'number');\n        total += arguments[idx];\n    }\n\n    var situation = {\n            // TODO: look up raidCount in aggrs on this controller:\n            sparesLevel: this._getSparesPolicy(),\n            deviceCount: total,\n            raidCount: count === 0 ? 1 : Number.MAX_VALUE,\n            // isEmbeddedShelfOnly supplied by lookup\n        };\n    return this.hagi.lookup.expectedSpares(situation);\n};\n\nAggregateProposer.prototype._getSparesPolicy = function _getSparesPolicy() {\n    // jshint laxbreak: true\n    return this.hagi.hagroup._policies\n        && this.hagi.hagroup._policies.spare_allocation\n        && this.hagi.hagroup._policies.spare_allocation.enforce\n        && this._getShelvesCount() > 1 // lean to minimum on single shelf\n        ? this.hagi.hagroup._policies.spare_allocation.enforce.toLowerCase()\n        :'minimum';\n};\n\nAggregateProposer.prototype._getShelvesCount = function _getShelvesCount() {\n    return _(this.hagi.deviceInfo).groupBy('shelf').keys().value().length;\n};\n\n// query APIs, used as getters for cached props\n\nAggregateProposer.prototype._get_controllersWithoutRoot = function FCWR() {\n    assert(this instanceof AggregateProposer);\n    return _(this.hagi.controllers)\n            .filter(this.isMissingRootAggregateFor, this)\n            .value();\n};\n\nAggregateProposer.prototype._get_knownAggregatesInHagroupIncludingProposed = function GKAIHIP() {\n    assert(this instanceof AggregateProposer);\n    var result = this.aggregates.slice(0); // clone\n\n    if (!this.hagi.cluster) {\n        return result;\n    }\n\n    _.forEach(this.hagi.cluster.hagroups, function (other) {\n        var otherHagi = this.hagi.inspect(other);\n        if (otherHagi.hagroup._id !== this.hagi.hagroup._id) {\n            result = result.concat(otherHagi.aggregates);\n        }\n    }, this);\n\n    return result;\n};\n\nAggregateProposer.prototype._get_specById = function GSBI() {\n    assert(this instanceof AggregateProposer);\n    var result = {};\n    _.forEach(this.hagi.deviceInfo, function (info) {\n        result[info.id] = info.spec;\n    });\n    return result;\n};\n\nAggregateProposer.prototype._get_infoById = function GIBI() {\n    assert(this instanceof AggregateProposer);\n    var result = {};\n    _.forEach(this.hagi.deviceInfo, function (info) {\n        result[info.id] = info;\n    });\n    return result;\n};\n\nAggregateProposer.prototype._get_controllerIds = function GCI() {\n    assert(this instanceof AggregateProposer);\n    return this.hagi.controllers.map('_id');\n};\n\nAggregateProposer.prototype._get_rootSliceCountForSystem = function GRSCFS() {\n    assert(this instanceof AggregateProposer);\n    return this.hagi.deviceInfo.where(isRootSlice).length;\n};\n\nfunction isRootSlice(info) {\n    return info.spec.slice === 'P2' && info.spec._for_controller !== 'undefined';\n}\n\nAggregateProposer.prototype._get_isFAS = function isFAS() {\n    assert(this instanceof AggregateProposer);\n\n    var configGroup = this.hagi.configGroup,\n        parentGroup = this.hagi.configGroup.parent || {};\n\n    return configGroup.id === 'FAS' || parentGroup.id === 'FAS';\n};\n\nmodule.exports = AggregateProposer;\n","'use strict';\n\nvar assert = require('assert'),\n    util = require('util'),\n    _ = require('lodash'),\n    AggregateProposer = require('./propose-abstract'),\n    dump = require('../../../dump');\n\ndump(); // make linter happy\n\nfunction DataAggregateProposer(hagi, deviceGroups, aggregates) {\n    assert(this instanceof DataAggregateProposer);\n    this.name = 'data';\n    AggregateProposer.call(this, hagi, deviceGroups, aggregates);\n}\n\nutil.inherits(DataAggregateProposer, AggregateProposer);\n\nDataAggregateProposer.prototype.propose = function propose() {\n    assert(this instanceof DataAggregateProposer);\n    var lookup = this.hagi.lookup,\n        policies = this.hagi.hagroup._policies || {};\n\n    if (!this.isFAS) {\n        return;\n    }\n\n    if (this.controllersWithoutRoot.length) {\n        return;\n    }\n\n    if (policies.Aggregates && policies.Aggregates.manual) {\n        return; // User does not want us to build\n    }\n\n    var defaultProps = lookup.defaultAggrProps(),\n        aggrType = defaultProps.block_type,\n        raidType = defaultProps.raid_type,\n        minSize = lookup.minAggrDeviceCount(raidType);\n\n    var deviceGroups = _.cloneDeep(this.deviceGroups),\n        deviceGroup,\n        minRequired;\n\n    while (true) {\n        // take next group\n        if (!(deviceGroup = deviceGroups.shift())) {\n            return;\n        }\n\n        if (deviceGroup.devices.length < minSize) {\n            // can't form a raid group, even without considering spares\n            continue;\n        }\n\n        minRequired = 0;\n        _.forEach(this.controllerIds, raiseMinRequiredForSparesAndMinReq, this);\n\n        if (deviceGroup.devices.length < minRequired) {\n            // can't form a raid group while taking spares\n            continue;\n        }\n\n        // we have enough drives!\n        break;\n    }\n\n    function raiseMinRequiredForSparesAndMinReq(id, idx) {\n        // jshint -W040\n        assert(this instanceof DataAggregateProposer);\n        // TODO: try placing the minSize on each controller separately,\n        // as we might avoid crossing the magic 300 or 1200 count there\n        // and avoid taking one extra spare.\n        var live = this.liveDevicesForSpecAndController(deviceGroup.spec, id),\n            isFirst = idx === 0,\n            extrasForThisController = isFirst ? minSize : 0,\n            consider = live + extrasForThisController;\n        minRequired += this.sparesFor(consider) + extrasForThisController;\n    }\n\n    var controllerIds = this.controllerIds,\n        deviceCount = deviceGroup.devices.length,\n        spec = deviceGroup.spec,\n        maxSize = lookup.maxAggrDataDeviceCount(spec, deviceCount, aggrType, raidType),\n        rgSizeAtMax = lookup.lowestOverheadRaidSize(spec, raidType, maxSize),\n        overflow = maxSize % rgSizeAtMax,\n        maxRound = maxSize - overflow;\n\n    var priorDevices = _.clone(deviceGroup.devices);\n\n    function restoreDevices() {\n        deviceGroup.devices = _.clone(priorDevices);\n    }\n\n    var attempt = _.bind(this.attempt, this, deviceGroup, raidType);\n\n    // Intervene here for policy-selected alternatives to 50:50 split,\n    // e.g. fast:slow split.\n\n    var attempt0 = attempt(maxRound);\n    if (attempt0.length === controllerIds.length) {\n        return {\n            mode: 'all',\n            aggregates: attempt0\n        };\n    } else {\n        restoreDevices();\n    }\n\n    if (deviceCount < 24) {\n        // Try not splitting.\n        var unsplit = attempt(deviceCount);\n        if (unsplit.length) {\n            return {\n                mode: 'all',\n                aggregates: unsplit\n            };\n        } else {\n            restoreDevices();\n        }\n    }\n\n    // Try splitting.\n    return {\n        mode: 'all',\n        aggregates: attempt(Math.ceil(deviceCount / controllerIds.length))\n    };\n\n    // TODO: handle the potential for an unsliced device to act as a spare\n    // for a sliced device.\n};\n\nDataAggregateProposer.prototype.attempt = function attempt(deviceGroup, raidType, count) {\n    assert(this instanceof DataAggregateProposer);\n    assert(_.isPlainObject(deviceGroup));\n    assert(_.isString(raidType));\n    assert(_.isNumber(count));\n\n    var liveForController = _.bind(this.liveDevicesForSpecAndController, this, deviceGroup.spec),\n        liveCounts = _.map(this.controllerIds, liveForController);\n\n    if (liveCounts.length === 2 && liveCounts[0] === liveCounts[1]) {\n        // wind back both carefully\n        var bothSpares = 2 * this.sparesFor(liveCounts[0], count),\n            bothExcess = deviceGroup.devices.length - (count * 2 + bothSpares),\n            excess = Math.floor(bothExcess / 2);\n        if (excess < 0 && WINDBACK_LIMIT + excess < 0) {\n            count = count + excess;\n        }\n    }\n\n    var minCount = this.hagi.lookup.minAggrDeviceCount(raidType),\n        ids = this.controllerIds,\n        count0 = this.windBackForSpares(deviceGroup, ids[0], count),\n        aggrs = [];\n\n    if (count0 >= minCount) {\n        aggrs.push(this.makeDataAggregate(ids[0], deviceGroup, count0));\n\n        var count1 = ids.length === 1 ? 0 : this.windBackForSpares(deviceGroup, ids[1], count);\n\n        if (count1 >= minCount) {\n            aggrs.push(this.makeDataAggregate(ids[1], deviceGroup, count1));\n        }\n    }\n\n    return aggrs;\n};\n\nvar WINDBACK_LIMIT = 8; // max expected spares per controller per spec\n\nDataAggregateProposer.prototype.windBackForSpares = function windBackForSpares(deviceGroup, controllerId, count) {\n    assert(this instanceof DataAggregateProposer);\n    assert(_.isPlainObject(deviceGroup));\n    assert(_.isString(controllerId));\n    assert(_.isNumber(count));\n\n    var live = this.liveDevicesForSpecAndController(deviceGroup.spec, controllerId),\n        spares = this.sparesFor(live, count),\n        excess = deviceGroup.devices.length - (count + spares);\n\n    if (excess >= 0) {\n        return count;\n    } else if (WINDBACK_LIMIT + excess < 0) {\n        return 0; // refuse to wind back this far\n    } else {\n        return count + excess; // TODO: look for edge cases around 300\n                                // where this leaves us with an extra\n                                // spare.\n    }\n};\n\nDataAggregateProposer.prototype.makeDataAggregate = function makeDataAggregate(controllerId, deviceGroup, aggrSize) {\n    // jshint -W040\n    assert(this instanceof DataAggregateProposer);\n    assert.equal(typeof controllerId, 'string');\n    assert(_.isPlainObject(deviceGroup));\n    assert.equal(typeof aggrSize, 'number');\n    assert(aggrSize > 0);\n\n    var props = {\n            strategy: this.name,\n            name: this.getNonConflictingAggregateName(controllerId, 'data'),\n            is_root_aggregate: false,\n        },\n        aggr = this.componentBuilder.makeAggregate(controllerId, deviceGroup, aggrSize, props);\n    return aggr;\n};\n\nmodule.exports = DataAggregateProposer;\n","'use strict';\n\nvar assert = require('assert'),\n    util = require('util'),\n    _ = require('lodash'),\n    AggregateProposer = require('./propose-abstract'),\n    dump = require('../../../dump');\n\ndump(); // make linter happy\n\nfunction ESeriesDrivePoolProposer(hagi, deviceGroups, aggregates) {\n    assert(this instanceof ESeriesDrivePoolProposer);\n    this.name = 'ddp';\n    AggregateProposer.call(this, hagi, deviceGroups, aggregates);\n}\n\nutil.inherits(ESeriesDrivePoolProposer, AggregateProposer);\n\nESeriesDrivePoolProposer.prototype.propose = function propose() {\n    assert(this instanceof ESeriesDrivePoolProposer);\n\n    var lookup = this.hagi.lookup,\n        policies = this.hagi.hagroup._policies || {},\n        results = [];\n\n    if (this.isFAS) {\n        return;\n    }\n\n    if (policies.Aggregates && policies.Aggregates.manual) {\n        return; // User does not want us to build\n    }\n\n    var defaultProps = lookup.defaultAggrProps(),\n    aggrType = defaultProps.block_type,\n    raidType = defaultProps.raid_type;\n\n    while (this.deviceGroups.length) {\n        var deviceGroup = this.deviceGroups.shift(),\n            deviceCount = deviceGroup.devices.length,\n            minSize = lookup.minAggrDeviceCount(raidType);\n\n        if (deviceCount < minSize) {\n            continue;\n        }\n\n        _.forEach(this.controllerIds, trySizes, this);\n    }\n\n    function trySizes(controllerId) {\n        // jshint -W040\n        assert(this instanceof ESeriesDrivePoolProposer);\n        var maxSize = lookup.maxAggrDataDeviceCount(deviceGroup.spec, deviceCount, aggrType, raidType),\n            sizeOptions = getSizesToTry(deviceCount, maxSize);\n\n        _.forEach(sizeOptions, makeAggregate, this);\n\n        function makeAggregate(aggrSize) {\n            var devicesBefore = _.clone(deviceGroup.devices),\n                props = {\n                    strategy: this.name,\n                    name: this.getNonConflictingAggregateName(controllerId, 'data'),\n                    is_root_aggregate: false,\n                },\n                aggr = this.componentBuilder.makeAggregate(controllerId, deviceGroup, aggrSize, props);\n\n            deviceGroup.devices = devicesBefore;\n            results.push(aggr);\n        }\n    }\n\n    return {\n        mode: 'any',\n        aggregates: results\n    };\n};\n\nfunction getSizesToTry(deviceCount, maxSize) {\n    if (deviceCount > 2*maxSize) {\n        return [ maxSize ]; // TODO: add well rounded\n    } else if (deviceCount > maxSize) {\n        return [ maxSize, Math.floor(maxSize/2) ]; // here too\n    } else {\n        return [ deviceCount ];\n    }\n}\n\nmodule.exports = ESeriesDrivePoolProposer;\n","'use strict';\n\nvar assert = require('assert'),\n    util = require('util'),\n    _ = require('lodash'),\n    AggregateProposer = require('./propose-abstract'),\n    dump = require('../../../dump');\n\ndump(); // make linter happy\n\nfunction SlicedRootAggregateProposer(hagi, deviceGroups, aggregates) {\n    assert(this instanceof SlicedRootAggregateProposer);\n    this.name = 'sliced_root';\n    AggregateProposer.call(this, hagi, deviceGroups, aggregates);\n}\n\nutil.inherits(SlicedRootAggregateProposer, AggregateProposer);\n\nSlicedRootAggregateProposer.prototype.propose = function propose() {\n    assert(this instanceof SlicedRootAggregateProposer);\n\n    if (!this.isFAS) {\n        return;\n    }\n\n    // naturally proposes no root aggregates if there are no controllers lacking one\n\n    var deviceGroupsToSatisfyNeedyController = this.hagi.controllers\n            .filter(this.isMissingRootAggregateFor, this) // needy controllers\n            .map(rootSlicesDeviceGroupsFor, this)  // an array of device groups each\n            .filter('length')                      // only the non-empty ones\n            .map(0);                               // only the first\n\n    return {\n        mode: 'all',\n        aggregates: _.map(deviceGroupsToSatisfyNeedyController, makeNewRootAggregateFrom, this)\n    };\n\n    // ---- closures only beyond this point\n\n    function makeNewRootAggregateFrom(rootDeviceGroup) {\n        // jshint -W040\n        assert(this instanceof SlicedRootAggregateProposer);\n        var controllerId = rootDeviceGroup.spec._for_controller;\n        var props = {\n                strategy: this.name,\n                name: this.getNonConflictingAggregateName(controllerId, 'root'),\n                is_root_aggregate: true,\n            },\n            deviceCount = rootDeviceGroup.devices.length,\n            OVERRIDES = {\n                1: {\n                    6: 5,\n                    12: 10,\n                },\n                2: {\n                    6: 5,\n                    12: 10,\n                }\n            };\n\n        deviceCount = OVERRIDES[this.controllerIds.length][deviceCount] || deviceCount;\n\n        // TODO: Ensure ADP controller slicing is being applied properly.\n        //       Then, use the following code as a start on figuring out\n        //       the appropriate device count.\n        //\n        // var embeddedShelf = context.hagi.embeddedShelf,\n        //     breakdown = getEmbeddedRootSliceBreakdown(\n        //         context.controllerIds.length,\n        //         embeddedShelf.model === 'DS4486' ? 48 : embeddedShelf.bay_count,\n        //         context.allRootSLiceCount)[controllerIndex];\n\n        return this.componentBuilder.makeAggregate(controllerId, rootDeviceGroup, deviceCount, props);\n    }\n\n    function rootSlicesDeviceGroupsFor(controller) {\n        // jshint -W040\n        assert(this instanceof SlicedRootAggregateProposer);\n        return _.filter(this.deviceGroups, matchesController);\n        function matchesController(group) {\n            return group.spec.slice === 'P2' &&\n                   group.spec._for_controller === controller._id;\n        }\n    }\n};\n\nmodule.exports = SlicedRootAggregateProposer;\n","'use strict';\n\nvar assert = require('assert'),\n    util = require('util'),\n    _ = require('lodash'),\n    AggregateProposer = require('./propose-abstract'),\n    dump = require('../../../dump');\n\ndump(); // make linter happy\n\n// TODO: add policy control for best device\n\nfunction UnslicedRootAggregateProposer(hagi, deviceGroups, aggregates) {\n    assert(this instanceof UnslicedRootAggregateProposer);\n    this.name = 'unsliced_root';\n    AggregateProposer.call(this, hagi, deviceGroups, aggregates);\n}\n\nutil.inherits(UnslicedRootAggregateProposer, AggregateProposer);\n\nUnslicedRootAggregateProposer.prototype.propose = function propose() {\n    assert(this instanceof UnslicedRootAggregateProposer);\n\n    if (!this.isFAS) {\n        return;\n    }\n\n    if (this._sawSlices()) {\n        return;\n    }\n\n    var unsatisfiedControllers = this.controllersWithoutRoot;\n\n    if (!unsatisfiedControllers.length) {\n        return;\n    }\n\n    // Skip this block to apply policy for fast:slow split rather than\n    // putting both the aggregates on the same device spec.\n    var deviceGroups = _.sortBy(this.deviceGroups, rankDriveTypeForRootAggregate);\n    for (var idx = 0; idx < deviceGroups.length; idx++) {\n        var deviceGroup = deviceGroups[idx],\n            minReq = this.whatif(unsatisfiedControllers, 'RAID_DP', deviceGroup);\n        if (minReq) {\n            var make = _.partial(this.makeNewRootAggregateFrom, deviceGroup, minReq);\n            return {\n                mode: 'all',\n                aggregates: _.map(unsatisfiedControllers, make, this)\n            };\n        }\n    }\n\n    // TODO: if there aren't many of a group left AND we only have one\n    // unsatisfied controller, also try a root aggregate using all but\n    // one of the devices. It won't be a *dedicated* root aggregate,\n    // but that's how best practice embedded-only configs look in 8.2.\n\n    return {\n        mode: 'any',\n        aggregates: _.filter(_.map(this.deviceGroups, makeNewRootAggregateForFirstUnsatisified, this))\n    };\n\n    // ---- closures only beyond this point\n\n    function rankDriveTypeForRootAggregate(driveGroup) {\n        // SSDs are last\n        // Intervene here to apply policy to root selection\n        return driveGroup.spec.rpm;\n    }\n\n    function makeNewRootAggregateForFirstUnsatisified(deviceGroup) {\n        // jshint -W040\n        assert(this instanceof UnslicedRootAggregateProposer);\n        var requiredDeviceCount = this.hagi.lookup.minimalRootAggregateDriveCount(deviceGroup.spec, 'RAID_DP'),\n            controller = unsatisfiedControllers[0];\n        return this.makeNewRootAggregateFrom(deviceGroup, requiredDeviceCount, controller);\n    }\n};\n\nUnslicedRootAggregateProposer.prototype.whatif = function whatif(controllers, raidType, deviceGroup) {\n    assert(this instanceof UnslicedRootAggregateProposer);\n    var spec = deviceGroup.spec,\n        minReq = this.hagi.lookup.minimalRootAggregateDriveCount(spec, raidType),\n        getLiveCount = _.bind(this.liveDevicesForSpecAndController, this, spec),\n        liveCountsPer = _.map(controllers, getLiveCount),\n        sparesPer = _.map(liveCountsPer, sparesIncludingMinReq, this),\n        newDriveCount = 0;\n\n    for (var idx = 0; idx < controllers.length; idx++) {\n        newDriveCount += minReq;\n        newDriveCount += sparesPer[idx];\n        // NOT liveCountsPer: it's newDriveCount, not totalDriveCount\n    }\n\n    if (newDriveCount > deviceGroup.devices.length) {\n        return 0;\n    } else {\n        return minReq;\n    }\n\n    function sparesIncludingMinReq(count) {\n        // jshint -W040\n        assert(this instanceof UnslicedRootAggregateProposer);\n        return this.sparesFor(minReq, count);\n    }\n};\n\nUnslicedRootAggregateProposer.prototype.makeNewRootAggregateFrom = function MNRAF(deviceGroup, requiredDeviceCount, controller) {\n    assert(this instanceof UnslicedRootAggregateProposer);\n    assert(_.isPlainObject(deviceGroup));\n    assert(_.isNumber(requiredDeviceCount));\n    assert(_.isPlainObject(controller));\n\n    // don't worry about spares: we either already dealt with that, or\n    // will deal with that while making data aggregates by trying maxPossible-1,\n    // or we're very short on drives as otherwise we'd not have hit the 'any'\n    // option.\n\n    if (deviceGroup.devices.length < requiredDeviceCount) {\n        return;\n    }\n\n    var controllerId = controller._id, // other will get root aggr on next pass\n        props = {\n            strategy: this.name,\n            name: this.getNonConflictingAggregateName(controllerId, 'root'),\n            is_root_aggregate: true,\n        };\n\n    return this.componentBuilder.makeAggregate(controllerId, deviceGroup, requiredDeviceCount, props);\n};\n\nUnslicedRootAggregateProposer.prototype._sawSlices = function _sawSlices() {\n    return _(this.hagi.controllers)\n            .map('_assigned_storage')\n            .filter()\n            .flatten()\n            .any();\n};\n\nmodule.exports = UnslicedRootAggregateProposer;\n","'use strict';\n\nvar _ = require('lodash'),\n    assert = require('assert'),\n    Unit = require('../../units'),\n    RaidTypes = require('./raid-types');\n\nfunction RaidLimits() {\n    this._raidTypes = new RaidTypes();\n}\n\n/*\n    Yields Object of shape:\n    {\n        defaultSize: <int>,\n        lowestSize: <int>,\n        highestSize: <int>,\n        maximumSize: <int>\n    }\n*/\nRaidLimits.prototype.findLimits = function(hagi, selectedRaidType, deviceSpecs, numberOfDevices) {\n    assert(hagi, 'must provide hagroup inspector to find raid limits');\n    assert(hagi.hagroup, 'must provide hagroup for inspector to find raid limits');\n    assert(hagi.hagroup.version, 'hagroup must have a version');\n    assert(selectedRaidType, 'must provide a selected raid type to find limits');\n    assert(deviceSpecs, 'must provide device specs to find limits for');\n\n    var osVersion = hagi.versionNumber,\n        devicesToFindLimitsFor = _.isArray(deviceSpecs) ? deviceSpecs : [deviceSpecs];\n\n    if (hagi.isESeries) {\n        return this._findLimitsForESeries(selectedRaidType, devicesToFindLimitsFor, numberOfDevices);\n    }\n    else {\n        return this._findLimitsForFAS(selectedRaidType, devicesToFindLimitsFor, osVersion);\n    }\n};\n\n// See: findLimits, need to reimplement policy object for E-Series\nRaidLimits.prototype._findLimitsForESeries = function(selectedRaidType, deviceSpecs, numberOfDevices) {\n    var raidLimitResult = {},\n        _this = this;\n\n    _.forEach(deviceSpecs, function(device) {\n        var raidLimitsForDevice = null,\n            deviceQuantity = device.quantity || numberOfDevices,\n            effectiveDeviceQuantity;\n\n        switch (selectedRaidType) {\n            case _this._raidTypes.RAID_1:\n                raidLimitsForDevice = _this._packageResult(2, 2, 2, 2);\n                break;\n            case _this._raidTypes.RAID_5:\n            case _this._raidTypes.RAID_6:\n                raidLimitsForDevice = _this._packageResult(30, 30, 30, 30);\n                break;\n            case _this._raidTypes.DDP:\n                effectiveDeviceQuantity = deviceQuantity || 11; // 11 is the min size for DDP\n                raidLimitsForDevice = _this._packageResult(effectiveDeviceQuantity, effectiveDeviceQuantity, effectiveDeviceQuantity, effectiveDeviceQuantity);\n                break;\n            case _this._raidTypes.RAID_0:\n                effectiveDeviceQuantity = deviceQuantity || 2; // 2 is the min size for RAID_0\n                raidLimitsForDevice = _this._packageResult(effectiveDeviceQuantity, effectiveDeviceQuantity, effectiveDeviceQuantity, effectiveDeviceQuantity);\n                break;\n            case _this._raidTypes.RAID_3:\n                effectiveDeviceQuantity = deviceQuantity || 3; // 3 is the min size for RAID_3\n                raidLimitsForDevice = _this._packageResult(effectiveDeviceQuantity, effectiveDeviceQuantity, effectiveDeviceQuantity, effectiveDeviceQuantity);\n                break;\n            case _this._raidTypes.RAID_10:\n                effectiveDeviceQuantity = deviceQuantity || 4; // 4 is the min size for RAID_3\n                raidLimitsForDevice = _this._packageResult(effectiveDeviceQuantity, effectiveDeviceQuantity, effectiveDeviceQuantity, effectiveDeviceQuantity);\n                break;\n            default:\n                throw new Error('Raid Type ' + selectedRaidType + ' is unsupported on ESeries system.');\n        }\n\n        _this._applyUpdatedValueToDeviceLimits(raidLimitResult, 'defaultSize', raidLimitsForDevice.defaultSize, false);\n        _this._applyUpdatedValueToDeviceLimits(raidLimitResult, 'lowestSize', raidLimitsForDevice.lowestSize, false);\n        _this._applyUpdatedValueToDeviceLimits(raidLimitResult, 'highestSize', raidLimitsForDevice.defaultSize, true);\n        _this._applyUpdatedValueToDeviceLimits(raidLimitResult, 'maximumSize', raidLimitsForDevice.defaultSize, true);\n    });\n\n    return raidLimitResult;\n};\n\nRaidLimits.prototype._findLimitsForFAS = function(selectedRaidType, deviceSpecs, osVersion) {\n    var raidLimitResult = {},\n        _this = this;\n\n    /*\n        We have to account for multiple drive types in a raid group (hetereogenous)\n        We want the minimum spec\n    */\n    _.forEach(deviceSpecs, function(device) {\n        var raidLimitsForDevice = null;\n\n        switch (selectedRaidType) {\n            case _this._raidTypes.RAID_0:\n                raidLimitsForDevice = _this._FASRaid0Limits(device);\n                break;\n            case _this._raidTypes.RAID_4:\n                raidLimitsForDevice = _this._FASRaid4Limits(device);\n                break;\n            case _this._raidTypes.RAID_DP:\n                raidLimitsForDevice = _this._FASRaidDPLimits(osVersion, device);\n                break;\n            default:\n                throw new Error('Raid Type ' + selectedRaidType + ' is unsupported on FAS system.');\n        }\n\n        _this._applyUpdatedValueToDeviceLimits(raidLimitResult, 'defaultSize', raidLimitsForDevice.defaultSize, false);\n        _this._applyUpdatedValueToDeviceLimits(raidLimitResult, 'lowestSize', raidLimitsForDevice.lowestSize, false);\n        _this._applyUpdatedValueToDeviceLimits(raidLimitResult, 'highestSize', raidLimitsForDevice.highestSize, true);\n        _this._applyUpdatedValueToDeviceLimits(raidLimitResult, 'maximumSize', raidLimitsForDevice.maximumSize, true);\n    });\n\n    return raidLimitResult;\n};\n\nRaidLimits.prototype._applyUpdatedValueToDeviceLimits = function(container, key, newValue, useMin) {\n    var existingValue = container[key];\n\n    if (!existingValue) {\n        existingValue = newValue;\n    }\n\n    container[key] = (useMin) ? Math.min(existingValue, newValue) : Math.max(existingValue, newValue);\n};\n\nRaidLimits.prototype._FASRaid0Limits = function(deviceSpec) {\n    assert(this._fixDriveType(deviceSpec.type) === 'LUN', 'You must use a LUN for FAS Raid 0.');\n\n    return this._packageResult(8, 8, 14, 14);\n};\n\nRaidLimits.prototype._FASRaid4Limits = function(deviceSpec) {\n    assert(deviceSpec, 'You must provide a drive to determine raid 4 limits for FAS');\n    assert(deviceSpec.type, 'You must provide a drive type to determine raid 4 limits for FAS');\n\n    var driveType = this._fixDriveType(deviceSpec.type);\n\n    switch (driveType) {\n        case 'FC_SAS':\n        case 'SSD':\n            return this._packageResult(8, 8, 8, 14);\n        case 'SATA':\n        case 'NL_SAS':\n        case 'MSATA':\n            return this._packageResult(7, 7, 7, 7);\n        default:\n            throw new Error('Unknown drive type ' + driveType + ' for FAS raid 4 limits.');\n    }\n};\n\nRaidLimits.prototype._FASRaidDPLimits = function(osVersion, deviceSpec) {\n    assert(deviceSpec, 'You must provide a drive to determine raid DP limits for FAS');\n    assert(deviceSpec.type, 'You must provide a device type to determine raid DP limits for FAS');\n    assert(deviceSpec.rsgb, 'You must provide capacity for device to determine raid DP limits for FAS');\n\n    var driveType = this._fixDriveType(deviceSpec.type);\n\n    switch (driveType) {\n        case 'FC_SAS':\n            return this._packageResult(16, 12, 20, 28);\n        case 'SATA':\n        case 'NL_SAS':\n        case 'MSATA':\n            return this._FASRaidDPLimitsForCapacityDrives(osVersion, deviceSpec.rsgb);\n        case 'SSD':\n            return this._packageResult(23, 20, 28, 28);\n        default:\n            throw new Error('Unknown drive type ' + driveType + ' for FAS raid DP limits.');\n    }\n};\n\nRaidLimits.prototype._FASRaidDPLimitsForCapacityDrives = function(osVersion, deviceCapacity) {\n    if (deviceCapacity >= 6000) {\n        return this._packageResult(14, 12, 14, 14);\n    }\n    else if (_.contains(osVersion, '8.')) {\n        return this._packageResult(14, 12, 20, 20);\n    }\n    else {\n        return this._packageResult(14, 12, 16, 16);\n    }\n};\n\nRaidLimits.prototype._packageResult = function(defaultSize, lowestSize, highestSize, hardMax) {\n    return {\n        defaultSize: defaultSize,\n        lowestSize: lowestSize,\n        highestSize: highestSize,\n        maximumSize: hardMax\n    };\n};\n\nRaidLimits.prototype._fixDriveType = function(driveType) {\n    if (driveType) {\n        /*\n            If SAS, FC_SAS is default\n            See: DriveRowExtension.cs -> public static DriveType GetDriveClass(this DM.DriveRow driveRow)\n        */\n        if (driveType.toUpperCase() === 'SAS' || driveType.toUpperCase() === 'FC') {\n            return 'FC_SAS';\n        }\n\n        return driveType.replace('-', '_').toUpperCase();\n    }\n};\n\nRaidLimits.prototype.getEffectiveRaidSize = function getEffectiveRaidSize(hagi, selectedRaidType, withDeviceSpecs, numberOfDevicesForAggregate, policies) {\n    var effectiveRaidLimits = this.findLimits(hagi, selectedRaidType, withDeviceSpecs, numberOfDevicesForAggregate, policies),\n        lastRaidGroupSize = numberOfDevicesForAggregate % effectiveRaidLimits.defaultSize,\n        finalRaidSize = effectiveRaidLimits.defaultSize,\n        raidTypes = this._raidTypes;\n\n    if (lastRaidGroupSize !== 0) {\n        // Handle edgecase (less than maximum size)\n        if (numberOfDevicesForAggregate <= effectiveRaidLimits.maximumSize) {\n            finalRaidSize = Math.min(effectiveRaidLimits.maximumSize, numberOfDevicesForAggregate);\n            return finalRaidSize;\n        }\n\n        // We can do better\n        var raidSizeRange = _.range(effectiveRaidLimits.lowestSize, effectiveRaidLimits.highestSize + 1), // Lets avoid max except for edge-case\n            raidOverheadMap = _.map(raidSizeRange, function(proposedRaidSize) {\n                var fullGroups = Math.floor(numberOfDevicesForAggregate / proposedRaidSize),\n                    lastGroupSize = numberOfDevicesForAggregate % proposedRaidSize,\n                    driveRolesPerRg = raidTypes.driveRolesForRaidType(selectedRaidType, proposedRaidSize),\n                    overheadPerRg = (driveRolesPerRg.parity + driveRolesPerRg.dparity),\n                    totalRaidGroups = (lastGroupSize === 0) ? fullGroups : fullGroups + 1;\n\n                return {\n                    overheadDrives: totalRaidGroups * overheadPerRg,\n                    proposedRaidSize: proposedRaidSize\n                };\n            });\n\n        // We want the lowest number of overhead drives (gives us most capacity)\n        var sortedOverheadMap = _.sortBy(raidOverheadMap, 'overheadDrives');\n\n        finalRaidSize = _.first(sortedOverheadMap).proposedRaidSize;\n    }\n\n    return finalRaidSize;\n};\n\nRaidLimits.prototype.maxTotalDrivesGivenDriveSpecAndAggrMaxUnit = function(maxAggregateCapacityUnit, hagi, selectedRaidType, deviceSpecs, policies) {\n    if (selectedRaidType === this._raidTypes.RAID_5 || selectedRaidType === this._raidTypes.RAID_6) {\n        return 30;\n    }\n\n    var driveSizeUnit = new Unit(deviceSpecs.rsgb, 'GB'),\n        maxDataDrivesByAggregateMaxCapacity = Math.floor(maxAggregateCapacityUnit.value_gb / driveSizeUnit.value_gb);\n\n    return this.totalDrivesGivenDataDriveCountAndRaidTypeForEffectiveRaidSize(\n        maxDataDrivesByAggregateMaxCapacity,\n        hagi,\n        selectedRaidType,\n        deviceSpecs,\n        policies);\n\n};\n\nRaidLimits.prototype.totalDrivesGivenDataDriveCountAndRaidTypeForEffectiveRaidSize = function(dataDriveCount, hagi, selectedRaidType, deviceSpecs, policies) {\n    var parity = this.parityDriveCountNeededGivenDataDriveCountAndRaidType(dataDriveCount, hagi, selectedRaidType, deviceSpecs /*, policies */);\n    var preTotal = dataDriveCount + parity;\n    //TODO: use : var raidSize =\n    this.getEffectiveRaidSize(hagi, selectedRaidType, deviceSpecs, preTotal , policies);\n    return preTotal;\n};\n\nRaidLimits.prototype.parityDriveCountNeededGivenDataDriveCountAndRaidType = function(dataDriveCount, hagi, selectedRaidType, deviceSpecs /*, policies */) {\n    var limits = this.findLimits(hagi, selectedRaidType, deviceSpecs),\n        raidTypes = new RaidTypes(),\n        parity = raidTypes.getParityCountForRaidType(selectedRaidType),\n        maxRaidSize = limits.maximumSize;\n\n    return this.parityDriveCountNeededGivenDataDriveCount(dataDriveCount, maxRaidSize, parity);\n};\n\n/*RaidLimits.prototype.totalDriveCountGivenMaxAggregateSizeAndMaxRaidSize = function (maxAggrSize, maxRaidSize, parityDrivesPerRaidGroup) {\n    var dataDrives = Math.floor(maxAggrSize / maxRaidSize);\n    return dataDrives + this.parityDriveCountNeededGivenDataDriveCount(dataDrives, maxRaidSize, parityDrivesPerRaidGroup);\n};\n\nRaidLimits.prototype.parityDriveCountNeededGivenDataDriveCountAndRaidType = function (dataDriveCount, raidType) {\n    var raidTypes = new RaidTypes(),\n        parity = raidTypes.getParityCountForRaidType(raidType),\n        maxRaidSize = 0;\n\n    return this.parityDriveCountNeededGivenDataDriveCount(dataDriveCount, maxRaidSize, parity);\n};*/\n\nRaidLimits.prototype.parityDriveCountNeededGivenDataDriveCount = function (dataDriveCount, maxRaidSize, parityDrivesPerRaidGroup) {\n    return parityDrivesPerRaidGroup * this.raidGroupCountGivenDataDriveCount(dataDriveCount, maxRaidSize, parityDrivesPerRaidGroup);\n};\n\n// jshint laxbreak: true\nRaidLimits.prototype.raidGroupCountGivenDataDriveCount = function (data, raidSize, parity) {\n    return data >= raidSize\n        ? Math.floor(data/raidSize)\n            + this.raidGroupCountGivenDataDriveCount(\n                parity * Math.floor(data/raidSize) + data%raidSize,\n                raidSize,\n                parity)\n        : data + parity <= raidSize\n        ? 1\n        : 2;\n};\n\nRaidLimits.prototype.minDrivesNeededForDedicatedRootAggregate = function (hagi, driveSpec, raidType) {\n    // see planBase _getDeviceForRootAggregateAccountingForADPIfAvailable to\n    var raidTypes = new RaidTypes(),\n        minRootAggrSizeMib = hagi.limits.aggr.root_aggr_size_mib,\n        minRootAggrSizeUnit = new Unit(minRootAggrSizeMib, 'MiB'),\n        driveUnit = new Unit(driveSpec.rsgb, 'GB'),\n        drivesRequired = Math.ceil(minRootAggrSizeUnit.value_gb / driveUnit.value_gb) +\n            raidTypes.getParityCountForRaidType(raidType),\n        minDrivesForRaidType = raidTypes.minRaidSize(raidType);\n\n    return Math.max(minDrivesForRaidType, drivesRequired);\n};\n\nmodule.exports = RaidLimits;\n","'use strict';\n\nvar _ = require('lodash'),\n    assert = require('assert');\n\nfunction RaidTypes() {\n    _.extend(this, {\n        RAID_0: 'RAID_0',\n        RAID_1: 'RAID_1',\n        RAID_3: 'RAID_3',\n        RAID_4: 'RAID_4',\n        RAID_5: 'RAID_5',\n        RAID_6: 'RAID_6',\n        RAID_10: 'RAID_10',\n        RAID_DP: 'RAID_DP',\n        DDP: 'DDP'\n    });\n}\n\nRaidTypes.prototype.minRaidSize = function minRaidSize(requestedRaidType) {\n    requestedRaidType = this._fixOldRaidTypeIfRequired(requestedRaidType);\n\n    switch (requestedRaidType) {\n        case this.RAID_0:\n        case this.RAID_1:\n        case this.RAID_4:\n            return 2;\n        case this.RAID_2:\n        case this.RAID_3:\n        case this.RAID_5:\n        case this.RAID_DP:\n            return 3;\n        case this.RAID_6:\n        case this.RAID_10:\n            return 4;\n        case this.DDP:\n            return 11;\n        default:\n            return 1;\n    }\n};\n\nRaidTypes.prototype.isMirrored = function isMirrored(requestedRaidType) {\n    requestedRaidType = this._fixOldRaidTypeIfRequired(requestedRaidType);\n\n    switch (requestedRaidType) {\n        case this.RAID_1:\n        case this.RAID_10:\n            return true;\n        default:\n            return false;\n    }\n};\n\nRaidTypes.prototype.firstDriveRoles = function firstDriveRoles(requestedRaidType) {\n    requestedRaidType = this._fixOldRaidTypeIfRequired(requestedRaidType);\n\n    return this._raidMaps[requestedRaidType];\n};\n\nRaidTypes.prototype.driveRolesForRaidType = function driveRolesForRaidType(requestedRaidType, drivesInRaidGroup) {\n    requestedRaidType = this._fixOldRaidTypeIfRequired(requestedRaidType);\n\n    var parityCount = this._howManyOfThisRoleForRaidType(requestedRaidType, 'parity'),\n        dparityCount = this._howManyOfThisRoleForRaidType(requestedRaidType, 'dparity'),\n        data = drivesInRaidGroup - parityCount - dparityCount;\n\n    return {\n        parity: parityCount,\n        dparity: dparityCount,\n        data: data\n    };\n};\n\nRaidTypes.prototype._fixOldRaidTypeIfRequired = function _fixOldRaidTypeIfRequired(requestedRaidType) {\n    return this._intRaidTypeToString(requestedRaidType);\n};\n\nRaidTypes.prototype._intRaidTypeToString = function _intRaidTypeToString(requestedRaidType) {\n    if (this._isInt(requestedRaidType)) {\n        var typeToIntMap = [\n            'RAID_0',\n            'RAID_1',\n            'RAID_3',\n            'RAID_4',\n            'RAID_5',\n            'RAID_6',\n            'RAID_10',\n            'RAID_DP',\n            'DDP'\n        ];\n\n        return typeToIntMap[requestedRaidType];\n    }\n    else {\n        return requestedRaidType;\n    }\n};\n\nRaidTypes.prototype._isInt = function _isInt(n) {\n    return Number(n) === n && n % 1 === 0;\n};\n\nRaidTypes.prototype._howManyOfThisRoleForRaidType = function _howManyOfThisRoleForRaidType(requestedRaidType, role) {\n    assert(role !== 'data', 'do not use this for data, look for everything else and data is what is left over');\n    requestedRaidType = this._fixOldRaidTypeIfRequired(requestedRaidType);\n\n    var rolesForRaidType = _.where(this.firstDriveRoles(requestedRaidType), function(driveRole) {\n        return driveRole === role;\n    });\n\n    return rolesForRaidType.length;\n};\n\nRaidTypes.prototype._raidMaps = {\n    RAID_0: ['data'],\n    RAID_1: ['data'],\n    RAID_3: ['parity', 'data'],\n    RAID_4: ['parity', 'data'],\n    RAID_5: ['parity', 'data'],\n    RAID_6: ['parity', 'dparity', 'data'],\n    RAID_10: ['data'],\n    RAID_DP: ['parity', 'dparity', 'data'],\n    DDP: ['data']\n};\n\nRaidTypes.prototype._getDdpReserveRecommendation = function(driveCount) {\n    if (driveCount <= 11) {\n        return 1;\n    } else if (driveCount <= 31) {\n        return 2;\n    } else if (driveCount <= 63) {\n        return 3;\n    } else if (driveCount <= 127) {\n        return 4;\n    } else if (driveCount <= 191) {\n        return 6;\n    } else if (driveCount <= 255) {\n        return 7;\n    } else if (driveCount <= 384) {\n        return 8;\n    } else {\n        return Math.min(Math.ceil(driveCount * 0.2), 10);\n    }\n};\n\nRaidTypes.prototype.getParityCountForRaidType = function(raidType) {\n    // TODO do these roles properly coorespondingly mirror drives 'parity' like in _raidMaps?\n    // mirroring RaidTypes we need to actually multiply ceil(raidSize * 0.5) mirror/parity\n    return this._howManyOfThisRoleForRaidType(raidType, 'parity') +\n        this._howManyOfThisRoleForRaidType(raidType, 'dparity');\n};\n\nmodule.exports = RaidTypes;\n","'use strict';\n\nvar _ = require('lodash'),\n    assert = require('assert'),\n    AggregateReporter = require('./aggregateReporter.js');\n\nfunction SystemSummary(map, hagroups) {\n    assert(hagroups instanceof Array, '87f630a2');\n    assert(_.has(map, 'inspect'), 'e6f2781c');\n    this._selectedHaGroups = hagroups;\n    this.inspect = map.inspect;\n}\n\nSystemSummary.prototype.createSystemSummary = function() {\n    var _this = this,\n        summary = {\n            total: 0,\n            rawCapacity: 0.0,\n            usableCapacity: 0.0,\n            spareCount: 0,\n            driveRoleSummary: {\n                physical: {\n                    total: 0,\n                    data: 0,\n                    parity: 0,\n                    dparity: 0,\n                    cache: 0,\n                    root: 0,\n                    spare: 0\n                },\n                virtual: {\n                    total: 0,\n                    data: 0,\n                    parity: 0,\n                    dparity: 0,\n                    cache: 0,\n                    root: 0,\n                    spare: 0\n                }\n            },\n            performanceSummary: {\n                total: 0,\n                rawCapacity: 0.0,\n                usableCapacity: 0.0,\n                driveCapacitySummaryByType: []\n            },\n            capacitySummary: {\n                total: 0,\n                rawCapacity: 0.0,\n                usableCapacity: 0.0,\n                driveCapacitySummaryByType: []\n            },\n            ssdSummary: {\n                total: 0,\n                rawCapacity: 0.0,\n                usableCapacity: 0.0,\n                driveCapacitySummaryByType: []\n            }\n        };\n\n    _.forEach(_this._selectedHaGroups, function(hagroup) {\n        var hagi = _this.inspect(hagroup),\n            physicalDevices = hagi.allPhysicalDevices(),\n            physicalSpares = hagi.deviceInfo.where.spare.and.physical,\n            virtualSpares = hagi.deviceInfo.where.spare.and.virtual;\n\n        _this._populateSystemSummaryWithPhysicalDevices(hagi, summary, physicalDevices);\n        summary.driveRoleSummary.physical.spare += physicalSpares.length;\n        summary.driveRoleSummary.physical.total += physicalSpares.length;\n        summary.driveRoleSummary.virtual.spare += virtualSpares.length;\n        summary.driveRoleSummary.virtual.total += virtualSpares.length;\n\n        _.forEach(hagroup.controllers, function(controller) {\n            _.forEach(controller.aggregates, function(aggregate) {\n                _this._updateSystemSummaryUsingGivenAggregate(hagi, summary, aggregate);\n            });\n        });\n    });\n\n    return summary;\n};\n\nSystemSummary.prototype._populateSystemSummaryWithPhysicalDevices = function(hagi, summary, physicalDevices) {\n    var _this = this;\n\n    _.forEach(physicalDevices, function(device) {\n        var howManyOfTheseDevices = device.devices.length,\n            totalRawCapacityForDevice = howManyOfTheseDevices * device.spec.rawgb;\n\n        // Update Master Totals\n        summary.total += howManyOfTheseDevices;\n        summary.rawCapacity += totalRawCapacityForDevice;\n\n        // Update Device Class Totals\n        var physicalDeviceType = device.spec.type,\n            isDeviceSSD = (physicalDeviceType === 'SSD'),\n            isDevicePerformance = hagi.lookup.isDeviceTypePerformance(physicalDeviceType);\n\n        if (isDeviceSSD) {\n            _this._updateDeviceClassRawSummary(summary.ssdSummary, device.spec, howManyOfTheseDevices, totalRawCapacityForDevice);\n        }\n        else if (isDevicePerformance) {\n            _this._updateDeviceClassRawSummary(summary.performanceSummary, device.spec, howManyOfTheseDevices, totalRawCapacityForDevice);\n        }\n        else {\n            _this._updateDeviceClassRawSummary(summary.capacitySummary, device.spec, howManyOfTheseDevices, totalRawCapacityForDevice);\n        }\n    });\n};\n\nSystemSummary.prototype._updateDeviceClassRawSummary = function(deviceClassSummary, deviceSpec, deviceCount, deviceTotalRawCapacityContribution) {\n    deviceClassSummary.total += deviceCount;\n    deviceClassSummary.rawCapacity += deviceTotalRawCapacityContribution;\n\n    // rawgb, count, type\n    var existingDeviceSummary = _.where(deviceClassSummary.driveCapacitySummaryByType, function(summaryByType) {\n        return summaryByType.rawgb === deviceSpec.rawgb && summaryByType.type === deviceSpec.type;\n    });\n\n    if (existingDeviceSummary.length > 0) {\n        var existingIndex = _.indexOf(deviceClassSummary.driveCapacitySummaryByType, _.first(existingDeviceSummary));\n\n        deviceClassSummary.driveCapacitySummaryByType[existingIndex].count += deviceCount;\n    }\n    else {\n        // New\n        deviceClassSummary.driveCapacitySummaryByType.push({\n            rawgb: deviceSpec.rawgb,\n            count: deviceCount,\n            type: deviceSpec.type\n        });\n    }\n};\n\n\nSystemSummary.prototype._updateSystemSummaryUsingGivenAggregate = function(hagi, summary, aggregate) {\n    var aggregateReporter = new AggregateReporter(hagi),\n        aggregateReport = aggregateReporter.createAggregateReport(aggregate),\n        aggregateSummary = aggregateReport.summary,\n        _this = this;\n\n    // NOTE: We are only update _usable_ capacities\n    if (!aggregateSummary.isRootAggregate) {\n        // Update Master Total\n        summary.usableCapacity += aggregateSummary.usableCapacity;\n\n        _.forEach(_.keys(aggregateSummary.driveRoleSummary.physical), function(driveRole) {\n            summary.driveRoleSummary.physical[driveRole] += _this._nullToZero(aggregateSummary.driveRoleSummary.physical[driveRole]);\n        });\n        _.forEach(_.keys(aggregateSummary.driveRoleSummary.virtual), function(driveRole) {\n            summary.driveRoleSummary.virtual[driveRole] += _this._nullToZero(aggregateSummary.driveRoleSummary.virtual[driveRole]);\n        });\n\n        _.forEach(_.keys(aggregateSummary.usableCapacityByType), function(aggrDeviceType) {\n            // Update Device Class Totals\n            var isDeviceSSD = (aggrDeviceType === 'SSD'),\n                isDevicePerformance = hagi.lookup.isDeviceTypePerformance(aggrDeviceType),\n                usableCapacityForType = aggregateSummary.usableCapacityByType[aggrDeviceType];\n\n            if (isDeviceSSD) {\n                summary.ssdSummary.usableCapacity += usableCapacityForType;\n            }\n            else if (isDevicePerformance) {\n                summary.performanceSummary.usableCapacity += usableCapacityForType;\n            }\n            else {\n                summary.capacitySummary.usableCapacity += usableCapacityForType;\n            }\n        });\n    } else {\n        summary.driveRoleSummary.physical.root += _this._nullToZero(aggregateSummary.driveRoleSummary.physical.total);\n        summary.driveRoleSummary.physical.total += _this._nullToZero(aggregateSummary.driveRoleSummary.physical.total);\n        summary.driveRoleSummary.virtual.root += _this._nullToZero(aggregateSummary.driveRoleSummary.virtual.total);\n        summary.driveRoleSummary.virtual.total += _this._nullToZero(aggregateSummary.driveRoleSummary.virtual.total);\n    }\n};\n\nSystemSummary.prototype._nullToZero = function(val) {\n    if (val === undefined || val === null) {\n        return 0.0;\n    }\n    else {\n        return val;\n    }\n};\n\nmodule.exports = SystemSummary;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash');\n\nvar MAX_ROOT_SLICE_DEVICES = 48;\n\nfunction Builder() {\n    assert(false, 'mixin; do not use in isolation');\n}\n\nBuilder.prototype._applyADPAndAddAggregates = function _applyADPAndAddAggregates(hagroup) {\n    var map = this._makeNewMap(),\n        hagi = map.inspect(hagroup);\n\n    stripAutomaticStoragePools(hagi);\n    stripAutomaticAggregates(hagi);\n    stripAssignedStorage(hagi);\n    makeAssignmentsForADP(hagi);\n\n    // Rehydrate the map here, TODO: Extract this call in develop to account for turning off ADP/Aggregates which is broken right now\n    map.rehydrate();\n\n    // repair manual aggregates\n    // build automatic aggregates, (includes making assignments)\n    \n    this._buildAggregates(hagroup);\n    // this.assignFlashPoolWhereAvailable(hagroup);\n};\n\nfunction stripAutomaticAggregates(hagi) {\n    _.forEach(hagi.hagroup.controllers, function (controller) {\n        controller.aggregates = _.where(controller.aggregates, {\n            _manual: true\n        });\n    });\n}\n\nfunction stripAutomaticStoragePools(hagi) {\n    _.forEach(hagi.hagroup.controllers, function (controller) {\n        controller.storage_pools = _.where(controller.storage_pools, {\n            _manual: true\n        });\n    });\n}\n\nvar BLOCKS_PER_MiB = 1024 / 4,                   // 4kB per block\n    BLOCKS_PER_GiB = 1024 * BLOCKS_PER_MiB,\n    GB_PER_GiB = 1.073741824,\n    BLOCKS_PER_GB = BLOCKS_PER_GiB / GB_PER_GiB, // because rsgb is in GB\n    DRIVE_LABEL_BLOCKS = 20.5 * BLOCKS_PER_MiB,\n    SLICE_PAD_BLOCKS = 8 * BLOCKS_PER_MiB;\n\nfunction makeAssignmentsForADP(hagi) {\n    var policies = hagi.hagroup._policies || {},\n        adp = policies.ADP || {};\n\n    if(adp.prohibitedByUser) {\n        return;\n    }\n\n    var adpSpec = getADPDriveSpec(hagi);\n\n    if (!adpSpec) {\n        return;\n    }\n\n    var limits = hagi.limits,\n        devices = _(adpSpec.shelves)\n            .map('_x_bom')\n            .map('drive_spec_members')\n            .flatten()\n            .first(MAX_ROOT_SLICE_DEVICES)\n            .value();\n\n    if (!adpDevicesWithinSpec(devices)) {\n        return;\n    }\n\n    var driveCount = devices.length,\n        blocksPerDrive = adpSpec.driveSpec.rsgb * BLOCKS_PER_GB,\n        rootSliceBlocksTotal = limits.aggr.root_aggr_size_mib * BLOCKS_PER_MiB,\n        rootSliceCounts = getRootSliceCounts(driveCount),\n        dataCount = rootSliceCounts.data,\n        unalignedRootSliceBlocks = Math.floor(rootSliceBlocksTotal / dataCount) + DRIVE_LABEL_BLOCKS + SLICE_PAD_BLOCKS,\n        rootSliceBlocks = alignBlockCount(unalignedRootSliceBlocks) - SLICE_PAD_BLOCKS,\n        // DRIVE_LABEL_BLOCKS - 2*SLICE_PAD_BLOCKS => 36.5GiB constant from Skip sheet K column\n        dataSliceBlocks = alignBlockCount(blocksPerDrive - rootSliceBlocks - DRIVE_LABEL_BLOCKS - 2*SLICE_PAD_BLOCKS),\n        rootDevices = _.map(devices, _.partial(makeSliceId, 2)), // Root partition 2\n        dataDevices = _.map(devices, _.partial(makeSliceId, 1)); // Data partition 1\n\n    // TODO: match ONTAP's odd/even strategy\n\n    _.forEach(hagi.hagroup.controllers, function assignRootSlices(controller) {\n        assign(controller, 'P2', rootSliceBlocks, rootDevices, rootSliceCounts.total);\n    });\n\n    if (driveCount === 12) {\n        // active-passive\n        assign(hagi.hagroup.controllers[0], 'P1', dataSliceBlocks, dataDevices, null);\n    } else {\n        // active-active\n        _.forEach(hagi.hagroup.controllers, function assignDataSlices(controller) {\n            assign(controller, 'P1', dataSliceBlocks, dataDevices, rootSliceCounts.total);\n        });\n    }\n\n    // fill controller._assigned_storage accordingly\n    // aggregate building will perform additional storage assignment\n\n    function makeSliceId(sliceNumber, deviceId) {\n        return deviceId + 'P' + sliceNumber;\n    }\n}\n\nfunction assign(controller, slice, sliceBlocks, devices, count) {\n    if (!count) {\n        count = devices.length;\n    }\n\n    controller._assigned_storage.push({\n        slice_details: {\n            slice: slice,\n            used_blocks: sliceBlocks,\n            devices: devices.splice(0, count)\n        }\n    });\n}\n\nfunction alignBlockCount(blockCount) {\n    return blockCount - (blockCount % 64);\n}\n\nfunction adpDevicesWithinSpec(devices) {\n    var validDeviceCounts = [12, 24, 48];\n\n    return devices && _.contains(validDeviceCounts, devices.length);\n}\n\nfunction getRootSliceCounts(ofDrives) {\n    switch (ofDrives) {\n        case 12: return { data: 3, parity: 2, spare: 1, total: 6 };\n        case 24: return { data: 8, parity: 2, spare: 2, total: 12 };\n        case 48: return { data: 20, parity: 2, spare: 2, total: 24 };\n        default: assert(false, ofDrives + ' drives not supported');\n    }\n}\n\nfunction getADPDriveSpec(hagi) {\n    var allShelves = hagi.hagroup.shelves,\n        firstShelf = allShelves[0],\n        allShelvesAreSSDOnly = _.every(allShelves, isSSDOnly),\n        matchesFirstShelf = _.partial(specsMatch, firstShelf),\n        allShelvesMatch = _.every(allShelves, matchesFirstShelf),\n        isSuspectedAllFlashFAS = allShelvesAreSSDOnly && allShelvesMatch,\n        singleSpecEmbedded = _.filter(allShelves, isSingleSpecEmbedded),\n        embeddedSpecIsSSD = isEmbeddedSSDOnly(singleSpecEmbedded);\n\n    var candidateShelves = isSuspectedAllFlashFAS ? allShelves : singleSpecEmbedded;\n\n    if (!candidateShelves.length) {\n        return null;\n    }\n\n    var exampleShelf = candidateShelves[0],\n        exampleDrive = exampleShelf._x_bom.drive_specs[0];\n\n    var matrix = hagi.config.matrix,\n        compatInfo = matrix.checkVersionShelfDrive(hagi.hagroup.version,\n                                                   exampleShelf.model,\n                                                   exampleDrive.model);\n        \n    if (!compatInfo.root_slicing) {\n        return null;\n    }\n\n    if (!isSuspectedAllFlashFAS && embeddedSpecIsSSD) {\n        // Per Changjie, we do not allow non-AFF systems with embedded SSD to be slices\n        return null;\n    }\n\n    return {\n        driveSpec: _.omit(exampleDrive, 'quantity'),\n        shelves: candidateShelves,\n    };\n}\n\nfunction isEmbeddedSSDOnly(shelf) {\n    if (!shelf || shelf.length === 0) {\n        return false;\n    }\n\n    var embeddedShelf = _.first(shelf);\n\n    if (!embeddedShelf._isembedded) {\n        return false;\n    }\n\n    return isSSDOnly(embeddedShelf);\n}\n\nfunction isSingleSpecEmbedded(shelf) {\n    return isSingleSpec(shelf) && shelf._isembedded;\n}\n\nfunction isSSDOnly(shelf) {\n    return shelf &&\n           isSingleSpec(shelf) &&\n           shelf._x_bom.drive_specs[0].type === 'SSD';\n}\n\nfunction isSingleSpec(shelf) {\n    return shelf._x_bom.drive_specs.length === 1;\n}\n\nfunction specsMatch(shelf1, shelf2) {\n    // TODO: simplistic; must match model as well as spec\n    // WARN: fixing above will require logic changes in getADPDriveSpec\n    return shelf1 &&\n           shelf2 &&\n           _.isEqual(shelf1._x_bom.drive_specs, shelf2._x_bom.drive_specs);\n}\n\nfunction stripAssignedStorage(hagi) {\n     _.forEach(hagi.hagroup.controllers, function (controller) {\n        controller._assigned_storage = [];\n    });\n}\n\nmodule.exports = Builder;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    util = require('util'),\n    RaidTypes = require('../aggregates/raid-types'),\n    Unit = require('../../units');\n\nvar MIN_DISKS_FP = 3,\n    MIN_DISK_WIDTH_SP = 2,\n    MAX_DISK_WIDTH_SP = 28,\n    SLICES_PER_SP = 4;\n\nfunction Builder() {\n    assert(false, 'mixin; do not use in isolation');\n}\n\nBuilder.prototype.assignFlashPoolWhereAvailable = function assignFlashPoolWhereAvailable(hagroup) {\n    var map = this._makeNewMap(),\n        hagi = map.inspect(hagroup),\n        isFAS = !hagi.isESeries && !hagi.isFlashRay,\n        isFullsteamPlus = this._isFullsteamPlus(hagi),\n        buildFlashPool = (isFullsteamPlus) ? this._buildStoragePools : this._buildClassicFPRaidGroups,\n        availableDevices = hagi.availablePhysicalDevices(),\n        availableFPDevices = this._filterDevicesForFlashPool(availableDevices),\n        haveAvailableSSDs = availableFPDevices && availableFPDevices.length > 0,\n        existingDataAggregates = this._existingDataAggregates(hagroup),\n        userWantsFlashPools = this._flashPoolPolicy(hagroup);\n\n    this.MIN_DISKS_FP = hagi.lookup.minimumFPDevicesForAggregate;\n\n    if (isFAS && haveAvailableSSDs && userWantsFlashPools) {\n        buildFlashPool(existingDataAggregates, availableFPDevices);\n    }\n};\n\nBuilder.prototype._flashPoolPolicy = function _flashPoolPolicy(hagroup) {\n    var defaultValue = true,\n        policies = hagroup._policies;\n\n    if (policies && policies.Aggregates) {\n        return policies.Aggregates.ssdsForFlashPool;\n    }\n\n    return defaultValue;\n};\n\nBuilder.prototype._buildStoragePools = function _buildStoragePools(dataAggregates, availableFPDevices) {\n    var allocations = this._determineFPStoragePoolAllocation(dataAggregates, availableFPDevices),\n        fpStoragePoolIds = [],\n        _this = this;\n\n    // console.log('storage pool allocation plan: ', _.clone(allocations));\n    _.forEach(allocations, function(allocation) {\n        /*\n        {\n            willServeAggregates: howManyAggregatesToServe,\n            storagePoolCount: storagePoolCount,\n            devicesPerStoragePool: deviceCountPerSP,\n            leftovers: leftovers\n        }\n        */\n\n        // Build and assign storage pools / aggregates for devices\n        _.forEach(_.range(1, allocation.storagePoolCount + 1), function() {\n            var numberOfAggregates = Math.min(allocation.willServeAggregates.length, SLICES_PER_SP),\n                aggregateIds = _.take(allocation.willServeAggregates, numberOfAggregates),\n                controller = _this._findControllerWhoOwnsAggregate(_.first(aggregateIds)), // We can use storage pools across HAPair, so we just need A controller\n                devicesPerPool = allocation.devicesPerStoragePool,\n                effectiveRaidType = _this._raidTypeGivenDeviceConstraints(devicesPerPool);\n\n            var newStoragePoolId = _this.addStoragePool(controller._id, allocation.physicalDeviceSpec, effectiveRaidType, devicesPerPool, false);\n\n            _this._takeSlicesForAggregates(newStoragePoolId, aggregateIds); // allocation.willServeAggregates\n            fpStoragePoolIds.push(newStoragePoolId);\n\n            // NOTE: When you have 2 aggregates, spread across 2 storage pools -- this will FAIL if you try to build the next one with no aggrs\n            var aggrDelta = _.difference(allocation.willServeAggregates, aggregateIds);\n\n            if (aggrDelta.length > 0) {\n                allocation.willServeAggregates = _.difference(allocation.willServeAggregates, aggregateIds);\n            }\n        });\n    });\n\n    return fpStoragePoolIds;\n};\n\nBuilder.prototype._buildClassicFPRaidGroups = function _buildClassicFPRaidGroups(dataAggregates, availableFPDevices) {\n    var allocations = this._determineFPRaidGroupAllocation(dataAggregates, availableFPDevices),\n        fpRaidGroupIds = [],\n        _this = this;\n\n    _.forEach(allocations, function(allocation) {\n        _.forEach(allocation.willServeAggregates, function(aggregateId) {\n            var deviceCount = allocation.devicesPerAggregate,\n                deviceSpec = allocation.physicalDeviceSpec,\n                effectiveRaidType = _this._raidTypeGivenDeviceConstraints(deviceCount);\n\n            if (_.first(allocation.willServeAggregates) === aggregateId) {\n                deviceCount += allocation.leftovers; // Give the first whatever leftovers we had\n            }\n\n            var newRaidGroupId = _this.addFlashPoolRaidGroupToAggregate(aggregateId, effectiveRaidType, deviceSpec, deviceCount);\n\n            fpRaidGroupIds.push(newRaidGroupId);\n        });\n    });\n\n    return fpRaidGroupIds;\n};\n\nBuilder.prototype._raidTypeGivenDeviceConstraints = function _raidTypeGivenDeviceConstraints(deviceCount) {\n    var raidTypes = new RaidTypes(),\n        preferredRaidType = raidTypes.RAID_DP, // Per Changjie\n        prohibitedRaidTypes = [raidTypes.RAID_0, raidTypes.RAID_1]; // Per Changjie\n\n    if (deviceCount < raidTypes.minRaidSize(preferredRaidType)) {\n        var raidTypeMinimumsMap = _.map(_.keys(raidTypes), function(raidType) {\n                return {\n                    raidType: raidType,\n                    minimum: raidTypes.minRaidSize(raidType)\n                };\n            }),\n            raidTypesWithConstraint = _.where(raidTypeMinimumsMap, function(raidTypeItem) {\n                return raidTypeItem.minimum <= deviceCount && !_.contains(prohibitedRaidTypes, raidTypeItem.raidType);\n            });\n\n        assert(raidTypesWithConstraint.length > 0, 'Unable to find any raid type given constraint for ' + deviceCount + ' devices');\n\n        return _.first(_.sortBy(raidTypesWithConstraint)).raidType;\n    }\n\n    return preferredRaidType;\n};\n\nBuilder.prototype._takeSlicesForAggregates = function _takeSlicesForAggregates(storagePoolId, aggregateIds) {\n    assert(aggregateIds, 'Must provide aggregates to take storage pool slices for');\n    assert(aggregateIds.length <= SLICES_PER_SP, 'Cannot exceed ' + SLICES_PER_SP + ' aggregates being assigned per pool');\n\n    var storagePool = this._findStoragePoolById(storagePoolId),\n        newAggrAssignments = {},\n        aggrIdsToAssign = this._fullyUtilizeStoragePoolGivenAggregates(aggregateIds),\n        _this = this;\n\n    _.forEach(_.range(0, SLICES_PER_SP), function(sliceIndex) {\n        var aggrIdToAssign = aggrIdsToAssign[sliceIndex],\n            storagePoolRaidType = storagePool.raid_type,\n            spRaidWidth = storagePool._allocations[sliceIndex].devices.length,\n            spRaidGroupDeviceSpec = _.first(storagePool._allocations[sliceIndex].__deviceSpecs).spec,\n            newSpRaidGroup = _this.addFlashPoolRaidGroupToAggregate(aggrIdToAssign, storagePoolRaidType, spRaidGroupDeviceSpec, spRaidWidth);\n\n        if (newSpRaidGroup) {\n            storagePool._allocations[sliceIndex].aggr_id = aggrIdToAssign;\n\n            if (!newAggrAssignments[aggrIdToAssign]) {\n                newAggrAssignments[aggrIdToAssign] = [];\n            }\n\n            newAggrAssignments[aggrIdToAssign].push(newSpRaidGroup);\n        }\n    });\n\n    return newAggrAssignments;\n};\n\nBuilder.prototype._deviceSpecFromAllocationUnit = function _deviceSpecFromAllocationUnit(storagePoolId, sliceName, allocationUnit, storagePoolDeviceSpec) {\n    var sliceCapacityGb = new Unit(4, 'KiB').mult(allocationUnit.used_blocks).value_gb,\n        clonedDeviceSpec = _.clone(storagePoolDeviceSpec);\n\n    clonedDeviceSpec = _.merge(clonedDeviceSpec, {\n        rsgb: sliceCapacityGb,\n        slice: sliceName,\n        _for_storage_pool: storagePoolId\n    });\n\n    return clonedDeviceSpec;\n};\n\nBuilder.prototype._fullyUtilizeStoragePoolGivenAggregates = function _fullyUtilizeStoragePoolGivenAggregates(aggregatesToAssign) {\n    var leftoverSlices = SLICES_PER_SP - aggregatesToAssign.length;\n\n    if (leftoverSlices > 0) {\n        var aggrIndex = 0;\n\n        var extraAllocations = _.map(_.range(0, leftoverSlices), function(leftoverIndex) {\n            if (leftoverIndex + 1 > aggregatesToAssign.length) {\n                aggrIndex = 0; // Reset\n            }\n\n            return aggregatesToAssign[aggrIndex++];\n        });\n\n        aggregatesToAssign.push.apply(aggregatesToAssign, extraAllocations);\n    }\n\n    return aggregatesToAssign;\n};\n\nBuilder.prototype._determineFPStoragePoolAllocation = function _determineFPStoragePoolAllocation(dataAggregates, availableFPDevices) {\n    var spAllocations = [],\n        allAggregateIds = _.map(dataAggregates, '_id'),\n        numberOfAggregates = dataAggregates.length,\n        numberOfDevices = this._totalNumberOfDevices(availableFPDevices),\n        _this = this;\n\n    _.forEach(availableFPDevices, function(device) {\n        if (device.devices.length < MIN_DISK_WIDTH_SP) {\n            return; // Nothing to do here\n        }\n\n        if (!device.spec.fp_support) {\n            return;\n        }\n\n        var fpAllocationForDevice = _this._devicesPerFPStoragePool(device, numberOfAggregates, numberOfDevices),\n            packaged = _this._mergeAndPackageFPAllocationForDevice(device, fpAllocationForDevice, allAggregateIds);\n\n        if (packaged) {\n            spAllocations.push(packaged);\n        }\n    });\n\n    return spAllocations;\n};\n\nBuilder.prototype._determineFPRaidGroupAllocation = function _determineFPRaidGroupAllocation(dataAggregates, availableFPDevices) {\n    var rgAllocations = [],\n        allAggregateIds = _.map(dataAggregates, '_id'),\n        numberOfAggregates = dataAggregates.length,\n        numberOfDevices = this._totalNumberOfDevices(availableFPDevices),\n        _this = this;\n\n    _.forEach(availableFPDevices, function(device) {\n        var fpAllocationForDevice = _this._devicesPerFPRaidGroupAggregate(device, numberOfAggregates, numberOfDevices),\n            packaged = _this._mergeAndPackageFPAllocationForDevice(device, fpAllocationForDevice, allAggregateIds);\n\n        if (packaged) {\n            rgAllocations.push(packaged);\n        }\n    });\n\n    return rgAllocations;\n};\n\nBuilder.prototype._mergeAndPackageFPAllocationForDevice = function _mergeAndPackageFPAllocationForDevice(device, fpAllocationForDevice, allAggregateIds) {\n    if (fpAllocationForDevice && fpAllocationForDevice.willServeAggregates > 0) {\n        _.merge(fpAllocationForDevice, {\n            willServeAggregates: _.take(allAggregateIds, fpAllocationForDevice.willServeAggregates),\n            physicalDeviceSpec: device.spec\n        });\n\n        allAggregateIds = _.without(allAggregateIds, fpAllocationForDevice.willServeAggregates);\n\n        return fpAllocationForDevice;\n    }\n\n    return null;\n};\n\nBuilder.prototype._devicesPerFPStoragePool = function _devicesPerFPStoragePool(device, totalAggregates, totalDevices) {\n    var deviceCount = device.devices.length,\n        proportionOfDevices = deviceCount / totalDevices,\n        howManyAggregatesToServe = Math.floor(totalAggregates * proportionOfDevices),\n        storagePoolCount = Math.ceil(howManyAggregatesToServe / SLICES_PER_SP),\n        deviceCountPerSP = Math.floor(deviceCount / storagePoolCount),\n        leftovers = deviceCount - (deviceCountPerSP * storagePoolCount);\n\n    /*\n        Ex. 2 aggregates, 8 devices\n    */\n\n    // EDGE CASE: We can hand out more disks to storage pools\n    if (leftovers % storagePoolCount === 0 && leftovers > 0) {\n        deviceCountPerSP += (leftovers / storagePoolCount);\n    }\n\n    // EDGE CASE: Per storage pool width too low\n    if (deviceCountPerSP < MIN_DISK_WIDTH_SP) {\n        while (deviceCountPerSP < MIN_DISK_WIDTH_SP) {\n            storagePoolCount--;\n            deviceCountPerSP = Math.floor(deviceCountPerSP / storagePoolCount);\n\n            if (storagePoolCount === 0) {\n                // No storage pools to build\n                deviceCountPerSP = 0;\n                break;\n            }\n        }\n    }\n\n    // EDGE CASE: Per storage pool width too wide\n    if (deviceCountPerSP > MAX_DISK_WIDTH_SP) {\n        while (deviceCountPerSP > MAX_DISK_WIDTH_SP) {\n            storagePoolCount++;\n            deviceCountPerSP = Math.floor(deviceCountPerSP / storagePoolCount);\n\n            if (deviceCountPerSP === Infinity) {\n                // We jumped the shark\n                deviceCountPerSP = 0;\n                break;\n            }\n        }\n    }\n\n    // EDGE CASE: A single storage pool, with leftovers\n    if (storagePoolCount === 1) {\n        deviceCountPerSP += leftovers;\n        leftovers = 0;\n    }\n\n    return {\n        willServeAggregates: howManyAggregatesToServe,\n        storagePoolCount: storagePoolCount,\n        devicesPerStoragePool: deviceCountPerSP,\n        leftovers: leftovers\n    };\n};\n\nBuilder.prototype._devicesPerFPRaidGroupAggregate = function _devicesPerFPRaidGroupAggregate(device, totalAggregates, totalDevices) {\n    var deviceCount = device.devices.length,\n        proportionOfDevices = Math.floor(deviceCount / totalDevices),\n        howManyAggregatesToServe = Math.floor(totalAggregates * proportionOfDevices),\n        perAggregateAllocation = Math.floor(deviceCount / howManyAggregatesToServe),\n        leftovers = deviceCount - (perAggregateAllocation * howManyAggregatesToServe);\n\n    if (deviceCount < MIN_DISKS_FP) {\n        console.warn(util.format('Cannot allocate %s disks, minimum is %s', deviceCount, MIN_DISKS_FP));\n        return null; // Cannot do anything\n    }\n\n    // EDGE CASE: We can give 1 more disk to each\n    if (leftovers % howManyAggregatesToServe === 0 && leftovers > 0) {\n        perAggregateAllocation += (leftovers / howManyAggregatesToServe);\n        leftovers = 0;\n    }\n\n    // EDGE CASE: per aggr allocation below min, reduce aggrs we can support\n    if (perAggregateAllocation < MIN_DISKS_FP) {\n        while (perAggregateAllocation < MIN_DISKS_FP) {\n            howManyAggregatesToServe--;\n            perAggregateAllocation++;\n        }\n    }\n\n    // EDGE CASE: We are serving 1 aggregate, with leftovers\n    if (howManyAggregatesToServe === 1) {\n        perAggregateAllocation += leftovers;\n        leftovers = 0;\n    }\n\n    return {\n        willServeAggregates: howManyAggregatesToServe,\n        devicesPerAggregate: perAggregateAllocation,\n        leftovers: leftovers\n    };\n};\n\nBuilder.prototype._isFullsteamPlus = function _isFullsteamPlus(hagi) {\n    var floatVersion = parseFloat(hagi.versionNumber);\n\n    if (floatVersion >= 8.3) {\n        return true;\n    }\n    else {\n        return false;\n    }\n};\n\nBuilder.prototype._existingDataAggregates = function _existingDataAggregates(hagroup) {\n    var allAggregates = _.flatten(_.map(hagroup.controllers, function(controller) {\n        return (controller.aggregates) ? controller.aggregates : [];\n    }));\n\n    return _.where(allAggregates, function(aggregate) {\n        var aggregateDriveDetail = _.flatten(_.map(aggregate._raid_groups, function(raidGroup) {\n                    var allSupportFlashPool = _.every(_.map(raidGroup.__deviceSpecs, function(device) {\n                        return device.spec.fp_support;\n                    })),\n                    uniqueDriveTypes = _.uniq(_.map(raidGroup.__deviceSpecs, function(device) {\n                        return device.spec.type;\n                    })),\n                    areNotJustSSDs = (uniqueDriveTypes.length === 1 && _.first(uniqueDriveTypes) === 'SSD') ? false : true;\n\n                return {\n                    supportsFlashPool: allSupportFlashPool,\n                    notJustSSDs: areNotJustSSDs\n                };\n            }));\n\n        return !aggregate._isManual && !aggregate.is_root_aggregate && _.every(aggregateDriveDetail, 'supportsFlashPool') && _.every(aggregateDriveDetail, 'notJustSSDs');\n    });\n};\n\nBuilder.prototype._totalNumberOfDevices = function _totalNumberOfDevices(availableFPDevices) {\n    var mappedCounts = _.map(availableFPDevices, function(item) {\n        return item.devices.length;\n    });\n\n    return _.reduce(mappedCounts, function(count, item) { return count + item; });\n};\n\nBuilder.prototype._filterDevicesForFlashPool = function _availableDevicesForFlashPool(availableDevices) {\n    return _.where(availableDevices, function(device) {\n        return device.spec.fp_support && device.spec.type === 'SSD';\n    });\n};\n\nmodule.exports = Builder;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    util = require('util'),\n    uuid = require('uuid'),\n    Unit = require('../../units');\n\nvar MAX_SLICE_WIDTH_DEVICES = 28,\n    MIN_SLICE_WIDTH_DEVICES = 2,\n    SLICES_PER_DRIVE = 4,\n    STORAGE_POOL = 'storage_pool',\n    SLICE_EXTRACT = /^(.*)(P[0-9]+)$/;\n\nfunction Builder() {\n    assert(false, 'mixin; do not use in isolation');\n}\n\nBuilder.prototype.addStoragePool = function addStoragePool(controllerId, deviceSpec, raidType, deviceCount, isManual) {\n    assert(deviceCount <= MAX_SLICE_WIDTH_DEVICES, 'Cannot create storage pool with this many devices');\n    assert(deviceCount >= MIN_SLICE_WIDTH_DEVICES, 'Cannot create storage pool with this few devices');\n    assert(deviceSpec.type === 'SSD', 'You cannot create a storage pool with non-ssd devices');\n\n    var hagroup = this._findSystemByControllerId(controllerId),\n        controller = this._findController(hagroup, controllerId),\n        newStoragePool = this._buildStoragePool(hagroup, controller, deviceSpec, raidType, deviceCount, isManual);\n\n    if (!controller.storage_pools) {\n        controller.storage_pools = [];\n    }\n\n    controller.storage_pools.push(newStoragePool);\n\n    // Auto doesn't need to do this\n    if (isManual) {\n        this.rebuildAutoAggregates(hagroup._id, { except: spinningDriveAggregates });\n    }\n\n    return newStoragePool._id;\n};\n\nBuilder.prototype.claimAllocationUnit = function claimAllocationUnit(aggrID, raidType, poolID, slice) {\n    var map = this._makeNewMap(),\n        pool = map.find.storage_pool(poolID),\n        au = _.first(_.where(pool._allocations, { slice: slice })),\n        spec = au.__deviceSpecs[0].spec,\n        devices = au.devices;\n    var raidID = this.addFlashPoolRaidGroupToAggregate(aggrID, raidType, spec, devices.length);\n    au.aggr_id = aggrID;\n    return raidID;\n};\n\nBuilder.prototype.releaseAllocationUnit = function releaseAllocationUnit(aggrID, poolID, slice) {\n    var map = this._makeNewMap(),\n        pool = map.find.storage_pool(poolID),\n        aggr = map.find.aggregate(aggrID),\n        au = _.first(_.where(pool._allocations, {\n            slice: slice,\n            aggr_id: aggrID\n        }));\n\n    assert.notEqual(au, undefined, '94afc5d3'); // allocation not found or not owned\n\n    var rg =_.first(_.filter(aggr._raid_groups, function containsAUMembers(rg) {\n            // note inconsistency between _allocations[n].devices\n            //                        and _raid_groups[n]._devices\n            return _.intersection(rg._devices, au.devices).length > 0;\n        }));\n\n    this.deleteFlashPoolRaidGroupFromAggregate(rg._id);\n    delete au.aggr_id;\n};\n\nBuilder.prototype.deleteStoragePool = function deleteStoragePool(storagePoolId) {\n    var map = this._makeNewMap(),\n        i = map.inspect.storage_pool(storagePoolId),\n        pool = i.storage_pool,\n        controller = i.controller,\n        hagroup = i.hagroup,\n        _this = this;\n\n    _.forEach(pool._allocations, function pleaseReleaseMeLetMeGo(allocation) {\n        if (allocation.aggr_id) {\n            _this.releaseAllocationUnit(allocation.aggr_id, pool._id, allocation.slice);\n        }\n    });\n\n    controller.storage_pools = _.where(controller.storage_pools, function(storagePool) {\n        return storagePool._id !== storagePoolId;\n    });\n\n    this.rebuildAutoAggregates(hagroup._id, { except: spinningDriveAggregates });\n};\n\n\nBuilder.prototype.resizeStoragePool = function resizeStoragePool(id, newDeviceCount) {\n    assert.equal(typeof id, 'string', '190f475a.1');\n    assert.equal(typeof newDeviceCount, 'number', '190f475a.2');\n    var map = this._makeNewMap();\n\n    var context = map.inspect.storage_pool(id);\n\n    var pool = context.storage_pool,\n        oldDeviceCount = pool._devices.length,\n        aggregates = _(pool._allocations)\n            .map('aggr_id')    // find IDs\n            .filter()          // eliminate undefined\n            .unique()          // eliminate dups\n            .map(map.find.aggregate);\n\n    if (newDeviceCount === oldDeviceCount) {\n        return;\n    }\n\n    if (newDeviceCount > oldDeviceCount) {\n        throw new Error('expansion not yet implemented');\n    }\n\n    var _this = this,\n        toRemove = pool._devices.slice(newDeviceCount);\n\n    pool._manual = true;\n    if (toRemove.length) {\n        this._removeDevices(pool, makeSurvivalCheck(toRemove));\n    }\n    aggregates.forEach(fixAggr);\n\n    return;\n\n    // function findUnusedMatchingDevices(count) {\n    //     if (count <= 0) {\n    //         return [];\n    //     }\n\n    //     return _this._physicalDevicesMatchingSpec(context.hagroup, spec, count);\n    // }\n\n    function fixAggr(aggregate) {\n        if (toRemove.length) {\n            _this.removeDevicesFromAggregate(aggregate, toRemove);\n        }\n    }\n};\n\nfunction flow() {\n    var functions = _.toArray(arguments);\n\n    return function (value) {\n        for (var idx in functions) {\n            value = functions[idx](value);\n        }\n\n        return value;\n    };\n}\n\nBuilder.prototype.removeDevicesFromAggregate = function removeDevicesFromAggregate(aggregate, devices) {\n    assert.equal(aggregate._type, 'aggregate', '08f14727.a');\n    var _this = this,\n        idWillSurviveFn = makeSurvivalCheck(devices);\n\n    return _.forEach(aggregate._raid_groups, function (rg) {\n        _this._removeDevices(rg, idWillSurviveFn);\n    });\n};\n\nfunction makeSurvivalCheck(devices) {\n    if (typeof devices === 'string') {\n        return flow(unslice, _.partial(_.isEqual, devices), not);\n    } else if (typeof devices === 'function') {\n        return flow(devices, not);\n    } else if (devices instanceof Array) {\n        return flow(unslice, _.partial(_.has, _.zipObject(devices)), not);\n    } else {\n        assert(false, '08f14727.d');\n    }\n}\n\nfunction not(bool) {\n    return !bool;\n}\n\nBuilder.prototype._removeDevices = function removeDevices(hasDevices, idWillSurviveFn) {\n    var specs = expandDeviceSpecs(hasDevices.__deviceSpecs);\n    assert.equal(specs.length, hasDevices._devices.length, '08f14727.dsmm');\n\n    var tupSurvives = flow(_.first, idWillSurviveFn),\n        tups = _.filter(_.zip(hasDevices._devices, specs), tupSurvives);\n\n    hasDevices._devices = _.map(tups, _.first);\n    hasDevices.__deviceSpecs = collapseDeviceSpecs(_.map(tups, _.last));\n};\n\nfunction collapseDeviceSpecs(__deviceSpecs) {\n    var lastSpec = null,\n        count = 0,\n        result = [];\n\n    _.forEach(__deviceSpecs, consider);\n    changeTo(null);\n    return result;\n\n    function consider(ds) {\n        if (ds.spec === lastSpec) { // same object!\n            count += ds.count;\n        } else {\n            changeTo(ds);\n        }\n    }\n\n    function changeTo(ds) {\n        if (lastSpec !== null) {\n            result.push({\n                spec: lastSpec,\n                count: count\n            });\n        }\n\n        if (ds !== null) {\n            lastSpec = ds.spec;\n            count = ds.count;\n        } else {\n            lastSpec = null;\n            count = 0;\n        }\n    }\n}\n\nfunction expandDeviceSpecs(__deviceSpecs) {\n    return _(__deviceSpecs).map(expandDeviceSpec).flatten().value();\n}\n\nfunction expandDeviceSpec(ds) {\n    return repeat({\n        count: 1,\n        spec: ds.spec\n    }, ds.count);\n}\n\nfunction repeat(value, count) {\n    var result = [];\n    for (var idx = 0; idx < count; idx ++) {\n        result.push(value);\n    }\n    return result;\n}\n\nfunction unslice(deviceId) {\n    var match = deviceId.match(SLICE_EXTRACT);\n    if (match) {\n        return match[1];\n    } else {\n        return deviceId;\n    }\n}\n\n\nfunction spinningDriveAggregates(aggregate) {\n    // TODO: inline this logic into an AggregateInspector once we have\n    // the ability to reset their internal tables after model changes.\n    return _(aggregate._raid_groups)\n            .map('__deviceSpecs')\n            .flatten()\n            .where('count')\n            .map('spec')\n            .any(notSSD);\n}\n\nfunction notSSD(spec) {\n    return spec.type !== 'SSD';\n}\n\nBuilder.prototype.addFlashPoolRaidGroupToAggregate = function addFlashPoolRaidGroupToAggregate(aggregateId, raidType, deviceSpec, deviceCount) {\n    var ownerAggregate = this._findAggregateById(aggregateId),\n        ownerSystem = this._systemThatContainsAggregate(aggregateId),\n        newRaidGroupName = this._newUniqueCacheRaidGroupName(ownerAggregate),\n        newRaidGroup = this._buildFlashPoolRaidGroup(ownerSystem, newRaidGroupName, deviceSpec, deviceCount);\n\n    _.merge(ownerAggregate, {\n        cache_raid_type: raidType,\n        is_hybrid: true\n    });\n\n    ownerAggregate._raid_groups.push(newRaidGroup);\n\n    return newRaidGroup._id;\n};\n\nBuilder.prototype.deleteFlashPoolRaidGroupFromAggregate = function deleteFlashPoolRaidGroupFromAggregate(raidGroupId) {\n    var owningAggregate = this._findAggregateWithRaidGroup(raidGroupId);\n\n    owningAggregate._raid_groups = _.where(owningAggregate._raid_groups, function(raidGroup) {\n        return raidGroup._id !== raidGroupId;\n    });\n\n    owningAggregate.is_hybrid = _.where(owningAggregate._raid_groups, { cache: true }).length > 0;\n};\n\nBuilder.prototype._buildStoragePool = function _buildStoragePool(hagroup, controller, deviceSpec, raidType, deviceCount, isManual) {\n    var storagePoolId = uuid(),\n        storagePoolName = this._newUniqueStoragePoolName(hagroup),\n        blocksPerSlice = this._usedBlocksPerSlice(deviceSpec),\n        physicalDevices = this._physicalDevicesMatchingSpec(hagroup, deviceSpec, deviceCount),\n        allocations = this._buildAllocationsForNewStoragePool(storagePoolId, blocksPerSlice, deviceSpec, physicalDevices);\n\n    return {\n        _id: storagePoolId,\n        _type: STORAGE_POOL,\n        name: storagePoolName,\n        type: deviceSpec.type,\n        raid_type: raidType,\n        _manual: isManual,\n        _devices: physicalDevices,\n        __deviceSpecs: [{\n            count: physicalDevices.length,\n            spec: _.merge(_.clone(deviceSpec), { _for_storage_pool: storagePoolId }),\n        }],\n        _allocations: allocations\n    };\n};\n\nBuilder.prototype._buildFlashPoolRaidGroup = function _buildFlashPoolRaidGroup(system, raidGroupName, deviceSpec, deviceCount) {\n\n    var map = this._makeNewMap(),\n        hagi = map.inspect(system),\n        availableDevices = hagi.availablePhysicalDevices().concat(hagi.availableStoragePoolDevices()),\n        deviceIds = this._deviceIdsGivenAvailableSpecAndCount(availableDevices, deviceSpec, deviceCount); // Here\n\n    return {\n        _id: uuid(),\n        _type: 'raidgroup',\n        name: raidGroupName,\n        _devices: deviceIds,\n        __deviceSpecs: [{\n            spec: _.omit(deviceSpec, 'quantity'),\n            count: deviceCount\n        }],\n        cache: true,\n        plex_number: 1\n    };\n};\n\nBuilder.prototype._newUniqueCacheRaidGroupName = function _newUniqueCacheRaidGroupName(owningAggregate) {\n    var nextNumber = this._nextNumberInNamingSequence(owningAggregate._raid_groups);\n\n    return util.format('%s%s', 'rg', nextNumber);\n};\n\nBuilder.prototype._newUniqueStoragePoolName = function _newUniqueStoragePoolName(owningHagroup) {\n    var allStoragePools = _.without(_.flatten(_.map(owningHagroup.controllers, function(controller) {\n            return controller.storage_pools;\n        })), undefined),\n        nextNumber = this._nextNumberInNamingSequence(allStoragePools);\n\n    return util.format('sp%s', nextNumber); // Needs to be unique across hagroup (see: ADP PPT slide 25)\n};\n\nBuilder.prototype._nextNumberInNamingSequence = function _nextNumberInNamingSequence(collection) {\n    var numbers = _.map(collection, function(item) {\n            var number = item.name.match(/(\\d+)$/);\n\n            return (number) ? number[0] : 0;\n        }),\n        sortedNumbers = _.sortBy(numbers);\n\n    return (sortedNumbers.length > 0) ? parseInt(_.last(sortedNumbers)) + 1 : 1;\n};\n\nBuilder.prototype._buildAllocationsForNewStoragePool = function _buildAllocationsForNewStoragePool(storagePoolId, blocksPerSlice, physicalDeviceSpec, physicalDevices) {\n    var partitions = _.range(1, SLICES_PER_DRIVE + 1),\n        allocations = [],\n        _this = this;\n\n    _.forEach(partitions, function(partition) {\n        var sliceName = util.format('P%s', partition),\n            deviceIds = _.map(physicalDevices, function(deviceId) {\n                return util.format('%sP%s', deviceId, partition);\n            }),\n            newAllocation = {\n                slice: sliceName,\n                used_blocks: Math.floor(blocksPerSlice),\n                devices: deviceIds\n            },\n            virtualDeviceSpec = _this._deviceSpecFromAllocationUnit(storagePoolId, sliceName, newAllocation, physicalDeviceSpec),\n            packagedVirtualDeviceSpec = {\n                count: physicalDevices.length,\n                spec: virtualDeviceSpec\n            };\n\n        _.merge(newAllocation, {\n            __deviceSpecs: [packagedVirtualDeviceSpec]\n        });\n\n        allocations.push(newAllocation);\n    });\n\n    return allocations;\n};\n\nBuilder.prototype._physicalDevicesMatchingSpec = function _physicalDevicesMatchingSpec(hagroup, deviceSpec, deviceCount) {\n    var map = this._makeNewMap(),\n        hagi = map.inspect(hagroup),\n        unlockedPhysicalDevices = hagi.unlockedPhysicalDevices();\n\n    return this._deviceIdsGivenAvailableSpecAndCount(unlockedPhysicalDevices, deviceSpec, deviceCount);\n};\n\nBuilder.prototype._deviceIdsGivenAvailableSpecAndCount = function _deviceIdsGivenAvailableSpecAndCount(availableDevices, deviceSpec, deviceCount) {\n    var matchingDevices = _(availableDevices)\n            .where(deviceMatches)\n            .map('devices')\n            .flatten()\n            .value();\n\n    assert(matchingDevices.length >= deviceCount, 'Unable to find devices of specific spec/quantity to build storage pool/cache raid group');\n\n    return _.sample(matchingDevices, deviceCount);\n\n    function deviceMatches(deviceGroup) {\n        return _.isEqual(fixed(deviceSpec), fixed(deviceGroup.spec));\n    }\n\n    function fixed(spec) {\n        return _.omit(spec, 'quantity', '_for_controller', 'model', '_for_storage_pool', '_from_parent');\n    }\n};\n\nBuilder.prototype._usedBlocksPerSlice = function _usedBlocksPerSlice(deviceSpec) {\n    var rsCapacity = new Unit(deviceSpec.rsgb, 'GB'),\n        overhead = new Unit(20.5, 'MiB'),\n        totalOverhead = overhead.mult(5),\n        capacityAfterOverhead = rsCapacity.subtract(totalOverhead),\n        perSliceCapacity = capacityAfterOverhead.divide(SLICES_PER_DRIVE),\n        perSliceBlocks = perSliceCapacity.to('KiB').value / 4;\n\n    return perSliceBlocks;\n};\n\nBuilder.prototype._systemThatContainsAggregate = function _systemThatContainsAggregate(aggregateId) {\n    var controllerMap = this._mapControllerOwnership('aggregates'),\n        mapWithAggregateSearch = _.where(controllerMap, function(controllerItem) {\n            return _.contains(controllerItem.ids, aggregateId);\n        }),\n        aggregateMap = _.first(mapWithAggregateSearch);\n\n    return _.find(this.clip.synergy_model.hagroups, { _id: aggregateMap.hagroupId });\n};\n\nBuilder.prototype._findSystemByControllerId = function _findSystemByControllerId(controllerId) {\n    var systems = _.where(this.clip.synergy_model.hagroups, function(hagroup) {\n        return _.contains(_.map(hagroup.controllers, function(controller) {\n            return controller._id;\n        }), controllerId);\n    });\n\n    return _.first(systems);\n};\n\nBuilder.prototype._findControllerWhoOwnsAggregate = function _findControllerWhoOwnsAggregate(aggregateId) {\n    var controllerMap = this._mapControllerOwnership('aggregates'),\n        owningControllerSearch = _.where(controllerMap, function(controllerItem) {\n            return _.contains(controllerItem.ids, aggregateId);\n        }),\n        owningControllerIndex = _.first(owningControllerSearch),\n        owningController = this._findControllerById(owningControllerIndex.controllerId);\n\n    return owningController;\n};\n\nBuilder.prototype._findStoragePoolById = function _findStoragePoolById(storagePoolId) {\n    var owningController = this._findControllerWithStoragePool(storagePoolId);\n\n    return _.first(_.where(owningController.storage_pools, function(pool) {\n        return pool._id === storagePoolId;\n    }));\n};\n\nBuilder.prototype._findController = function _findController(hagroup, controllerId) {\n    return _.find(hagroup.controllers, { _id: controllerId });\n};\n\nBuilder.prototype._findControllerById = function _findControllerById(controllerId) {\n    var owningSystemSearch = _.where(this.clip.synergy_model.hagroups, function(hagroup) {\n            return _.contains(_.map(hagroup.controllers, function(controller) {\n                return controller._id;\n            }), controllerId);\n        }),\n        owningSystem = _.first(owningSystemSearch),\n        controller = _.find(owningSystem.controllers, { _id: controllerId });\n\n    return controller;\n};\n\nBuilder.prototype._findControllerWithStoragePool = function _findControllerWithStoragePool(storagePoolId) {\n    var controllerMap = this._mapControllerOwnership('storage_pools'),\n        owningControllerIndex = _.where(controllerMap, function(controllerItem) {\n            return _.contains(controllerItem.ids, storagePoolId);\n        }),\n        owningController = this._findControllerById(_.first(owningControllerIndex).controllerId);\n\n    return owningController;\n};\n\nBuilder.prototype._findAggregateById = function _findAggregateById(aggregateId) {\n    var controllerMap = this._mapControllerOwnership('aggregates'),\n        owningControllerSearch = _.where(controllerMap, function(controllerItem) {\n            return _.contains(controllerItem.ids, aggregateId);\n        }),\n        owningControllerIndex = _.first(owningControllerSearch),\n        owningController = this._findControllerById(owningControllerIndex.controllerId),\n        aggregate = _.first(_.where(owningController.aggregates, function(aggr) {\n            return aggr._id === aggregateId;\n        }));\n\n    return aggregate;\n};\n\nBuilder.prototype._findAggregateWithRaidGroup = function _findAggregateWithRaidGroup(raidGroupId) {\n    var _this = this,\n        controllerMap = this._mapControllerOwnership('aggregates'),\n        aggregateMap = _.flatten(_.map(controllerMap, function(controllerItem) {\n            // Yeah, this is scary\n            return _.map(controllerItem.ids, function(aggregateId) {\n                var aggregate = _this._findAggregateById(aggregateId);\n\n                return {\n                    controllerId: controllerItem.controllerId,\n                    aggregateId: aggregateId,\n                    raidGroupIds: _.map(aggregate._raid_groups, function(raidGroup) {\n                        return raidGroup._id;\n                    })\n                };\n            });\n        })),\n        aggregateSearch = _.where(aggregateMap, function(aggregateItem) {\n            return _.contains(aggregateItem.raidGroupIds, raidGroupId);\n        }),\n        owningAggregateId = _.first(aggregateSearch).aggregateId;\n\n    return this._findAggregateById(owningAggregateId);\n};\n\nBuilder.prototype._mapControllerOwnership = function _mapControllerOwnership(ownershipOfType) {\n    var controllerMap = _.map(this.clip.synergy_model.hagroups, function(hagroup) {\n        var controllerIndex = _.map(hagroup.controllers, function(controller) {\n            var ownedThingIds = [];\n\n            if (controller[ownershipOfType]) {\n                ownedThingIds.push.apply(ownedThingIds, _.map(controller[ownershipOfType], function(ownedThing) {\n                    return ownedThing._id;\n                }));\n            }\n\n            return {\n                hagroupId: hagroup._id,\n                controllerId: controller._id,\n                ids: ownedThingIds\n            };\n        });\n\n        return controllerIndex;\n    });\n\n    return _.flatten(controllerMap);\n};\n\nmodule.exports = Builder;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    events = require('events');\n\nfunction Builder() {\n    assert(false, 'mixin; do not use in isolation');\n}\n\nBuilder.prototype.disableTracing = function disableTracing() {\n    if (this._tracingEnabled) {\n        console.error('===== builder tracing disabled');\n        this._tracingEnabled = false;\n    }\n    return this;\n};\nBuilder.prototype.disableTracing.pure = true;\nBuilder.prototype.disableTracing.spam = true;\n\nBuilder.prototype.enableTracing = function enableTracing() {\n    if (!this._tracingEnabled) {\n        console.error('===== builder tracing enabled');\n        this._tracingEnabled = true;\n    }\n\n    if (this._tracingSetUp) {\n        return this;\n    } else {\n        this._tracingSetUp = true;\n    }\n\n    var _this = this,\n        lastCache = cache(_this.clip, 'clip');\n\n    trap(this)\n        .on('call', beforeCall)\n        .on('called', afterCall);\n\n    return this; // ----- closures only beyond this point\n\n    function beforeCall(info) {\n        if (!_this._tracingEnabled) {\n            return;\n        }\n\n        detectChanges();\n        if (!info.fn.spam) {\n            console.error(indented(info.fname, info.localstack.length));\n        }\n    }\n\n    function afterCall(info) {\n        if (!_this._tracingEnabled) {\n            return;\n        }\n\n        if (!info.fn.pure) {\n            detectChanges();\n        }\n\n        if (info.err) {\n            var msg = info.fname + ' ! ' + info.err.toString();\n            console.error(indented(msg, info.localstack.length));\n        } else if (!info.fn.pure) {\n            console.error(indented('/' + info.fname, info.localstack.length));\n        }\n    }\n\n    function detectChanges() {\n        var nextCache = cache(_this.clip, 'clip'),\n            keys = _.uniq(_.flatten([\n                _.keys(lastCache),\n                _.keys(nextCache)\n            ])),\n            lastAlertKey = '';\n\n        function alert(key, status) {\n            if (lastAlertKey === '' || key.slice(0, lastAlertKey.length) !== lastAlertKey) {\n                lastAlertKey = key;\n                console.error(status + ' ' + key);\n            }\n        }\n\n        keys.sort();\n        for (var idx in keys) {\n            var key = keys[idx];\n            if (_.has(lastCache, key)) {\n                if (_.has(nextCache, key)) {\n                    if (nextCache[key] !== lastCache[key]) {\n                        alert(key, 'M');\n                    }\n                } else {\n                    alert(key, 'R');\n                }\n            } else {\n                alert(key, 'A');\n            }\n\n        }\n\n        lastCache = nextCache;\n    }\n};\nBuilder.prototype.enableTracing.pure = true;\nBuilder.prototype.enableTracing.spam = true;\n\nfunction walk(ob, fn, kpath) {\n    kpath = kpath || 'top';\n\n    fn(ob, kpath);\n\n    if (ob instanceof Array) {\n        for (var index in ob) {\n            walk(ob[index], fn, kpath + '[' + index + ']');\n        }\n    } else if (ob instanceof Object) {\n        for (var key in ob) {\n            walk(ob[key], fn, kpath + '.' + key);\n        }\n    }\n}\n\nfunction cache(ob, kpath) {\n    var result = {};\n\n    function capture(value, kpath) {\n        result[kpath] = value;\n    }\n\n    walk(ob, capture, kpath);\n    return result;\n}\n\nfunction trap(ob) {\n    var emitter = new events.EventEmitter(),\n        stack = [];\n\n    // go back to the prototype because many functions\n    // have already been wrapped by _.bindAll\n    _.forEach(_.functions(ob), function (fname) {\n        var fn = ob[fname];\n        if (fn.__bindData__) {\n            fn = fn.__bindData__[0]; // undo _.bind\n        }\n        ob[fname] = wrap(fn, fname);\n    });\n\n    function wrap(fn, fname) {\n        return function wrapped() {\n            var info = {\n                fn: fn,\n                fname: fname,\n                localstack: stack,\n                arguments: arguments\n            };\n\n            emitter.emit('call', info);\n            stack.push(fname);\n\n            try {\n                info.result = fn.apply(ob, arguments);\n            } catch (err) {\n                info.err = err;\n            }\n\n            stack.pop();\n            emitter.emit('called', info);\n\n            if (info.err) {\n                throw info.err;\n            } else {\n                return info.result;\n            }\n        };\n    }\n\n    return emitter;\n}\n\nfunction indented(name, by) {\n    if (!by || by <= 0) {\n        return '===== ' + name;\n    } else {\n        var result = '-----';\n\n        for (var idx = 0; idx < by; idx++) {\n            result = result + '  ';\n        }\n\n        return result + ' ' + name;\n    }\n}\n\nmodule.exports = Builder;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    uuid = require('uuid'),\n    planAggregates = require('./aggregates/planner'),\n    BuildADP = require('./build/adp'),\n    BuildStoragePools = require('./build/storage-pools'),\n    BuildFlashPoolAssignments = require('./build/flash-pool-assignment'),\n    TraceBuilds = require('./build/trace'),\n    ModelMap = require('./map'),\n    modelUtil = require('./util'),\n    Constants = require('../constants'),\n    Unit = require('../units');\n\nfunction Builder(productInfo, clip) {\n    assert(typeof productInfo === 'object', 'productInfo not object');\n    assert(_.isPlainObject(clip), 'clip');\n\n    this._productInfo = productInfo;\n    this.clip = clip;\n\n    _.bindAll(this);\n}\n\n// mixins\n_.assign(Builder.prototype, BuildADP.prototype);\n_.assign(Builder.prototype, BuildStoragePools.prototype);\n_.assign(Builder.prototype, BuildFlashPoolAssignments.prototype);\n_.assign(Builder.prototype, TraceBuilds.prototype);\n\nBuilder.prototype.addSystem = function addSystem(spec) {\n    assert(_.isPlainObject(spec), 'addSystem: spec object');\n\n    var hagroup = this.buildSystem(spec);\n\n    hagroup._policies = {\n        spare_allocation: {\n            enforce: Constants.POLICIES.SPARES.DEFAULT\n        },\n        version: {\n            pin: true\n        }\n    };\n\n    this.clip.synergy_model.hagroups.push(hagroup);\n    this._applyADPAndAddAggregates(hagroup);\n\n    return hagroup;\n};\n\nBuilder.prototype.addSystemToCluster = function addSystemToCluster(spec, clusterId) {\n    assert(_.isPlainObject(spec), 'addSystemToCluster: spec object');\n\n    var isClustered = true,\n        isPinnedVersion = true,\n        hagroup = this.buildSystem(spec, isClustered),\n        maxClusterName = this._getMaxAutoNamedCluster(),\n        clusterName = maxClusterName > 0 ? 'cluster' + (maxClusterName + 1) : 'cluster1';\n\n    _.forEach(this.clip.synergy_model.hagroups, function findClusterName(hagroup) {\n        if (!_.isEmpty(hagroup.cluster) && (hagroup.cluster._id === clusterId)) {\n            clusterName = hagroup.cluster.name || clusterName;\n\n            if (hagroup._policies && hagroup._policies.version) {\n                isPinnedVersion = hagroup._policies.version.pin;\n            }\n        }\n    });\n\n    hagroup.cluster = { // partial ref; _type not necessary\n        _id: clusterId || uuid(),\n        name: clusterName\n    };\n\n    hagroup._policies = {\n        spare_allocation: {\n            enforce: Constants.POLICIES.SPARES.DEFAULT\n        },\n        version: {\n            pin: isPinnedVersion\n        }\n    };\n\n    this.clip.synergy_model.hagroups.push(hagroup);\n    this.setClusterVersion(hagroup.cluster._id, hagroup.version);\n    this._applyADPAndAddAggregates(hagroup);\n\n    return hagroup;\n};\n\nBuilder.prototype.changeSystems = function changeSystems(specs) {\n    assert(Array.isArray(specs), 'specs array');\n\n    _.forEach(specs, function replace(spec) {\n        var hagroup = this._getSystemByIdFromClip(spec.existingId);\n\n        hagroup.model = spec.platformModel;\n        hagroup._model = spec.configModel;\n        hagroup.version = spec.version;\n        hagroup.shelves = _.isEmpty(spec.shelves) ? [] : this.buildShelves(hagroup, spec.shelves);\n\n        // Remove a controller HA->Standalone, or add a controller Standalone->HA\n        if (spec.controllerCount < hagroup.controllers.length) {\n            hagroup.controllers.splice(hagroup.controllers.length - 1,1);\n        } else if (spec.controllerCount > hagroup.controllers.length) {\n            var maxAutonamed = this._getMaxAutoNamedSystemCount(this.clip.synergy_model.hagroups),\n                controller = this.buildControllers(1, maxAutonamed + 1, 'netapp');\n\n            hagroup.controllers.push(controller[0]);\n        }\n\n        if (!_.isEmpty(hagroup.cluster) && hagroup.cluster._id) {\n            this.setClusterVersion(hagroup.cluster._id, hagroup.version);\n        }\n\n        if (!hagroup.model) {\n            var config = this._productInfo.getConfig(hagroup) || {},\n                platformModel = config.platformModel;\n\n            hagroup.model = platformModel;\n        }\n\n        this._applyADPAndAddAggregates(hagroup);\n    }, this);\n};\n\nBuilder.prototype.removeSystem = function removeSystem(systemId) {\n    assert(typeof systemId === 'string');\n\n    var index = _.findIndex(this.clip.synergy_model.hagroups, { _id: systemId });\n\n    if (index > -1) {\n        this.clip.synergy_model.hagroups.splice(index, 1);\n    }\n};\n\nBuilder.prototype.deleteShelf = function deleteShelf(systemId, shelf) {\n    assert(typeof systemId === 'string', 'systemId string');\n    assert(typeof shelf === 'object', 'unspecified shelf');\n\n    var targetHaGroup = this._getSystemByIdFromClip(systemId),\n        shelfIndex = _.findIndex(targetHaGroup.shelves, function(i) {\n            var isEmbeddedMatch = (i._isembedded === shelf._isembedded) ? true : false;\n            return isEmbeddedMatch && modelUtil.shelfDriveComboEquals(i, shelf);\n        });\n\n    if (shelfIndex > -1) {\n        targetHaGroup.shelves.splice(shelfIndex, 1);\n        this._applyADPAndAddAggregates(targetHaGroup);\n    }\n};\n\nBuilder.prototype.deleteAllShelves = function deleteAllShelves(systemId, shelf) {\n    assert(typeof systemId === 'string', 'unspecified systemId string');\n    assert(typeof shelf === 'object', 'unspecified shelf');\n\n    var targetHaGroup = this._getSystemByIdFromClip(systemId);\n\n    _.remove(targetHaGroup.shelves, function(s){\n        var isEmbeddedMatch = (s._isembedded === shelf._isembedded) ? true : false;\n        return isEmbeddedMatch && modelUtil.shelfDriveComboEquals(s, shelf);\n    });\n\n    this._applyADPAndAddAggregates(targetHaGroup);\n};\n\nBuilder.prototype.buildAutoAggregates = function rebuildAutoAggregates(systemId) {\n    assert(typeof systemId === 'string', 'unspecified systemId string');\n\n    var system = this._getSystemByIdFromClip(systemId);\n    this._buildAggregates(system, false, false);  // TODO: Don't hardcode these\n};\n\nBuilder.prototype.rebuildAutoAggregates = function rebuildAutoAggregates(systemId, deleteOptions) {\n    assert(typeof systemId === 'string', 'unspecified systemId string');\n\n    this.deleteAutoAggregates(systemId, deleteOptions);\n    this.buildAutoAggregates(systemId);\n};\n\nBuilder.prototype.deleteAggregate = function deleteAggregate(systemId, aggregate) {\n    assert(typeof systemId === 'string', 'unspecified systemId string');\n    assert(typeof aggregate === 'object', 'unspecified aggregate');\n\n    var i = this._makeNewMap().inspect(aggregate); // crash if aggregate already deleted\n    assert.equal(i.hagroup._id, systemId, 'd90aafb1'); // args don't match\n\n    _(i.hagroup.controllers)\n        .map('storage_pools').flatten()\n        .map('_allocations').flatten()\n        .where({ aggr_id: aggregate._id })\n        .forEach(deallocateFlashPoolSlice);\n\n    var idx = _.findIndex(i.controller.aggregates, { _id: aggregate._id });\n    i.controller.aggregates.splice(idx, 1);\n};\n\nfunction deallocateFlashPoolSlice(alloc) {\n    delete alloc.aggr_id;\n}\n\nBuilder.prototype.deleteAllAggregates = function deleteAllAggregates(systemId) {\n    assert(typeof systemId === 'string', 'unspecified systemId string');\n\n    var system = this._getSystemByIdFromClip(systemId);\n    system.controllers.forEach(function clearControllerAggregates(c) { c.aggregates = []; });\n};\n\nBuilder.prototype.deleteAutoAggregates = function deleteAutoAggregates(systemId, deleteOptions) {\n    deleteOptions = deleteOptions || {};\n    deleteOptions.except = deleteOptions.except || allAutoMustDie;\n    assert.equal(typeof systemId, 'string', '32a48274');\n    assert.equal(typeof deleteOptions.except, 'function', '2332948b');\n\n    var system = this._getSystemByIdFromClip(systemId);\n    system.controllers.forEach(function clearControllerAutoAggregates(c) {\n        c.aggregates = _.filter(c.aggregates, shouldSurvive);\n    });\n\n    function shouldSurvive(aggregate) {\n        var result = aggregate._manual || deleteOptions.except(aggregate);\n        return result;\n    }\n\n    function allAutoMustDie(/* aggregate */) {\n        return false;\n    }\n};\n\nBuilder.prototype.nameSystem = function nameSystem(systemId, name1, name2) {\n    assert(typeof systemId === 'string', 'unspecified systemId string');\n\n    var targetHaGroup = this._getSystemByIdFromClip(systemId);\n\n    if (targetHaGroup) {\n        if (targetHaGroup.controllers && targetHaGroup.controllers.length) {\n            targetHaGroup.controllers[0].name = name1;\n        }\n\n        if (targetHaGroup.controllers && targetHaGroup.controllers.length > 1) {\n            targetHaGroup.controllers[1].name = name2;\n        }\n    }\n};\n\nBuilder.prototype.nameCluster = function nameCluster(clusterId, name) {\n    assert(typeof clusterId === 'string', 'unspecified clusterId string');\n    assert(typeof name === 'string', 'unspecified name string');\n\n    _.forEach(this.clip.synergy_model.hagroups, function(hagroup) {\n        if (hagroup.cluster && hagroup.cluster._id === clusterId) {\n            hagroup.cluster.name = name;\n        }\n    });\n};\n\nBuilder.prototype.setSystemPolicy = function setSystemPolicy(systemId, scope, policy) {\n    assert(typeof systemId === 'string', 'unspecified systemId string');\n    assert(typeof scope === 'string', 'unspecified scope string');\n\n    var targetHaGroup = _.find(this.clip.synergy_model.hagroups, { _id: systemId });\n    if (targetHaGroup) {\n        targetHaGroup._policies = targetHaGroup._policies || {};\n        targetHaGroup._policies[scope] = targetHaGroup._policies[scope] || {};\n\n        _.merge(targetHaGroup._policies[scope], policy);\n        this._applyADPAndAddAggregates(targetHaGroup);\n    }\n};\n\nBuilder.prototype.setClusterPolicy = function setClusterPolicy(clusterId, scope, policy) {\n    assert(typeof clusterId === 'string', 'unspecified clusterId string');\n    assert(typeof scope === 'string', 'unspecified scope string');\n\n    _.forEach(this.clip.synergy_model.hagroups, function setPolicy(hagroup) {\n        if (!_.isEmpty(hagroup.cluster) && (hagroup.cluster._id === clusterId)) {\n            hagroup._policies = hagroup._policies || {};\n            hagroup._policies[scope] = hagroup._policies[scope] || {};\n\n            _.merge(hagroup._policies[scope], policy);\n            this._applyADPAndAddAggregates(hagroup);\n        }\n    }, this);\n};\n\nBuilder.prototype.buildSystem = function buildSystem(spec, isClustered) {\n    assert(_.isPlainObject(spec), 'buildSystem: spec object');\n\n    var maxAutonamed = this._getMaxAutoNamedSystemCount(this.clip.synergy_model.hagroups),\n        controllers = this.buildControllers(spec.controllerCount, maxAutonamed + 1, 'netapp');\n\n    var hagroup = {\n        _id : uuid(),\n        _type: 'hagroup',\n        _model: spec.configModel,\n        _x_bom: undefined,\n        is_clustered: isClustered || false,\n        model : spec.platformModel,\n        sys_version: undefined,\n        cluster: undefined,\n        controllers : controllers,\n        version : spec.version\n    };\n\n    if (!hagroup.model) {\n        var config = this._productInfo.getConfig(hagroup) || {},\n            platformModel = config.platformModel;\n\n        hagroup.model = platformModel;\n    }\n\n    hagroup.shelves = _.isEmpty(spec.shelves) ? [] : this.buildShelves(hagroup, spec.shelves);\n\n    this.checkCompatibility(hagroup);\n\n    return hagroup;\n};\n\nBuilder.prototype.checkCompatibility = function checkCompatibility(hagroup) {\n    var config = this._productInfo.getConfig(hagroup),\n        isCompatible = config.matrix.isCompatibleWithVersion(hagroup.version);\n\n    assert(isCompatible, 'unknown version ' + hagroup.version);\n};\n\nBuilder.prototype.determineDriveFlashPoolSupport = function determineDriveFlashPoolSupport(hagroup, shelfModel, driveModel) {\n    var config = this._productInfo.getConfig(hagroup),\n        matrix = config.matrix,\n        shelfCompat = matrix.checkVersionShelfDrive(hagroup.version, shelfModel, driveModel);\n\n    return shelfCompat.fp_support_drive;\n};\n\nBuilder.prototype.buildControllers = function buildControllers(count, startingCount, namePrefix) {\n    count = count || 2;\n    startingCount = startingCount && startingCount > -1 ? startingCount : 1;\n    namePrefix = namePrefix || 'netapp';\n\n    return _.map(_.range(count), function(i) {\n        return {\n            _id: uuid(),\n            _type: 'controller',\n            aggregates: undefined,\n            name: namePrefix + (i + startingCount)\n        };\n    });\n};\n\nBuilder.prototype.buildShelves = function buildShelves(hagroup, shelvesSpec, startingCount) {\n    assert(shelvesSpec instanceof Array, 'buildShelves: shelvesSpec array');\n    assert(!_.isEmpty(shelvesSpec), 'buildShelves: shelvesSpec empty');\n\n    var shelves = [],\n        shelfNumber = startingCount || 1;\n\n    _(shelvesSpec).forEach(function buildShelf(spec) {\n        var shelfConfig = _.find(this._productInfo._shelves, { model: spec.model });\n\n        if (!shelfConfig) {\n            console.log('Warning: could not find shelf configuration for ' + spec.model);\n            return;\n        }\n\n        for (var idx = 0; idx < (spec.quantity || 1); idx++) {\n            var newId = uuid(),\n                bom = _.isEmpty(spec.drives) ? undefined : this.buildDrives(hagroup, newId, spec.drives, spec.model);\n\n            shelves.push({\n                _id: newId,\n                _type: 'shelf',\n                _x_bom: bom,\n                _description: undefined,\n                model: spec.model,\n                serial_number: undefined,\n                bay_count: shelfConfig.stats.max_drive,\n                type: undefined,\n                _isembedded: spec.isEmbedded || false,\n                shelf_number: shelfNumber++\n            });\n        }\n    }, this);\n\n    return shelves;\n};\n\nBuilder.prototype.buildDrives = function buildDrives(hagroup, shelfId, withSpecs, withShelfModel) {\n    assert(withSpecs instanceof Array, 'buildDrives: withSpecs array');\n    assert(!_.isEmpty(withSpecs), 'buildDrives: withSpecs empty');\n\n    var driveContainer = {\n            drive_specs: [],\n            drive_spec_members: []\n        },\n        specsAndMembers = this.buildSpecsAndMembers(hagroup, shelfId, withSpecs, withShelfModel);\n\n    _.forEach(specsAndMembers, function(driveSpecWithMembers) {\n        driveContainer.drive_specs.push(driveSpecWithMembers[0]);\n        driveContainer.drive_spec_members.push(driveSpecWithMembers[1]);\n    });\n\n    return driveContainer;\n};\n\nBuilder.prototype.buildSpecsAndMembers = function buildSpecsAndMembers(hagroup, owningShelfId, driveSpecs, withShelfModel) {\n    var buildResults = [],\n        currentCarrierSlot = 0,\n        _this = this;\n\n    _.forEach(driveSpecs, function(driveSpec) {\n        var flashPoolSupport = _this.determineDriveFlashPoolSupport(hagroup, withShelfModel, driveSpec.model),\n            driveConfig = _.find(_this._productInfo._drives, { model: driveSpec.model }),\n            rsUnit = driveConfig ? new Unit(driveConfig.capacity.right_sized, 'KiB') : {},\n            members = [],\n            newDriveSpec = {\n                model: driveSpec.model,\n                rawgb: driveConfig.capacity.marketing,\n                rsgb: rsUnit.value_gb,\n                rpm: driveConfig.speed,\n                type: driveConfig.type,\n                encrypted: driveConfig.encrypted,\n                fp_support: flashPoolSupport,\n                quantity: driveSpec.quantity // TODO: remove after Demo/Release\n            };\n\n        _.forEach(_.range(driveSpec.quantity), function() {\n            var deviceId = _this._getDeviceIdForDrive(owningShelfId, currentCarrierSlot++);\n\n            members.push(deviceId);\n        });\n\n        buildResults.push([newDriveSpec, members]);\n    });\n\n\n    return buildResults;\n};\n\nBuilder.prototype.setClusterVersion = function setClusterVersion(clusterId, version) {\n    _.forEach(this.clip.synergy_model.hagroups, function forceVersion(hagroup) {\n        if (!_.isEmpty(hagroup.cluster) && (hagroup.cluster._id === clusterId)) {\n            hagroup.version = version;\n        }\n    });\n};\n\nBuilder.prototype.setSystemVersion = function setSystemVersion(systemId, version) {\n    var targetHaGroup = _.find(this.clip.synergy_model.hagroups, { _id: systemId });\n\n    if (targetHaGroup) {\n        targetHaGroup.version = version;\n    }\n};\n\n// function timed(fn) {\n//     var name = fn.name;\n\n//     function end(beginning) {\n//         var span = process.hrtime(beginning),\n//             ms = span[0] / 1e3 + span[1] / 1e6;\n//         console.log('timed:', name, 'took', ms, 'ms');\n//     }\n\n//     return function measured() {\n//         var beg = process.hrtime(),\n//             res;\n//         try {\n//             res = fn.apply(this, arguments);\n//             end(beg);\n//             return res;\n//         } catch (err) {\n//             end(beg);\n//             throw err;\n//         }\n//     };\n// }\n\nBuilder.prototype._getDeviceIdForDrive = function _getDeviceIdForDrive(owningShelfId, carrierSlot) {\n    assert(owningShelfId.length > 8, 'Shelf Id is invalid');\n    assert(_.isNumber(carrierSlot), 'Carrier slot must be a number');\n\n    return '!' + owningShelfId.slice(0, 8) + '.' + carrierSlot;\n};\nBuilder.prototype._getDeviceIdForDrive.pure = true;\nBuilder.prototype._getDeviceIdForDrive.spam = true;\n\nBuilder.prototype._getSystemByIdFromClip = function _findSystemId(systemId) {\n    return _.find(this.clip.synergy_model.hagroups, { _id: systemId });\n};\n\nBuilder.prototype._getMaxAutoNamedCluster = function _getMaxAutoNamedCluster() {\n    var maxAutonamedCluster = _(this.clip.synergy_model.hagroups)\n        .map(function(h){return h.cluster && /^cluster(\\d+)$/.exec(h.cluster.name);})\n        .where(function(cn){return cn;})\n        .map(function(cn){return parseInt(cn[1]);})\n        .max().value();\n\n    return maxAutonamedCluster;\n};\n\nBuilder.prototype._getMaxAutoNamedSystemCount = function _getMaxAutoNamedSystemCount(hagroups) {\n    assert(hagroups, '_getMaxAutoNamedSystemCount hagroups list not defined');\n    assert(Array.isArray(hagroups), '_getMaxAutoNamedSystemCount hagroups list not an array');\n\n    var maxAutonamedSystemNaming = _(hagroups)\n        .map(function(h){return h._x_bom && h._x_bom.system && h._x_bom.system.names;})\n        .where(function (n) {return n;}).map(function(n){ return n.split('/'); })\n        .flatten()\n        .map(function(n){return /^netapp(\\d+)$/.exec(n);}).where(function(cn){return cn;})\n        .map(function(cn){return parseInt(cn[1]);})\n        .max().value();\n\n    var maxAutonamedController = _(hagroups)\n        .flatten('controllers')\n        .flatten('name')\n        .map(function(n){return /^netapp(\\d+)$/.exec(n);}).where(function(cn){return cn;})\n        .map(function(cn){return parseInt(cn[1]);})\n        .max().value();\n\n    return Math.max(maxAutonamedSystemNaming, maxAutonamedController);\n};\n\nBuilder.prototype._makeNewMap = function _makeNewMap() {\n    return new ModelMap(this._productInfo, this.clip);\n};\n\nBuilder.prototype._isPureEmbeddedSystem = function _isPureEmbeddedSystem(hagroup) {\n    var hasOnlyOneShelf = hagroup.shelves && hagroup.shelves.length === 1,\n        onlyShelfIsEmbedded = hasOnlyOneShelf && _.first(hagroup.shelves)._isembedded;\n\n    return onlyShelfIsEmbedded;\n};\n\nBuilder.prototype._buildAggregates = function _buildAggregates(hagroup) {\n    var map = this._makeNewMap(),\n        plannedAggregates = planAggregates(map.inspect(hagroup));\n\n    if (plannedAggregates && plannedAggregates.length) {\n        this.attachAggregatesToControllers(this.clip.synergy_model.hagroups, plannedAggregates);\n    }\n\n    this.assignFlashPoolWhereAvailable(hagroup);\n};\n\nBuilder.prototype.addManualAggregate = function addManualAggregate(systemId, aggregate) {\n    if (aggregate) {\n        this.deleteAutoAggregates(systemId);\n        this.attachAggregatesToControllers(this.clip.synergy_model.hagroups, [aggregate]);\n        this.buildAutoAggregates(systemId);\n    }\n\n    return aggregate; // TODO: Remove this, look at all callers of addManualAggregate\n};\n\nBuilder.prototype.attachAggregatesToControllers = function(hagroups, aggregatesToAttach) {\n    // Flatten if we need to\n    if (aggregatesToAttach && aggregatesToAttach.length > 0) {\n        if (aggregatesToAttach[0] instanceof Array) {\n            aggregatesToAttach = _.flatten(aggregatesToAttach);\n        }\n    }\n\n    if (hagroups) {\n        _.forEach(hagroups, function(hagroup) {\n            var controllers = hagroup.controllers;\n\n            if (controllers) {\n                _.forEach(controllers, function(controller) {\n                    if (!controller.aggregates) {\n                        controller.aggregates = [];\n                    }\n\n                    controller.aggregates = withoutAggregatesWeAreAdding(controller.aggregates);\n\n                    controller.aggregates.push(_.where(aggregatesToAttach, function(aggregate) {\n                        return aggregate._controller === controller._id;\n                    }));\n\n                    controller.aggregates = _.flatten(controller.aggregates);\n\n                    function withoutAggregatesWeAreAdding(aggrs) {\n                        return _.where(aggrs, function(aggr) {\n                            return !_.contains(_.map(aggregatesToAttach, '_id'), aggr._id);\n                        });\n                    }\n                });\n            }\n        });\n    }\n};\n\nmodule.exports = Builder;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    AggregateReporter = require('./aggregates/aggregateReporter.js'),\n    Spec = require('./spec'),\n    modelUtil = require('./util'),\n    lcprop = require('../lcprop'),\n    Policies = require('../policies'),\n    Unit = require('../units.js');\n\nfunction Guard(map, addingTo, options) {\n    assert.equal(typeof map, 'object', 'map object');\n    assert.equal(typeof addingTo, 'object', 'addingTo object');\n    assert.equal(_.isEmpty(addingTo), false, 'bad addingTo selector');\n    assert(options === undefined || _.isPlainObject(options), 'bad options');\n\n    this._map = map;\n    this._addingTo = addingTo;\n    this._addingToHagroups = addingTo.id ? [] : this._getHagroups(map.resolveSelection(addingTo));\n    this._impactedHagroups = this._getImpactedHagroups(addingTo);\n    this._options = options || {};\n    this._proposals = [];\n\n    _.bindAll(this);\n}\n\nGuard.prototype.addingSystem = function addingSystem(replacing) {\n    assert(replacing === undefined || typeof replacing === 'object', 'bad replacing selector');\n\n    var resolvedReplacing = this._resolveReplacing(replacing),\n        replacingHagroups = this._getHagroups(resolvedReplacing);\n\n    var hagroups = this._addingToHagroups.concat(replacingHagroups),\n        configGroups = this._addingTo.id ? [this._addingTo] : this._getUniqueConfigGroups(hagroups),\n        configGroup = _.first(configGroups);\n\n    // We cannot offer any configs without a config group to query.\n    // We do not support mixing different config groups in the same cluster.\n    assert(configGroups.length, 'no config group');\n    assert.equal(configGroups.length, 1, 'multiple config groups');\n\n    var inspector = this._addingTo.id ? null : this._map.inspect(_.first(hagroups)),\n        nodeSummary = inspector ? inspector.nodeSummary(resolvedReplacing) : {},\n        versionLimits = inspector ? inspector.versionRange(resolvedReplacing) : undefined;\n\n    this._buildSystemOptions(configGroup, versionLimits);\n\n    this._applyAggregateLimits(resolvedReplacing);\n    this._applyConfigLimits(configGroup);\n    this._applyClusterLimits(nodeSummary, versionLimits);\n    this._applyHagroupLimits(resolvedReplacing);\n    this._applyHardwareLimits(replacingHagroups);\n\n    return this._proposals;\n};\n\nGuard.prototype.deletingSystem = function deletingSystem(replacing) {\n    assert(typeof replacing === 'object', 'bad replacing selector');\n\n    var resolvedReplacing = this._resolveReplacing(replacing),\n        replacingHagroups = this._getHagroups(resolvedReplacing);\n\n    assert(replacingHagroups.length, 'no hagroup');\n\n    var map = this._map,\n        addingToHagroups = this._addingToHagroups,\n        ejecting = _.reduce(replacingHagroups, getEjecting, replacingHagroups),\n        hagroups = remainingHagroups(ejecting),\n        versionLimits = commonVersionLimits(hagroups);\n\n    function getEjecting(ejecting, system) {\n        return ejecting.concat(system.shelves);\n    }\n\n    function remainingHagroups(ejecting) {\n        var hagroups = _.where(ejecting, { _type: 'hagroup' });\n\n        return _.filter(addingToHagroups, isNotReplacing);\n\n        function isNotReplacing(hagroup) {\n            return !_.some(hagroups, { _id: hagroup._id });\n        }\n    }\n\n    function commonVersionLimits(hagroups) {\n        return _.reduce(hagroups, intersection, undefined);\n\n        function intersection(range, hagroup) {\n            var inspector = map.inspect(hagroup),\n                systemRange = inspector.versionRange(ejecting);\n\n            return range ? _.intersection(range, systemRange) : systemRange;\n        }\n    }\n\n    this._buildVersionOptions(versionLimits);\n    this._applyVersionChangeLimits(hagroups);\n\n    var wrapped = _(this._proposals).sortBy('newVersion'),\n        pinned = this._options.version,\n        proposal;\n\n    if (pinned) {\n        proposal = wrapped.where({ newVersion: pinned }).last();\n    } else {\n        var enabled = wrapped.where(function isEnabled(config) {\n                return _.isEmpty(config.conflicts);\n            });\n\n        proposal = enabled.isEmpty() ? wrapped.last() : enabled.last();\n    }\n\n    return [proposal];\n};\n\nGuard.prototype.addingShelf = function addingShelf(replacing) {\n    assert(replacing === undefined || typeof replacing === 'object', 'bad replacing selector');\n    assert(this._addingToHagroups.length, 'no hagroup');\n\n    // This is dangerous!\n    // Refuse multiple hagroups or consider options for all of them - do not just grab the first.\n    var hagroup = _.first(this._addingToHagroups),\n        inspector = this._map.inspect(hagroup);\n\n    var resolvedReplacing = this._resolveReplacing(replacing),\n        nodeSummary = inspector.nodeSummary(resolvedReplacing),\n        versionLimits = inspector.versionRange(resolvedReplacing);\n\n    this._buildShelfOptions(inspector, versionLimits, resolvedReplacing.length);\n\n    this._applyAggregateLimits(resolvedReplacing);\n    this._applyClusterLimits(nodeSummary, versionLimits);\n    this._applyHagroupLimits(resolvedReplacing);\n    this._applyEmbeddedLimits(resolvedReplacing);\n\n    return this._proposals;\n};\n\nGuard.prototype.deletingShelf = function deletingShelf(replacing) {\n    assert(typeof replacing === 'object', 'bad replacing selector');\n    assert(this._addingToHagroups.length, 'no hagroup');\n\n    var resolvedReplacing = this._resolveReplacing(replacing),\n        replacingHagroups = this._getHagroups(resolvedReplacing),\n        hagroups = this._addingToHagroups.concat(replacingHagroups);\n\n    var hagroup = _.first(hagroups),\n        inspector = this._map.inspect(hagroup),\n        ejectingShelves = _.where(resolvedReplacing, { _type: 'shelf', _isembedded: false }),\n        versionLimits = inspector.versionRange(ejectingShelves);\n\n    this._buildVersionOptions(versionLimits);\n    this._applyVersionChangeLimits(hagroups);\n\n    var wrapped = _(this._proposals).sortBy('newVersion'),\n        pinned = this._options.version,\n        proposal;\n\n    if (pinned) {\n        proposal = wrapped.where({ newVersion: pinned }).last();\n    } else {\n        var enabled = wrapped.where(function isEnabled(config) {\n                return _.isEmpty(config.conflicts);\n            });\n\n        proposal = enabled.isEmpty() ? wrapped.last() : enabled.last();\n    }\n\n    var map = this._map,\n        shelves = _.where(resolvedReplacing, { _type: 'shelf' }),\n        usedByManual = _.some(shelves, isUsedByManual);\n\n    function isUsedByManual(shelf) {\n        return map.inspect(shelf).isUsedByManualAggregate();\n    }\n\n    if (usedByManual) {\n        this._disable(proposal, 'aggr.manual', true, false);\n    }\n\n    return [proposal];\n};\n\nGuard.prototype.policies = function policies() {\n    assert(this._addingToHagroups.length, 'no hagroup');\n\n    // Guard will prevent mixing product lines, so this is safe.\n    var hagroup = _.first(this._addingToHagroups),\n        inspector = this._map.inspect(hagroup);\n\n    this._buildPolicyOptions();\n    this._applyPolicyLimits(inspector.productLine);\n\n    return this._proposals;\n};\n\nGuard.prototype.changingVersion = function changingVersion(replacing) {\n    assert(typeof replacing === 'object', 'bad replacing selector');\n\n    var resolvedReplacing = this._resolveReplacing(replacing),\n        replacingHagroups = this._getHagroups(resolvedReplacing),\n        hagroups = this._addingToHagroups.concat(replacingHagroups);\n\n    assert(hagroups.length, 'no hagroup');\n\n    var hagroup = _.first(hagroups),\n        inspector = this._map.inspect(hagroup),\n        versionLimits = inspector.versionRange();\n\n    this._buildVersionOptions(versionLimits);\n    this._applyVersionChangeLimits(hagroups);\n\n    return _.sortBy(this._proposals, 'newVersion');\n};\n\nGuard.prototype._buildSystemOptions = function _buildSystemOptions(configGroup, versionLimits) {\n    this._proposals = _.map(configGroup.where({}), buildProposal, this);\n\n    function buildProposal(config) {\n        // jshint -W040\n        var map = this._map,\n            clonedConfig = _.clone(config),\n            versions = clonedConfig.matrix.versions,\n            vRange = versionLimits ? _.intersection(versions, versionLimits) : versions;\n\n        var shelf = config.isEmbedded ? this._getDefaultEmbeddedShelf(config, vRange) : {},\n            shelfVersions = _.compact(_.pluck(shelf.versions, 'version')),\n            version = this._getLatestVersion(versions, versionLimits, shelfVersions) || '',\n            limits = version ? clonedConfig.matrix.getLimitsForVersion(version) : {};\n\n        lcprop(clonedConfig, 'buildSpec', function makeBuildMethod() {\n            return (new Spec(map, clonedConfig)).build;\n        });\n\n        lcprop(clonedConfig, 'isEnabled', function isEnabled() {\n            return _.isEmpty(clonedConfig.conflicts);\n        });\n\n        return _.assign(clonedConfig, {\n            quantity: 1,\n            groupId: configGroup.id,\n            effects: { node: {}, drive: {}, shelf: {} },\n            newVersion: version,\n            newLimits: limits,\n            newEmbeddedShelf: shelf,\n            conflicts: []\n        });\n    }\n};\n\nGuard.prototype._buildShelfOptions = function _buildShelfOptions(inspector, versionLimits, count) {\n    var matrix = inspector.config.matrix,\n        shelves = inspector.getShelfConfigs(),\n        map = this._map;\n\n    this._proposals = _.map(shelves, buildProposal, this);\n\n    function buildProposal(shelf) {\n        // jshint -W040\n        var clonedShelf = _.clone(shelf),\n            versions = _.compact(_.pluck(clonedShelf.versions, 'version')),\n            version = this._getLatestVersion(versions, versionLimits) || '',\n            limits = version ? matrix.getLimitsForVersion(version) : {};\n\n        lcprop(clonedShelf, 'buildSpec', function makeBuildMethod() {\n            return (new Spec(map, clonedShelf)).build;\n        });\n\n        lcprop(clonedShelf, 'isEnabled', function isEnabled() {\n            return _.isEmpty(clonedShelf.conflicts);\n        });\n\n        return _.assign(clonedShelf, {\n            quantity: count || 1,\n            effects: { node: {}, drive: {}, shelf: {} },\n            newVersion: version,\n            newLimits: limits,\n            conflicts: []\n        });\n    }\n};\n\nGuard.prototype._buildPolicyOptions = function _buildPolicyOptions() {\n    this._proposals = _.map(new Policies(), buildProposal);\n\n    function buildProposal(policy) {\n        lcprop(policy, 'isEnabled', function isEnabled() {\n            return _.isEmpty(policy.conflicts);\n        });\n\n        return _.assign(policy, { conflicts: [] });\n    }\n};\n\nGuard.prototype._buildVersionOptions = function _buildVersionOptions(versions) {\n    this._proposals = _.map(versions, buildProposal);\n\n    function buildProposal(version) {\n        var option = {\n            newVersion: version,\n            conflicts: []\n        };\n\n        lcprop(option, 'isEnabled', function isEnabled() {\n            return _.isEmpty(option.conflicts);\n        });\n\n        return option;\n    }\n};\n\nGuard.prototype._resolveReplacing = function _resolveReplacing(replacing) {\n    var resolved = this._map.resolveSelection(replacing),\n        replacingHagroups = this._getHagroups(resolved);\n\n    return _.reduce(replacingHagroups, function accumulate(resolved, hagroup) {\n        var embedded = _.where(hagroup.shelves, { _type: 'shelf', _isembedded: true });\n\n        Array.prototype.push.apply(resolved, embedded);\n        return resolved;\n    }, resolved);\n};\n\nGuard.prototype._getImpactedHagroups = function _getImpactedHagroups(addingTo) {\n    var selector;\n\n    if (_.has(addingTo, 'cluster')) {\n        selector = _.pick(addingTo, ['installation', 'cluster']);\n    } else if (_.has(addingTo, 'hagroup')) {\n        selector = _.pick(addingTo, ['installation', 'hagroup']);\n    }\n\n    var selection = _.isEmpty(selector) ? [] : this._map.resolveSelection(selector),\n        hagroups = this._getHagroups(selection);\n\n    return hagroups;\n};\n\nGuard.prototype._getHagroups = function _getHagroups(selection) {\n    var clusters = _.where(selection, { _type: 'cluster' }),\n        hagroups = _.reduce(clusters, accumulate, _.where(selection, { _type: 'hagroup' }));\n\n    function accumulate(hagroups, cluster) {\n        Array.prototype.push.apply(hagroups, cluster.hagroups);\n        return hagroups;\n    }\n\n    return hagroups;\n};\n\nGuard.prototype._getUniqueConfigGroups = function _getUniqueConfigGroups(hagroups) {\n    var configGroups = _.reduce(hagroups, accumulate, [], this);\n\n    function accumulate(configGroups, hagroup) {\n        // jshint -W040\n        var hagroupInspector = this._map.inspect(hagroup),\n            configGroup = hagroupInspector.configGroup,\n            isNewConfig = !_.some(configGroups, { id: configGroup.id });\n\n        if (isNewConfig) {\n            configGroups.push(configGroup);\n        }\n\n        return configGroups;\n    }\n\n    return configGroups;\n};\n\nGuard.prototype._getDefaultEmbeddedShelf = function _getDefaultEmbeddedShelf(config, versionRange) {\n    var hagroup = _.first(this._addingToHagroups) || {},\n        externalShelves = _.where(hagroup.shelves || [], { _isembedded: false }),\n        encryptionLimit = isEncrypted();\n\n    var shelfConfigs = getEmbeddedConfigs(config.matrix.hardwareOptions),\n        filtered = _.filter(shelfConfigs, matchesEncryption),\n        sorted = _.sortBy(filtered, isShelfEoa),\n        shelf = _.find(sorted, inVersionRange) || {};\n\n    function getEmbeddedConfigs(hardware) {\n        var configs = [];\n\n        Array.prototype.push.apply(configs, hardware.embeddedShelves);\n        Array.prototype.push.apply(configs, hardware.shelfPresets);\n\n        return _.where(configs, { isEmbedded: true });\n    }\n\n    function isEncrypted() {\n        var result;\n\n        if (!_.isEmpty(externalShelves)) {\n            result = _.some(externalShelves, hasEncryptedDrive);\n        }\n\n        function hasEncryptedDrive(shelf) {\n            var specs = shelf._x_bom ? shelf._x_bom.drive_specs || [] : [];\n\n            return _.some(specs, isEncryptedDrive);\n        }\n\n        function isEncryptedDrive(drive) {\n            return drive.encrypted;\n        }\n\n        return result;\n    }\n\n    function matchesEncryption(shelfConfig) {\n        if (encryptionLimit === undefined) {\n            return true;\n        } else {\n            var areDrivesEncrypted = _.some(shelfConfig.drives, isDriveEncrypted);\n\n            return areDrivesEncrypted === encryptionLimit;\n        }\n    }\n\n    function isDriveEncrypted(driveConfig) {\n        return driveConfig.drive.encrypted;\n    }\n\n    function isShelfEoa(shelfConfig) {\n        var isShelfSellable = shelfConfig.shelf.sellable,\n            areDrivesSellable = _.every(shelfConfig.drives, isDriveSellable);\n\n        return !(isShelfSellable && areDrivesSellable);\n    }\n\n    function isDriveSellable(driveConfig) {\n        return driveConfig.drive.sellable;\n    }\n\n    function inVersionRange(shelf) {\n        var versions = _.compact(_.pluck(shelf.versions, 'version')),\n            subSet = versionRange ? _.intersection(versions, versionRange) : versions;\n\n        return subSet.length ? true : false;\n    }\n\n    return shelf;\n};\n\nGuard.prototype._getLatestVersion = function _getLatestVersion(versions, limits, adding) {\n    var pinned = this._options.version,\n        common = pinned ? _.intersection(versions, [pinned]) : versions,\n        wrapped = _(common);\n\n    var combined = _.isEmpty(adding) ? limits : combineLimits(limits, adding);\n\n    function combineLimits(limits, adding) {\n        return limits ? _.intersection(limits, adding) : adding;\n    }\n\n    return combined ? wrapped.intersection(combined).sort().last() : wrapped.sort().last();\n};\n\nGuard.prototype._applyAggregateLimits = function _applyAggregateLimits(ejecting) {\n    var map = this._map,\n        shelves = _.where(ejecting, { _type: 'shelf' }),\n        usedByManual = _.some(shelves, isUsedByManual);\n\n    function isUsedByManual(shelf) {\n        return map.inspect(shelf).isUsedByManualAggregate();\n    }\n\n    if (usedByManual) {\n        _.forEach(this._proposals, function applyLimits(candidate) {\n            this._disable(candidate, 'aggr.manual', true, false);\n        }, this);\n    }\n};\n\nGuard.prototype._applyConfigLimits = function _applyConfigLimits(configGroup) {\n    var addingLine = configGroup.parent ? configGroup.parent.id : configGroup.id,\n        existingLine = this._sampleProductLine();\n\n    if (existingLine && (existingLine !== addingLine)) {\n        _.forEach(this._proposals, function applyLimits(candidate) {\n            this._disable(candidate, 'productLine', existingLine, addingLine);\n        }, this);\n    }\n\n    _.forEach(this._proposals, function enforceLimits(candidate) {\n        this._enforceConfigLimit(candidate, configGroup);\n        this._enforceEmbeddedShelf(candidate);  // TODO: Really does not belong here\n    }, this);\n};\n\nGuard.prototype._applyClusterLimits = function _applyClusterLimits(summary, versions) {\n    _.forEach(this._proposals, function enforceLimits(candidate) {\n        this._enforceNodeLimit(candidate, summary);\n        this._enforceVersionLimit(candidate, versions);\n    }, this);\n};\n\nGuard.prototype._applyHagroupLimits = function _applyHagroupLimits(ejecting) {\n    _.forEach(this._addingToHagroups, function applyLimits(hagroup) {\n        if (!this._map.inspect(hagroup).isESeries) {\n            _.forEach(this._proposals, function enforceLimits(candidate) {\n                var isEncrypted = this._getEncryptionLimit(candidate, hagroup, ejecting);\n\n                this._enforceEncryptionLimit(candidate, isEncrypted);\n            }, this);\n        }\n    }, this);\n\n    _.forEach(this._impactedHagroups, function applyLimits(hagroup) {\n        var hagroupInspector = this._map.inspect(hagroup),\n            shelfDriveSummary = hagroupInspector.shelfDriveSummary(ejecting);\n\n        _.forEach(this._proposals, function enforceLimits(candidate) {\n            var summary = this._addEmbeddedCounts(shelfDriveSummary, candidate);\n\n            this._enforceAggregateLimit(candidate, hagroupInspector);\n            this._enforceCapacityLimit(candidate, summary);\n            this._enforceDriveLimit(candidate, summary);\n            this._enforceShelfLimit(candidate, summary);\n        }, this);\n    }, this);\n};\n\nGuard.prototype._applyHardwareLimits = function _applyHardwareLimits(hagroups) {\n    _.forEach(this._proposals, enforceLimits, this);\n\n    function enforceLimits(candidate) {\n        var shelfConfigs = getExternalShelfConfigs(candidate.matrix.hardwareOptions);\n\n        // jshint -W040\n        _.forEach(hagroups, _.partial(checkShelves, shelfConfigs, candidate), this);\n    }\n\n    function getExternalShelfConfigs(hardware) {\n        var configs = [];\n\n        Array.prototype.push.apply(configs, hardware.shelves);\n        Array.prototype.push.apply(configs, hardware.shelfPresets);\n\n        return _.where(configs, { isEmbedded: false });\n    }\n\n    function checkShelves(shelfConfigs, candidate, hagroup) {\n        var shelves = _.where(hagroup.shelves, { _isembedded: false }),\n            hasBadShelf = _.some(shelves, function noMatches(shelf) {\n                return noMatchingShelfConfig(shelf, shelfConfigs);\n            });\n\n        if (hasBadShelf) {\n            // jshint -W040\n            this._disable(candidate, 'hardware.shelf', true, false);\n        }\n    }\n\n    function noMatchingShelfConfig (shelf, configs) {\n        var shelfConfig = modelUtil.chooseClosestShelfConfig(shelf, configs);\n\n        return shelfConfig ? false : true;\n    }\n};\n\nGuard.prototype._applyEmbeddedLimits = function _applyEmbeddedLimits(ejecting) {\n    _.forEach(this._proposals, enforceLimits, this);\n\n    function enforceLimits(candidate) {\n        // jshint -W040\n        this._enforceEmbeddedLimit(candidate, ejecting);\n    }\n};\n\nGuard.prototype._applyPolicyLimits = function _applyPolicyLimits(productLine) {\n    _.forEach(this._proposals, enforceLimits, this);\n\n    function enforceLimits(policy) {\n        if (!_.contains(policy.productLines, productLine)) {\n            // jshint -W040\n            this._disable(policy, 'productLine', policy.productLines, productLine);\n        }\n    }\n};\n\nGuard.prototype._applyVersionChangeLimits = function _applyVersionChangeLimits(hagroups) {\n    _.forEach(this._proposals, checkImpactedHagroups, this);\n\n    function checkImpactedHagroups(proposal) {\n        // jshint -W040\n        _.forEach(hagroups, _.partial(assertLimits, proposal), this);\n    }\n\n    function assertLimits(proposal, hagroup) {\n        // jshint -W040\n        var inspector = this._map.inspect(hagroup),\n            summary = inspector.shelfDriveSummary(),\n            limits = inspector.config.matrix.getLimitsForVersion(proposal.newVersion);\n\n        if (limits.capacity_gb && (summary.capacity > limits.capacity_gb)) {\n            this._disable(proposal, 'capacity_gb', limits.capacity_gb, summary.capacity);\n        }\n\n        _.forOwn(summary.drive || {}, function enforce(count, type) {\n            var limit = limits.drive[type] || 0,\n                attribute = 'drive.' + type;\n\n            if (count > limit) {\n                this._disable(proposal, attribute, limit, count);\n            }\n        }, this);\n\n        if (limits.ext_shelves && (summary.shelf.external > limits.ext_shelves)) {\n            this._disable(proposal, 'ext_shelves', limits.ext_shelves, summary.shelf.external);\n        }\n\n        var reporter = new AggregateReporter(inspector),\n            cacheLimit = limits.cache_no_flash || 0,\n            totalCacheCapacity = this._getTotalCacheCapacity(inspector, reporter);\n\n        this._enforceFpSize(proposal, totalCacheCapacity, cacheLimit);\n\n        if (limits.aggr) {\n            this._enforceAggrSize(proposal, inspector, reporter, limits.aggr);\n        }\n\n        if (!inspector.isESeries) {\n            this._enforceEncryptionLimit(proposal, this._getEncryptionLimit(proposal, hagroup));\n        }\n    }\n};\n\n// TODO: Envy - Refactor to account for this when building the option!\nGuard.prototype._addEmbeddedCounts = function _addEmbeddedCounts(shelfDriveSummary, candidate) {\n    var summary = _.cloneDeep(shelfDriveSummary),\n        shelf = candidate.newEmbeddedShelf,\n        capacity = 0,\n        counts = {};\n\n    if (!_.isEmpty(shelf)) {\n        _.forEach(shelf.drives, function count(spec) {\n            var quantity = spec.quantity,\n                type = spec.drive.type,\n                size = spec.drive.capacity.marketing || 0;\n\n            capacity += size * quantity;\n            counts[type] = (counts[type] || 0) + quantity;\n        });\n\n        var driveTotal = _.reduce(counts, function sum(driveTotal, count) {\n            return driveTotal + count;\n        }, 0);\n\n        /* jshint -W069 */\n        summary.capacity += capacity;\n        summary.shelf.total++;\n        summary.drive.total += driveTotal;\n        summary.drive.fc += counts['FC'] || 0;\n        summary.drive.sas += (counts['SAS'] || 0) + (counts['NL-SAS'] || 0);\n        summary.drive.sata += (counts['SATA'] || 0) + (counts['MSATA'] || 0);\n        summary.drive.ssd += counts['SSD'] || 0;\n    }\n\n    return summary;\n};\n\nGuard.prototype._enforceAggregateLimit = function _enforceAggregateLimit(candidate, inspector) {\n    var reporter = new AggregateReporter(inspector),\n        limits = candidate.newLimits;\n\n    if (limits) {\n        var cacheLimit = limits.cache_no_flash || 0,\n            totalCacheCapacity = this._getTotalCacheCapacity(inspector, reporter);\n\n        this._enforceFpSize(candidate, totalCacheCapacity, cacheLimit);\n\n        if (limits.aggr) {\n            this._enforceAggrSize(candidate, inspector, reporter, limits.aggr);\n        }\n    }\n};\n\nGuard.prototype._enforceAggrSize = function _enforceAggrSize(proposal, inspector, reporter, limit) {\n    var usableLimit = limit.size_64_tb || 0,\n        driveMin = limit.min_fp_drives || 0;\n\n    _.forEach(inspector.hagroup.controllers, checkManualAggregateLimits, this);\n\n    function checkManualAggregateLimits(controller) {\n        var manual = _.where(controller.aggregates, { _manual: true, is_root_aggregate: false });\n\n        // jshint -W040\n        _.forEach(manual, checkLimits, this);\n    }\n\n    function checkLimits(aggregate) {\n        var aggregateReport = reporter.createAggregateReport(aggregate, inspector.versionNumber),\n            summary = aggregateReport.summary;\n\n        var effectiveLimit = new Unit(usableLimit, 'TB'),\n            effectiveLimitGB = effectiveLimit.value_gb,\n            actualUsableGB = summary.usableCapacity,\n            cacheDataDrives = summary.driveRoleSummary.cacheData;\n\n        // jshint -W040\n        if (usableLimit && (actualUsableGB > effectiveLimitGB)) {\n            this._disable(proposal, 'aggr.size_64_tb', effectiveLimitGB, actualUsableGB);\n        }\n\n        if (driveMin && aggregate.is_hybrid && (driveMin > cacheDataDrives)) {\n            this._disable(proposal, 'aggr.min_fp_drives', driveMin, cacheDataDrives);\n        }\n    }\n};\n\nGuard.prototype._enforceFpSize = function _enforceFpSize(proposal, actualCacheGB, limit) {\n    var fpLimit = new Unit(limit, 'TB'),\n        fpLimitGB = fpLimit.value_gb;\n\n    if (limit && (actualCacheGB > fpLimitGB)) {\n        this._disable(proposal, 'cache_no_flash', fpLimitGB, actualCacheGB);\n    }\n};\n\nGuard.prototype._getTotalCacheCapacity = function _getTotalCacheCapacity(inspector, reporter) {\n    var constraints = { _manual: true, is_root_aggregate: false, is_hybrid: true },\n        totalCache = _.reduce(inspector.hagroup.controllers, sumController, 0);\n\n    function sumController(totalCache, controller) {\n        var fp = _.where(controller.aggregates, constraints);\n\n        return totalCache + _.reduce(fp, sumAggregate, 0);\n    }\n\n    function sumAggregate(aggregateCache, fpAggregate) {\n        var aggregateReport = reporter.createAggregateReport(fpAggregate, inspector.versionNumber),\n            summary = aggregateReport.summary;\n\n        return aggregateCache + summary.cacheCapacity;\n    }\n\n    return totalCache;\n};\n\nGuard.prototype._sampleProductLine = function _sampleProductLine() {\n    var hagroup;\n\n    _.forEach(this._map.installations, searchInstallation);\n\n    function searchInstallation(installation) {\n        if (installation.hagroups.length) {\n            hagroup = installation.hagroups[0];\n        } else if (installation.clusters.length) {\n            _.forEach(installation.clusters, searchCluster);\n        }\n    }\n\n    function searchCluster(cluster) {\n        if (cluster.hagroups.length) {\n            hagroup = cluster.hagroups[0];\n        }\n    }\n\n    return hagroup ? this._map.inspect(hagroup).productLine : '';\n};\n\nGuard.prototype._getEncryptionLimit = function _getEncryptionLimit(candidate, hagroup, ejecting) {\n    if (!_.isEmpty(candidate.newEmbeddedShelf)) {\n        return _.some(candidate.newEmbeddedShelf.drives, isEncryptedSpec);\n    }\n\n    function isEncryptedSpec(spec) {\n        return spec.drive.encrypted;\n    }\n\n    var shelves = this._remainingShelves(hagroup, ejecting),\n        result;\n\n    if (!_.isEmpty(shelves)) {\n        result = _.some(shelves, hasEncryptedDrive);\n    }\n\n    function hasEncryptedDrive(shelf) {\n        var specs = shelf._x_bom ? shelf._x_bom.drive_specs || [] : [];\n\n        return _.some(specs, isEncryptedDrive);\n    }\n\n    function isEncryptedDrive(drive) {\n        return drive.encrypted;\n    }\n\n    return result;\n};\n\nGuard.prototype._remainingShelves = function _remainingShelves(hagroup, ejecting) {\n    var shelves = _.where(ejecting, { _type: 'shelf' });\n\n    return _.filter(hagroup.shelves || [], function isNotReplacing(shelf) {\n        return !_.some(shelves, { _id: shelf._id });\n    });\n};\n\nGuard.prototype._enforceConfigLimit = function _enforceConfigLimit(candidate, configGroup) {\n    if (!configGroup.enabled) {\n        this._disable(candidate, 'enabled', true, false);\n    }\n};\n\n// TODO: effect count would be off if we supported changing a group of hagroups\nGuard.prototype._enforceNodeLimit = function _enforceNodeLimit(candidate, summary) {\n    var peerLimit = summary.limits ? summary.limits.nas : undefined,\n        candidateLimit = candidate.newLimits.nas_nodes || 0,\n        limit = (peerLimit === undefined) ? candidateLimit : Math.min(peerLimit, candidateLimit);\n\n    var peerCount = summary.quantity || 0,\n        candidateCount = candidate.controllerCount || 0,\n        count = peerCount + candidateCount;\n\n    if (limit && (count > limit)) {\n        this._disable(candidate, 'nas_nodes', limit, count);\n    } else {\n        candidate.effects.node.total = count;\n        candidate.effects.node.limit = limit;\n    }\n};\n\nGuard.prototype._enforceVersionLimit = function _enforceVersionLimit(candidate, limit) {\n    var proposal;\n\n    if (_.has(candidate, 'matrix')) {\n        proposal = candidate.matrix.versions;\n    } else {\n        proposal = _.compact(_.pluck(candidate.versions, 'version'));\n    }\n\n    if (!candidate.newVersion) {\n        this._disable(candidate, 'version', _.sortBy(limit), _.sortBy(proposal));\n    } else {\n        var v = limit ? _(proposal).intersection(limit).sort().value() : _(proposal).sort().value();\n\n        candidate.effects.versions = v;\n    }\n};\n\nGuard.prototype._enforceCapacityLimit = function _enforceCapacityLimit(candidate, summary) {\n    var limit = _.isEmpty(candidate.newLimits) ? undefined : candidate.newLimits.capacity_gb;\n\n    var capacity = _.reduce(candidate.drives, function sum(capacity, driveConfig) {\n            var marketing = driveConfig.drive.capacity.marketing;\n\n            return capacity + (marketing * driveConfig.quantity * candidate.quantity);\n        }, summary.capacity);\n\n    if (limit && (capacity > limit)) {\n        this._disable(candidate, 'capacity_gb', limit, capacity);\n    } else {\n        candidate.effects.capacityGb = capacity;\n    }\n};\n\nGuard.prototype._enforceDriveLimit = function _enforceDriveLimit(candidate, summary) {\n    var limits = _.isEmpty(candidate.newLimits) ? undefined : candidate.newLimits.drive,\n        counts = {};\n\n    if (limits) {\n        _.forEach(candidate.drives || [], function count(driveConfig) {\n            var type = this._normalizeDriveType(driveConfig.drive.type);\n            counts[type] = (counts[type] || 0) + (driveConfig.quantity * candidate.quantity);\n        }, this);\n\n        var total = _.reduce(counts, function sum(total, count) {\n            return total + count;\n        }, 0);\n\n        counts.total = total;\n\n        _.forOwn(summary.drive || {}, function enforce(existing, type) {\n            var count = (counts[type] || 0) + existing,\n                limit = limits[type] || 0,\n                attribute = 'drive.' + type;\n\n            if (count > limit) {\n                this._disable(candidate, attribute, limit, count);\n            } else {\n                candidate.effects.drive[type] = count;\n            }\n        }, this);\n    }\n};\n\nGuard.prototype._normalizeDriveType = function _normalizeDriveType(type) {\n    switch (type) {\n        case 'SATA': return 'sata';\n        case 'FC': return 'fc';\n        case 'SAS': return 'sas';\n        case 'SSD': return 'ssd';\n        case 'MSATA': return 'sata';\n        case 'NL-SAS': return 'sas';\n        default: return undefined;\n    }\n};\n\nGuard.prototype._enforceShelfLimit = function _enforceShelfLimit(candidate, summary) {\n    var limit = _.isEmpty(candidate.newLimits) ? undefined : candidate.newLimits.ext_shelves,\n        isSystemCandidate = _.has(candidate, 'matrix'),\n        newShelves = (isSystemCandidate || candidate.isEmbedded) ? 0 : candidate.quantity,\n        count = summary.shelf.external + newShelves;\n\n    if (limit && (count > limit)) {\n        this._disable(candidate, 'ext_shelves', limit, count);\n    } else {\n        var newTotal = (isSystemCandidate && !candidate.isEmbedded) ? count : (count + 1);\n\n        candidate.effects.shelf.total = newTotal;\n        candidate.effects.shelf.external = count;\n    }\n};\n\nGuard.prototype._enforceEncryptionLimit = function _enforceEncryptionLimit(candidate, limit) {\n    var encrypted = _.some(candidate.drives, isEncryptedSpec);\n\n    function isEncryptedSpec(spec) {\n        return spec.drive.encrypted;\n    }\n\n    if ((limit !== undefined) && !_.isEmpty(candidate.drives) && (encrypted !== limit)) {\n        this._disable(candidate, 'drive.nse', limit, encrypted);\n    }\n};\n\nGuard.prototype._enforceEmbeddedLimit = function _enforceEmbeddedLimit(candidate, ejecting) {\n    var shelves = _.where(ejecting, { _type: 'shelf' });\n\n    if (_.isEmpty(shelves)) {\n        if (candidate.isEmbedded) {\n            this._disable(candidate, 'embedded', false, true);\n        }\n    } else {\n        _.forEach(shelves, function checkEmbedded(shelf) {\n            if (shelf._isembedded !== candidate.isEmbedded) {\n                this._disable(candidate, 'embedded', shelf._isembedded, candidate.isEmbedded);\n            }\n        }, this);\n    }\n};\n\nGuard.prototype._enforceEmbeddedShelf = function _enforceEmbeddedShelf(candidate) {\n    if (candidate.isEmbedded && _.isEmpty(candidate.newEmbeddedShelf)) {\n        this._disable(candidate, 'embeddedShelf', true, false);\n    }\n};\n\nGuard.prototype._disable = function _disable(candidate, attribute, limit, proposal) {\n    candidate.conflicts.push({\n        attribute: attribute,\n        limit: limit,\n        proposal: proposal\n    });\n};\n\nmodule.exports = Guard;\n","'use strict';\n\nvar _ = require('lodash');\n\nvar PROPFUNCS = [\n        devices\n    ];\n\nfunction AggregateInspector(init) {\n    init(this); // this.inspect, this.info, this.cluster, this.hagroup, ...\n\n    for (var idx in PROPFUNCS) {\n        var fn = PROPFUNCS[idx];\n        Object.defineProperty(this, fn.name, { get: _.bind(fn, this) });\n    }\n}\n\nfunction devices() {\n    // jshint -W040\n    return _(this.aggregate._raid_groups || [])\n        .map('_devices')\n        .flatten()\n        .value();\n}\n\nmodule.exports = AggregateInspector;\n","'use strict';\n\nvar _ = require('lodash');\n\nfunction ClusterInspector(init) {\n    init(this); // this.inspect, this.info, this.cluster\n}\n\nClusterInspector.prototype.nodeSummary = function nodeSummary(ejecting) {\n    var count = 0,\n        nasLimit,\n        sanLimit,\n        inspect = this.inspect;\n\n    _.forEach(this._remainingHagroups(ejecting), function summarize(hagroup) {\n        var hagroupInspector = inspect(hagroup),\n            nasNodes = hagroupInspector.limits.nas_nodes,\n            sanNodes = hagroupInspector.limits.san_nodes;\n\n        count += hagroup.controllers.length || 0;\n        nasLimit = (nasLimit === undefined) ? nasNodes : Math.min(nasLimit, nasNodes);\n        sanLimit = (sanLimit === undefined) ? sanNodes : Math.min(sanLimit, sanNodes);\n    }, this);\n\n    return {\n        quantity: count,\n        limits: {\n            nas: nasLimit || undefined,\n            san: sanLimit || undefined\n        }\n    };\n};\n\nClusterInspector.prototype.versionRange = function versionRange(ejecting) {\n    var inspect = this.inspect;\n\n    return _.reduce(this.cluster.hagroups || [], function intersection(range, hagroup) {\n        var hagroupInspector = inspect(hagroup),\n            shelfRange = hagroupInspector.shelfVersionRange(ejecting);\n\n        var isEjectingHagroup = _.some(ejecting, { _type: 'hagroup', _id: hagroup._id }),\n            versions;\n\n        if (isEjectingHagroup) {\n            versions = shelfRange ? shelfRange : range;\n        } else {\n            var systemRange = hagroupInspector.config.matrix.versions;\n\n            versions = shelfRange ? _.intersection(systemRange, shelfRange) : systemRange;\n        }\n\n        return range ? _.intersection(range, versions) : versions;\n    }, undefined, this);\n};\n\nClusterInspector.prototype._remainingHagroups = function _remainingHagroups(ejecting) {\n    var hagroups = _.where(ejecting, { _type: 'hagroup' });\n\n    return _.filter(this.cluster.hagroups || [], function isNotReplacing(hagroup) {\n        return !_.some(hagroups, { _id: hagroup._id });\n    });\n};\n\nmodule.exports = ClusterInspector;\n","'use strict';\n\nvar _ = require('lodash'),\n    assert = require('assert'),\n    Unit = require('../../units.js');\n\nfunction ControllerInspector(init) {\n    init(this); // this.inspect, this.info, this.cluster, this.hagroup, ...\n}\n\n// TODO: competition: who can write this the cleanest, most maintainable way?\n\nControllerInspector.prototype.devicesConsumedByAggregates = function DCBA(excludeAutoNonRoot) {\n    var aggrDevices = _(this.controller.aggregates || [])\n            .filter(excludeAutoNonRoot ? manualAndAutoRootAggregatesOnly : null)\n            .map('_raid_groups').flatten()\n            .map(safeGetDevices).flatten()\n            .value();\n            /*, I do not think we need this anymore\n         poolDevices = _(this.controller.storage_pools || [])\n            .filter(excludeAutoNonRoot ? manualStoragePoolsOnly : null)\n            .map(safeGetDevices).flatten()\n            .value(); */\n\n    return aggrDevices; // .concat(poolDevices);\n};\n\nfunction safeGetDevices(deviceHolder) {\n    if (deviceHolder === undefined) {\n        return []; // likely: aggr lacked _raid_groups\n    } else {\n        return deviceHolder._devices || [];\n    }\n}\n\nfunction manualAndAutoRootAggregatesOnly(aggr) {\n    return aggr._manual || aggr.is_root_aggregate;\n}\n/*\nfunction manualStoragePoolsOnly(pool) {\n    return pool._manual;\n} */\n\nControllerInspector.prototype.storagePoolDevices = function storagePoolDevices() {\n    /*\n        Look in the controller.storage_pools and figure out what slices devices we have.\n\n        Result:\n        [\n          {\n            \"storagePoolId\": <string>, // Which storage pool it is a part of\n            \"sliceName\": <string>, // Slice name ex. P1, P2, P3, P4\n            \"rsGBPerDevice\": <int>, // Right-sized capacity for slice, based on WAFL blocks (when virtual)\n            \"isPhysical\": <bool>, // Is this a physical component to storage pool\n            \"spec\": <object>, // Physical Device spec for device\n            \"devices\": [<string>] // Array of deviceIds with partition that are a part of this allocation unit\n          }\n        ]\n    */\n\n    var devices = [],\n        _this = this;\n\n    if (this.controller.storage_pools) {\n        assert(_.isArray(this.controller.storage_pools), 'Controller storage pools must be an array');\n\n        _.forEach(this.controller.storage_pools, function(storagePool) {\n            var storagePoolPhysicalSpec = (storagePool.__deviceSpecs) ? _.first(storagePool.__deviceSpecs).spec : undefined;\n\n            devices.push({\n                devices: storagePool._devices,\n                spec: storagePoolPhysicalSpec,\n                storagePoolId: storagePool._id,\n                isPhysical: true\n            });\n\n            _.forEach(storagePool._allocations, function(allocation) {\n                var storagePoolVirtualSpec = (allocation.__deviceSpecs) ? _.first(allocation.__deviceSpecs).spec : undefined,\n                    rsgbPerDevice = _this._waflBlocksToGb(allocation.used_blocks);\n\n                devices.push({\n                    devices: allocation.devices,\n                    spec: storagePoolVirtualSpec,\n                    storagePoolId: storagePool._id,\n                    isPhysical: false,\n                    sliceName: allocation.slice,\n                    rsGBPerDevice: rsgbPerDevice\n                });\n            });\n        });\n    }\n\n    return devices;\n};\n\nControllerInspector.prototype.assignedStorageSlices = function() {\n    /*\n        Concept:\n\n        1) Look in _assigned_storage and capture the available slices\n\n        Result:\n        [\n          {\n            \"owningControllerId\": <string>, // Controller Id\n            \"sliceName\": <string>, // Slice name ex. P1, P2\n            \"waflBlocks\": <int>, // How many 4kb wafl blocks for entire partition\n            \"totalSizeGb\": <decimal>, // Size in GB for entire partition\n            \"rsgbPerDevice\": <decimal>, // Size in GB for each device (useful for aggregate builder, capacity summary, etc)\n            \"devices\": [<string>] // Array of deviceIds with partition that are a part of this slice\n          }\n        ]\n    */\n\n    var controllerStorage = [],\n        _this = this;\n\n    if (this.controller._assigned_storage) {\n        _.forEach(this.controller._assigned_storage, function(assignedStorage) {\n            if (!assignedStorage.slice_details.devices) {\n                return; // Nothing here\n            }\n\n            var sliceDetails = assignedStorage.slice_details,\n                assignedStorageSizeGb = _this._waflBlocksToGb(sliceDetails.used_blocks);\n\n            controllerStorage.push({\n                owningControllerId: _this.controller._id,\n                sliceName: sliceDetails.slice,\n                waflBlocksPerDevice: sliceDetails.used_blocks,\n                rsGBPerDevice: assignedStorageSizeGb,\n                devices: sliceDetails.devices\n            });\n        });\n    }\n\n    return controllerStorage;\n};\n\nControllerInspector.prototype._waflBlocksToGb = function(waflBlocks) {\n    // Per build/adp Wafl block is 4KiB (4096 bytes)\n    var waflCapacityUnit = new Unit(4, 'KiB').mult(waflBlocks);\n\n    return waflCapacityUnit.value_gb;\n};\n\nmodule.exports = ControllerInspector;\n","'use strict';\n\nvar _ = require('lodash'),\n    assert = require('assert');\n\nfunction EnvironmentalSummary(map, hagroups) {\n    assert(hagroups instanceof Array, '87f630a3');\n    assert(_.has(map, 'inspect'), 'e6f2781d');\n    this._selectedHaGroups = hagroups;\n    this.inspect = map.inspect;\n}\n\nEnvironmentalSummary.prototype._initSummary = function() {\n    this.summary = {\n        completeStatsAvailable: true,\n        power_spec:{\n            v_100: {\n                typical: {\n                    amps: 0.0,\n                    watts: 0.0,\n                    BTU: 0.0\n                },\n                worst: {\n                    amps: 0.0,\n                    watts: 0.0,\n                    BTU: 0.0\n                }\n            },\n            v_200: {\n                typical: {\n                    amps: 0.0,\n                    watts: 0.0,\n                    BTU: 0.0\n                },\n                worst: {\n                    amps: 0.0,\n                    watts: 0.0,\n                    BTU: 0.0\n                }\n            }\n        },\n        rack_units: 0,\n        max_psu: 0,\n        weight_g: 0.0\n    };\n};\n\nEnvironmentalSummary.prototype.create = function() {\n    var _this = this;\n\n    this._initSummary();\n\n    _.forEach(_this._selectedHaGroups, function(hagroup) {\n        var haGroupInspector = _this.inspect(hagroup);\n        assert(haGroupInspector);\n\n        _.forEach(hagroup.controllers, function() { //controller\n            _this._addController(hagroup); //controller);\n        });\n        _.forEach(hagroup.shelves, function(shelf) {\n            _this._addShelf(shelf);\n        });\n    });\n\n    return this.summary;\n};\n\nEnvironmentalSummary.prototype._addPartPowerSpec = function(part) {\n    var inspector = this.inspect(part),\n        config = inspector.config || inspector.config(),\n        powerSpec = config.stats.power_spec || config.stats.power.power_spec; // config.stats.power.with_internal\n\n    this._addPowerSpecsToSummary(powerSpec);\n};\n\nEnvironmentalSummary.prototype._addController = function(controller) {\n    var inspector = this.inspect(controller),\n        stats = inspector.config.stats,\n        powerSpec = stats.power.power_spec;\n\n    if (!inspector.config.isEmbedded) {\n        this._addSpecsToSummary(stats.rack_units, stats.max_psu, stats.weight.weight_g);\n        this._addPowerSpecsToSummary(powerSpec);\n    } // else stats.power.with_internal and stats.weight.with_internal handled by shelf(isEmbedded) and drive selection\n    // TODO: allow not using the internal embedded shelf: need empty with_internal stats\n};\n\nEnvironmentalSummary.prototype._addShelf = function(shelf) {\n    var inspector = this.inspect(shelf),\n        shelfConfig = inspector.config(true),\n        stats = shelfConfig.shelf.stats;\n    var powerSpec = shelfConfig.power_spec; // shelfConfig.shelf.stats.power[0].power_spec;\n\n    this._addSpecsToSummary(stats.rack_units, stats.max_psu, shelfConfig.weight_g);\n    this._addPowerSpecsToSummary(powerSpec);\n};\n\nEnvironmentalSummary.prototype._addSpecsToSummary = function(rack_units, max_psu, weight_g) {\n    this._updateCompleteStatsAvailable(rack_units && max_psu && weight_g);\n    this.summary.rack_units += rack_units;\n    this.summary.max_psu += max_psu;\n    this.summary.weight_g += weight_g;\n};\n\nEnvironmentalSummary.prototype._addPowerSpecsToSummary = function(powerSpec) {\n    this._updateCompleteStatsAvailable(powerSpec && powerSpec.v_100 && powerSpec.v_200);\n    this.summary.power_spec = this._addPowerSpecs(this.summary.power_spec, powerSpec);\n};\n\nEnvironmentalSummary.prototype._updateCompleteStatsAvailable = function(available) {\n    this.summary.completeStatsAvailable = this.summary.completeStatsAvailable && available;\n};\n\nEnvironmentalSummary.prototype._addPowerSpecs = function(a, b) {\n    return {\n        v_100: a.v_100 && b.v_100 ? this._addPowerSpecVoltages(a.v_100, b.v_100) : a.v_100 || b.v_100,\n        v_200: a.v_200 && b.v_200 ? this._addPowerSpecVoltages(a.v_200, b.v_200) : a.v_200 || b.v_200\n    };\n};\n\nEnvironmentalSummary.prototype._addPowerSpecVoltages = function(a, b) {\n    return {\n        typical: this._addPowerSpecCase(a.typical, b.typical),\n        worst: this._addPowerSpecCase(a.worst, b.worst)\n    };\n};\n\nEnvironmentalSummary.prototype._addPowerSpecCase = function(a, b) {\n    return {\n        amps: a.amps + b.amps,\n        watts: a.watts + b.watts,\n        BTU: a.BTU + b.BTU\n    };\n};\n\nEnvironmentalSummary.prototype._nullToZero = function(val) {\n    if (val === undefined || val === null) {\n        return 0.0;\n    }\n    else {\n        return val;\n    }\n};\n\nEnvironmentalSummary.prototype.weightGtoKg = function(weightG) {\n    return weightG / 1000;\n};\n\nEnvironmentalSummary.prototype.weightGtoLbs = function(weightG) {\n    return weightG * 2.20462262185 / 1000;\n};\n\nEnvironmentalSummary.prototype.powerWattsToVoltAmps = function(watts) {\n    var powerFactor = 0.95;\n    return watts / powerFactor;\n};\n\nEnvironmentalSummary.prototype.powerWattsToKWhPerYear = function(watts) {\n    return 8.76581277 * watts;\n};\n\nmodule.exports = EnvironmentalSummary;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    modelUtil = require('../util'),\n    lcprop = require('../../lcprop'),\n    deviceInfo = require('../../clip/device-info'),\n    addQueryAPI = require('../../add-query-api'),\n    Lookup = require('./lookup');\n\nfunction HagroupInspector(init) {\n    init(this); // this.inspect, this.info, this.cluster, this.hagroup, ...\n\n    var info = this.info,\n        hagroup = this.hagroup;\n\n    assert.notEqual(info, undefined, 'a4bc15c3');\n    assert.notEqual(hagroup, undefined, '4b3aa363');\n\n    lcprop(this, 'config', function getConfig() {\n        return info.getConfig(hagroup);\n    });\n\n    lcprop(this, 'configGroup', function getConfigGroup() {\n        return info.determineConfigGroup(hagroup);\n    });\n\n    lcprop(this, 'productLine', function getProductLine() {\n        var group = this.configGroup,\n            parent = group.parent;\n\n        return parent ? parent.id : group.id;\n    });\n\n    lcprop(this, 'limits', function getLimits() {\n        return this.config.matrix.getLimitsForVersion(hagroup.version);\n    });\n\n    lcprop(this, 'isESeries', function isEseries() {\n        if (!this.config || !this.config.platformModel) {\n            return false;\n        }\n\n        return this.config.platformModel.toUpperCase().indexOf('E') === 0;\n    });\n\n    lcprop(this, 'isFlashRay', function isFlashRay() {\n        if (!this.config.platformModel) {\n            return false;\n        }\n\n        return this.config.platformModel.toUpperCase().indexOf('RAY') === 0;\n    });\n\n    lcprop(this, 'versionNumber', function extractVersionNumber() {\n        var fullVersion = this.hagroup.version,\n            indexOfSeperator = this.hagroup.version.indexOf(' '),\n            versionNumber = (indexOfSeperator) ? fullVersion : fullVersion.substring(0, indexOfSeperator);\n\n        return versionNumber;\n    });\n\n    lcprop(this, 'embeddedShelf', _.partial(findEmbeddedShelf, hagroup));\n\n    lcprop(this, 'controllers', this._get_controllers);\n    lcprop(this, 'aggregates', this._get_aggregates);\n\n    /*\n    lcprop(this, 'deviceInfo', function () {\n        return deviceInfo.from.hagroup(hagroup);\n    }); */\n    lcprop(this, 'deviceInfo', this._get_deviceInfo);\n\n    lcprop(this, 'fpStatusByDriveModel', function () {\n        var matrix = this.config.matrix,\n            result = {},\n            version = _.last(this.config.matrix.versions);\n\n        _.forEach(hagroup.shelves, function (shelf) {\n            _.forEach(shelf._x_bom.drive_specs, function (spec) {\n                result[spec.model] = matrix.checkVersionShelfDrive(\n                    version,\n                    shelf.model,\n                    spec.model\n                ).fp_support_drive;\n            });\n        });\n\n        return result;\n    });\n\n    lcprop(this, 'lookup', function () {\n        return new Lookup(this);\n    });\n}\n\nvar AGGR_FILTERS = {\n        manual: { _manual: true }\n    },\n    CONTROLLER_FILTERS = {\n        // none yet\n    };\n\nHagroupInspector.prototype._get_controllers = function controllers() {\n    return addQueryAPI(this.hagroup.controllers, CONTROLLER_FILTERS);\n};\n\nHagroupInspector.prototype._get_deviceInfo = function() {\n    return deviceInfo.from.hagroup(this.hagroup);\n};\n\nHagroupInspector.prototype._get_aggregates = function aggregates() {\n    var arrays = this.controllers.map('aggregates').filter();\n    return addQueryAPI(_.flatten(arrays), AGGR_FILTERS);\n};\n\nHagroupInspector.prototype.latestDeviceInfo = function() {\n    return this._get_deviceInfo();\n};\n\nHagroupInspector.prototype.availableDevices = function availableDevices() {\n    return this.transformDriveInfoSequence(this.latestDeviceInfo().where.unused); // where.unused.and.unlocked\n};\n\nHagroupInspector.prototype.availablePhysicalDevices = function availablePhysicalDevices() {\n    return this.transformDriveInfoSequence(this.latestDeviceInfo().where.physical.and.unused);\n};\n\nHagroupInspector.prototype.availableStoragePoolDevices = function availableStoragePoolDevices() {\n    return this.transformDriveInfoSequence(this.latestDeviceInfo().where.storagepool.and.unused);\n};\n\n// Show everything, even things that are already consumed\nHagroupInspector.prototype.allDevices = function allDevices() {\n    return this.transformDriveInfoSequence(this.latestDeviceInfo());\n};\n\n// Show everything, just do NOT provide any virtual devices\nHagroupInspector.prototype.allPhysicalDevices = function allPhysicalDevices() {\n    return this.transformDriveInfoSequence(this.latestDeviceInfo().where.physical);\n};\n\n/* May be causing issues */\nHagroupInspector.prototype.unlockedPhysicalDevices = function unlockedPhysicalDevices() {\n    return this.transformDriveInfoSequence(this.latestDeviceInfo().where.physical.and.unlocked);\n};\n\nHagroupInspector.prototype.transformDriveInfoSequence = function transformDriveInfoSequence(results) {\n    var lastSpec = null,\n        lastFp = null,\n        specsByFp = {},\n        devicesByFp = {};\n\n    for (var idx in results) {\n        var info = results[idx],\n            spec = info.spec,\n            fp = fingerprint(spec);\n        if (!_.has(specsByFp, fp)) {\n            spec.fp_support = this.fpStatusByDriveModel[spec.model];\n            specsByFp[fp] = spec;\n            devicesByFp[fp] = [];\n        }\n        devicesByFp[fp].push(info.id);\n    }\n\n    var result = [];\n\n    for (var key in specsByFp) {\n        result.push({\n            spec: specsByFp[key],\n            devices: devicesByFp[key],\n        });\n    }\n\n    return result;\n\n    function fingerprint(spec) {\n        if (spec === lastSpec) {\n            return lastFp;\n        } else {\n            lastSpec = spec;\n            lastFp = spec.model;\n            if (spec.slice) {\n                lastFp = lastFp + '/' + spec.slice + '=' + spec.rsgb;\n            }\n            return lastFp;\n        }\n    }\n};\n\nHagroupInspector.prototype.storagePools = function storagePools() {\n    var pools = _.flatten(_.map(this.hagroup.controllers, function(controller) {\n        if (controller.storage_pools) {\n            return controller.storage_pools;\n        }\n\n        return [];\n    }));\n\n    return pools;\n};\n\nHagroupInspector.prototype.nodeSummary = function nodeSummary(ejecting) {\n    if (this.hagroup.is_clustered) {\n        return this.inspect(this.cluster).nodeSummary(ejecting);\n    } else {\n        var count = 0, nasLimit, sanLimit;\n        var isEjectingHagroup = _.some(ejecting, { _type: 'hagroup', _id: this.hagroup._id });\n\n        if (!isEjectingHagroup) {\n            var nasNodes = this.limits.nas_nodes,\n                sanNodes = this.limits.san_nodes;\n\n            count += this.hagroup.controllers.length || 0;\n            nasLimit = (nasLimit === undefined) ? nasNodes : Math.min(nasLimit, nasNodes);\n            sanLimit = (sanLimit === undefined) ? sanNodes : Math.min(sanLimit, sanNodes);\n        }\n\n        return {\n            quantity: count,\n            limits: {\n                nas: nasLimit || undefined,\n                san: sanLimit || undefined\n            }\n        };\n    }\n};\n\nHagroupInspector.prototype.shelfDriveSummary = function shelfDriveSummary(ejecting) {\n    var capacity = 0,\n        counts = {},\n        shelves = this._remainingShelves(ejecting);\n\n    _.forEach(shelves, function countByType(shelf) {\n        var specs = shelf._x_bom ? shelf._x_bom.drive_specs || [] : [],\n            members = shelf._x_bom ? shelf._x_bom.drive_spec_members || [] : [];\n\n        _.forEach(specs, function count(spec, index) {\n            var quantity = members[index].length;\n\n            capacity += (spec.rawgb || 0) * quantity;\n            counts[spec.type] = (counts[spec.type] || 0) + quantity;\n        });\n    });\n\n    var driveTotal = _.reduce(counts, function sum(driveTotal, count) {\n            return driveTotal + count;\n        }, 0);\n\n    /* jshint -W069 */\n    return {\n        capacity: capacity,\n        shelf: {\n            total: shelves.length,\n            external: (_.where(shelves, { _isembedded: false })).length\n        },\n        drive: {\n            total: driveTotal,\n            fc: counts['FC'] || 0,\n            sas: (counts['SAS'] || 0) + (counts['NL-SAS'] || 0),\n            sata: (counts['SATA'] || 0) + (counts['MSATA'] || 0),\n            ssd: counts['SSD'] || 0\n        }\n    };\n};\n\nHagroupInspector.prototype.versionRange = function versionRange(ejecting) {\n    if (this.hagroup.is_clustered) {\n        return this.inspect(this.cluster).versionRange(ejecting);\n    } else {\n        var shelfRange = this.shelfVersionRange(ejecting),\n            isEjectingHagroup = _.some(ejecting, { _type: 'hagroup', _id: this.hagroup._id });\n\n        if (isEjectingHagroup) {\n            return shelfRange ? shelfRange : undefined;\n        } else {\n            var versions = this.config.matrix.versions;\n\n            return shelfRange ? _.intersection(versions, shelfRange) : versions;\n        }\n    }\n};\n\nHagroupInspector.prototype.shelfVersionRange = function shelfVersionRange(ejecting) {\n    var shelves = this._impactedShelves(ejecting),\n        configs = this.getShelfConfigs();\n\n    return _.reduce(shelves || [], function intersection(range, shelf) {\n        var config = modelUtil.chooseClosestShelfConfig(shelf, configs),\n            versions = config ? _.pluck(config.versions, 'version') : [];\n\n        return range ? _.intersection(range, versions) : versions;\n    }, undefined);\n};\n\nHagroupInspector.prototype.getShelfConfigs = function getShelfConfigs() {\n    var hardware = this.config.matrix.hardwareOptions,\n        externalShelves = hardware.shelves,\n        embeddedShelves = hardware.embeddedShelves,\n        shelfPresets = hardware.shelfPresets,\n        result = [];\n\n    Array.prototype.push.apply(result, externalShelves);\n    Array.prototype.push.apply(result, embeddedShelves);\n    Array.prototype.push.apply(result, shelfPresets);\n\n    return result;\n};\n\nHagroupInspector.prototype._impactedShelves = function _impactedShelves(ejecting) {\n    var shelves = _.where(ejecting, { _type: 'shelf' });\n\n    return _.filter(this.hagroup.shelves || [], function isNotReplacing(shelf) {\n        return !_.some(shelves, { _id: shelf._id });\n    });\n};\n\nHagroupInspector.prototype._remainingShelves = function _remainingShelves(ejecting) {\n    var shelves = _.where(ejecting, { _type: 'shelf' });\n\n    return _.filter(this.hagroup.shelves || [], function isNotReplacing(shelf) {\n        return !_.some(shelves, { _id: shelf._id });\n    });\n};\n\nHagroupInspector.prototype.availableDeviceIdsForSpec = function deviceIdsForSpec(spec) {\n    var availableDevices = this.availableDevices(),\n        withSpec = _.where(availableDevices, { spec: spec }),\n        result = (withSpec.length > 0) ? _.first(withSpec).devices : null;\n\n    return result;\n};\n\nHagroupInspector.prototype.findSpecForDeviceId = function findSpecForDeviceId(deviceId) {\n    assert(deviceId, 'Must provide deviceId to locate spec');\n\n    var deviceSpec = null,\n        owningShelfId = this._getShelfIdForGivenDeviceId(deviceId);\n\n    if (owningShelfId) {\n        deviceSpec = this._getDeviceSpecGivenShelfIdAndDeviceId(owningShelfId, deviceId);\n    }\n\n    return deviceSpec;\n};\n\nHagroupInspector.prototype._getShelfIdForGivenDeviceId = function _getShelfIdForGivenDeviceId(deviceId) {\n    assert(deviceId, 'Must provide a deviceId to find shelfId');\n    assert(deviceId.length > 8, 'Invalid deviceId');\n\n    var shelfStartsWith = deviceId.slice(1, 9),\n        shelvesLike = _.where(this.hagroup.shelves, function(shelf) {\n            return shelf._id.indexOf(shelfStartsWith) === 0;\n        });\n\n    if (shelvesLike.length) {\n        return _.first(shelvesLike)._id;\n    }\n\n    return null;\n};\n\nHagroupInspector.prototype._getDeviceSpecGivenShelfIdAndDeviceId = function _getDeviceSpecGivenShelfIdAndDeviceId(shelfId, deviceId) {\n    assert(shelfId, 'Must provide a shelfId to resolve a device spec');\n    assert(deviceId, 'Must provide a deviceId to resolve a device spec');\n\n    var _this = this,\n        shelf = _.first(_.where(_this.hagroup.shelves, { _id: shelfId })),\n        driveSpecIndexOnShelf = this._findDeviceSpecIndexInShelfGivenDeviceId(shelf, deviceId),\n        deviceSpec = shelf._x_bom.drive_specs[driveSpecIndexOnShelf];\n\n    return deviceSpec;\n};\n\n/*\n    NOTE: We may need to change this to look at controller.allocated_storage also and expand spec to include slice capacity\n*/\nHagroupInspector.prototype._findDeviceSpecIndexInShelfGivenDeviceId = function _findDeviceSpecIndexInShelfGivenDeviceId(shelf, deviceId) {\n    assert(shelf, 'Must provide a shelf to look for spec index');\n    assert(shelf._x_bom, 'Shelf is missing _x_bom');\n    assert(deviceId, 'Must provide a deviceId to find device spec index');\n\n    var driveSpecMembers = shelf._x_bom.drive_spec_members,\n        driveSpecIndex = -1;\n\n    for (var i = 0; i < driveSpecMembers.length; i++) {\n        if (_.contains(driveSpecMembers[i], deviceId)) {\n            driveSpecIndex = i;\n            break;\n        }\n    }\n\n    return driveSpecIndex;\n};\n\nfunction findEmbeddedShelf(hagroup) {\n    var embeddedShelves = _.where(hagroup.shelves || [], { _isembedded: true });\n    if (embeddedShelves.length) {\n        assert.equal(embeddedShelves.length, 1, '>1 embedded shelf');\n        return embeddedShelves[0];\n    } else {\n        return null;\n    }\n}\n\nmodule.exports = HagroupInspector;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash');\n\n\nfunction GenericInspector(init) {\n    init(this);\n}\n\nvar CONSTRUCTORS = {\n        'cluster': require('./cluster'),\n        'hagroup': require('./hagroup'),\n        'shelf': require('./shelf'),\n        'controller': require('./controller'),\n        'aggregate': require('./aggregate'),\n        'storage_pool': GenericInspector,\n        'raidgroup': GenericInspector,\n    };\n\nvar DESCEND = {\n        installation: [ 'clusters', 'hagroups' ],\n        cluster: [ 'hagroups' ],\n        hagroup: [ 'controllers', 'shelves' ],\n        controller: [ 'aggregates', 'storage_pools' ],\n        aggregate: [ '_raid_groups' ],\n    };\n\nfunction Inspector(installations, info) {\n    assert(_.isArray(installations), '37f76914');\n    assert(_.isObject(info), 'cb89b509');\n\n    this._installations = installations;\n    this._info = info;\n    this._locs = {};\n\n    this.inspect = _.bind(this.inspect, this);\n    this.find = _.bind(this.find, this);\n\n    // provide this.find.aggregate(_id) et al\n    for (var key in CONSTRUCTORS) {\n        this.find[key] = _.bind(Inspector.prototype.find, this, key);\n        this.inspect[key] = _.bind(Inspector.prototype.inspect, this, key);\n    }\n}\n\n/**\n * Inspect a model part, returning an appropriate object (see CONSTRUCTORS)\n * above) given the part's _type. The constructor is called with an init\n * function to inject read-only properties (WARNING: NOT IN _.keys()!):\n *\n * * inspect: the inspect method\n * * info: product info\n * * installation: the installation the object was found in\n * * cluster: the cluster the object was found in (if any)\n * * hagroup: the hagroup the object was found in (if any)\n * * controller: etc\n * * shelf: etc\n *\n * Three ways of calling it:\n *\n * * inspect(modelPartOrThinRef)\n * * inspect(_type, _id)\n * * inspect.controller(_id) // same as inspect('controller', _id)\n */\n\nInspector.prototype.inspectCluster =\nInspector.prototype.inspectHaGroup =\nInspector.prototype.inspectController =\nInspector.prototype.inspectShelf =\nInspector.prototype.inspect = function inspect(partOrType, _id) {\n    var _type;\n\n    if (arguments.length >= 2) {\n        assert.equal(typeof partOrType, 'string', 'inspector, missing _type');\n        assert.equal(typeof _id, 'string', 'inspector, missing _id');\n        _type = partOrType;\n    } else {\n        assert.equal(_.isPlainObject(partOrType), true, 'inspector, part is not object');\n        _id = partOrType._id;\n        _type = partOrType._type;\n    }\n\n    var context = this._find(_type, _id); // mutable context block!\n\n    if (!context.inspector) {\n        context.inspect = this.inspect;\n        context.find = this.find;\n        context.info = this._info;\n\n        var Constructor = CONSTRUCTORS[_type];\n        context.inspector = new Constructor(contextualize);\n    }\n\n    return context.inspector;\n\n    function contextualize(ob) {\n        _.forEach(context, function (val, key) {\n            Object.defineProperty(ob, key, { get: _.constant(val) });\n        });\n    }\n};\n\n/**\n * Find a model part. Returns the part itself, not its inspector.\n *\n * Two ways of calling it:\n *\n * * find(_type, _id)\n * * find.controller(_id) // same as find('controller', _id)\n */\n\nInspector.prototype.find = function find(_type, _id) {\n    var context = this._find(_type, _id);\n    return context[_type];\n};\n\nInspector.prototype._find = function find(_type, _id) {\n    assert.equal(typeof _type, 'string', 'need _type');\n    assert.equal(typeof _id, 'string', 'need _id');\n    assert.equal(_.has(CONSTRUCTORS, _type), true, 'invalid _type ' + _type);\n\n    this._indexTo(_type);\n\n    var bucket = this._locs[_type] || {},\n        coords = bucket[_id];\n\n    assert.notEqual(coords, undefined, _type + ' not found: ' + _id);\n    return coords;\n};\n\nInspector.prototype._indexTo = function _indexTo(_type) {\n    var locs = this._locs;\n\n    if (!_.has(locs, _type)) {\n        _.forEach(this._installations, indexInstallation);\n    }\n\n    function indexInstallation(installation) {\n        index({}, installation);\n    }\n\n    function index(parentCoords, child) {\n        var childType = child._type,\n            coords = _.clone(parentCoords);\n\n        coords[childType] = child;\n        shove(child, coords);\n\n        if (_.has(DESCEND, childType)) {\n            var keys = DESCEND[childType];\n            _.forEach(keys, indexDeeper);\n        }\n\n        function indexDeeper(key) {\n            var grandChildren = child[key];\n            _.forEach(grandChildren, _.partial(index, coords));\n        }\n    }\n\n    function shove(ob, coords) {\n        var _type = ob._type,\n            _id = ob._id;\n\n        if (!_.has(locs, _type)) {\n            locs[_type] = {};\n        }\n\n        locs[_type][_id] = coords;\n    }\n};\n\nmodule.exports = Inspector;\n","'use strict';\n\nvar assert = require('assert'),\n    RaidLimits = require('../aggregates/raid-limits'),\n    RAID_LIMITS = new RaidLimits(),\n    RAID_TYPES = RAID_LIMITS._raidTypes,\n    AGGR_TYPES = require('../aggregates/aggregate-types'),\n    lcprop = require('../../lcprop'),\n    uuid = require('uuid'),\n    AggregateLimitFinder = require('../aggregates/aggregateLimitFinder'),\n    getExpectedSpares = require('../../prodinfo/tables/spares'),\n    mutil = require('../util'),\n    _ = require('lodash');\n\nassert(RAID_TYPES); // aah, well, better make our own\n\n/**\n * Provides one-stop-shop API. Not cohesive, but everything's available\n * using the hagi you already have. Provided as hagi.lookup.\n *\n * Many of the arithmetic methods from RAID_LIMITS referred to here should\n * be moved somewhere else, the lookup methods to prodinfo/tables.\n */\n\nfunction Lookup(hagi) {\n    assert(this instanceof Lookup);\n    this._hagi = hagi; // try to avoid it unless ext API forces your hand\n    this._limits = hagi.limits;\n    this._version = hagi.hagroup.version;\n    this._versionNumber = hagi.versionNumber;\n    this._isFAS = isFAS(hagi);\n    this._ALF = new AggregateLimitFinder(hagi);\n    lcprop(this, 'possibleRaidTypes', this._get_possibleRaidTypes);\n    lcprop(this, 'possibleAggrTypes', this._get_possibleAggrTypes);\n    lcprop(this, 'minimumFPDevicesForAggregate', this._get_minFPDevicesFromLimits);\n}\n\nLookup.prototype._perfDeviceTypes = ['SAS', 'FC_SAS', 'SSD', 'FC'];\n\nLookup.prototype._capacityDeviceTypes = ['MSATA', 'SATA', 'NL_SAS'];\n\nLookup.prototype.isDeviceTypePerformance = function isDeviceTypePerformance(deviceType) {\n    return _.contains(this._perfDeviceTypes, deviceType);\n};\n\nLookup.prototype._get_minFPDevicesFromLimits = function() {\n    return this._limits.aggr.min_fp_drives || 0;\n};\n\nLookup.prototype._get_possibleRaidTypes = function () {\n    if (this._isFAS) {\n        return [\n            RAID_TYPES.RAID_DP,\n            RAID_TYPES.RAID_4\n        ];\n    } else {\n        return [\n            RAID_TYPES.DDP,\n            RAID_TYPES.RAID_0,\n            RAID_TYPES.RAID_1,\n            RAID_TYPES.RAID_3,\n            RAID_TYPES.RAID_5,\n            RAID_TYPES.RAID_6,\n            RAID_TYPES.RAID_10,\n        ];\n    }\n};\n\nLookup.prototype._get_possibleAggrTypes = function () {\n    if (this._isFAS) {\n        return [\n            AGGR_TYPES.AGGR_64_BIT,\n            AGGR_TYPES.AGGR_32_BIT\n        ];\n    } else {\n        return [\n            AGGR_TYPES.VOL_GROUP,\n        ];\n    }\n};\n\nLookup.prototype.minimalRootAggregateDriveCount = function (spec, raidType) {\n    spec = reverseEngineerTypeFromRotationSpeedIfRequired(spec);\n    return RAID_LIMITS.minDrivesNeededForDedicatedRootAggregate(this._hagi, spec, raidType);\n};\n\nLookup.prototype.raidLimits = function (spec, raidType) {\n    spec = reverseEngineerTypeFromRotationSpeedIfRequired(spec);\n    return RAID_LIMITS.findLimits(this._hagi, raidType, spec);\n};\n\nLookup.prototype.lowestOverheadRaidSize = function (spec, raidType, deviceCount) {\n    spec = reverseEngineerTypeFromRotationSpeedIfRequired(spec);\n    return RAID_LIMITS.getEffectiveRaidSize(this._hagi, raidType, spec, deviceCount, this._hagi.hagroup.policies);\n};\n\n/**\n * Return the default aggregate props. Provided here for shared use by auto\n * and manual aggregate modules. Best used with _.merge after {} but before\n * the props you're supplying.\n */\n\nLookup.prototype.defaultAggrProps = function () {\n    return {\n        _id: uuid(),\n        _strategy: undefined,\n        _type: 'aggregate',\n        _manual: false,\n        _controller: undefined,\n        name: 'aggr' + uuid().slice(0, 8),\n        block_type: this.possibleAggrTypes[0],\n        raid_type: this.possibleRaidTypes[0],\n        cache_raid_type: this.possibleRaidTypes[0],\n        is_hybrid: false,\n        is_mirrored: false,\n        is_root_aggregate: false,\n        _snapreserve_proportion: 0,\n        _ddpreserve: 0,\n    };\n};\n\nLookup.prototype.reserveRecommendationForDDP = function (deviceCount) {\n    return RAID_TYPES._getDdpReserveRecommendation(deviceCount);\n};\n\n/*\n    Raid size is optional\n*/\n// OLD: maxAggrDeviceCount\nLookup.prototype.maxAggrDataDeviceCount = function maxAggrDataDeviceCount(spec, count, aggrType, raidType, raidSize) {\n    return this._ALF.maxDataDevices(spec, count, aggrType, raidType, raidSize);\n};\n\nLookup.prototype.maxAggrCacheDeviceCount = function maxAggrCacheDeviceCount(spec, count, aggrType, raidType, raidSize) {\n    return this._ALF.maxCacheDevices(spec, count, aggrType, raidType, raidSize);\n};\n\nLookup.prototype.maxAggrDeviceCount = function maxAggrDeviceCount(spec, deviceCount, aggrType, raidType, forCache, policies) {\n    spec = reverseEngineerTypeFromRotationSpeedIfRequired(spec);\n    return this._ALF.maximumDriveCountGiven(spec, deviceCount, aggrType, raidType, forCache, policies);\n};\n\nLookup.prototype.minAggrDeviceCount = function (raidType) {\n    return RAID_TYPES.getParityCountForRaidType(raidType) + 1;\n};\n\nLookup.prototype.expectedSpares = function (situation) {\n    var isOneShelf = this._hagi.hagroup.shelves.length === 1,\n        isEmbeddedShelfOnly = isOneShelf && this._hagi.config.isEmbedded,\n        defaults = {\n            isEmbeddedShelfOnly: isEmbeddedShelfOnly\n        };\n\n    return getExpectedSpares(_.merge({}, defaults, situation));\n};\n\nfunction isFAS(hagi) {\n    var configGroup = hagi.configGroup,\n        parentGroup = hagi.configGroup.parent || {};\n\n    return configGroup.id === 'FAS' || parentGroup.id === 'FAS';\n}\n\nfunction reverseEngineerTypeFromRotationSpeedIfRequired(spec) {\n    return _.merge({}, spec, {\n        type: mutil.rpmToEffectiveDriveType(spec.rpm),\n        _type_faked: true,\n    });\n}\n\nmodule.exports = Lookup;\n","'use strict';\n\nvar _ = require('lodash'),\n    assert = require('assert'),\n    util = require('../util');\n\nfunction ShelfInspector(init) {\n    init(this); // this.inspect, this.info, this.cluster, this.hagroup, ...\n}\n\nShelfInspector.prototype.isUsedByManualAggregate = function isUsedByManualAggregate() {\n    var prefix = '!' + this.shelf._id.slice(0, 8) + '.',\n        result = _.some(this.hagroup.controllers, haveManualAggregatesUsingShelf);\n\n    function haveManualAggregatesUsingShelf(controller) {\n        return _.some(controller.aggregates, isManualAggregateUsingShelf);\n    }\n\n    function isManualAggregateUsingShelf(aggregate) {\n        return aggregate._manual && _.some(aggregate._raid_groups, isRaidGroupUsingShelf);\n    }\n\n    function isRaidGroupUsingShelf(raidGroup) {\n        return _.some(raidGroup._devices, isDeviceFromShelf);\n    }\n\n    function isDeviceFromShelf(device) {\n        return device.indexOf(prefix) === 0;\n    }\n\n    return result;\n};\n\nShelfInspector.prototype.config = function config(fallback) {\n    var hagi = this.inspect(this.hagroup),\n        shelfConfigs = hagi.getShelfConfigs();\n\n    return fallback ? util.chooseClosestShelfConfig(this.shelf, shelfConfigs) : util.chooseMatchingShelfConfig(this.shelf, shelfConfigs);\n};\n\nShelfInspector.prototype.devices = function devices() {\n    /*\n        Concept:\n\n        1) Look in shelf._x_bom and yield the devices contained within\n\n        Result:\n        [\n            {\n                spec: {..}\n                devices: [<string>]\n            }\n        ]\n    */\n    var devicesForShelf = [];\n\n    if (this.shelf._x_bom) {\n        var shelfBom = this.shelf._x_bom;\n\n        if (!shelfBom.drive_specs || !shelfBom.drive_spec_members) {\n            console.warn('SHELF IS MALFORMED -- CANNOT INSPECT'); // Guard Unit Tests have malformed map\n            console.warn(shelfBom);\n            return devicesForShelf;\n        }\n\n        assert(_.isArray(shelfBom.drive_specs), 'Shelf bom drive specs must be an array');\n        assert(_.isArray(shelfBom.drive_spec_members), 'Shelf bom drive spec members must be an array');\n        assert(shelfBom.drive_specs.length === shelfBom.drive_spec_members.length, 'Shelf bom drive spec and members array must be the same length');\n\n        for (var i = 0; i < shelfBom.drive_specs.length; i++) {\n            var shelfDriveSpec = shelfBom.drive_specs[i];\n\n            devicesForShelf.push({\n                spec: _.omit(shelfDriveSpec, 'model'), // Per Garth, don't use model to compare\n                devices: shelfBom.drive_spec_members[i]\n            });\n        }\n    }\n\n    return devicesForShelf;\n};\n\nmodule.exports = ShelfInspector;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    Guard = require('./guard'),\n    Inspector = require('./inspect');\n\n// jshint latedef: false\n// so we can read from the top down\n\n// TODO: ensure Synergy can round-trip installations\n// TODO: add API for PROJECT_ADD_CLUSTER(installation)\n\n// what do we have?\n// .installations\n// .installations[0].hagroups[0]... // omits those in clusters\n// .installations[0].clusters[0].hagroups[0]...\n// always at least one installation\n// not guaranteed to always have an hagroup or a cluster\n// clusters not guaranteed to have hagroups\n//\n// \"installation\": a group of related systems\n\nfunction ModelMap(prodinfo, clip) {\n    assert(typeof prodinfo === 'object', 'prodinfo not object');\n    assert(_.isPlainObject(clip), 'clip');\n\n    this._prodinfo = prodinfo;\n    _.bindAll(this);\n\n    var installations = this.installations = [{ // hardcoded singleton\n        _id: '_PLACEHOLDER',\n        _type: 'installation',\n        hagroups: [],\n        clusters: [],\n    }];\n\n    // jshint camelcase: false\n    _.forEach(clip.synergy_model.hagroups, this._moveToInstallation);\n    _.forEach(this.installations, this._moveClusteredToClusters);\n\n    var inspector = new Inspector(installations, prodinfo);\n    this.inspect = inspector.inspect;\n    this.find = inspector.find;\n}\n\nModelMap.prototype._moveToInstallation = function _moveToInstallation(hagroup) {\n    var installation = this.installations[0];\n\n    installation.hagroups.push(hagroup);\n};\n\nModelMap.prototype._moveClusteredToClusters = function _moveClusteredToClusters(installation) {\n    // jshint camelcase: false\n\n    var cmap = {}, // map IDs to cluster objects\n        unclustered = [];\n\n    function moveToCluster(hagroup) {\n        if (hagroup.is_clustered || hagroup.cluster) {\n            assert(_.isPlainObject(hagroup.cluster));\n\n            var cluster = getOrCreate(cmap, hagroup.cluster._id, {\n                    _id: hagroup.cluster._id,\n                    _type: 'cluster',\n                    name: hagroup.cluster.name,\n                    hagroups: []\n                });\n            cluster.hagroups.push(hagroup);\n        } else {\n            unclustered.push(hagroup);\n        }\n    }\n\n    _.forEach(installation.hagroups, moveToCluster);\n\n    _.forEach(cmap, function (c) { installation.clusters.push(c); });\n    installation.hagroups = unclustered;\n};\n\nfunction getOrCreate(map, key, def) {\n    if (_.has(map, key)) {\n        return map[key];\n    } else {\n        return (map[key] = _.clone(def));\n    }\n}\n\nModelMap.prototype.guard = function guard(addingTo, options) {\n    return new Guard(this, addingTo, options);\n};\n\nModelMap.prototype.resolveSelection = function resolveSelection(selector) {\n    if (!selector || (_.isPlainObject(selector) && _.isEmpty(selector))) {\n        return [];\n    }\n\n    assert(_.isPlainObject(selector), 'resolveSelection: selector object');\n    assert(selector.installation, 'resolveSelection: selector installation');\n\n    var installs = this._where(this.installations, selector.installation);\n    return this.installations.length ? this._searchInstallations(installs, selector) : [];\n};\n\nModelMap.prototype.rehydrate = function rehydrate() {\n    _.forEach(this.installations, function rehydrateInstallation(installation) {\n        this._rehydrateClustered(installation.clusters);\n        this._rehydrateNonClustered(installation.hagroups);\n    }, this);\n};\n\nModelMap.prototype._rehydrateClustered = function _rehydrateClustered(clusters) {\n    _.forEach(clusters, function rehydrateCluster(cluster) {\n         _.forEach(cluster.hagroups, this._rehydrateAggregateMetaInfo);\n    }, this);\n};\n\nModelMap.prototype._rehydrateNonClustered = function _rehydrateNonClustered(hagroups) {\n    _.forEach(hagroups, this._rehydrateAggregateMetaInfo);\n};\n\nModelMap.prototype._rehydrateAggregateMetaInfo = function _rehydrateAggregateMetaInfo(hagroup) {\n    var hagi = this.inspect(hagroup),\n        availableDevices = hagi.allDevices(),\n        deviceAndSpecMap = this._createDeviceAndSpecMapping(availableDevices),\n        _this = this;\n\n    _.forEach(hagroup.controllers, fixRaidGroupsInController);\n\n    function fixRaidGroupsInController(controller) {\n        // TODO: fix guard until no more ejection code necessary\n\n        _.forEach(controller.storage_pools, _.partial(fixStoragePool, controller));\n        controller.storage_pools =  _this._withoutEjected(controller.storage_pools);\n        // ... and even that's not enough, because we still have cached device info\n\n        _.forEach(controller.aggregates, _.partial(fixAggregate, controller));\n        controller.aggregates = _this._withoutOrphanedAggregates(controller.aggregates);\n    }\n\n    function fixStoragePool(controller, pool) {\n        _this._populateDeviceSpecsForRaidGroup(hagroup, pool, deviceAndSpecMap);\n    }\n\n    function fixAggregate(controller, aggregate) {\n        aggregate._controller = controller._id;\n        _.forEach(aggregate._raid_groups, function(raidGroup) {\n            _this._populateDeviceSpecsForRaidGroup(hagroup, raidGroup, deviceAndSpecMap);\n        });\n\n        aggregate._raid_groups = _this._withoutEjected(aggregate._raid_groups);\n    }\n};\n\nModelMap.prototype._withoutOrphanedAggregates = function _withoutOrphanedAggregates(aggregates) {\n    return _.where(aggregates, function(aggregate) {\n        var shouldWeKeepThisAggregate = (aggregate._raid_groups && aggregate._raid_groups.length > 0);\n\n        if (!shouldWeKeepThisAggregate) {\n            console.warn('aggregate ' + aggregate.name + ' could no longer be satisfied, so we are ejecting it.');\n        }\n\n        return shouldWeKeepThisAggregate;\n    });\n};\n\nModelMap.prototype._withoutEjected = function _withoutEjected(seq) {\n    return _.where(seq, function(hasDevices) {\n        return !hasDevices.__eject;\n    });\n};\n\nModelMap.prototype._populateDeviceSpecsForRaidGroup = function PDSFRG(hagroup, hasDevices, deviceAndSpecMap) {\n    var specToDevice = {};\n\n    // Update DeviceIds if we can\n    var hasDevicesIsSatisfied = _.every(hasDevices._devices, function(deviceId) {\n            return _.has(deviceAndSpecMap, deviceId);\n        }),\n        deviceSpecsAreOkay = hasDevices.__deviceSpecs && _.every(hasDevices.__deviceSpecs, function(deviceSpec) {\n            return deviceSpec.spec && deviceSpec.count;\n        }),\n        needsUpdatedDeviceSpecs = !deviceSpecsAreOkay;\n\n    if (!hasDevicesIsSatisfied) {\n        this._updateDeviceIdsAfterRebuild(hagroup, hasDevices);\n    }\n\n    if (needsUpdatedDeviceSpecs) {\n        _.forEach(hasDevices._devices, function(deviceId) {\n            var specHashForDevice = deviceAndSpecMap[deviceId];\n\n            if (_.has(specToDevice, specHashForDevice)) {\n                specToDevice[specHashForDevice].push(deviceId);\n            }\n            else {\n                specToDevice[specHashForDevice] = [deviceId];\n            }\n        });\n\n        hasDevices.__deviceSpecs = _.map(_.keys(specToDevice), function(specHash) {\n            return {\n                spec: deviceAndSpecMap.specs[specHash],\n                count: specToDevice[specHash].length\n            };\n        });\n    }\n};\n\nModelMap.prototype._updateDeviceIdsAfterRebuild = function UDIIRGAR(hagroup, hasDevices) {\n    var hagi = this.inspect(hagroup),\n        availableDevices = hagi.availableDevices(),\n        specMap = this._createDeviceAndSpecMapping(availableDevices), // Free Device, DeviceId key, hash as spec\n        hashes = _.uniq(_.map(_.keys(specMap), function(deviceId) {\n            return specMap[deviceId];\n        })),\n        _this = this;\n\n    if (availableDevices.length > 0 && hashes.length > 0 && hasDevices.__deviceSpecs) {\n        var hasDevicesNeedsDevices = _.map(hasDevices.__deviceSpecs, function(deviceSpec) {\n            return {\n                count: deviceSpec.count,\n                hash: _this._createDeviceSpecHash(deviceSpec.spec)\n            };\n        });\n\n\n        _.forEach(hasDevicesNeedsDevices, function(rgDeviceSpec) {\n            var matchingDeviceIds = _.where(_.keys(specMap), function(deviceId) {\n                return specMap[deviceId] === rgDeviceSpec.hash;\n            });\n\n            if (matchingDeviceIds.length >= rgDeviceSpec.count) {\n                var newDeviceIds = matchingDeviceIds.splice(0, rgDeviceSpec.count);\n\n                hasDevices._devices = newDeviceIds;\n                consumeDeviceIds(newDeviceIds);\n            }\n            else {\n                console.warn('Cannot update raid group deviceIds, as there are no longer enough devices to satisfiy it. Ejecting the Rg.: ', hasDevices);\n                hasDevices.__eject = true;\n            }\n        });\n    }\n    else {\n        console.warn('Could not rehydrate rg, likely invalid number of drives / devices different. Ejecting the Rg: ', hasDevices);\n        hasDevices.__eject = true;\n    }\n\n    function consumeDeviceIds(deviceIds) {\n        _.forEach(deviceIds, deleteSpecMapProp);\n    }\n\n    function deleteSpecMapProp(propName) {\n        delete specMap[propName];\n    }\n};\n\nModelMap.prototype._createDeviceAndSpecMapping = function _createDeviceAndSpecMapping(availableDevices) {\n    var _this = this,\n        deviceSpecMap = {\n            specs: {}\n        };\n\n    _.forEach(availableDevices, function(device) {\n        var specHash = _this._createDeviceSpecHash(device.spec);\n\n        deviceSpecMap.specs[specHash] = device.spec;\n\n        _.forEach(device.devices, function(deviceId) {\n            deviceSpecMap[deviceId] = specHash;\n        });\n    });\n\n    return deviceSpecMap;\n};\n\nModelMap.prototype._createDeviceSpecHash = function _createDeviceSpecHash(deviceSpec) {\n    var keys = _.sortBy(_.keys(_.omit(deviceSpec, 'quantity', '_slice_name' /* old */, 'slice' /* new */, 'model'))),\n        hash = _.map(keys, function(key) {\n            var valueForKey = deviceSpec[key],\n                stringifiedKeyValue = (valueForKey === undefined || valueForKey === null) ? '_' : valueForKey.toString();\n\n            return key + '-' + stringifiedKeyValue.replace('.', '_');\n        }).join('-');\n\n    return hash;\n};\n\nModelMap.prototype._searchInstallations = function _searchInstallations(installations, selector) {\n    assert.equal(installations.length, 1, 'resolveSelection: installation scope too wide');\n    var subSelector = _.omit(selector, 'installation');\n\n    if (subSelector.cluster) {\n        var clusters = this._where(installations[0].clusters, subSelector.cluster);\n        return _.isEmpty(clusters) ? [] : this._searchClusters(clusters, subSelector);\n    } else if (subSelector.hagroup) {\n        return this._searchHagroups(installations[0].hagroups, subSelector);\n    } else {\n        return installations;\n    }\n};\n\nModelMap.prototype._searchClusters = function _searchClusters(clusters, selector) {\n    var subSelector = _.omit(selector, 'cluster');\n\n    if (subSelector.hagroup) {\n        assert.equal(clusters.length, 1, 'resolveSelection: cluster scope too wide');\n        return this._searchHagroups(clusters[0].hagroups, subSelector);\n    } else {\n        return clusters;\n    }\n};\n\nModelMap.prototype._searchHagroups = function _searchHagroups(hagroups, selector) {\n    var systems = this._where(hagroups, selector.hagroup),\n        subSelector = _.omit(selector, 'hagroup');\n\n    return _.isEmpty(subSelector) ? systems : this._searchHardware(systems, subSelector);\n};\n\nModelMap.prototype._searchHardware = function _searchHardware(systems, selector) {\n    if (selector.shelf) {\n        var shelves = this._searchShelves(systems, selector),\n            subSelector = _.omit(selector, 'shelf');\n\n        return _.isEmpty(subSelector) ? shelves : this._searchDrives(shelves, subSelector);\n    } else if (selector.controller) {\n        var controllers = this._searchControllers(systems, selector),\n            subSelect = _.omit(selector, 'controller');\n\n        return _.isEmpty(subSelect) ? controllers : this._searchAggregates(controllers, subSelect);\n    } else {\n        throw new Error('resolveSelection: unknown hardware selector');\n    }\n};\n\nModelMap.prototype._searchControllers = function _searchControllers(systems, selector) {\n    var controllers = _.reduce(systems, function filter(controllers, hagroup) {\n        return controllers.concat(this._where(hagroup.controllers, selector.controller));\n    }, [], this);\n\n    return controllers;\n};\n\n// This should probably require a single controller scope\nModelMap.prototype._searchAggregates = function _searchAggregates(controllers, selector) {\n    if (selector.aggregate) {\n        var aggregates = _.reduce(controllers, function filter(aggregates, controller) {\n            return aggregates.concat(this._where(controller.aggregates, selector.aggregate));\n        }, [], this);\n\n        return aggregates;\n    } else {\n        throw new Error('resolveSelection: unknown aggregate selector');\n    }\n};\n\nModelMap.prototype._searchShelves = function _searchShelves(systems, selector) {\n    var subSelector = _.omit(selector.shelf, '_x_bom'),\n        driveSelectors = selector.shelf._x_bom ? selector.shelf._x_bom.drive_specs || [] : [];\n\n    var shelves = _.reduce(systems, function filter(shelves, hagroup) {\n        return shelves.concat(this._where(hagroup.shelves, subSelector));\n    }, [], this);\n\n    function isMatchingShelf(shelf) {\n        return _.every(driveSelectors, _.partial(isMatchingDrive, shelf));\n    }\n\n    function isMatchingDrive(shelf, criterion, index) {\n        return _.every([shelf._x_bom.drive_specs[index]], criterion);\n    }\n\n    return _.filter(shelves, isMatchingShelf);\n};\n\nModelMap.prototype._searchDrives = function _searchDrives(shelves, selector) {\n    if (selector.drive) {\n        var drives = _.reduce(shelves, function filter(drives, shelf) {\n            var drive_specs = _.isEmpty(shelf._x_bom) ? [] : shelf._x_bom.drive_specs;\n            return drives.concat(this._where(drive_specs, selector.drive));\n        }, [], this);\n\n        return drives;\n    } else {\n        throw new Error('resolveSelection: unknown drive selector');\n    }\n};\n\nModelMap.prototype._where = function _where(collection, constraint) {\n    return _.isEmpty(constraint) ? _.where(collection) : _.where(collection, constraint);\n};\n\nmodule.exports = ModelMap;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash');\n\nfunction Spec(map, guardOption) {\n    this._map = map;\n    this._guardOption = guardOption;\n    this.build = _.bind(this.build, this);\n}\n\nSpec.prototype.build = function build(addingTo, replacing, options) {\n    assert.equal(typeof addingTo, 'object', 'addingTo object');\n    assert.equal(_.isEmpty(addingTo), false, 'bad addingTo selector');\n    assert(replacing === undefined || typeof replacing === 'object', 'bad replacing selector');\n    assert(options === undefined || _.isPlainObject(options), 'bad options');\n\n    // Refuse to build if we cannot resolve conflicts\n    assert.equal(_.isEmpty(this._guardOption.conflicts), true, 'cannot resolve conflicts');\n\n    // TODO: Just dump old guard code here for now - needs refactored\n    return this._handleCreatingBuildSpecsFor(addingTo, replacing, this._guardOption, options);\n};\n\nSpec.prototype._addCurrentInstallationToSelector = function(selector) {\n    if (!selector.installation) {\n        selector = _.extend(selector, { installation: this._map.installations[0] });\n    }\n};\n\nSpec.prototype._resolveSystemSelectorUsingMap = function(selector) {\n    if (!selector) {\n        return null;\n    }\n\n    var scaledSelector = _.omit(selector, 'shelf', 'drive');\n\n    return this._resolveSelectorUsingMap(scaledSelector);\n};\n\nSpec.prototype._resolveSelectorUsingMap = function(selector) {\n    if (!selector) {\n        return null;\n    }\n\n    this._addCurrentInstallationToSelector(selector);\n    var resolvedSelector = this._map.resolveSelection(selector);\n\n    if (resolvedSelector) {\n        return resolvedSelector;\n    }\n    else {\n        return null;\n    }\n};\n\nSpec.prototype._handleCreatingBuildSpecsFor = function(addingTo, replacing, selectedOption, options) {\n    var resolvedAddingTo = this._resolveSystemSelectorUsingMap(addingTo),\n        resolvedReplacing = this._resolveSelectorUsingMap(replacing),\n        isAddingToExisting = !this._isSelectorConfigGroup(addingTo),\n        version = this._determineVersionWithSelection(selectedOption),\n        limits = this._determineLimitsWithSelection(selectedOption),\n        specs = [];\n\n    options = options || {};\n\n    if (isAddingToExisting) {\n        var systems = this._selectionToArrayOfSystems(resolvedAddingTo);\n\n        specs = this._createSpecsForSystemGroup(systems, resolvedReplacing, selectedOption, version, limits, options);\n    }\n    else {\n        // New standalone system\n        var newSystem = this._createBaseBuildSpecFor(selectedOption, version, limits),\n            defaultShelf = this._defaultShelfOptionForConfig(selectedOption, version, limits);\n\n        if (defaultShelf) {\n            newSystem.shelves.push(defaultShelf);\n        }\n\n        specs.push(newSystem);\n    }\n\n    return specs;\n};\n\nSpec.prototype._isSelectorConfigGroup = function(selector) {\n    return selector && selector.title && selector.id;\n};\n\nSpec.prototype._createSpecsForSystemGroup = function(hagroups, replacing, selectedOption, version, limits, options) {\n    /*\n        Concept: Copy and replace HW with selected option (replacing)\n                 OR\n                 Copy and add new HW with selected option (replacing == null)\n    */\n    var _this = this,\n        specs = [],\n        filteredHagroups = _.without(hagroups, replacing);\n\n    _.forEach(filteredHagroups, function(hagroup) {\n        var spec = _this._createBuildSpecForHagroup(hagroup, replacing, selectedOption, version, limits, options);\n\n        specs.push(spec);\n    });\n\n    // Check if we need to add a system\n    if (selectedOption.configModel) {\n        var howManyNewSystems = (replacing) ? replacing.length : 1; // If we are replacing systems, add same number -- else 1\n        var existingSpecs = _.cloneDeep(specs);\n        specs = []; // New system...\n\n        for (var i = 0; i < howManyNewSystems; i++) {\n            var newSystem = this._createBaseBuildSpecFor(selectedOption, version, limits),\n                defaultShelf = this._defaultShelfOptionForConfig(selectedOption, version, limits);\n\n            if (defaultShelf) {\n                newSystem.shelves.push(defaultShelf);\n            }\n\n            if (replacing) {\n                var oldExternalShelves = _.where(existingSpecs[i].shelves, { isEmbedded: false });\n                newSystem.shelves.push.apply(newSystem.shelves, oldExternalShelves);\n                newSystem.existingId = this._determineExistingId(newSystem, replacing[i]);\n            }\n\n            specs.push(newSystem);\n        }\n    }\n\n    return specs;\n};\n\n// TODO: Clean this up, I am confused just looking at it -- Mark\nSpec.prototype._createBuildSpecForHagroup = function(hagroup, replacing, selectedOption, version, limits /*, options */) {\n    var existingId = this._determineExistingId(hagroup, replacing),\n        detail = this._determineCompleteDetailForBuildSpec(hagroup, selectedOption),\n        spec = this._createBaseBuildSpecFor(detail.config, version, limits);\n\n    _.extend(spec, {\n        shelves: this._getShelfSummaryFromExistingSystem(hagroup, replacing),\n        existingId: existingId\n    });\n\n    if (detail.isShelfOption) {\n        var newShelfSpec = this._shelfOptionToBuildSpec(selectedOption);\n\n        if (newShelfSpec) {\n            spec.shelves.push(newShelfSpec);\n        }\n        else {\n            console.warn('_createBuildSpecForHagroup -> Unable to get the new shelf spec');\n        }\n    }\n    else if (detail.isDriveOption) {\n        console.warn('_createBuildSpecForHagroup -> Update Drive in Shelf TODO');\n    }\n    else if (detail.isSystemOption) {\n        // New system, add default shelf\n        var defaultShelf = this._defaultShelfOptionForConfig(detail.config, version, limits);\n\n        if (defaultShelf) {\n            spec.shelves.push(defaultShelf);\n        }\n    }\n    else {\n        console.warn('_createBuildSpecForHagroup -> Unknown option');\n    }\n\n    return spec;\n};\n\nSpec.prototype._determineExistingId = function(hagroup, replacing) {\n    if (replacing && !_.isArray(replacing)) {\n        return (replacing._model) ? replacing._id : null;\n    }\n    else {\n        return (hagroup._model) ? hagroup._id : null;\n    }\n};\n\nSpec.prototype._determineCompleteDetailForBuildSpec = function(resolvedSystemAddingTo, selectedOption) {\n    var optionWrapper = {\n        isSystemOption: false,\n        isShelfOption: false,\n        isDriveOption: false,\n        noOption: (selectedOption) ? false : true,\n        option: selectedOption,\n        config: null\n    };\n\n    if (selectedOption.shelf) {\n        optionWrapper.isShelfOption = true;\n        optionWrapper.config = this._determineConfigFromSystemSelection(resolvedSystemAddingTo);\n    }\n    else if (selectedOption.drives) {\n        optionWrapper.isDriveOption = true;\n        optionWrapper.config = this._determineConfigFromSystemSelection(resolvedSystemAddingTo);\n    }\n    else if (selectedOption.configModel) {\n        optionWrapper.isSystemOption = true;\n        optionWrapper.config = selectedOption;\n    }\n\n    return optionWrapper;\n};\n\nSpec.prototype._defaultShelfOptionForConfig = function(config /*, version, limits */) {\n    // TODO: Consider version and limits when picking a default shelf\n\n    // If embedded, select a sellable shelf (with sellable drives) (prefer HDD over SSD).\n    // If not embedded, no default shelf.\n    // if (config.isEmbedded) {\n    //     var embeddedShelves = config.matrix.hardwareOptions.embeddedShelves,\n    //         sellableEmbeddedShelves = _.where(embeddedShelves, function sellable(shelfOption) {\n    //             var isShelfSellable = shelfOption.shelf.sellable,\n    //                 areDrivesSellable = _.every(shelfOption.drives, function checkEoa(driveOption) {\n    //                     return driveOption.drive.sellable;\n    //                 });\n\n    //             return isShelfSellable && areDrivesSellable;\n    //         });\n\n    //     if(_.isEmpty(sellableEmbeddedShelves)) {\n    //         var sortedEmbeddedShelves = _.sortBy(embeddedShelves, function enabled(shelfOption) {\n    //             return !shelfOption.shelf.sellable;\n    //         });\n\n    //         return this._shelfOptionToBuildSpec(_.first(sortedEmbeddedShelves));\n    //     } else {\n    //         return this._shelfOptionToBuildSpec(_.first(sellableEmbeddedShelves));\n    //     }\n    // }\n\n    var shelf = config.newEmbeddedShelf;\n\n    return _.isEmpty(shelf) ? null : this._shelfOptionToBuildSpec(shelf);\n};\n\nSpec.prototype._determineVersionWithSelection = function(selectedOption) {\n    return selectedOption.newVersion;\n};\n\nSpec.prototype._determineLimitsWithSelection = function(selectedOption) {\n    return selectedOption.newLimits;\n};\n\nSpec.prototype._shelfOptionToBuildSpec = function(shelfOption) {\n    var shelfBuildSpec = {};\n\n    if (shelfOption.shelf && shelfOption.drives) {\n        _.extend(shelfBuildSpec, {\n            model: shelfOption.shelf.model,\n            isEmbedded: shelfOption.isEmbedded,\n            quantity: shelfOption.quantity || 1,\n            drives: _.map(shelfOption.drives, function(drive) {\n                return {\n                    model: drive.drive.model,\n                    quantity: drive.quantity\n                };\n            })\n        });\n    }\n    else {\n        console.warn('Poorly formed shelf option');\n        return null;\n    }\n\n    return shelfBuildSpec;\n};\n\nSpec.prototype._getShelfSummaryFromExistingSystem = function(system, without) {\n    assert(system, 'Must have a system to get shelf summary from');\n    var rawShelves = system.shelves || [];\n\n    if (without) {\n        var withoutIdMap = _.map(without, function(withoutShelf) {\n            return withoutShelf._id;\n        });\n\n        rawShelves = _.where(rawShelves, function(shelf) {\n            return !_.contains(withoutIdMap, shelf._id);\n        });\n    }\n\n    return _.map(rawShelves, function(shelf) {\n        var drive_specs = _.isEmpty(shelf._x_bom) ? [] : shelf._x_bom.drive_specs;\n\n        return {\n            model: shelf.model,\n            quantity: 1,\n            isEmbedded: !shelf._isembedded ? false : true,\n            drives: _.map(drive_specs, function(shelfBom) {\n                return {\n                    model: shelfBom.model,\n                    quantity: shelfBom.quantity\n                };\n            })\n        };\n    });\n};\n\nSpec.prototype._createBaseBuildSpecFor = function(config, selectedVersion, versionLimits) {\n    if (!config) {\n        return {};\n    }\n\n    return {\n        platformModel: config.platformModel,\n        configModel: config.configModel,\n        controllerCount: config.controllerCount,\n        isESeries: config.isESeries,\n        isFlashRay: config.isFlashRay,\n        shelves: [],\n        version: selectedVersion,\n        limits: versionLimits,\n        existingId: null\n    };\n};\n\nSpec.prototype._determineConfigGroupFromSelection = function(selection) {\n    assert(selection, 'Must provide a selection to determine config group');\n\n    var systems = this._selectionToArrayOfSystems(selection), // We may be a system already\n        groups = this._getUniqueConfigGroups(systems);\n\n    if (groups.length) {\n        return _.first(groups);\n    }\n    else {\n        console.warn('Determine Config Group from selection yielded varying group types');\n    }\n\n    return null;\n};\n\nSpec.prototype._getUniqueConfigGroups = function _getUniqueConfigGroups(hagroups) {\n    var configGroups = _.reduce(hagroups, function push(configGroups, hagroup) {\n            var hagroupInspector = this._map.inspect(hagroup),\n                configGroup = hagroupInspector.configGroup,\n                isNewConfig = !_.some(configGroups, { id: configGroup.id });\n\n            if (isNewConfig) {\n                configGroups.push(configGroup);\n            }\n\n            return configGroups;\n        }, [], this);\n\n    return configGroups;\n};\n\nSpec.prototype._selectionToArrayOfSystems = function(selection) {\n    if (_.isArray(selection)) {\n        var haGroupMapping = _.map(selection, function(item) {\n            return item.hagroups;\n        });\n\n        if (_.every(haGroupMapping)) {\n            return _.flatten(haGroupMapping);\n        }\n\n        return selection;\n    }\n    else {\n        return selection.hagroups || [selection];\n    }\n};\n\nSpec.prototype._determineConfigFromSystemSelection = function(systemSelection, optionalConfigGroup) {\n    assert(systemSelection, 'Must provide a system selection to determine config');\n\n    var configGroupForSystem = optionalConfigGroup || this._determineConfigGroupFromSelection(systemSelection);\n\n    if (configGroupForSystem && configGroupForSystem.getConfig) {\n        var systemModelName = this._getSystemSelectionModel(systemSelection);\n\n        return configGroupForSystem.getConfig(systemModelName);\n    }\n    else {\n        console.warn('Unable to determine config group for system selector');\n        console.warn(systemSelection);\n    }\n\n    return null;\n};\n\nSpec.prototype._getSystemSelectionModel = function(systemSelection) {\n    assert(systemSelection, 'Must provide a system selection to determine model');\n\n    var hagroup = null,\n        firstSelection = null;\n\n    if (_.isArray(systemSelection)) {\n        firstSelection = _.first(systemSelection);\n    }\n    else {\n        firstSelection = systemSelection;\n    }\n\n    if (firstSelection.hagroups) {\n        hagroup = _.first(firstSelection.hagroups);\n    }\n    else {\n        hagroup = firstSelection;\n    }\n\n    return (hagroup) ? (hagroup._model || hagroup.model) : null;\n};\n\nmodule.exports = Spec;\n","'use strict';\n\nvar  _ = require('lodash'),\n    assert = require('assert');\n\nfunction findDrivesBelongingToShelf(hagroup, shelf) {\n    assert(hagroup, 'hagroup is not defined');\n    assert(shelf, 'shelf is not defined');\n    assert(hagroup.drives, 'hagroup is not an HAGroup');\n    assert(shelf.shelf_number || shelf.shelf_number === 0, 'shelf is not a Shelf : ' + shelf);\n    var belongings = _.where(hagroup.drives, function(d) { return d.shelf === shelf.shelf_number; });\n    return belongings;\n}\n\nfunction driveModels(drives) {\n    return _.uniq(_.map(drives, function (d) { return d.disk_model; }));\n}\n\nfunction _normalizeShelfDriveComboDescription(c) {\n    var drive_specs = _.isEmpty(c._x_bom) ? [] : c._x_bom.drive_specs;\n    return JSON.stringify({ model: c.model, drive_specs: _(drive_specs).sortBy(function (d) { return d.model; }).value() }).replace(/\"/g,'');\n}\n\n// describeShelf(shelf) moved to lib/prodinfo/platform-config.js since requires pcd.drives table\n// parseShelfDescriptionToXbom(d) and fixShelfXbom(s) moved to repair\n\nfunction _checkDriveEqual(a, b, ignoreQuantity) {\n    /*jslint eqeq: true*/\n    var isModelEqual = a.model === b.model,\n        isQuantityEqual = a.quantity == b.quantity; // because some people have quoted numbers in the json\n\n    return ignoreQuantity ? isModelEqual : isModelEqual && isQuantityEqual;\n}\n\nfunction _checkShelfDriveEquality(a, b, ignoreQuantity) {\n    var specA = _.isEmpty(a._x_bom) ? [] : a._x_bom.drive_specs,\n        specB = _.isEmpty(b._x_bom) ? [] : b._x_bom.drive_specs;\n\n    if (a.model === b.model && specA.length === specB.length) {\n        var sortedAxbom = _.sortBy(specA, function (d) { return d.model; });\n        var sortedBxbom = _.sortBy(specB, function (d) { return d.model; });\n        for(var i = 0; i < sortedAxbom.length; i++) {\n            if(!_checkDriveEqual(sortedAxbom[i], sortedBxbom[i], ignoreQuantity)) {\n                return false;\n            }\n        }\n\n        return true;\n    } else {\n        return false;\n    }\n}\n\nfunction shelfDriveComboEquals(a, b, ignoreQuantity) {\n    assert(a._x_bom, a + ' shelfDrive must at least have_x_bom in order to compare');\n    assert(b._x_bom, b + ' shelfDrive must at least have_x_bom in order to compare');\n\n    return _checkShelfDriveEquality(a, b, ignoreQuantity);\n}\n\nfunction groupShelves(shelves) {\n    return _.groupBy(shelves, function(s) { return _normalizeShelfDriveComboDescription(s); });\n}\n\nfunction chooseMatchingShelfConfig(shelf, shelfConfigs) {\n    return _getShelfConfig(shelf, shelfConfigs, false);\n}\n\nfunction chooseClosestShelfConfig(shelf, shelfConfigs) {\n    return _getShelfConfig(shelf, shelfConfigs, true);\n}\n\n// jshint laxbreak:true\nfunction _getShelfConfig(shelf, shelfConfigs, fallbackWithoutQuantityMatch) {\n    var configs = _(shelfConfigs),\n        shelfConfig = configs\n            .where(function(c){ return isConfigForShelf(c, shelf); })\n            .first();\n\n    if (!shelfConfig && fallbackWithoutQuantityMatch) {\n        shelfConfig = configs\n            .where(function(c){ return isConfigForShelf(c, shelf, true); })\n            .first();\n    }\n\n    return shelfConfig;\n}\n\nfunction isConfigForShelf(config, shelf, ignoreQuantity) {\n    if (config.isEmbedded === shelf._isembedded) {\n        var drives = _.map(config.drives, function mockDrive(d) {\n            return { model: d.drive.model, quantity: d.quantity };\n        });\n\n        var mockShelf = {\n            model: config.shelf.model,\n            _x_bom: { drive_specs: drives }\n        };\n\n        return shelfDriveComboEquals(mockShelf, shelf, ignoreQuantity);\n    } else {\n        return false;\n    }\n}\n\n/*\n// jshint laxbreak:true\nvar specsMatch = function(shelfConfig) {\n    return shelfConfig.shelf.model === this.shelf.model\n        && _(this.shelf._x_bom.drive_specs).all(\n            function(drivespec){\n                return _(shelfConfig.drives).any(\n                    function(d){\n                        return d.drive.model === drivespec.model\n                            && d.quantity === drivespec.quantity;\n                    }\n                );\n            }\n        );\n};\n*\n\n/**\n * Match devices by the criteria ONTAP cares about.\n *\n * Intervene here to cater for raid.mix.hdd.performance, raid.mix.hdd.capacity,\n * and the similar option re avoiding mixing FC, non FC.\n *\n * Note we're trying to create separate aggregates for encrypted vs non-encrypted.\n */\n\nfunction minimalSpecKey(info) {\n    var spec = _.pick(info.spec, 'rpm', 'rsgb', 'slice', 'encrypted', '_for_controller');\n    return JSON.stringify(spec);\n}\n\n/**\n * Convert an RPM figure to an effective drive type for RAID size limit\n * determination purposes. TODO: have RaidLimits check rpm rather than\n * drive type if possible.\n */\n\nfunction rpmToEffectiveDriveType(rpm) {\n    switch (rpm) {\n        case 50:\n            return 'SSD';\n        case 15:\n        case 10:\n            return 'FC_SAS';\n        case 7.2:\n            return 'SATA';\n    }\n}\n\nmodule.exports = {\n    findDrivesBelongingToShelf: findDrivesBelongingToShelf,\n    driveModels: driveModels,\n    shelfDriveComboEquals: shelfDriveComboEquals,\n    groupShelves: groupShelves,\n    isConfigForShelf: isConfigForShelf,\n    minimalSpecKey: minimalSpecKey,\n    rpmToEffectiveDriveType: rpmToEffectiveDriveType,\n    chooseMatchingShelfConfig: chooseMatchingShelfConfig,\n    chooseClosestShelfConfig: chooseClosestShelfConfig\n};\n","'use strict';\n\nvar assert = require('assert');\n\nvar AbsentObjectWalker;\n\n/**\n * Wraps an object for walking. Loudly asserts missing members.\n */\n\nfunction ObjectWalker(value, path) {\n    assert(this instanceof ObjectWalker, 'use new');\n    assert(path instanceof Array || typeof path === 'string', 'invalid path');\n\n    this._value = value;\n    this._cache = {};\n\n    if (path instanceof Array) {\n        this._path = path.slice(0);\n    } else {\n        this._path = path.split('.');\n    }\n\n    Object.defineProperties(this, {\n        path: {\n            get: function () {\n                return this._path.join('.');\n            }\n        },\n        value: {\n            get: function () {\n                return this._value;\n            }\n        }\n    });\n}\n\nObjectWalker.prototype.assert = function (bool, msg) {\n    if (typeof bool === 'function') {\n        bool = bool(this._value);\n    }\n    assert(typeof bool === 'boolean');\n    assert(typeof msg === 'string');\n\n    assert(bool, this.path + ': ' + msg);\n    return this; // support chaining\n};\n\nObjectWalker.prototype.assertType = function (type) {\n    this.assert(typeof this.value === type, 'expected ' + type);\n    return this; // support chaining\n};\n\nObjectWalker.prototype.get = function (path) {\n    var tail = this.maybe(path);\n    if (tail.exists) {\n        return tail;\n    } else {\n        assert(false, tail.path + ': expected value');\n    }\n};\n\nObjectWalker.prototype.has = function (path) {\n    return this.maybe(path).exists;\n};\n\nObjectWalker.prototype.exists = true;\n\nObjectWalker.prototype.maybe = function (path) {\n    assert.equal(typeof path, 'string', 'invalid path');\n    return this._maybe(path.split('.'));\n};\n\nObjectWalker.prototype._maybe = function (segs) {\n    assert(segs instanceof Array);\n    segs = segs.slice();\n    var seg = segs.shift();\n\n    if (seg in this._cache) {\n        if (segs.length) {\n            return this._cache[seg]._maybe(segs);\n        } else {\n            return this._cache[seg];\n        }\n    }\n\n    var path = this._path.concat([ seg ]);\n\n    if (this._value.hasOwnProperty(seg)) {\n        var next = new ObjectWalker(this._value[seg], path);\n        this._cache[seg] = next;\n\n        if (segs.length) {\n            return next._maybe(segs);\n        } else {\n            return next;\n        }\n    } else {\n        var because = path.join('.'),\n            missing = path.concat(segs).join('.');\n        return new AbsentObjectWalker(missing, because);\n    }\n};\n\nObjectWalker.isWrapped = function (ob) {\n    return ob instanceof ObjectWalker || ob instanceof AbsentObjectWalker;\n};\n\nAbsentObjectWalker = function AbsentObjectWalker(missing, because) {\n    assert(this instanceof AbsentObjectWalker, 'use new');\n\n    assert(typeof (this._path = missing) === 'string');\n    assert(typeof (this._because = because) === 'string');\n\n    var NO = this.NO.bind(this);\n\n    Object.defineProperties(this, {\n        path: {\n            get: function () {\n                return this._path;\n            }\n        },\n        value: {\n            get: function () {\n                NO('get');\n            }\n        },\n        exists: {\n            value: false,\n            writable: false,\n        }\n    });\n\n    for (var name in ObjectWalker.prototype) {\n        if (!(name in AbsentObjectWalker.prototype)) {\n            this[name] = this.NO.bind(this, name);\n        }\n    }\n};\n\nAbsentObjectWalker.prototype.exists = false;\n\nAbsentObjectWalker.prototype.maybe = function (path) {\n    var newPath = this._path + '.' + path;\n    return new AbsentObjectWalker(newPath, this._because);\n};\n\nAbsentObjectWalker.prototype.NO = function NO() {\n    assert(false, this._because + ': expected value');\n};\n\nfor (var fn in ObjectWalker.prototype) {\n    if (!(fn in AbsentObjectWalker.prototype)) {\n        AbsentObjectWalker[fn] = AbsentObjectWalker.NO;\n    }\n}\n\nmodule.exports = ObjectWalker;\n","'use strict';\n\nvar assert = require('assert'),\n    constants = require('./constants');\n\nvar CONFIG_GROUPS = constants.CONFIG_GROUPS;\n\nfunction Policies() {\n    assert(this instanceof Policies, 'use new');\n    return buildPolicies();\n}\n\nfunction buildPolicies() {\n    return [{\n        scope: 'Aggregates',\n        policy: 'manual',\n        label: 'Automatically fill system with Aggregates',\n        defaultValue: false,\n        inverted: true,\n        impactsCluster: false,\n        productLines: [ CONFIG_GROUPS.FAS ]\n    }, {\n        scope: 'Aggregates',\n        policy: 'manual',\n        label: 'Automatically fill system with Storage Containers',\n        defaultValue: false,\n        inverted: true,\n        impactsCluster: false,\n        productLines: [ CONFIG_GROUPS.E ]\n    }, {\n        scope: 'ADP',\n        policy: 'prohibitedByUser',\n        label: 'Use Root-Data Partitioning when available',\n        defaultValue: false,\n        inverted: true,\n        impactsCluster: false,\n        productLines: [ CONFIG_GROUPS.FAS ]\n    }, {\n        scope: 'Aggregates',\n        policy: 'ssdsForFlashPool',\n        label: 'Prefer using SSDs for Flash Pool',\n        defaultValue: true,\n        inverted: false,\n        impactsCluster: false,\n        productLines: [ CONFIG_GROUPS.FAS ]\n    }, {\n        scope: 'version',\n        policy: 'pin',\n        label: 'Automatically select the latest compatible OS version',\n        defaultValue: true,\n        inverted: true,\n        impactsCluster: true,\n        productLines: [ CONFIG_GROUPS.FAS, CONFIG_GROUPS.E ]\n    }, {\n        scope: 'spare_allocation',\n        policy: 'enforce',\n        label: 'Enforce spare allocation policy',\n        defaultValue: constants.POLICIES.SPARES.DEFAULT,\n        allowedValues: constants.POLICIES.SPARES.ALLOWED,\n        inverted: false,\n        impactsCluster: false,\n        productLines: [ CONFIG_GROUPS.FAS ]\n    }];\n}\n\nmodule.exports = Policies;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    Config = require('./config');\n\nfunction ConfigGroup(options, index, value, parent) {\n    if (!(this instanceof ConfigGroup)) {\n        return new ConfigGroup(options, index, value, parent);\n    }\n\n    var makeSubLine = _.partialRight(ConfigGroup, this),\n        defaults = {\n            enabled: false,\n        },\n        overrides = {\n            parent: parent || null,\n            _configs: [],\n            _configsByModel: {},\n        };\n\n    assert(this instanceof ConfigGroup, 'use new');\n    assert.equal(typeof options, 'object', 'options ' + typeof options);\n    assert(parent === undefined || parent instanceof ConfigGroup, 'parent');\n    assert(!(parent !== undefined && this.subGroups), 'depth limit: 2');\n\n    _.merge(this, defaults, options, overrides);\n\n    if (!this.subGroups) {\n        this.subGroups = [];\n    } else {\n        assert(this.subGroups instanceof Array);\n        this.subGroups = _.map(this.subGroups, makeSubLine);\n    }\n}\n\nConfigGroup.prototype.inhaleRawSystem = function gcbm(rawSystem, controllerModel) {\n    assert(_.isPlainObject(rawSystem), 'rawSystem');\n\n    var configModel = rawSystem.name,\n        config;\n\n    if (_.has(this._configsByModel, configModel)) {\n        config = this._configsByModel[configModel];\n    } else if (rawSystem) {\n        this._configsByModel[configModel] = config = new Config(rawSystem, controllerModel);\n        this._configs.push(config);\n    }\n\n    return config;\n};\n\nConfigGroup.prototype.getConfigByModel = function gcbm(configModel) {\n    assert.equal(typeof configModel, 'string', 'configModel ' + typeof configModel);\n    assert(_.has(this._configsByModel, configModel), 'unknown configModel ' + configModel);\n\n    return this._configsByModel;\n};\n\nConfigGroup.prototype.getConfigs = function getConfigs() {\n    return this._configs;\n};\n\nConfigGroup.prototype.getConfig = function getConfig(configModel) {\n    var matches = _.where(this._configs, { configModel : configModel });\n    assert.equal(matches.length, 1, 'cannot find ' + configModel);\n    return matches[0];\n};\n\nConfigGroup.prototype.getSubGroup = function getSubGroup(id) {\n    if (id === '') {\n        return this;\n    }\n\n    var matches = _.where(this.subGroups, { id: id });\n    assert.equal(matches.length, 1, 'subgroup lookup ' + id);\n    return matches[0];\n};\n\nConfigGroup.prototype.where = function where(constraint) {\n    if (_.isEmpty(constraint)) {\n        return _.where(this._configs);\n    } else {\n        return _.where(this._configs, constraint);\n    }\n};\n\nmodule.exports = ConfigGroup;\n","'use strict';\n\nvar assert = require('assert'),\n    CompatibilityMatrix = require('./matrix'),\n    _ = require('lodash');\n\n/**\n * Create a Config from a raw system in UpdatedPCD.\n */\n\nfunction Config(rawSystem, controllerModel) {\n    if (!(this instanceof Config)) {\n        return new Config(rawSystem);\n    }\n\n    assert.equal(typeof rawSystem, 'object', 'rawSystem ' + typeof rawSystem);\n\n    var stats = rawSystem.stats,\n        controllerCount = stats.chassis_count * stats.controller_per_chassis;\n\n    _.merge(this, {\n        platformModel: controllerModel,\n        configModel: rawSystem.name,\n        configDesc: rawSystem.config,\n        controllerCount: controllerCount,\n        isHA: controllerCount > 1,\n        isEmbedded: rawSystem.hardware.embedded_shelves.length > 0,\n        isSellable: rawSystem.sellable,\n        stats: rawSystem.stats,\n        matrix: new CompatibilityMatrix(rawSystem.name),\n    });\n}\n\nmodule.exports = Config;\n","'use strict';\n\nvar assert = require('assert'),\n    constants = require('../constants'),\n    _ = require('lodash'),\n    ConfigGroup = require('./config-group'),\n    async = require('async');\n\nvar CONFIG_GROUPS = constants.CONFIG_GROUPS;\n\n/**\n * Product information API\n * Provides data via search API\n * Does NOT provide compatibility filtering\n */\n\nfunction ProductInfo(rawConfigData) {\n    assert(this instanceof ProductInfo, 'use new');\n    assert(typeof rawConfigData === 'object', 'rcd ' + typeof rawConfigData);\n    this._initConfigGroups();\n    this._rawConfigData = rawConfigData;\n    this._inhaled = false;\n}\n\n/**\n * Get list of product lines. Each might have sub-lines. Those won't:\n * the depth limit is 2. Used for initial system configuration.\n */\n\nProductInfo.prototype.getConfigGroups = function getConfigGroups() {\n    assert(this._inhaled);\n    return this._configGroups;\n};\n\n/**\n * Get product line by ID and sub-line ID. Might not get used via public\n * API -- how would you get to it? Used for testing, though.\n */\n\nProductInfo.prototype.getConfigGroup = function getConfigGroup(id, subid) {\n    assert(this._inhaled);\n    var matches =  _.where(this._configGroups, { id: id });\n    assert.equal(matches.length, 1, 'subgroup lookup ' + id);\n    var group = matches[0];\n\n    if (subid) {\n        return group.getSubGroup(subid);\n    } else {\n        return group;\n    }\n};\n\nProductInfo.prototype._initConfigGroups = function _initConfigGroups() {\n    this._configGroups = _.map([{\n        id: CONFIG_GROUPS.FAS,\n        title: 'Fabric-Attached Storage',\n        subtitle: 'Data ONTAP',\n        img: '../media/img/FAS8020_front_view.png',\n        enabled: true,\n\n        subGroups: [{\n            id: CONFIG_GROUPS.FAS_CMODE_NORMAL,\n            title: 'Clustered Data ONTAP',\n            enabled: true\n        }, {\n            id: CONFIG_GROUPS.FAS_7MODE_NORMAL,\n            title: '7-Mode',\n            enabled: true\n        }, {\n            id: CONFIG_GROUPS.FAS_7MODE_MC,\n            title: 'MetroCluster',\n            enabled: false\n        }, {\n            id: CONFIG_GROUPS.FAS_CMODE_MCC,\n            title: 'Clustered Metro Cluster',\n            enabled: false\n        }, {\n            id: CONFIG_GROUPS.FAS_VSERIES,\n            title: 'V Series',\n            enabled: false\n        }]\n    }, {\n        id: CONFIG_GROUPS.E,\n        title: 'E-Series',\n        subtitle: 'SANtricity',\n        img: '../media/img/E2660_front_view.png',\n        enabled: true,\n        subGroups: [{\n            id: CONFIG_GROUPS.E_NORMAL,\n            title: 'E-Series',\n            enabled: true\n        }, {\n            id: CONFIG_GROUPS.EF_NORMAL,\n            title: 'EF-Series',\n            enabled: true\n        }],\n    }], ConfigGroup);\n};\n\n/**\n * Determines line and sub-line for existing system.\n */\nProductInfo.prototype.determineConfigGroup = function determineConfigGroup(hagroup) {\n    assert(this._inhaled);\n    assert(hagroup, 'Cannot determine config group without hagroup');\n\n    var availableGroups = _.where(this._configGroups, function(group) {\n        var haGroupModelName = hagroup._model || hagroup.model;\n\n        // V-Series is FAS\n        if (group.id === CONFIG_GROUPS.FAS && haGroupModelName && haGroupModelName.toUpperCase().indexOf(CONFIG_GROUPS.FAS_VSERIES) === 0) {\n            return true;\n        }\n\n        return haGroupModelName && haGroupModelName.toUpperCase().indexOf(group.id) === 0; // Removing this so we always get options back '&& group.enabled'\n    });\n\n    if (availableGroups.length > 0) {\n        if (availableGroups.length > 1) {\n            // Determine the most relevant match\n            availableGroups = _.sortBy(availableGroups, function(availableGroup) {\n                return availableGroup.id.length * -1;\n            });\n        }\n\n        var group = _.first(availableGroups);\n\n        if (group.subGroups.length > 0) {\n            var subgroup = null;\n\n            // We have sub-groups too\n            if (group.id === CONFIG_GROUPS.FAS) {\n                if (hagroup.is_clustered && hagroup.is_metrocluster) {\n                    subgroup = CONFIG_GROUPS.FAS_CMODE_MCC;\n                }\n                else if (hagroup.is_clustered) {\n                    subgroup = CONFIG_GROUPS.FAS_CMODE_NORMAL;\n                }\n                else if (hagroup.is_metrocluster) {\n                    subgroup = CONFIG_GROUPS.FAS_7MODE_MC;\n                }\n                else {\n                    subgroup = CONFIG_GROUPS.FAS_7MODE_NORMAL;\n                }\n            }\n\n            if (group.id === CONFIG_GROUPS.E) {\n                var model = hagroup.model || hagroup._model;\n\n                if (model.indexOf('EF') === 0) {\n                    subgroup = CONFIG_GROUPS.EF_NORMAL;\n                }\n                else {\n                    subgroup = CONFIG_GROUPS.E_NORMAL;\n                }\n            }\n\n            return this.getConfigGroup(group.id, subgroup);\n        }\n\n        return this.getConfigGroup(group.id);\n    }\n\n    return [];\n};\n\n/**\n * Fetch the config for an existing system.\n */\n\nProductInfo.prototype.getConfig = function getConfig(hagroup) {\n    assert(this._inhaled);\n    var group = this.determineConfigGroup(hagroup);\n    return group.getConfig(hagroup._model);\n};\n\nProductInfo.prototype.inhale = function inhale(callback) {\n    assert(!this._inhaled);\n\n    var rawConfigData = this._rawConfigData,\n        rawTasks = [\n            this._inhaleLimits,\n            this._inhaleReleases,\n            this._inhaleShelves,\n            this._inhaleDrives,\n            this._inhaleShelfPresets,\n            this._inhaleCards,\n            this._inhalePlatforms\n        ],\n        tasks = _.map(rawTasks, cookTask, this);\n\n    async.series(tasks, afterInhalation.bind(this));\n\n    function afterInhalation(err) {\n        // jshint -W040\n        assert(this instanceof ProductInfo);\n\n        if (!err) {\n            this._inhaled = true;\n        }\n        return callback(err);\n    }\n\n    function cookTask(fn) {\n        // jshint -W040\n        assert(this instanceof ProductInfo);\n\n        if (fn.length === 2) {\n            return fn.bind(this, rawConfigData); // assume takes rawData, callback\n        }\n\n        var _task = _.bind(task, this);\n        return _.bind(setImmediate, this, _task);\n\n        function task(_callback) {\n            assert(this instanceof ProductInfo);\n            try {\n                fn.call(this, rawConfigData);\n                setImmediate(_callback, null);\n            } catch (err) {\n                console.error(err.stack);\n                setImmediate(_callback, err);\n            }\n        }\n    }\n};\n\nProductInfo.prototype._inhaleLimits = function _inhaleLimits(rawConfigData) {\n    assert.notEqual(rawConfigData.limits, undefined);\n    this._limits = rawConfigData.limits;\n};\n\nProductInfo.prototype._inhaleReleases = function _inhaleReleases(rawConfigData) {\n    var families = this._inhaleReleaseFamilies(rawConfigData),\n        seen = {};\n\n    function cookAndLinkRelease(rawRelease) {\n        var longVersion = rawRelease.version;\n\n        assert.equal(_.has(seen, longVersion), false, 'dup version ' + longVersion);\n\n        var release = {\n            family: families[rawRelease.family], // -> our family object\n            version: longVersion,\n            sys_version: getShortVersion(longVersion),\n            cMode: rawRelease.clustered,\n            status: rawRelease.release_status,\n        };\n\n        release.family.releases.push(release);\n        return release;\n    }\n\n    this._releases = _.map(rawConfigData.os_releases, cookAndLinkRelease);\n};\n\nfunction getShortVersion(longVersion) {\n    assert.equal(typeof longVersion, 'string');\n    var segments = longVersion.split(' ');\n    return segments[0];\n}\n\nProductInfo.prototype._inhaleReleaseFamilies = function _inhaleReleaseFamilies(rawConfigData) {\n    function cookFamily(rawFamily) {\n        var family = {\n            name: rawFamily.name,\n            releases: [] // -> all releases in this family\n        };\n\n        return family;\n    }\n\n    return (\n        this._families = _.map(rawConfigData.os_families, cookFamily)\n    );\n};\n\nProductInfo.prototype._inhaleShelves = function _inhaleShelves(rawConfigData) {\n    this._shelves = rawConfigData.shelves;\n};\n\nProductInfo.prototype._inhaleDrives = function _inhaleDrives(rawConfigData) {\n    this._drives = _.map(rawConfigData.drives, function fixDrive(drive) {\n        switch (drive.fp_support) {\n            case 'yes':\n                drive.fp_support = true;\n                break;\n            case 'no':\n                drive.fp_support = false;\n                break;\n            default:\n                break;\n        }\n        return drive;\n    });\n};\n\nProductInfo.prototype._inhaleCards = function _inhaleCards(rawConfigData) {\n    this._cards = rawConfigData.cards;\n};\n\nProductInfo.prototype._inhaleShelfPresets = function _inhaleShelfPresets(rawConfigData) {\n    assert(this._shelves, 'Please inhale shelves first');\n    assert(this._drives, 'Please inhale drives first');\n\n    var _this = this;\n\n    this._shelfPresets = _.map(rawConfigData.presets, function(shelfPreset) {\n        var shelfDrives = [];\n\n        _.forEach([shelfPreset.primary, shelfPreset.secondary], function(shelfDrive) {\n            if (shelfDrive) {\n                shelfDrives.push({\n                    quantity: shelfDrive.quantity,\n                    drive: _this._drives[shelfDrive.drive]\n                });\n            }\n        });\n\n        return {\n            ref: shelfPreset,\n            shelf: _this._shelves[shelfPreset.shelf],\n            drives: shelfDrives\n        };\n    });\n};\n\nProductInfo.prototype._inhalePlatforms = function _inhalePlatforms(rawConfigData, callback) {\n    assert(this instanceof ProductInfo);\n    assert(rawConfigData);\n\n    this._systemConfigs = {};\n\n    var rawPlatforms = rawConfigData.platforms,\n        inhalePlatform = _.bind(this._inhalePlatform, this),\n        callbacklater = this.delay(callback);\n\n    async.eachSeries(rawPlatforms, inhalePlatform, callbacklater);\n};\n\nProductInfo.prototype._inhalePlatform = function _inhalePlatform(rawPlatform, callback) {\n    // raw.platforms.0\n    assert(this instanceof ProductInfo);\n    assert.equal(typeof rawPlatform, 'object');\n    assert.equal(typeof callback, 'function');\n\n    var groupID = this._getPrimaryConfigGroupIDGivenEpicFamily(rawPlatform.family),\n        primaryConfigGroup = _(this._configGroups).where({ id: groupID }).first(),\n        inhaleModelIntoPrimaryConfigGroup = _.bind(this._inhaleModel, this, primaryConfigGroup),\n        callbacklater = this.delay(callback);\n\n    async.eachSeries(rawPlatform.models, inhaleModelIntoPrimaryConfigGroup, callbacklater);\n};\n\nProductInfo.prototype._inhaleModel = function _inhaleModel(configGroup, rawModel, callback) {\n    // raw.platforms.0.models.0\n    assert(this instanceof ProductInfo);\n    assert.equal(typeof configGroup, 'object');\n    assert.equal(typeof rawModel, 'object');\n    assert.equal(typeof callback, 'function');\n\n    assert(configGroup instanceof ConfigGroup);\n    assert(_.isPlainObject(rawModel));\n\n    var controllerModel = rawModel.platform,\n        inhaleSystem = _.bind(this._inhaleSystem, this, configGroup, controllerModel),\n        callbacklater = this.delay(callback);\n\n    async.eachSeries(rawModel.systems, this.asyncify(inhaleSystem), callbacklater);\n};\n\nProductInfo.prototype._inhaleSystem = function _inhaleSystem(configGroup, controllerModel, rawSystem) {\n    // raw.platforms.0.models.0.systems.0\n\n    assert(configGroup instanceof ConfigGroup);\n    assert(typeof controllerModel === 'string');\n\n    var _this = this,\n        hardwareTables = {\n            cards: this._cards,\n            drives: this._drives,\n            shelfPresets: this._shelfPresets,\n            shelves: this._shelves,\n        };\n\n    _.forEach(rawSystem.os_limits, function (limitBlock) {\n        var limits = _this._limits[limitBlock.limits],\n            firstRelease = _this._releases[limitBlock.os[0]], // OK because consistent isCmode\n            isCmode = firstRelease.cMode,\n            subGroupID = _this._getSubGroupGivenEpicData(configGroup, rawSystem, isCmode),\n            subGroup = configGroup.getSubGroup(subGroupID),\n            config = subGroup.inhaleRawSystem(rawSystem, controllerModel);\n\n        // now fill in systemConfig.uniqueLimits with objects\n        // pointing to both the distinct limits and the full\n        // release object responsible for them\n        _.forEach(limitBlock.os, function (releaseIndex) {\n            var release = _.extend(_this._releases[releaseIndex], { _index: releaseIndex }); // May be able to remove this\n            config.matrix.inhaleRelease(release, limits);\n        });\n\n        config.matrix.inhaleHardware(rawSystem.hardware, hardwareTables, config.stats);\n\n        if (config.isEmbedded) {\n            if (!config.stats.power.power_spec) {\n                config.stats.power.power_spec = {}; // TODO stats for no internal drive selected\n            }\n\n            if (!config.stats.weight.weight_g) {\n                config.stats.weight.weight_g = 0; // TODO stats for no internal drive selected\n            }\n        }\n    });\n};\n\n// parse data from the outside world for categorisation\n\nProductInfo.prototype._getPrimaryConfigGroupIDGivenEpicFamily = function(rawFamily) {\n    // ignores after-digit strings because we've got dashes, spaces,\n    // and other oddities to deal with that don't matter to this function:\n    var match = rawFamily.match(/^([A-Z]+)([0-9\\-]+)/);\n    assert.notEqual(match, null, 'cannot parse model family: ' + rawFamily);\n\n    switch (match[1]) {\n\n    case 'E':\n        return CONFIG_GROUPS.E;\n\n    case 'EF':\n        return CONFIG_GROUPS.E;\n\n    case 'FAS':\n        return CONFIG_GROUPS.FAS;\n\n    case 'V':\n        return CONFIG_GROUPS.FAS;\n\n    }\n\n    assert.fail(\n        match[1],\n        'E, FAS, or V',\n        'unknown model prefix' + match[1] + ' for ' + rawFamily,\n        'match');\n};\n\n\n// should we move this to ConfigGroup?\n\nProductInfo.prototype._getSubGroupGivenEpicData = function(configGroup, rawSystem, isClustered) {\n    var isMetro = rawSystem.config.match(/Metro/) !== null,\n        isMCC = rawSystem.name.match(/MCC/) !== null,\n        isEF = rawSystem.name.match(/EF/) !== null;\n\n    /* MCC (MetroCluster CMode) Rules\n        MCC systems run Clustered-Data OnTAP\n    */\n\n    switch (configGroup.id) {\n\n    case CONFIG_GROUPS.E:\n        if (isEF) {\n            return CONFIG_GROUPS.EF_NORMAL;\n        }\n        else {\n            return CONFIG_GROUPS.E_NORMAL;\n        }\n        break;\n\n    case CONFIG_GROUPS.FAS:\n        if (isClustered) {\n            if (isMCC) {\n                return CONFIG_GROUPS.FAS_CMODE_MCC;\n            }\n            else if (!isMCC && !isMetro) {\n                return CONFIG_GROUPS.FAS_CMODE_NORMAL;\n            }\n            else {\n                assert.equal(isMetro, false, 'c-mode MC unsupported');\n            }\n        } else {\n            if (isMetro) {\n                return CONFIG_GROUPS.FAS_7MODE_MC;\n            } else {\n                return CONFIG_GROUPS.FAS_7MODE_NORMAL;\n            }\n        }\n        break;\n    }\n\n    assert.fail(\n        configGroup.id,\n        'E, EF, or FAS',\n        'unknown config group ' + configGroup.id,\n        '=');\n};\n\nProductInfo.prototype.getDriveByModel = function(driveModel) {\n    assert(this._inhaled);\n    return _.find(this._drives, function(d) { return d.model === driveModel; });\n};\n\nProductInfo.prototype.delay = function delay(callback) {\n    return function delayed() {\n        var args = _.toArray(arguments);\n        setImmediate(later, 1);\n\n        function later() {\n            // jshint -W040\n            callback.apply(this, args);\n        }\n    };\n};\n\nProductInfo.prototype.asyncify = function asyncify(fn) {\n    assert(this instanceof ProductInfo);\n    return _.bind(asyncFn, this);\n\n    function asyncFn() {\n        // jshint -W040\n        var args = _.toArray(arguments),\n            callback = args.pop();\n\n        assert(this instanceof ProductInfo);\n        assert.equal(typeof callback, 'function');\n\n        try {\n            var returnValue = fn.apply(this, args);\n            setImmediate(callback, returnValue);\n        } catch (err) {\n            setImmediate(callback, err);\n        }\n    }\n};\n\nmodule.exports = ProductInfo;\n","'use strict';\n\nvar _ = require('lodash'),\n    util = require('util'),\n    assert = require('assert');\n\nfunction CompatibilityMatrix(configModel) {\n    assert(this instanceof CompatibilityMatrix, 'use new');\n    this.configModel = configModel;\n    this._ = {\n        // trying a new pattern for envy protection:\n        // if you see '._.', you know it's envy.\n        // also: short names because obfuscation\n        rbi:  {},  // releases by index... kinda\n        rik:  [],  // release index keys\n        sv:   {},  // releases by sys_version (short)\n        t: {       // table extract\n            d: {},    // drive\n            dR: {},   // drive indexes by model\n            rsd: {},  // rsd[[ri,si,di].join(' ')] => true if compat\n            r: {},    // release (actual raw)\n            s: {},    // shelf\n            sR: {},   // shelf indexes by model\n        },\n        v:    {},  // releases by version (long)\n    };\n\n    Object.defineProperty(this, 'versions', { get: function getVersions() {\n        this.finalize();\n        return _.keys(this._.v);\n    }});\n\n    this.hardwareOptions = {};\n\n    this.checkVersionShelfDrive = _.memoize(_.bind(this.checkVersionShelfDrive, this), function (v, s, d) {\n        return [v, s, d].join('\\0');\n    });\n\n    this._showEnvStatChecks = false;\n    this._envStatChecks = {configModel: configModel};\n}\n\n// query functions:\n\n/**\n * Get the full display name for a given version.\n */\n\nCompatibilityMatrix.prototype.getFullNameForVersion = function getFullNameForVersion(version) {\n    assert(_.has(this._.v, version), util.format('unknown version %s; need %s for %s',\n        version,\n        _.keys(this._.v).join(', '),\n        this.configModel\n    ));\n\n    this.finalize();\n\n    var sysVersion = this._.v[version].sys_version,\n        familyName = this._.v[version].family.name;\n\n    return sysVersion + ' ' + familyName;\n};\n\n/**\n * Determine whether a given long version is compatible with this config.\n */\n\nCompatibilityMatrix.prototype.isCompatibleWithVersion = function isCompatibleWithVersion(version) {\n    this.finalize();\n    return _.has(this._.v, version);\n};\n\n/**\n * Get the limits for this combination of config and version.\n * ENVY WARNING: dereferencing into hardware is unlikely to be healthy.\n */\n\nCompatibilityMatrix.prototype.getLimitsForVersion = function getLimitsForVersion(version) {\n    assert(_.has(this._.v, version), util.format('unknown version %s; need %s for %s',\n        version,\n        _.keys(this._.v).join(', '),\n        this.configModel\n    ));\n\n    this.finalize();\n    var index = this._.v[version]._index;\n    return this._.rbi[index].limits;\n};\n\n/**\n * Check for version/shelf/drive compatibility, including slice details.\n */\n\nCompatibilityMatrix.prototype.checkVersionShelfDrive = function checkVersionShelfDrive(version, shelfModel, driveModel) {\n    this.finalize();\n\n    var incompatibility = {\n            compatible: false,\n            fp_slicing: false,\n            fp_support_drive: false,\n            root_slicing: false,\n        },\n        tables = this._.t,\n        shelfIndex = tables.sR[shelfModel],\n        driveIndex = tables.dR[driveModel];\n\n    if (!_.has(this._.v, version) || shelfIndex === undefined || driveIndex === undefined) {\n        return incompatibility;\n    }\n\n    var release = this._.v[version],\n        releaseIndex = release._index,\n        limits = this._.rbi[release._index].limits,\n        spec = this._mkRSDspec(releaseIndex, shelfIndex, driveIndex);\n\n    if (!_.has(tables.rsd, spec)) {\n        return incompatibility;\n    }\n\n    return {\n        compatible: true,\n        drive: tables.d[driveIndex],\n        fp_slicing: canSliceAccordingTo(limits.fp_slicing),\n        fp_support_drive: canSliceAccordingTo(limits.fp_support_drive),\n        root_slicing: canSliceAccordingTo(limits.root_slicing),\n    };\n\n    function canSliceAccordingTo(table) {\n        var blocks = _.where(table, { shelf: shelfIndex });\n\n        if (blocks.length) {\n            assert(blocks.length === 1);\n            return _.contains(blocks[0].drives, driveIndex);\n        } else {\n            return false;\n        }\n    }\n};\n\n// inhalation functions:\n\nCompatibilityMatrix.prototype.inhaleRelease = function inhaleRelease(release, limits) {\n    this._.v[release.version] = release;\n    this._.sv[release.sys_version] = release;\n    this._.t.r[release._index] = release;\n    this._.rbi[release._index] = {\n        release: release,\n        limits: limits\n    };\n\n    if (this._.rik.indexOf(release._index) === -1) {\n        this._.rik.push(release._index);\n    }\n};\n\nCompatibilityMatrix.prototype.inhaleHardware = function inhaleHardware(systemHardware, hardwareTables, systemStats) {\n    this._bindHardware(systemHardware, hardwareTables, systemStats);\n};\n\nCompatibilityMatrix.prototype.finalize = function finalize() {\n    this._reverseIndexes();\n    this._lockDown();\n};\n\nCompatibilityMatrix.prototype._reverseIndexes = function _reverseIndexes() {\n    var hwt = this._.t;\n\n    // jshint -W016\n\n    _.forEach(hwt.d, function (entry, index) {\n        hwt.dR[entry.model] = 0|index;\n    });\n\n    _.forEach(hwt.s, function (entry, index) {\n        hwt.sR[entry.model] = 0|index;\n    });\n};\n\nCompatibilityMatrix.prototype._lockDown = function lockdown() {\n    this.inhaleRelease = this.inhaleHardware = nope;\n    this.finalize = _.noop;\n\n    function nope() {\n        assert(false, 'matrix locked after hardware inhalation');\n    }\n};\n\nCompatibilityMatrix.prototype._bindHardware = function(systemHardware, hardwareTables, systemStats) {\n    this._cacheEntries(systemHardware, hardwareTables);\n\n    var options = {\n        shelves: this._bindShelves(systemHardware.shelves, systemHardware.drives, hardwareTables, false),\n        embeddedShelves: this._bindShelves(systemHardware.embedded_shelves, systemHardware.drives, hardwareTables, true, systemStats),\n        shelfPresets: this._bindShelfPresets(systemHardware.presets, systemHardware.embedded_shelves, hardwareTables),\n        cards: this._bindCards(systemHardware.cards, hardwareTables)\n    };\n\n    this._outputEnvStatChecks();\n\n    this.hardwareOptions = options;\n};\n\nCompatibilityMatrix.prototype._cacheEntries = function _cacheEntries(systemHardware, hardwareTables) {\n    var _this = this,\n        tables = this._.t,\n        rsd = tables.rsd;\n\n    _.forEach(systemHardware.shelves, cacheShelfHardwareTableEntry);\n    _.forEach(systemHardware.embedded_shelves, cacheShelfHardwareTableEntry);\n    _.forEach(systemHardware.drives, cacheDriveHardwareTableEntry);\n\n    function cacheShelfHardwareTableEntry(entry) {\n        // { shelf: n, os: [ ... ] }\n        var shelfIndex = entry.shelf;\n        tables.s[shelfIndex] = hardwareTables.shelves[shelfIndex];\n    }\n\n    function cacheDriveHardwareTableEntry(entry) {\n        // { drive: n, os: [ ... ], shelves: [ ... ] }\n        var driveIndex = entry.drive;\n        tables.d[driveIndex] = hardwareTables.drives[driveIndex];\n\n        // TODO: figure out how to do this more efficiently\n        // using string addition rather than [].join saved 60%\n        // but it still takes 2.5s\n        _.forEach(entry.os, function (ri) {\n            _.forEach(entry.shelves, function (si) {\n                rsd[_this._mkRSDspec(ri, si, driveIndex)] = true;\n            });\n        });\n    }\n};\n\nCompatibilityMatrix.prototype._mkRSDspec = function _mkRSDspec(ri, si, di) {\n    // jshint -W016\n    return ri<<24 | si<<16 | di;\n};\n\nCompatibilityMatrix.prototype._bindShelfPresets = function(systemShelfPresets, systemEmbeddedShelves, hardwareTables) {\n    var _this = this,\n        embeddedShelfPool = _.map(systemEmbeddedShelves, function(systemEmbeddedShelf) {\n            return systemEmbeddedShelf.shelf;\n        }),\n        resolvedPresets = [];\n\n    _.forEach(systemShelfPresets, function(systemShelfPreset) {\n        var preset = hardwareTables.shelfPresets[systemShelfPreset.preset],\n\t        isEmbedded = _.contains(embeddedShelfPool, preset.ref.shelf),\n            versions = _this._mapRawOsIntoReleaseVersions(systemShelfPreset.os),\n            shelf = preset.shelf,\n            stats = shelf.stats,\n            weight = _(stats.weight).find({preset: systemShelfPreset.preset}),\n            weight_g = weight ? weight.weight_g : 0,\n            power_spec = _(stats.power).find({preset: systemShelfPreset.preset});\n\n            _this._checkEnvironmentalStats(weight, power_spec, shelf, systemShelfPreset);\n\n        if(!power_spec) {\n            power_spec = {};\n        }\n\n        if (isEmbedded) {\n            var embeddedOption = {\n                    shelf: shelf,\n                    isEmbedded: true,\n                    drives: preset.drives,\n                    power_spec: power_spec,\n                    weight_g: weight_g,\n                    versions: versions\n                };\n\n            resolvedPresets.push(embeddedOption);\n        }\n\n        if (!shelf.embedded_only) {\n            var shelfOption = {\n                    shelf: shelf,\n                    isEmbedded: false,\n                    drives: preset.drives,\n                    power_spec: power_spec,\n                    weight_g: weight_g,\n                    versions: versions\n                };\n\n            resolvedPresets.push(shelfOption);\n        }\n    });\n\n    return resolvedPresets;\n};\n\nCompatibilityMatrix.prototype._bindShelves = function(systemShelves, systemDrives, hardwareTables, embedded, systemStats) {\n    var _this = this,\n        // Only look for drives that work with the shelves we passed in here.\n        systemShelfPool = _.map(systemShelves, 'shelf'),\n        systemDrivesToUse = _.where(systemDrives, function(systemDrive) {\n            return _.any(systemDrive.shelves, function(shelf) {\n                return _.contains(systemShelfPool, shelf);\n            });\n        }),\n        denormalizedShelves = [];\n\n    _.forEach(systemDrivesToUse, function(systemDrive) {\n        _.forEach(systemDrive.shelves, function(shelfIndex) {\n            if (_.contains(systemShelfPool, shelfIndex)) {\n                var shelf = hardwareTables.shelves[shelfIndex],\n                    stats = shelf.stats,\n                    weightStats = embedded ? systemStats.weight.with_internal : stats.weight,\n                    weight = _(weightStats).find({drive: systemDrive.drive}),\n                    weight_g = weight ? weight.weight_g : 0,\n                    powerStats = embedded ? systemStats.power.with_internal : stats.power,\n                    power_spec = _(powerStats).find({drive: systemDrive.drive});\n\n                _this._checkEnvironmentalStats(weight, power_spec, shelf, systemDrive);\n\n                if(!power_spec) {\n                    power_spec = {};\n                }\n\n                var shelfOption = {\n                    shelf: shelf,\n                    isEmbedded: embedded,\n                    drives: [{\n                        quantity: stats.drive_slots * stats.drives_per_carrier,\n                        drive: hardwareTables.drives[systemDrive.drive]\n                    }],\n                    power_spec: power_spec,\n                    weight_g: weight_g,\n                    versions: _this._mapRawOsIntoReleaseVersions(systemDrive.os)\n                };\n\n                denormalizedShelves.push(shelfOption);\n            }\n        });\n    });\n\n    return denormalizedShelves;\n};\n\nCompatibilityMatrix.prototype._checkEnvironmentalStats = function(weight, power_spec, shelf, indexObject) {\n    if(this._showEnvStatChecks) {\n        var _this = this;\n\n        var addEnvCheckMessage = function(msg) {\n            if(!_this._envStatChecks[msg]){\n                _this._envStatChecks[msg] = {};\n            }\n\n            if (indexObject.drive) {\n                _this._envStatChecks[msg][':drive:'+indexObject.drive+',shelf:'+shelf] = [shelf, indexObject];\n            } else if (indexObject.preset) {\n                _this._envStatChecks[msg][':preset:'+indexObject.preset+',shelf:'+shelf] = [shelf, indexObject];\n            }\n        };\n\n\n        if(weight && power_spec) {\n            //console.warn('found env stats for:', indexObject, shelf);\n            //addEnvCheckMessage('found');\n        }\n\n        if(!weight) {\n            //console.warn('could not find weight spec for drive:', indexObject, shelf);\n            addEnvCheckMessage('missing-weight');\n        }\n\n        if(!power_spec) {\n            //console.warn('could not find power_spec for drive:', indexObject, shelf);\n            addEnvCheckMessage('missing-power_spec');\n        } else {\n            if(!power_spec.v_100) {\n                //console.warn('could not find power_spec.v_100 for drive:', indexObject, shelf);\n                addEnvCheckMessage('missing-power_spec.v_100');\n            }\n            if(!power_spec.v_200) {\n                //console.warn('could not find power_spec.v_200 for drive:', indexObject, shelf);\n                addEnvCheckMessage('missing-power_spec.v_200');\n            }\n        }\n    }\n};\n\nCompatibilityMatrix.prototype._outputEnvStatChecks = function() {\n    if(this._showEnvStatChecks) {\n        //_(this._envStatChecks).keys().forEach(function(k){console.log(k);});\n        console.warn(this._envStatChecks);\n    }\n};\n\nCompatibilityMatrix.prototype._bindCards = function(systemCards, platformCards) {\n    var _this = this,\n        denormalizedCards = [];\n\n    _.forEach(systemCards, function(systemCard) {\n        var cardOption = {\n            card: platformCards[systemCard.card],\n            assignments: _.map(systemCard.assignments, function(assignment) {\n                return {\n                    slots: assignment.slots,\n                    versions: _this._mapRawOsIntoReleaseVersions(assignment.os)\n                };\n            }),\n            versions: _this._mapRawOsIntoReleaseVersions(systemCard.os)\n        };\n\n        denormalizedCards.push(cardOption);\n    });\n\n    return denormalizedCards;\n};\n\nCompatibilityMatrix.prototype._mapRawOsIntoReleaseVersions = function(rawOsArray) {\n    var _this = this;\n\n    if (rawOsArray) {\n        return _.without(_.map(rawOsArray, function(osKey) {\n            return _this._getReleaseIfInTable(osKey);\n        }), -1);\n    }\n\n    return [];\n};\n\nCompatibilityMatrix.prototype._getReleaseIfInTable = function(key) {\n    if (this._.rik.indexOf(key) !== -1) {\n        return this._.rbi[key].release;\n    }\n\n    return -1;\n};\n\nCompatibilityMatrix.prototype._osAgnosticIsEqual = function(obj, objb) {\n    var limitKeys = _.without(_.keys(obj), '_os'),\n        limitComp = [];\n\n    limitComp = _.map(limitKeys, function(key) {\n        if (!_.has(objb, key)) {\n            return false;\n        }\n\n        return _.isEqual(obj[key], objb[key]);\n    });\n\n    return _.all(limitComp);\n};\n\nCompatibilityMatrix.prototype._safeArrayConcat = function(array1, array2) {\n    var safeArray = [];\n\n    if (array1) {\n        safeArray = safeArray.concat(array1);\n    }\n\n    if (array2) {\n        safeArray = safeArray.concat(array2);\n    }\n\n    return safeArray;\n};\n\nfunction measure(fn, name) {\n    var tot = 0,\n        first = true;\n\n    name = name || fn.name || '(unknown)';\n\n    function end(beginning) {\n        var span = process.hrtime(beginning),\n            sec = span[0] + span[1] / 1e9;\n        tot = tot + sec;\n    }\n\n    return function measured() {\n        if (first) {\n            first = false;\n            console.error('MEASURING:', name);\n            process.on('exit', function () {\n                console.error('MEASURED:', name, tot.toPrecision(5));\n            });\n        }\n\n        var beg = process.hrtime(),\n            res;\n        try {\n            res = fn.apply(this, arguments);\n            end(beg);\n            return res;\n        } catch (err) {\n            end(beg);\n            throw err;\n        }\n    };\n}\n\nvar FNAMES = [\n        'inhaleRelease',\n        'inhaleHardware',\n        'finalize',\n        '_cacheEntries',\n        '_updateUniqueLimits',\n        '_bindShelves',\n        '_bindShelfPresets',\n        '_bindCards'\n    ];\n\nif (process.env.SR_MEASURE_MATRIX) {\n    _.forEach(FNAMES, function (fname) {\n        CompatibilityMatrix.prototype[fname] = measure(CompatibilityMatrix.prototype[fname], fname);\n    });\n}\n\nmodule.exports = CompatibilityMatrix;\n","'use strict';\n\nvar _ = require('lodash'),\n    assert = require('assert'),\n    Constants = require('../../constants'),\n    enforce = require('../../enforce');\n\nvar SITUATION_SPEC = {\n        // key: [ type, defaultValue ]\n        sparesLevel:         [ 'string', Constants.POLICIES.SPARES.DEFAULT.toLowerCase(), checkSparesLevel ],\n        deviceCount:         [ 'number' /*, no default */,  checkDeviceCount ],\n        raidCount:           [ 'number', 2,                 /* no check */ ],\n        isEmbeddedShelfOnly: [ 'boolean', false,            /* no check */ ],\n    },\n    LEVELS = {\n        minimum:  [ 4, 2, 1, 2, 2 ],\n        balanced: [ 6, 4, 2, 2, 2 ],\n        maximum:  [ 8, 6, 2, 2, 4 ],\n    },\n    SPARES = {\n        HUGE: 0,\n        LARGE: 1,\n        ENTRY: 2,\n        SINGLE: 3,\n        MEDIUM: 4\n    };\n\n/**\n * Get the expected spares count given the situation.\n */\nfunction getExpectedSpares(situation) {\n    assert(_.isPlainObject(situation));\n    situation = enforce(SITUATION_SPEC, situation);\n\n    var counts = LEVELS[situation.sparesLevel];\n\n    if (situation.deviceCount >= 1200) {\n        return counts[SPARES.HUGE];\n    } else if (situation.deviceCount >= 300) {\n        return counts[SPARES.LARGE];\n    } else if (situation.isEmbeddedShelfOnly) {\n        return counts[SPARES.ENTRY];\n    } else if (situation.raidCount < 2) {\n        return counts[SPARES.SINGLE];\n    } else {\n        return counts[SPARES.MEDIUM];\n    }\n}\n\nfunction checkSparesLevel(sparesLevel) {\n    assert(_.has(LEVELS, sparesLevel), 'invalid spares level: ' + sparesLevel);\n    return sparesLevel;\n}\n\nfunction checkDeviceCount(deviceCount) {\n    assert(deviceCount > 1);\n    return deviceCount;\n}\n\nmodule.exports = getExpectedSpares;\n","'use strict';\n\nvar assert = require('assert'),\n    async = require('async'),\n    _ = require('lodash'),\n    constants = require('./constants');\n\nfunction RequestQueue(xhr) {\n    assert(this instanceof RequestQueue, 'use new');\n    assert(typeof xhr === 'function', 'need xhr');\n\n    this.xhr = xhr;\n    this.readQueue = async.queue(_.bind(this.worker, this), constants.SERVER_READ_CONCURRENCY);\n    this.writeQueue = async.queue(_.bind(this.worker, this), constants.SERVER_WRITE_CONCURRENCY);\n\n    // this.readQueue.saturated = function() {\n    //     console.log('Read queue saturated');\n    // };\n\n    // this.readQueue.drain = function() {\n    //     console.log('Finished read queue');\n    // };\n\n    // this.writeQueue.saturated = function() {\n    //     console.log('Write queue saturated');\n    // };\n\n    // this.writeQueue.drain = function() {\n    //     console.log('Finished write queue');\n    // };\n}\n\n/**\n * Async function for processing each queued xhr request.\n * It must call callback(err) when finished, with an optional error argument.\n */\nRequestQueue.prototype.worker = function worker(task, callback) {\n    assert(task instanceof Object);\n    assert(typeof callback === 'function');\n    assert(typeof task.method === 'string');\n    assert(typeof task.basePath === 'string', 'buildUrl: basePath string');\n    assert(task.options instanceof Object);\n\n    function buildUrl(basePath, uuid, version) {\n        var segments = [ basePath ];\n\n        if (uuid === null) {\n            assert(version === null, 'buildUrl: version null if uuid null');\n        } else {\n            segments.push(uuid);\n            if (version !== null) {\n                segments.push(version);\n            }\n        }\n\n        // console.log('buildUrl :: ', segments.join('/'));\n\n        return segments.join('/');\n    }\n\n    var uuid = task.options.payload && task.options.payload._uuid || null,\n        version = task.options.payload && task.options.payload._version || null,\n        url = buildUrl(task.basePath, uuid, version);\n\n    this.xhr(task.method, url, task.options, function (err, res) {\n        if (err) {\n            console.error(err);\n            return callback(err);\n        }\n\n        if (res.statusCode !== 200) {\n            callback(new Error(url + ' -> ' + res.statusCode));\n        } else {\n            var result;\n            try {\n                result = JSON.parse(res.body);\n            } catch (err) {\n                callback(new Error('cannot parse response'));\n            }\n            callback(null, result);\n        }\n    });\n};\n\nRequestQueue.prototype.pauseReadQueue = function pause() {\n    if (!this.readQueue.paused) {\n        this.readQueue.pause();\n    }\n};\n\nRequestQueue.prototype.pauseWriteQueue = function pause() {\n    if (!this.writeQueue.paused) {\n        this.writeQueue.pause();\n    }\n};\n\nRequestQueue.prototype.resumeReadQueue = function resume() {\n    if (this.readQueue.paused) {\n        this.readQueue.resume();\n    }\n};\n\nRequestQueue.prototype.resumeWriteQueue = function resume() {\n    if (this.writeQueue.paused) {\n        this.writeQueue.resume();\n    }\n};\n\nRequestQueue.prototype.pushToReadQueue = function pushToReadQueue(request, callback) {\n    this.readQueue.push(request, callback);\n};\n\nRequestQueue.prototype.pushToWriteQueue = function pushToWriteQueue(request, callback) {\n    this.writeQueue.push(request, callback);\n};\n\nRequestQueue.prototype.queueStatus = function queueStatus() {\n    return {\n        readQueueLength: this.readQueue.length && this.readQueue.length() || 0,\n        readQueueRunning: this.readQueue.running && this.readQueue.running() || 0,\n        readQueuePaused: this.readQueue.paused,\n\n        writeQueueLength: this.writeQueue.length && this.writeQueue.length() || 0,\n        writeQueueRunning: this.writeQueue.running && this.writeQueue.running() || 0,\n        writeQueuePaused: this.writeQueue.paused\n    };\n};\n\nmodule.exports = RequestQueue;\n","'use strict';\n\nvar assert = require('assert'),\n    util = require('util'),\n    Store = require('./store');\n\nfunction EventJournalStore() {\n    assert(this instanceof EventJournalStore, 'use new');\n    Store.call(this, 'EVENTJOURNAL');\n    this.events = [];\n    this.open = false;\n}\n\nutil.inherits(EventJournalStore, Store);\n\nEventJournalStore.prototype._act = Store.prototype.act;\n\nEventJournalStore.prototype.act = function act(id) {\n    // Most stores only want to see their own events.\n    // This store is different.\n\n    assert(typeof(id) === 'string', 'need action ID');\n\n    // copy arguments into simple array rather than array-themed object\n    var args = [];\n    for (var idx = 0; idx < arguments.length; idx++) {\n        args.push(arguments[idx]);\n    }\n\n    this.events.push(args);\n    var applied = this._act.apply(this, arguments);\n    this.changed();\n    return applied;\n};\n\nEventJournalStore.prototype.getState = function getState() {\n    return {\n        events: this.events, // TODO: clone it to prevent mutation\n    };\n};\n\nEventJournalStore.prototype.EVENTJOURNAL_CLEAR = function open() {\n    this.events = [];\n    // no need to call this.changed() because our custom ask always does it\n};\n\nmodule.exports = EventJournalStore;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    util = require('util'),\n    Store = require('./store'),\n    getClientCache = require('../client-cache');\n\nfunction Hardware() {\n    assert(this instanceof Hardware, 'use new');\n\n    Store.call(this, 'HARDWARE');\n\n    this.cache = null;\n    this.col2View = null;\n    this.col3View = null;\n    this.selector = null;\n    this.uuid = null;\n\n    var _this = this;\n    getClientCache(function getCache(err, engine) {\n        if (err) {\n            console.error(err);\n        } else {\n            _this.cache = engine;\n            _this.restoreCacheState();\n        }\n    });\n}\n\nutil.inherits(Hardware, Store);\n\nHardware.prototype.getState = function getState() {\n    return {\n        uuid: this.uuid,\n        selector: this.selector,\n        col2View: this.col2View,\n        col3View: this.col3View\n    };\n};\n\nHardware.prototype.HARDWARE_CLEAR = function clear() {\n    this.col2View = null;\n    this.col3View = null;\n    this.selector = null;\n    this.uuid = null;\n\n    this.saveToLocalStorage();\n    this.changed();\n};\n\nHardware.prototype.HARDWARE_SELECT = function select(uuid, selector, col2View, col3View) {\n    assert(typeof uuid === 'string', 'string uuid');\n\n    this.col2View = col2View || null;\n    this.col3View = col3View || null;\n    this.selector = selector || null;\n    this.uuid = uuid;\n\n    this.saveToLocalStorage();\n    this.changed();\n};\n\nHardware.prototype.restoreCacheState = function restoreCacheState() {\n    if (this.cache) {\n        var _this = this;\n\n        this.cache.get('synergy.hardware.selection', function getSelection(err, result) {\n            if (err) {\n                console.error(err);\n            } else if (_this.isValidSelection(result)) {\n                _this.col2View = result.col2View || null;\n                _this.col3View = result.col3View || null;\n                _this.selector = result.selector || null;\n                _this.uuid = result.uuid;\n            } else {\n                _this.col2View = null;\n                _this.col3View = null;\n                _this.selector = null;\n                _this.uuid = null;\n            }\n        });\n    }\n};\n\nHardware.prototype.saveToLocalStorage = function saveToLocalStorage() {\n    if (this.cache) {\n        var state = {\n                uuid: this.uuid,\n                selector: this.selector,\n                col2View: this.col2View,\n                col3View: this.col3View\n            },\n            selection = this.isValidSelection(state) ? state : {};\n\n        this.cache.set('synergy.hardware.selection', selection, _.noop);\n    }\n};\n\nHardware.prototype.isValidSelection = function isValidSelection(selection) {\n    var uuid = _(selection).has('uuid') && selection.uuid,\n        selector = _(selection).has('selector'),\n        col2View = _(selection).has('col2View');\n\n    return uuid && selector && col2View;\n};\n\nmodule.exports = Hardware;\n","'use strict';\n\nvar assert = require('assert'),\n    Store = require('./store'),\n    util = require('util'),\n    uuid = require('uuid'),\n    _ = require('lodash');\n\nvar DEFAULT_ENTRY_LIMIT = 500;\n\nfunction LogStore(options) {\n    options = this.options = _.cloneDeep(options || {});\n    assert(_.isPlainObject(options));\n\n    Store.call(this, 'LOGS');\n\n    options.entryLimit = options.entryLimit || DEFAULT_ENTRY_LIMIT;\n\n    this._entries = [];\n    this._confirmed = 0;\n    this._overflowed = 0;\n    this._draining = false;\n    this._sessionId = uuid();\n}\n\nutil.inherits(LogStore, Store);\n\nLogStore.prototype.getState = function getState() {\n    return {\n        entries: this._entries,\n        confirmed: this._confirmed,\n        overflowed: this._overflowed,\n        draining: this._draining,\n    };\n};\n\nLogStore.prototype.drain = function drain(postFunction) {\n    var _this = this,\n        unconfirmed = this._entries.slice(this._confirmed),\n        drop = {\n            entries: unconfirmed,\n            sessionId: this._sessionId,\n            now: now(),\n        };\n\n    if (!_this._draining) {\n        _this._draining = true;\n        _this.changed();\n\n        postFunction(drop, function callback(err) {\n            if (!err) {\n                _this._confirmed += unconfirmed.length;\n            }\n\n            _this._draining = false;\n\n            if (_this._confirmed < _this._entries.length) {\n                _this.drain(postFunction);\n            }\n\n            _this.changed();\n        });\n    }\n};\n\nLogStore.prototype.log = function log(tags, entry) {\n    assert.equal(arguments.length, 2, 'log: 2-arity');\n    assert(_.isArray(tags), 'tags: array of strings');\n    assert(_.every(tags, _.isString), 'tags: array of strings');\n\n    entry = expandEntry(tags, entry);\n\n    if (this._entries.length >= this.options.entryLimit) {\n        this._entries.shift();\n        this._overflowed ++;\n        this._confirmed = (this._confirmed - 1) < 0 ? 0 : (this._confirmed - 1);\n    }\n\n    this._entries.push(entry);\n    this.changed();\n};\n\nfunction expandEntry(tags, entry) {\n    if (typeof entry === 'string') {\n        return makeEntryFromString(tags, entry);\n    } else if (entry instanceof Error) {\n        return makeEntryFromError(tags, entry);\n    } else if (_.isPlainObject(entry)) {\n        return makeEntry(tags, entry);\n    } else {\n        assert(false, 'invalid log entry ' + typeof entry);\n    }\n}\n\nfunction makeEntryFromString(tags, message) {\n    return {\n        tags: tags,\n        timestamp: now(),\n        message: message\n    };\n}\n\nfunction makeEntryFromError(tags, err) {\n    return {\n        tags: tags,\n        timestamp: now(),\n        err: err.toString(),\n        message: err.message || err.toString(),\n        stack: err.stack\n    };\n}\n\nfunction makeEntry(tags, entry) {\n    assert(_.isPlainObject(entry), 'invalid entry');\n    entry = _.clone(entry); // shallow\n    assert(!_.contains(entry, 'timestamp'), 'no cheating: timestamps');\n    assert(!_.contains(entry, 'timestamp'), 'no cheating: tags');\n    entry.tags = tags;\n    entry.timestamp = now();\n    return entry;\n}\n\nfunction now() {\n    return Date.now();\n}\n\nmodule.exports = LogStore;\n","'use strict';\n\nvar assert = require('assert'),\n    util = require('util'),\n    Store = require('./store'),\n    xhr = require('../xhr');\n\n// XMLHttpRequest back end\nfunction MOTDStoreBackEnd() {\n    assert(this instanceof MOTDStoreBackEnd, 'use new');\n    this.baseURL = '';\n}\n\nMOTDStoreBackEnd.prototype.fetch = function fetch(callback) {\n    var url = this.baseURL + '/motd',\n        options = {};\n\n    xhr('GET', url, options, function (err, res) {\n        if (err) {\n            console.error(err);\n            return callback(err);\n        }\n\n        if (res.statusCode !== 200) {\n            callback(new Error(url + ' -> ' + res.statusCode));\n        } else {\n            var result;\n            try {\n                result = JSON.parse(res.body);\n            } catch (err) {\n                callback(new Error('cannot parse response'));\n            }\n            callback(null, result);\n        }\n    });\n};\n\nfunction MOTDStore(options) {\n    assert(this instanceof MOTDStore, 'use new');\n    assert(!options || options instanceof Object);\n\n    Store.call(this, 'MOTD');\n\n    options = options || {};\n    this.backEnd = options.backEnd || new MOTDStoreBackEnd();\n\n    this.content = null;\n    this.fetching = false;\n    this.fetched = false;\n    this.err = null;\n}\n\nutil.inherits(MOTDStore, Store);\n\nMOTDStore.prototype.getState = function getState() {\n    return {\n        projects: this.projects, // TODO: clone it to prevent mutation\n        fetching: this.fetching,\n        fetched: this.fetched,\n        err: this.err,\n    };\n};\n\nMOTDStore.prototype.MOTD_FETCH = function fetch() {\n    var _this = this;\n\n    if (this.fetching) {\n        console.error('already fetching');\n        return;\n    }\n\n    this.fetching = true;\n    this.err = null;\n    this.changed();\n\n    this.backEnd.fetch(function onList(err, content) {\n        if (err) {\n            _this.err = err;\n        } else {\n            _this.content = content;\n            _this.fetched = true;\n        }\n\n        _this.fetching = false;\n        _this.changed();\n    });\n};\n\nmodule.exports = MOTDStore;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    // lzString = require('lz-string'),\n    util = require('util'),\n    getUuid = require('uuid'),\n    Store = require('./store'),\n    getClientCache = require('../client-cache'),\n    constants = require('../constants'),\n    debounce = require('../debounce'),\n    RequestQueue = require('../request-queue');\n\nvar PORTFOLIO_NEW_NAME = 'New Project';\n\nfunction PortfolioStore(options) {\n    assert(this instanceof PortfolioStore, 'use new');\n    assert(typeof options === 'object', 'need options object');\n    assert(typeof options.xhr === 'function', 'need options.xhr');\n\n    Store.call(this, 'PORTFOLIO');\n\n    this.requestQueue = new RequestQueue(options.xhr);\n    this.debouncedRead = debounce(_.bind(this.requestQueue.pushToReadQueue, this.requestQueue));\n    this.debouncedWrite = debounce(_.bind(this.requestQueue.pushToWriteQueue, this.requestQueue));\n\n    this.cache = undefined;\n    this.allProjects = [];\n    this.matchingProjects = [];\n    this.adjustingProjects = {};\n    this.errorProjects = {};\n    this.projectMap = {};\n    this.projectUuidsBeingEdited = {};\n    this.search = '';\n    this.fetching = false;\n    this.fetched = false;\n    this.err = null;\n\n    this.restoreCacheState();\n}\n\nutil.inherits(PortfolioStore, Store);\n\nPortfolioStore.prototype.getState = function getState() {\n    return {\n        search: this.search,\n        projects: this.matchingProjects, // TODO: clone it to prevent mutation\n        fetching: this.fetching,\n        fetched: this.fetched,\n        projectIdsInEditMode: this.projectUuidsBeingEdited\n    };\n};\n\nPortfolioStore.prototype.PORTFOLIO_SEARCH = function search(term) {\n    this.search = term;\n    this.updateMatches();\n    this.changed();\n};\n\nPortfolioStore.prototype.PORTFOLIO_ADD_NEW = function addNew() {\n    var requestId = getUuid(),\n        now = new Date().getTime();\n\n    // jshint camelcase: false\n    this.PORTFOLIO_ADJUST(requestId, null, null, {\n        _type: 'solution',\n        _timestamp: now,\n        _x_original_timestamp: now,\n        _x_project_name: this.search || PORTFOLIO_NEW_NAME,\n        synergy_model: {\n            hagroups: []\n        }\n    });\n};\n\nPortfolioStore.prototype.PORTFOLIO_SET_NAME = function setName(uuid, version, name) {\n    var requestId = uuid || getUuid();\n\n    this.PORTFOLIO_FETCH();\n        \n    // jshint camelcase: false\n    this.PORTFOLIO_ADJUST(requestId, uuid, version, {\n        _uuid: requestId,\n        _version: version,\n        _timestamp: new Date().getTime(),\n        _x_project_name: name\n    });\n};\n\nPortfolioStore.prototype.PORTFOLIO_ARCHIVE = function archive(uuid, version) {\n    var requestId = uuid || getUuid();\n\n    this.PORTFOLIO_ADJUST(requestId, uuid, version, {\n        _uuid: requestId,\n        _version: version,\n        _timestamp: new Date().getTime(),\n        _x_archived: true\n    });\n\n};\n\nPortfolioStore.prototype.PORTFOLIO_ADJUST = function adjust(requestId, uuid, version, adjustments) {\n    var _this = this,\n        clip,\n        oldClip;\n\n    console.log('PORTFOLIO_ADJUST', requestId, uuid, version, adjustments);\n    delete _this.errorProjects[requestId]; // clear last error\n\n    _this.adjustingProjects[requestId] = {\n        uuid: uuid,\n        version: version,\n        adjustments: adjustments\n    };\n    // _this.updateLocalStorageRequests();\n\n    if (_.has(this.projectMap, requestId)) {\n        clip = this.projectMap[requestId];\n        oldClip = _.clone(clip);\n        _.merge(clip, adjustments);\n    } else {\n        console.log('adjusting unknown clip', requestId, uuid, this.projectMap);\n    }\n\n    _this.updateMatches();\n    _this.changed();\n\n    this.adjust(requestId, uuid, version, adjustments, function onAdjust(err, result) {\n        if (err) {\n            _this.errorProjects[requestId] = err;\n            _.merge(clip, oldClip);\n        } else {\n            var existing = _.find(_this.allProjects, function findExisting(obj) {\n                return obj._uuid && obj._uuid === requestId;\n            });\n\n            if (existing) {\n                _.merge(existing, result);\n            } else {\n                // TCLIP changed the UUID on us\n                _this.allProjects = _.filter(_this.allProjects, function oldClip(clip) {\n                    return clip._uuid !== requestId;\n                });\n\n                _this.allProjects.push(result);\n            }\n\n            _this.updateLocalStorageProjects();\n            _this.updateProjectsBeingEdited(uuid, result);\n        }\n\n        delete _this.adjustingProjects[requestId];\n        // _this.updateLocalStorageRequests();\n\n        _this.updateMatches();\n        _this.changed();\n    });\n};\n\nPortfolioStore.prototype.PORTFOLIO_FETCH = function fetch() {\n    var _this = this;\n\n    if (this.fetching) {\n        console.error('already fetching');\n        return;\n    }\n\n    this.fetching = true;\n    this.err = null;\n    this.changed();\n\n    this.list(function onList(err, index) {\n        if (err) {\n            _this.err = err;\n        } else {\n            _this.allProjects = index;\n/*\n            // Don't lose any local projects that have not been saved yet\n            var workingProjects = _.filter(_this.allProjects, function clientProjects(project) {\n                return !_.some(index, function serverProjects(clip) {\n                    return clip._uuid === project._uuid;\n                });\n            }) || [];\n\n            _this.allProjects = workingProjects.concat(index);\n\n            // Validate pending adjustments\n            var adjustingKeys = _.keys(_this.adjustingProjects) || [];\n\n            _.forEach(adjustingKeys, function(key) {\n                if (!_.some(_this.allProjects, function(project) {\n                        return key === project._uuid;\n                    })) {\n                    // Remove any operations for UUID that is no longer valid\n                    delete _this.adjustingProjects[key];\n                } else if (_.some(_this.allProjects, function(project) {\n                        return _this.adjustingProjects[key].version < project._version;\n                    })) {\n                    // Remove any operations for versions that have already been replaced\n                    delete _this.adjustingProjects[key];\n                }\n            });\n\n            // Restart any outstanding server actions\n            _.forOwn(_this.adjustingProjects, function(value, key) {\n                console.log('Retry pending adjustment', key, value);\n                _this.PORTFOLIO_ADJUST(key, value.uuid, value.version, value.adjustments);\n            });\n*/\n            _this.updateMatches();\n            _this.fetched = true;\n            _this.updateLocalStorageProjects();\n        }\n\n        // TODO: set state variable so UI can enable writes after it is safe to do so\n\n        _this.fetching = false;\n        _this.changed();\n    });\n};\n\nfunction nameMatch(clip, search) {\n    // jshint camelcase: false\n    return (clip._x_project_name || '').toLowerCase().indexOf(search) >= 0;\n}\n\nfunction uuidMatch(clip, search) {\n    // Do not allow partial search of UUIDs as this will return 'false matches' for other numeric tags.\n    // return clip._uuid.toLowerCase().indexOf(search) >= 0;\n    return clip._uuid.toLowerCase() === search;\n}\n\nfunction tagMatch(clip, search) {\n    // jshint camelcase: false\n    var tags = clip._x_autotags || [];\n    tags = tags.concat(clip._x_usertags || []);\n    for (var idx in tags) {\n        if (tags[idx].toLowerCase().indexOf(search) >= 0) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar CHECKS = [nameMatch, uuidMatch, tagMatch];\n\nPortfolioStore.prototype.updateMatches = function updateMatches() {\n    var search = this.search.toLowerCase(),\n        _this = this,\n        map = this.projectMap = {};\n\n    this.matchingProjects = _.sortBy(_.filter(_.map(this.allProjects, function(clip) {\n        // jshint camelcase: false\n        map[clip._uuid] = clip; // original, in allProjects\n        clip = _.clone(clip);\n        clip._X_STATE = {\n            adjusting: _.has(_this.adjustingProjects, clip._uuid),\n            err: _.has(_this.errorProjects, clip._uuid),\n        };\n\n        for (var idx in CHECKS) {\n            var check = CHECKS[idx];\n            if (check(clip, search)) {\n                return clip;\n            }\n        }\n\n        return null;\n    })), '_timestamp').reverse();\n};\n\n// Keep as many of the the most recent 20 projects cached as we can\n// Only store what we need to show the project list entry\nPortfolioStore.prototype.updateLocalStorageProjects = function updateLocalStorageProjects() {\n    if (this.cache) {\n\n        var filteredClips = _.filter(this.allProjects, function archivedFilter(clip) {\n            return (clip && clip._x_archived) ? false : true;\n        });\n\n        var projects = _.first(_.sortBy(_.map(filteredClips, function(clip) {\n            // jshint camelcase: false\n            return {\n                _timestamp: clip._timestamp,\n                _uuid: clip._uuid,\n                _version: clip._version,\n                _x_autodesc: clip._x_autodesc,\n                _x_autotags: clip._x_autotags,\n                _x_usertags: clip._x_usertags,\n                _x_project_name: clip._x_project_name,\n                _x_original_timestamp: clip._x_original_timestamp\n            };\n        }), '_timestamp').reverse(), 20);\n\n        for (var idx = 0; idx < 20; idx++) {\n            this.cache.remove('synergy.project.' + idx, _.noop);\n        }\n\n        _.forEach(projects, function storeProject(project, idx) {\n            this.cache.set('synergy.project.' + idx, project, _.noop);\n        }, this);\n    }\n};\n\n\nPortfolioStore.prototype.updateProjectsBeingEdited = function updateProjectsBeingEdited(uuid, result) {\n    var isNewProject = (uuid === null);\n\n    if (isNewProject) {\n        this.projectUuidsBeingEdited[result._uuid] = true;\n    } else {\n        delete this.projectUuidsBeingEdited[uuid];\n    }\n};\n\n// Keep pending adjustments cached so we can continue processing in a new session\n// PortfolioStore.prototype.updateLocalStorageRequests = function updateLocalStorageRequests() {\n//     if (this.cache) {\n//         var startTime = new Date().getTime();\n//         this.cache.set('synergy.project.requests', lzString.compressToBase64(JSON.stringify(this.adjustingProjects)), _.noop);\n//         var endTime = new Date().getTime();\n//         console.log('Time to store pending requests:', endTime - startTime);\n//     }\n// };\n\nfunction pushProjects(err, value, projects) {\n    if (err) {\n        console.error(err);\n    } else if (value) {\n        projects.push(value);\n    }\n}\n\n// Initialize the cache object and pull in any values saved in LocalStorage\nPortfolioStore.prototype.restoreCacheState = function restoreCacheState() {\n    var _this = this;\n\n    getClientCache(function(err, engine) {\n        if (err) {\n            console.error(err);\n        } else {\n            _this.cache = engine;\n        }\n    });\n\n    if (this.cache) {\n        for (var idx = 0; idx < 20; idx++) {\n            this.cache.get(\n                'synergy.project.' + idx,\n                _.partialRight(pushProjects, this.allProjects)\n            );\n        }\n\n        // try {\n        //     this.cache.get('synergy.project.requests', function cacheRequests(err, value) {\n        //         if (err) {\n        //             console.error(err);\n        //         } else if (value) {\n        //             _this.adjustingProjects = JSON.parse(lzString.decompressFromBase64(value));\n        //         }\n        //     });\n        // } catch (err) {\n        //     console.error('cannot parse pending adjustments in LocalStorage');\n        // }\n\n        this.updateMatches();\n    }\n};\n\nPortfolioStore.prototype.list = function list(callback) {\n    var basePath = constants.PROJECT_LIST_PATH,\n        options = {};\n\n    this.debouncedRead(basePath, {\n        method: 'GET',\n        basePath: basePath,\n        options: options\n    }, callback);\n};\n\nPortfolioStore.prototype.adjust = function adjust(requestId, uuid, version, adjustments, callback) {\n    assert(typeof requestId === 'string', 'adjust: requestId string');\n    assert(typeof uuid === 'string' || uuid === null, 'adjust: uuid string or null');\n    assert(typeof version === 'number' || version === null, 'adjust: version number or null');\n    assert(typeof adjustments === 'object' && !(adjustments instanceof Array), 'adjust: adjustments object');\n\n    var basePath = constants.PROJECT_ADJUST_PATH,\n        options = {\n            payload: adjustments\n        };\n\n    this.debouncedWrite(requestId, {\n        method: 'POST',\n        basePath: basePath,\n        options: options\n    }, callback);\n};\n\nmodule.exports = PortfolioStore;\n","'use strict';\n\nvar assert = require('assert'),\n    async = require('async'),\n    lzString = require('lz-string'),\n    util = require('util'),\n    Store = require('./store'),\n    getClientCache = require('../client-cache'),\n    constants = require('../constants'),\n    ProductInfo = require('../prodinfo');\n\nvar TAG = 'prod-info';\n\nfunction ProductInfoStoreBackEnd(options) {\n    assert(this instanceof ProductInfoStoreBackEnd, 'use new');\n    assert.equal(typeof (this.log = options.log), 'function', 'options.log');\n    assert.equal(typeof (this.xhr = options.xhr), 'function', 'options.xhr');\n}\n\nProductInfoStoreBackEnd.prototype.getRawProdInfo = function getRawProdInfo(callback) {\n    var log = this.log,\n        xhr = this.xhr;\n\n    return async.auto({\n        cache: [ getCacheEngine ],\n        cached: [ 'cache', getCachedResult ],\n        served: [ 'cached', getServedResult ],\n        winner: [ 'cached', 'served', pickWinner ],\n        recached: [ 'cache', 'served', updateCache ],\n    }, function (err, results) {\n        if (err) {\n            log([ TAG, TAG + '-fatal' ], err);\n            return callback(err);\n        } else {\n            return callback(null, results.winner);\n        }\n    });\n\n    // ----- hoisted functions only past here:\n\n    function getCacheEngine(callback /*, results */) {\n        return getClientCache(withCacheEngine);\n\n        function withCacheEngine(err, engine) {\n            log([ TAG, 'client-cache' ], { available: !!!err });\n            callback(null, err ? null : engine);\n        }\n    }\n\n    function getCachedResult(callback, results) {\n        if (!results.cache) {\n            return setImmediate(callback, null, null);\n        }\n\n        log([ TAG, 'client-cache-get' ], 'loading...');\n        return results.cache.get('synergy.prodinfo', withCacheContents);\n\n        function withCacheContents(err, result) {\n            if (err) {\n                log([ 'client-cache-pre-miss' ], err);\n                return callback(null, null);\n            } else {\n                log([ 'client-cache-pre-hit' ], 'loaded');\n                return callback(null, result);\n            }\n        }\n    }\n\n    function getServedResult(callback, results) {\n        var hasCache = results.cache && results.cached,\n            previous = hasCache ? results.cached.digest : '',\n            path = constants.PLATFORM_OPTIONS_GET_PATH;\n\n        if (previous) {\n            path = path + '/' + previous;\n        }\n\n        log([ 'client-fetch' ], { previous: previous });\n        return xhr('GET', path, {}, function (err, res) {\n            log([ 'client-fetch', 'response' ], {\n                err: err,\n                body: typeof res\n            });\n            if (err) {\n                return callback(err);\n            }\n\n            var result;\n            if (typeof res.body === 'string') {\n                try {\n                    result = JSON.parse(res.body);\n                } catch (parseErr) {\n                    return callback(parseErr);\n                }\n                return callback(null, result);\n            } else if (typeof res.body === 'object') {\n                return callback(null, res.body);\n            } else {\n                return callback(new Error('server response'));\n            }\n        });\n    }\n\n    function pickWinner(callback, results) {\n        var isPreHit = results.cached && typeof results.cached === 'object',\n            isHit = isPreHit && !results.served.options,\n            tag = 'client-cache-' + (isHit ? 'hit' : 'miss'),\n            winner = isHit ? results.cached.options : results.served.options;\n\n        log([ TAG, tag ], {\n            length: winner.length,\n            // starting: winner.slice(0, 32)\n        });\n        callback(null, winner);\n    }\n\n    function updateCache(callback, results) {\n        if (!results.cache || !results.served.options) {\n            return setImmediate(callback, null, null);\n        }\n\n        log([ TAG, 'client-cache-set' ], 'saving new product info...');\n        results.cache.set('synergy.prodinfo', results.served, callback);\n    }\n};\n\nfunction ProductInfoStore(options) {\n    assert(this instanceof ProductInfoStore, 'use new');\n    assert.equal(typeof options, 'object', 'options object');\n    assert.equal(typeof options.xhr, 'function', 'options.xhr');\n    assert.equal(typeof options.log, 'function', 'options.log');\n\n    Store.call(this, 'PRODUCTINFO');\n\n    this.backEnd = options.backEnd || new ProductInfoStoreBackEnd(options);\n\n    this.log = options.log;\n    this.fetching = false;\n    this.fetched = false;\n    this.err = null;\n    this.platformConfigData = null;\n}\n\nutil.inherits(ProductInfoStore, Store);\n\nProductInfoStore.prototype.getState = function getState() {\n    return {\n        productInfo: this._productInfo,\n        fetching: this.fetching,\n        fetched: this.fetched,\n        err: this.err,\n    };\n};\n\nProductInfoStore.prototype.PRODUCTINFO_FETCH = function fetchConfig() {\n    var _this = this,\n        log = this.log;\n\n    if (_this.fetching) {\n        console.error('already fetching');\n        return;\n    }\n\n    // We will need a better distinction between the server is 'fetching' and 'you should block the page'\n    _this.fetching = _this.fetched ? false : true;\n    _this.err = null;\n    _this.changed();\n\n    _this.backEnd.getRawProdInfo(function onFetch(err, result) {\n        var previous = Date.now();\n\n        function timing() {\n            var now = Date.now(),\n                elapsed = now - previous;\n            previous = now;\n            return {\n                elapsed: elapsed\n            };\n        }\n\n        if (err) {\n            _this.err = err;\n        } else {\n            try {\n                log([ TAG, TAG + '-extract'], 'extracting...');\n                var extracted = lzString.decompressFromBase64(result);\n                log([ TAG, TAG + '-parse'], timing());\n                var parsed = JSON.parse(extracted);\n                log([ TAG, TAG + '-inhale'], timing());\n                _this._productInfo = new ProductInfo(parsed);\n                _this._productInfo.inhale(wrap);\n            } catch (cookErr1) {\n                wrap(cookErr1);\n            }\n        }\n\n        function wrap(err) {\n            if (err) {\n                log([ TAG, TAG + '-fatal' ], err);\n                _this.err = err;\n            } else {\n                log([ TAG, TAG + '-ready'], timing());\n                _this.fetched = true;\n            }\n            _this.fetching = false;\n            _this.changed();\n        }\n    });\n};\n\nmodule.exports = ProductInfoStore;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    util = require('util'),\n    Store = require('./store'),\n    reduceClip = require('../clip/reduce'),\n    constants = require('../constants'),\n    debounce = require('../debounce'),\n    Builder = require('../model/builder'),\n    ModelMap = require('../model/map'),\n    RequestQueue = require('../request-queue');\n\nfunction ProjectStoreBackEnd() {\n    assert(this instanceof ProjectStoreBackEnd, 'use new');\n    this.baseURL = '';\n}\n\nProjectStoreBackEnd.prototype.load = function load(uuid, version, callback) {\n    var base = constants.PROJECT_LOAD_PATH,\n        parts = _.filter([ base, uuid, version ]), // discards undefined\n        url = this.baseURL + parts.join('/'),\n        options = {};\n\n    this.debouncedRead(url, { method: 'GET', basePath: url, options: options }, callback);\n};\n\nfunction ProjectStore(options) {\n    assert(this instanceof ProjectStore, 'use new');\n    assert(_.isPlainObject(options));\n    assert(options.productInfo);\n    assert(typeof options.xhr === 'function', 'need options.xhr');\n\n    Store.call(this, 'PROJECT');\n\n    this.backEnd = options.backEnd || new ProjectStoreBackEnd();\n    this.productInfoStore = options.productInfo;\n\n    this.requestQueue = new RequestQueue(options.xhr);\n    this.backEnd.debouncedRead = debounce(_.bind(this.requestQueue.pushToReadQueue, this.requestQueue));\n    this.debouncedWrite = debounce(_.bind(this.requestQueue.pushToWriteQueue, this.requestQueue));\n\n    this._unload(); // sets properties\n}\n\nutil.inherits(ProjectStore, Store);\n\nProjectStore.prototype.getState = function getState() {\n    return {\n        uuid: this.clip ? this.clip._uuid || '' : '',\n        name: this.clip ? this.clip._x_project_name || '' : '',\n        map: this.map.bind(this),\n        actions: this.actions,\n        err: this.err,\n        fetching: this.fetching,\n        fetched: this.fetched,\n        queueStatus: this.requestQueue.queueStatus()\n    };\n};\n\n/**\n * Get a mapped summary of the raw clip. Cached; reset on change.\n */\nProjectStore.prototype.map = function map() {\n    if (this.clip) {\n        if (!this._modelMap) {\n            var productInfo = this.productInfoStore.getState().productInfo;\n\n            this._modelMap = new ModelMap(productInfo, this.clip);\n            this._builder = new Builder(productInfo, this.clip);\n        }\n        return this._modelMap;\n    } else {\n        return null;\n    }\n};\n\nProjectStore.prototype._unload = function _unload() {\n    this.clip = null;\n    this.actions = null;\n    this.err = null;\n    this.fetched = false;\n    this.fetching = false;\n};\n\nProjectStore.prototype._clearCaches = function _clearCaches() {\n    delete this._modelMap;\n};\n\nProjectStore.prototype._save = function _save() {\n    var clipToSave = reduceClip(this.clip);\n\n    var basePath = constants.PROJECT_REPLACE_PATH,\n        options = { payload: clipToSave },\n        _this = this;\n\n    this.debouncedWrite(this.clip._uuid, { method: 'POST', basePath: basePath, options: options }, function(err, result) {\n        if(!err && result) {\n            _this.clip._uuid = result._uuid || _this.clip._uuid;\n            _this.clip._version = result._version || _this.clip._version;\n            _this.clip._timestamp = (result._timestamp && result._timestamp > _this.clip._timestamp) ? result._timestamp : _this.clip._timestamp;\n            _this.changed();\n        }\n    });\n\n    this.changed();\n};\n\nProjectStore.prototype.PROJECT_UNLOAD = function unload(uuid) {\n    if (this.clip && (this.clip._uuid === uuid)) {\n        this._unload();\n        this.changed();\n    }\n};\n\nProjectStore.prototype.PROJECT_LOAD = function load(uuid, version) {\n    var _this = this;\n\n    if (_this.fetching) {\n        console.error('already fetching');\n        return;\n    }\n\n    _this._unload();\n    _this.fetching = true;\n    _this.changed();\n\n    this.backEnd.load(uuid, version, function onLoad(err, clip) {\n        if (err) {\n            _this.err = err;\n        } else {\n            _this.clip = clip;\n            _this.fetched = true;\n        }\n\n        _this.fetching = false;\n        _this.changed();\n    });\n};\n\nProjectStore.prototype.PROJECT_ADD_STANDALONE = function addStandalone(spec, callback) {\n    var hagroup = this._builder.addSystem(spec);\n\n    this._save();\n    callback(null, hagroup);\n};\n\nProjectStore.prototype.PROJECT_ADD_CLUSTER = function addCluster(spec, callback) {\n    var hagroup = this._builder.addSystemToCluster(spec);\n\n    this._save();\n    callback(null, hagroup);\n};\n\nProjectStore.prototype.PROJECT_EXPAND_CLUSTER = function expandCluster(clusterId, spec) {\n    this._builder.addSystemToCluster(spec, clusterId);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_CHANGE_SYSTEMS = function changeSystems(specs) {\n    this._builder.changeSystems(specs);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_REMOVE_SYSTEM = function removeStandalone(systemId) {\n    this._builder.removeSystem(systemId);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_NAME_CLUSTER = function nameCluster(clusterId, name) {\n    this._builder.nameCluster(clusterId, name);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_NAME_CONTROLLERS = function nameControllers(systemId, name1, name2) {\n    this._builder.nameSystem(systemId, name1, name2);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_DELETE_SHELF = function deleteShelf(systemId, shelf) {\n    this._builder.deleteShelf(systemId, shelf);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_DELETE_SHELVES = function deleteShelves(systemId, shelf) {\n    this._builder.deleteAllShelves(systemId, shelf);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_REBUILD_AUTO_AGGREGATES = function rebuildAutoAggregates(systemId) {\n    this._builder.rebuildAutoAggregates(systemId);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_ADD_MANUAL_AGGREGATE = function addManualAggregate(systemId, newAggregate, callbackWithNewAggregate) {\n    this._builder.addManualAggregate(systemId, newAggregate);\n    callbackWithNewAggregate(newAggregate);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_DELETE_AGGREGATE = function deleteAggregate(systemId, aggregate) {\n    this._builder.deleteAggregate(systemId, aggregate);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_DELETE_ALL_AGGREGATES = function deleteAllAggregates(systemId) {\n    this._builder.deleteAllAggregates(systemId);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_SET_SYSTEM_POLICY = function setSystemPolicy(systemId, scope, policy) {\n    this._builder.setSystemPolicy(systemId, scope, policy);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_SET_CLUSTER_POLICY = function setClusterPolicy(clusterId, scope, policy) {\n    this._builder.setClusterPolicy(clusterId, scope, policy);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_FP_ADD_POOL = function addFP(controllerID, deviceSpec, raidType, deviceCount) {\n    this._builder.addStoragePool(controllerID, deviceSpec, raidType, deviceCount, true);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_FP_RESIZE_POOL = function claimAU(storagePoolID, newDeviceCount) {\n    this._builder.resizeStoragePool(storagePoolID, newDeviceCount);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_FP_CLAIM = function claimAU(aggrId, raidType, poolID, slice) {\n    this._builder.claimAllocationUnit(aggrId, raidType, poolID, slice);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_FP_RELEASE = function claimAU(aggrId, poolID, slice) {\n    this._builder.releaseAllocationUnit(aggrId, poolID, slice);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_FP_DEL_POOL = function addFP(storagePoolID) {\n    this._builder.deleteStoragePool(storagePoolID);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_FP_ADD_AGGR_RG = function addFP(aggrId, raidType, deviceSpec, deviceCount) {\n    this._builder.addFlashPoolRaidGroupToAggregate(aggrId, raidType, deviceSpec, deviceCount);\n    this._save();\n};\n\nProjectStore.prototype.PROJECT_FP_DEL_AGGR_RG = function removeFPRG(raidId) {\n    this._builder.deleteFlashPoolRaidGroupFromAggregate(raidId);\n    this._save();\n};\n\n// Guard.changingVersion will tell you if the change invalidates any limits.\nProjectStore.prototype.PROJECT_SET_CLUSTER_VERSION = function setClusterVersion(clusterId, version) {\n    this._builder.setClusterVersion(clusterId, version);\n    this._save();\n};\n\n// Guard.changingVersion will tell you if the change invalidates any limits.\nProjectStore.prototype.PROJECT_SET_SYSTEM_VERSION = function setSystemVersion(systemId, version) {\n    this._builder.setSystemVersion(systemId, version);\n    this._save();\n};\n\nmodule.exports = ProjectStore;\n","'use strict';\n\nvar assert = require('assert'),\n    events = require('events'),\n    SecurityGuard; // defined below\n\nvar CHANGE_EVENT_NAME = 'change';\n\nfunction shifted(args) {\n    var result = [];\n    for (var idx = 1; idx < args.length; idx ++) {\n        result.push(args[idx]);\n    }\n    return result;\n}\n\n/**\n * Flux-style store.\n * Doesn't bother being a singleton. Instead: create only one.\n * Doesn't bother proxying EventEmitter. Use `store.on('change', fn)`.\n * Could be used at EITHER END; handle persistence and comms separately!\n */\n\nfunction Store(prefix) {\n    assert(this instanceof Store, 'use new');\n    assert(typeof(prefix) === 'string' && prefix.match(/[A-Z]+/));\n\n    // We preserve the guard so we don't create more than one.\n    // We set it null here so we can detect a subclass failing to call\n    // our constructor.\n    this._guard = null;\n\n    this._prefix = prefix;\n    this._emitter = new events.EventEmitter();\n    this.name = prefix.toLowerCase();\n}\n\n/**\n * Let subscribers know we changed via: `this.changed();`\n */\n\nStore.prototype.changed = function changed() {\n    this._clearCaches();\n    this._emitter.emit(CHANGE_EVENT_NAME);\n};\n\n/**\n * Subscribe to change notifications.\n */\n\nStore.prototype.watch = function watch(fn) {\n    this._emitter.on(CHANGE_EVENT_NAME, fn);\n};\n\n/**\n * Unsubscribe from change notifications.\n */\n\nStore.prototype.unwatch = function unwatch(fn) {\n    this._emitter.removeListener(CHANGE_EVENT_NAME, fn);\n};\n\n/**\n * Get the state to be rendered. MUST be over-ridden by the sublass.\n */\n\nStore.prototype.getState = function getState() {\n    throw new Error('subclass forgot to override getState');\n};\n\n/**\n * Clean the caches. Virtual. Called by changed().\n */\n\nStore.prototype._clearCaches = function _clearCaches() {\n    // noop\n};\n\n/**\n * Get the security guard, which presents our public API only:\n *\n * - `store.on('change', function () { var state = store.getState(); });`\n * - `store.act('EVENT_NAME', arg1, arg2, argN)`\n */\n\nStore.prototype.getGuard = function getGuard() {\n    assert(this._guard !== undefined, 'Store constructor not called');\n\n    if (this._guard === null) {\n        this._guard = new SecurityGuard(this);\n    }\n\n    return this._guard;\n};\n\n/**\n * Act on an event.\n *\n * - If `id` does not match our prefix, returns `false`.\n * - If `id` matches our prefix but no method is found, crashes.\n * - If `id` matches our prefix and a method is found:\n *   - If the argument length does not match, crashes.\n *   - Else, calls it and returns `true`.\n */\n\nStore.prototype.act = function act(id) {\n    // The identifier MUST be a string:\n    assert(typeof(id) === 'string', 'need action ID');\n\n    // Actions not matching our prefix will be ignored, returning false:\n    if (id.indexOf(this._prefix + '_') < 0) {\n        return false;\n    }\n\n    // Find our action method:\n    var method = this[id];\n    assert(typeof(method) === 'function', 'invalid action: ' + id);\n\n    // The arguments length MUST match the method's argument length.\n    // Modifying an event? Don't. Add a new one. That preserves our\n    // ability to replay old event lists.\n    assert(arguments.length === ( method.length + 1 ), 'invalid arg count');\n\n    // Having survived the checks:\n    method.apply(this, shifted(arguments));\n\n    // Return true if we survived.\n    return true;\n};\n\n/**\n * Prevents improper interaction with a Store by exposing only its public API.\n */\n\nSecurityGuard = function SecurityGuard(store) {\n    assert(this instanceof SecurityGuard, 'use new');\n    assert(store instanceof Store, 'need Store to guard');\n\n    this.act = store.act.bind(store);\n    this.getState = store.getState.bind(store);\n    this.watch = store.watch.bind(store);\n    this.unwatch = store.unwatch.bind(store);\n    this.name = store.name;\n};\n\nSecurityGuard.prototype.getGuard = function getGuard() {\n    return this;\n};\n\nmodule.exports = Store;\n","'use strict';\n\nvar assert = require('assert'),\n    _ = require('lodash'),\n    util = require('util'),\n    Store = require('./store'),\n    getClientCache = require('../client-cache');\n\nvar DEFAULTS = {\n        collapseCapacity: false,\n        collapseClusters: false,\n        currentSystemsView: false,\n        useBase10Yields: false,\n        mainsVoltage: 'v_200'\n    },\n    KEYS = _.keys(DEFAULTS),\n    CACHE_KEY = 'synergy.preferences.user';\n\nfunction UserPreferencesStore(options) {\n    assert(this instanceof UserPreferencesStore, 'use new');\n    assert.equal(typeof (this.log = options.log), 'function', 'options.log');\n\n    Store.call(this, 'USER_PREFERENCES');\n\n    this.cache = undefined;\n    this.prefs = _.clone(DEFAULTS);\n\n    var _this = this;\n    getClientCache(function getCache(err, engine) {\n        if (err) {\n            console.error(err);\n        } else {\n            _this.cache = engine;\n            _this.restoreCacheState();\n        }\n    });\n}\n\nutil.inherits(UserPreferencesStore, Store);\n\nUserPreferencesStore.prototype.getState = function getState() {\n    var state = _.defaults({}, this.prefs, DEFAULTS);\n    return state;\n};\n\nUserPreferencesStore.prototype.USER_PREFERENCES_ADJUST = function adjust(adjustments) {\n    var unknown = _.keys(_.omit(adjustments, KEYS));\n    if (_.keys(unknown).length) {\n        this.log.warn('ignoring unknown user preference adjustments', unknown);\n    }\n\n    _.merge(this.prefs, _.pick(adjustments, KEYS));\n    this.updateLocalStoragePrefs();\n    this.changed();\n};\n\nUserPreferencesStore.prototype.restoreCacheState = function restoreCacheState() {\n    if (this.cache) {\n        var _this = this;\n        this.log([ 'prefs', 'loading' ], '...');\n        this.cache.get(CACHE_KEY, function userPrefs(err, result) {\n            if (err) {\n                _this.log([ 'prefs', 'load-failed' ], err);\n            } else {\n                _this.log([ 'prefs', 'loaded' ], { prefs: result });\n                _this.prefs = result || {};\n            }\n        });\n    }\n};\n\nUserPreferencesStore.prototype.updateLocalStoragePrefs = function updateLocalStoragePrefs() {\n    if (this.cache) {\n        var _this = this;\n        this.log([ 'prefs', 'saving' ], '...');\n        this.cache.set(CACHE_KEY, this.prefs, function (err) {\n            if (err) {\n                _this.log([ 'prefs', 'save-failed' ], err);\n            } else {\n                _this.log([ 'prefs', 'saved' ], '...');\n            }\n        });\n    }\n};\n\nmodule.exports = UserPreferencesStore;\n","'use strict';\n\nvar assert = require('assert'),\n    util = require('util'),\n    Store = require('./store'),\n    xhr = require('../xhr');\n\n// XMLHttpRequest back end\nfunction UserSessionStoreBackEnd() {\n    assert(this instanceof UserSessionStoreBackEnd, 'use new');\n    this.baseURL = '';\n}\n\nUserSessionStoreBackEnd.prototype.fetch = function fetch(callback) {\n    var url = this.baseURL + '/whoami',\n        options = {};\n\n    xhr('GET', url, options, function (err, res) {\n        if (err) {\n            console.error(err);\n            return callback(err);\n        }\n\n        if (res.statusCode !== 200) {\n            callback(new Error(url + ' -> ' + res.statusCode));\n        } else {\n            var result;\n            try {\n                result = JSON.parse(res.body);\n            } catch (err) {\n                callback(new Error('cannot parse response'));\n            }\n\n            callback(null, result);\n        }\n    });\n};\n\nfunction UserSessionStore(options) {\n    assert(this instanceof UserSessionStore, 'use new');\n    assert(!options || options instanceof Object);\n\n    Store.call(this, 'USER_SESSION');\n\n    options = options || {};\n    this.backEnd = options.backEnd || new UserSessionStoreBackEnd();\n\n    this.content = null;\n    this.fetching = false;\n    this.fetched = false;\n    this.err = null;\n\n    this.firstName = ''; // For QA/Etc in near term\n    this.sessionExpirationUTC = 253402232400000;  // Time in milliseconds.\n    this.authenticatedServerTimeUTC = new Date().getTime(); // Replace with server time. Using this for now to provide delta of 0.\n    this.authenticatedClientTimeUTC = new Date().getTime();\n\n    this.currentClientTimeUTC = new Date().getTime();\n\n    this.timestampDelta = this.authenticatedClientTimeUTC - this.authenticatedServerTimeUTC;\n}\n\nutil.inherits(UserSessionStore, Store);\n\nUserSessionStore.prototype.getState = function getState() {\n    if (this.content) {\n        this.firstName = this.content.firstName || this.firstName;\n        this.sessionExpirationUTC = this.content.expires;\n        this.authenticatedClientTimeUTC = this.content.clientTime;\n        this.authenticatedServerTimeUTC = this.content.serverTime;\n    }\n\n    this.currentClientTimeUTC = new Date().getTime();\n    this.timestampDelta = 0; // Hardcode this for now, since we're not really using server expiration time here, but rather client side.\n\n    return {\n        firstName: this.firstName,\n        expires: this.sessionExpirationUTC,\n        now: (this.currentClientTimeUTC - this.timestampDelta),\n        isExpired: this.isExpired()\n    };\n};\n\nUserSessionStore.prototype.isExpired = function isExpired() {\n    return (this.currentClientTimeUTC - this.timestampDelta) > this.sessionExpirationUTC;\n};\n\nUserSessionStore.prototype.calculateTimestampDelta = function calculateTimestampDelta(authenticatedClientTimeUTC, authenticatedServerTimeUTC) {\n    return (authenticatedClientTimeUTC - authenticatedServerTimeUTC);\n};\n\nUserSessionStore.prototype.USER_SESSION_FETCH = function fetch() {\n    var _this = this;\n\n    if (this.fetching) {\n        console.error('already fetching');\n        return;\n    }\n\n    this.fetching = true;\n    this.err = null;\n    this.changed();\n\n    this.backEnd.fetch(function onList(err, content) {\n        if (err) {\n            _this.err = err;\n        } else {\n            _this.content = content;\n            _this.timestampDelta = _this.calculateTimestampDelta(content.clientTime, content.serverTime);\n            _this.fetched = true;\n        }\n\n        _this.fetching = false;\n        _this.changed();\n    });\n};\n\nmodule.exports = UserSessionStore;\n","'use strict';\n\nvar _ = require('lodash'),\n    assert = require('assert'),\n    util = require('util');\n\n\n/*\n    Shape:\n        {\n            value: <decimal>,  // How many of this unit\n            type: <string>,  // The short type name (ex. GB)\n            name: <string>,  // The long type name (ex. Gigabyte)\n            value_gb: <decimal>,  // The value in GB of the unit, this will always be here. It makes it easy to compare/sort etc\n            unit: {\n                base: <int>,  // The base of the unit (2 or 10)\n                pow: <int>  // The power to raise the base to, gets multiplied times value in conversion (ex. 20, 30, etc)\n            }\n        }\n\n    Usage:\n        1) Create a new Unit\n        var Unit = require('<path>/units.js');\n        var FiveGigabyte = new Unit(5, 'GB');\n        -> NOTE: The default unit is GB, you can create it like \"new Unit(5)\"\n\n        2) Get a friendly-printed unit\n        var FiveGigabyte = new Unit(5, 'GB');\n        -> FiveGigabyte.friendly() -> \"5 GB\"\n\n        You can use the following optional args (toPlaces, useName, optFormatString)\n        -> FiveGigabyte.friendly(2, true) -> \"5.00 Gigabytes\"\n\n        optFormatString allows you to push the same type of string that util.format uses with\n            the first %d as the value and %s as the unit name\n        -> FiveGigabyte.friendly(2, true, \"We have %d of %s\") -> \"We have 5.00 of Gigabytes\"\n\n        The plural of the unit type is handled automatically when using full name.\n\n        3) Convert a unit\n        var FiveGigabyte = new Unit(5, 'GB');\n        var InGibiBytes = FiveGigabyte.to('GiB');\n\n        You can also chain..\n        var ConversionChain = FiveGigabyte.to('GiB').to('TiB').to('KB');\n\n    ToDo:\n        Case insensitive unit type matching\n        Add / Subtract / Divide / Multiply\n        Compare\n        Tests\n*/\n\nfunction Unit(val, unitType) {\n    if (!(this instanceof Unit)) {\n        return new Unit(val);\n    }\n\n    if (!unitType) {\n        unitType = this.DEFAULTS.type;\n    }\n\n    if (val !== 0 && !val) {\n        val = this.DEFAULTS.modifier;\n    }\n\n    assert(val >= 0, 'Unit value cannot be negative');\n\n    var destUnit = this._findUnitType(unitType);\n\n    _.merge(this, this._packageUnit(destUnit.type, destUnit.name, val, destUnit.unit.base, destUnit.unit.pow));\n    _.merge(this, { value_gb: this._inGb() });\n}\n\nUnit.prototype.to = function(unitType) {\n    if (!_.isObject(unitType) && _.isString(unitType)) {\n        // Figure out what it is and go from string -> type object\n        unitType = this._findUnitType(unitType);\n    }\n\n    var conversion = this._convert(unitType);\n    return new Unit(conversion.value, unitType);\n};\n\n/*\n    NOTICE: For arithmetic operations, we want to keep the type the same as the _original_ object\n*/\n\nUnit.prototype.add = function(unitToAdd) {\n    this._assertIsUnitObject(unitToAdd);\n\n    var newVal = this.value_gb + unitToAdd.value_gb;\n\n    return this._packAndReturnArithmeticResult(newVal);\n};\n\nUnit.prototype.subtract = function(unitToSubtract) {\n    this._assertIsUnitObject(unitToSubtract);\n\n    var newVal = this.value_gb - unitToSubtract.value_gb;\n\n    return this._packAndReturnArithmeticResult(newVal);\n};\n\nUnit.prototype.mult = function(multiplier) {\n    var newVal = this.value_gb * multiplier;\n\n    return this._packAndReturnArithmeticResult(newVal);\n};\n\nUnit.prototype.divide = function(divider) {\n    var newVal = this.value_gb / divider;\n\n    return this._packAndReturnArithmeticResult(newVal);\n};\n\nUnit.prototype.makeHappyFriendly = function(toPlaces, useName, optFormatString) {\n    var _this = this;\n\n    /*\n        What does this do?\n            If > 1000, it converts up to the next power until < 1000 and returns friendly string\n    */\n    var finalUnit = null,\n        likeUnits = _.where(this.TYPES, function(type) {\n            return type.unit.base === _this.unit.base;\n        });\n\n    _.forEach(likeUnits, function(likeUnit) {\n        var newUnit = _this.to(likeUnit.type);\n\n        if (newUnit.value < 1000 && !finalUnit) {\n            finalUnit = newUnit;\n        }\n    });\n\n    if (finalUnit) {\n        return finalUnit.friendly(toPlaces, useName, optFormatString);\n    }\n    else {\n        return 'Unknown';\n    }\n};\n\nUnit.prototype.friendly = function(toPlaces, useName, optFormatString) {\n    /*\n        Available --\n    */\n    var formatString = optFormatString || this.DEFAULTS.friendly.formatString,\n        roundToPlaces = toPlaces || this.DEFAULTS.friendly.toPlaces,\n        useFullUnit = useName || this.DEFAULTS.friendly.useName,\n        val = this.value,\n        unit = this.type;\n\n    // Catch bad truthy assertion\n    if (toPlaces === 0) {\n        roundToPlaces = toPlaces;\n    }\n\n    if (val > 0 && val % 1 !== 0) {\n        // Not an integer\n        val = val.toFixed(roundToPlaces);\n    }\n\n    if (useFullUnit) {\n        var pluralModifier = 's';\n\n        if (val === 1) {\n            pluralModifier = '';\n        }\n\n        unit = util.format('%s%s', this.name, pluralModifier);\n    }\n\n    return util.format(formatString, val, unit);\n};\n\nUnit.prototype.types = function() {\n    return _.map(this.TYPES, function(item) {\n        return {\n            type: item.type,\n            name: item.name,\n            base: item.unit.base\n        };\n    });\n};\n\nUnit.prototype._packAndReturnArithmeticResult = function(newVal) {\n    // ONLY pass in GB values, this should not be public\n    return (new Unit(newVal)).to(this.type);\n};\n\nUnit.prototype._assertIsUnitObject = function(unitObject) {\n    assert((unitObject instanceof Unit), 'You must provide a Unit object to arithmetic operators.');\n};\n\nUnit.prototype._findUnitType = function(unitType) {\n    if (_.isObject(unitType)) {\n        return unitType;\n    }\n\n    var unitTypeObject = _.first(_.where(this.TYPES, function(unit) {\n        return unit.type === unitType;\n    }));\n\n    assert(unitTypeObject, util.format('No matching unit of type %s', unitType));\n\n    return unitTypeObject;\n};\n\nUnit.prototype._convert = function(toType) {\n    var ratio = Math.pow(this.unit.base, this.unit.pow) / Math.pow(toType.unit.base, toType.unit.pow);\n\n    return {\n        value: this.value * ratio,\n        from: this\n    };\n};\n\nUnit.prototype._inGb = function() {\n    var gbType = this._findUnitType('GB');\n\n    return this._convert(gbType).value;\n};\n\nUnit.prototype._packageUnit = function(type, name, modifier, base, pow) {\n    return {\n        value: modifier,\n        type: type,\n        name: name,\n        unit: {\n            base: base,\n            pow: pow\n        }\n    };\n};\n\nUnit.prototype.DEFAULTS = {\n    type: 'GB',\n    modifier: 0,\n    friendly: {\n        toPlaces: 2,\n        useName: false,\n        formatString: '%d %s'\n    }\n};\n\nUnit.prototype.TYPES = [\n    {\n        type: 'B',\n        name: 'Byte',\n        unit: {\n            base: 2,\n            pow: 1\n        }\n    },\n    {\n        type: 'KB',\n        name: 'Kilobyte',\n        unit: {\n            base: 10,\n            pow: 3\n        }\n    },\n    {\n        type: 'KiB',\n        name: 'Kibibyte',\n        unit: {\n            base: 2,\n            pow: 10\n        }\n    },\n    {\n        type: 'MB',\n        name: 'Megabyte',\n        unit: {\n            base: 10,\n            pow: 6\n        }\n    },\n    {\n        type: 'MiB',\n        name: 'Mibibyte',\n        unit: {\n            base: 2,\n            pow: 20\n        }\n    },\n    {\n        type: 'GB',\n        name: 'Gigabyte',\n        unit: {\n            base: 10,\n            pow: 9\n        }\n    },\n    {\n        type: 'GiB',\n        name: 'Gibibyte',\n        unit: {\n            base: 2,\n            pow: 30\n        }\n    },\n    {\n        type: 'TB',\n        name: 'Terabyte',\n        unit: {\n            base: 10,\n            pow: 12\n        }\n    },\n    {\n        type: 'TiB',\n        name: 'Tibibyte',\n        unit: {\n            base: 2,\n            pow: 40\n        }\n    },\n    {\n        type: 'PB',\n        name: 'Petabyte',\n        unit: {\n            base: 10,\n            pow: 15\n        }\n    },\n    {\n        type: 'PiB',\n        name: 'Pebibyte',\n        unit: {\n            base: 2,\n            pow: 50\n        }\n    }\n];\n\nmodule.exports = Unit;\n","'use strict';\n\nvar _ = require('lodash'),\n    assert = require('assert');\n\nfunction _xform(spec, path, ob, index) {\n    if (arguments.length === 2) {\n        return _.partial(_xform, spec, path);\n    }\n\n    if (ob === undefined) {\n        return ob;\n    }\n\n    if (arguments.length > 3) {\n        path = path + '[' + index + ']';\n    }\n\n    var result = {};\n    for (var k in spec) {\n        var kpath = path + '.' + k,\n            kspec = spec[k],\n            v = ob[k];\n\n        // entirely absent\n        if (!_.has(ob, k) && typeof kspec === 'boolean') {\n            // do nothing\n\n        // true: v => v\n        } else if (kspec === true) {\n            if (!_.has(ob, k)) {\n                // nothing to preserve; do nothing\n            }\n            if (v === null || v === undefined) {\n                result[k] = v;\n            } else {\n                assert(!(v instanceof Array), kpath + ': array needs spec');\n                assert.notEqual(typeof v, 'object', kpath + ': object needs spec');\n                result[k] = v;\n            }\n\n        // false: v => nothing\n        } else if (kspec === false) {\n            // do nothing\n\n        // fn: v => fn(v, kpath)\n        } else if (typeof kspec === 'function') {\n            result[k] = kspec(v, kpath);\n\n        // [ fn ]: [ a, b ] => [ fn(a), fn(b) ]\n        } else if (kspec instanceof Array) {\n            assert(kspec.length === 1, kpath + ': array specs must have one member');\n            var memberSpec = kspec[0];\n\n            if (v === undefined || k === null) {\n                result[k] = v;\n            } else {\n                assert(v instanceof Array, kpath + ': value not an array');\n                if (_.isPlainObject(memberSpec)) {\n                    result[k] = _.map(v, _xform(memberSpec, kpath));\n                } else if (typeof memberSpec === 'function') {\n                    result[k] = _.map(v, memberSpec);\n                } else {\n                    assert(false, kpath + ': invalid array spec');\n                }\n            }\n\n        // { ... }: v => xform({ ... }, v)\n        } else if (_.isPlainObject(kspec)) {\n            result[k] = _xform(kspec, kpath, v);\n\n        } else { // die\n            try {\n                console.error('invalid spec:', kspec);\n            } catch (err) {\n                // ignore\n            }\n            assert(false, kpath + ': invalid spec');\n        }\n    }\n    return result;\n}\n\nfunction xform(spec, ob, path) {\n    if (arguments.length === 1) {\n        return _.partial(xform, spec);\n    }\n\n    if (arguments.length === 2 && typeof ob === 'string') {\n        return _.partial(_xform, spec, path);\n    }\n\n    return _xform(spec, path || 'top', ob);\n}\n\nfunction setdefault(defaultValue, expectedType) {\n    if (typeof defaultValue === 'function') {\n        assert.notEqual(\n            expectedType,\n            undefined,\n            'need expectedType for function defaults');\n        return fromFunction;\n    } else {\n        expectedType = expectedType || typeof defaultValue;\n        // not sure why you're getting default type mismatch?\n        // maybe you used a partial of _default in your xform\n        // spec without calling it, so the first arguments are\n        // value and kpath...\n        assert.equal(typeof defaultValue, expectedType, 'default type mismatch');\n        return fromValue;\n    }\n\n    function fromValue(value, kpath) {\n        if (value === undefined) {\n            return defaultValue;\n        } else {\n            return checked(value, kpath, expectedType);\n        }\n    }\n\n    function fromFunction(value, kpath) {\n        if (value === undefined) {\n            return checked(defaultValue(), kpath, expectedType, ' from default function');\n        } else {\n            return checked(value, kpath, expectedType);\n        }\n    }\n\n    function checked(value, kpath, expectedType, from) {\n        from = from || '';\n\n        if (typeof expectedType === 'function') {\n            try {\n                return expectedType(value, kpath);\n            } catch (err) {\n                if (err.message && err.message.indexOf(kpath) === 0) {\n                    throw err;\n                } else {\n                    var msg = err.message || err.toString(),\n                        err2 = new Error(kpath + ': ' + msg + from);\n                    err2.original = err;\n                    throw err2;\n                }\n            }\n        } else {\n            assert.equal(\n                typeof value,\n                expectedType,\n                kpath + ': type mismatch' + from);\n            return value;\n        }\n    }\n}\n\nfunction constant(defaultValue) {\n    var repr = JSON.stringify(defaultValue);\n\n    return function _constant(value, kpath) {\n        if (value === undefined) {\n            return defaultValue;\n        } else {\n            assert.equal(value, defaultValue, kpath + ' !== ' + repr);\n            return value;\n        }\n    };\n}\n\nxform.setdefault = setdefault;\nxform.constant = constant;\nmodule.exports = xform;\n","'use strict';\n\nvar assert = require('assert');\n\n/* global XMLHttpRequest */\n\nfunction xhr(method, url, options, callback) {\n    assert.equal(typeof method, 'string');\n    assert.equal(typeof url, 'string');\n    assert.equal(typeof options, 'object');\n    assert.equal(typeof callback, 'function');\n\n    var headers = options.headers || {},\n        req = new XMLHttpRequest(),\n        typ,\n        payload = options.payload;\n\n    req.open(method, url, true);\n\n    for (var key in options.headers) {\n        req.setRequestHeader(key, headers[key]);\n        if (key.toLowerCase() === 'content-type') {\n            typ = headers[key];\n        }\n    }\n\n    if (payload) {\n        if (method.toLowerCase() !== 'post') {\n            console.error('xhr: payload set on non-POST');\n        }\n\n        if (typeof payload === 'object') {\n            payload = JSON.stringify(payload);\n            if (typ) {\n                console.error('xhr: content-type set for object POST');\n            } else {\n                typ = 'application/json';\n                req.setRequestHeader('content-type', typ);\n            }\n        } else {\n            if (!typ) {\n                console.error('xhr: content-type not set for POST');\n            }\n        }\n    } else {\n        if (method.toLowerCase() === 'post') {\n            console.error('xhr: payload absent on POST');\n        }\n    }\n\n    req.ontimeout = function ontimeout() {\n        callback(new Error('request timed out'));\n    };\n\n    req.onreadystatechange = function onreadystatechange() {\n        if (req.readyState !== 4) {\n            // 0: UNSENT\n            // 1: OPENED\n            // 2: HEADERS_RECEIVED\n            // 3: LOADING\n            // 4: DONE\n            return;\n        }\n\n        callback(null, {\n            statusCode: req.status,\n            body: req.responseText,\n            bodyType: req.responseType,\n            headers: req.getAllResponseHeaders(),\n        });\n    };\n\n    // readyState is apparently not set yet\n    // State before send should be 1?\n    if (method === 'POST' || method === 'PUT') {\n        // assert(req.readyState === 4, 'readyState=', req.readyState);\n        req.send(payload || '');\n    } else {\n        req.send();\n    }\n}\n\nmodule.exports = xhr;\n","/*!\n * async\n * https://github.com/caolan/async\n *\n * Copyright 2010-2014 Caolan McMahon\n * Released under the MIT license\n */\n/*jshint onevar: false, indent:4 */\n/*global setImmediate: false, setTimeout: false, console: false */\n(function () {\n\n    var async = {};\n\n    // global on the server, window in the browser\n    var root, previous_async;\n\n    root = this;\n    if (root != null) {\n      previous_async = root.async;\n    }\n\n    async.noConflict = function () {\n        root.async = previous_async;\n        return async;\n    };\n\n    function only_once(fn) {\n        var called = false;\n        return function() {\n            if (called) throw new Error(\"Callback was already called.\");\n            called = true;\n            fn.apply(root, arguments);\n        }\n    }\n\n    //// cross-browser compatiblity functions ////\n\n    var _toString = Object.prototype.toString;\n\n    var _isArray = Array.isArray || function (obj) {\n        return _toString.call(obj) === '[object Array]';\n    };\n\n    var _each = function (arr, iterator) {\n        if (arr.forEach) {\n            return arr.forEach(iterator);\n        }\n        for (var i = 0; i < arr.length; i += 1) {\n            iterator(arr[i], i, arr);\n        }\n    };\n\n    var _map = function (arr, iterator) {\n        if (arr.map) {\n            return arr.map(iterator);\n        }\n        var results = [];\n        _each(arr, function (x, i, a) {\n            results.push(iterator(x, i, a));\n        });\n        return results;\n    };\n\n    var _reduce = function (arr, iterator, memo) {\n        if (arr.reduce) {\n            return arr.reduce(iterator, memo);\n        }\n        _each(arr, function (x, i, a) {\n            memo = iterator(memo, x, i, a);\n        });\n        return memo;\n    };\n\n    var _keys = function (obj) {\n        if (Object.keys) {\n            return Object.keys(obj);\n        }\n        var keys = [];\n        for (var k in obj) {\n            if (obj.hasOwnProperty(k)) {\n                keys.push(k);\n            }\n        }\n        return keys;\n    };\n\n    //// exported async module functions ////\n\n    //// nextTick implementation with browser-compatible fallback ////\n    if (typeof process === 'undefined' || !(process.nextTick)) {\n        if (typeof setImmediate === 'function') {\n            async.nextTick = function (fn) {\n                // not a direct alias for IE10 compatibility\n                setImmediate(fn);\n            };\n            async.setImmediate = async.nextTick;\n        }\n        else {\n            async.nextTick = function (fn) {\n                setTimeout(fn, 0);\n            };\n            async.setImmediate = async.nextTick;\n        }\n    }\n    else {\n        async.nextTick = process.nextTick;\n        if (typeof setImmediate !== 'undefined') {\n            async.setImmediate = function (fn) {\n              // not a direct alias for IE10 compatibility\n              setImmediate(fn);\n            };\n        }\n        else {\n            async.setImmediate = async.nextTick;\n        }\n    }\n\n    async.each = function (arr, iterator, callback) {\n        callback = callback || function () {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        _each(arr, function (x) {\n            iterator(x, only_once(done) );\n        });\n        function done(err) {\n          if (err) {\n              callback(err);\n              callback = function () {};\n          }\n          else {\n              completed += 1;\n              if (completed >= arr.length) {\n                  callback();\n              }\n          }\n        }\n    };\n    async.forEach = async.each;\n\n    async.eachSeries = function (arr, iterator, callback) {\n        callback = callback || function () {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        var iterate = function () {\n            iterator(arr[completed], function (err) {\n                if (err) {\n                    callback(err);\n                    callback = function () {};\n                }\n                else {\n                    completed += 1;\n                    if (completed >= arr.length) {\n                        callback();\n                    }\n                    else {\n                        iterate();\n                    }\n                }\n            });\n        };\n        iterate();\n    };\n    async.forEachSeries = async.eachSeries;\n\n    async.eachLimit = function (arr, limit, iterator, callback) {\n        var fn = _eachLimit(limit);\n        fn.apply(null, [arr, iterator, callback]);\n    };\n    async.forEachLimit = async.eachLimit;\n\n    var _eachLimit = function (limit) {\n\n        return function (arr, iterator, callback) {\n            callback = callback || function () {};\n            if (!arr.length || limit <= 0) {\n                return callback();\n            }\n            var completed = 0;\n            var started = 0;\n            var running = 0;\n\n            (function replenish () {\n                if (completed >= arr.length) {\n                    return callback();\n                }\n\n                while (running < limit && started < arr.length) {\n                    started += 1;\n                    running += 1;\n                    iterator(arr[started - 1], function (err) {\n                        if (err) {\n                            callback(err);\n                            callback = function () {};\n                        }\n                        else {\n                            completed += 1;\n                            running -= 1;\n                            if (completed >= arr.length) {\n                                callback();\n                            }\n                            else {\n                                replenish();\n                            }\n                        }\n                    });\n                }\n            })();\n        };\n    };\n\n\n    var doParallel = function (fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [async.each].concat(args));\n        };\n    };\n    var doParallelLimit = function(limit, fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [_eachLimit(limit)].concat(args));\n        };\n    };\n    var doSeries = function (fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [async.eachSeries].concat(args));\n        };\n    };\n\n\n    var _asyncMap = function (eachfn, arr, iterator, callback) {\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        if (!callback) {\n            eachfn(arr, function (x, callback) {\n                iterator(x.value, function (err) {\n                    callback(err);\n                });\n            });\n        } else {\n            var results = [];\n            eachfn(arr, function (x, callback) {\n                iterator(x.value, function (err, v) {\n                    results[x.index] = v;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n    async.map = doParallel(_asyncMap);\n    async.mapSeries = doSeries(_asyncMap);\n    async.mapLimit = function (arr, limit, iterator, callback) {\n        return _mapLimit(limit)(arr, iterator, callback);\n    };\n\n    var _mapLimit = function(limit) {\n        return doParallelLimit(limit, _asyncMap);\n    };\n\n    // reduce only has a series version, as doing reduce in parallel won't\n    // work in many situations.\n    async.reduce = function (arr, memo, iterator, callback) {\n        async.eachSeries(arr, function (x, callback) {\n            iterator(memo, x, function (err, v) {\n                memo = v;\n                callback(err);\n            });\n        }, function (err) {\n            callback(err, memo);\n        });\n    };\n    // inject alias\n    async.inject = async.reduce;\n    // foldl alias\n    async.foldl = async.reduce;\n\n    async.reduceRight = function (arr, memo, iterator, callback) {\n        var reversed = _map(arr, function (x) {\n            return x;\n        }).reverse();\n        async.reduce(reversed, memo, iterator, callback);\n    };\n    // foldr alias\n    async.foldr = async.reduceRight;\n\n    var _filter = function (eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        eachfn(arr, function (x, callback) {\n            iterator(x.value, function (v) {\n                if (v) {\n                    results.push(x);\n                }\n                callback();\n            });\n        }, function (err) {\n            callback(_map(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), function (x) {\n                return x.value;\n            }));\n        });\n    };\n    async.filter = doParallel(_filter);\n    async.filterSeries = doSeries(_filter);\n    // select alias\n    async.select = async.filter;\n    async.selectSeries = async.filterSeries;\n\n    var _reject = function (eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        eachfn(arr, function (x, callback) {\n            iterator(x.value, function (v) {\n                if (!v) {\n                    results.push(x);\n                }\n                callback();\n            });\n        }, function (err) {\n            callback(_map(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), function (x) {\n                return x.value;\n            }));\n        });\n    };\n    async.reject = doParallel(_reject);\n    async.rejectSeries = doSeries(_reject);\n\n    var _detect = function (eachfn, arr, iterator, main_callback) {\n        eachfn(arr, function (x, callback) {\n            iterator(x, function (result) {\n                if (result) {\n                    main_callback(x);\n                    main_callback = function () {};\n                }\n                else {\n                    callback();\n                }\n            });\n        }, function (err) {\n            main_callback();\n        });\n    };\n    async.detect = doParallel(_detect);\n    async.detectSeries = doSeries(_detect);\n\n    async.some = function (arr, iterator, main_callback) {\n        async.each(arr, function (x, callback) {\n            iterator(x, function (v) {\n                if (v) {\n                    main_callback(true);\n                    main_callback = function () {};\n                }\n                callback();\n            });\n        }, function (err) {\n            main_callback(false);\n        });\n    };\n    // any alias\n    async.any = async.some;\n\n    async.every = function (arr, iterator, main_callback) {\n        async.each(arr, function (x, callback) {\n            iterator(x, function (v) {\n                if (!v) {\n                    main_callback(false);\n                    main_callback = function () {};\n                }\n                callback();\n            });\n        }, function (err) {\n            main_callback(true);\n        });\n    };\n    // all alias\n    async.all = async.every;\n\n    async.sortBy = function (arr, iterator, callback) {\n        async.map(arr, function (x, callback) {\n            iterator(x, function (err, criteria) {\n                if (err) {\n                    callback(err);\n                }\n                else {\n                    callback(null, {value: x, criteria: criteria});\n                }\n            });\n        }, function (err, results) {\n            if (err) {\n                return callback(err);\n            }\n            else {\n                var fn = function (left, right) {\n                    var a = left.criteria, b = right.criteria;\n                    return a < b ? -1 : a > b ? 1 : 0;\n                };\n                callback(null, _map(results.sort(fn), function (x) {\n                    return x.value;\n                }));\n            }\n        });\n    };\n\n    async.auto = function (tasks, callback) {\n        callback = callback || function () {};\n        var keys = _keys(tasks);\n        var remainingTasks = keys.length\n        if (!remainingTasks) {\n            return callback();\n        }\n\n        var results = {};\n\n        var listeners = [];\n        var addListener = function (fn) {\n            listeners.unshift(fn);\n        };\n        var removeListener = function (fn) {\n            for (var i = 0; i < listeners.length; i += 1) {\n                if (listeners[i] === fn) {\n                    listeners.splice(i, 1);\n                    return;\n                }\n            }\n        };\n        var taskComplete = function () {\n            remainingTasks--\n            _each(listeners.slice(0), function (fn) {\n                fn();\n            });\n        };\n\n        addListener(function () {\n            if (!remainingTasks) {\n                var theCallback = callback;\n                // prevent final callback from calling itself if it errors\n                callback = function () {};\n\n                theCallback(null, results);\n            }\n        });\n\n        _each(keys, function (k) {\n            var task = _isArray(tasks[k]) ? tasks[k]: [tasks[k]];\n            var taskCallback = function (err) {\n                var args = Array.prototype.slice.call(arguments, 1);\n                if (args.length <= 1) {\n                    args = args[0];\n                }\n                if (err) {\n                    var safeResults = {};\n                    _each(_keys(results), function(rkey) {\n                        safeResults[rkey] = results[rkey];\n                    });\n                    safeResults[k] = args;\n                    callback(err, safeResults);\n                    // stop subsequent errors hitting callback multiple times\n                    callback = function () {};\n                }\n                else {\n                    results[k] = args;\n                    async.setImmediate(taskComplete);\n                }\n            };\n            var requires = task.slice(0, Math.abs(task.length - 1)) || [];\n            var ready = function () {\n                return _reduce(requires, function (a, x) {\n                    return (a && results.hasOwnProperty(x));\n                }, true) && !results.hasOwnProperty(k);\n            };\n            if (ready()) {\n                task[task.length - 1](taskCallback, results);\n            }\n            else {\n                var listener = function () {\n                    if (ready()) {\n                        removeListener(listener);\n                        task[task.length - 1](taskCallback, results);\n                    }\n                };\n                addListener(listener);\n            }\n        });\n    };\n\n    async.retry = function(times, task, callback) {\n        var DEFAULT_TIMES = 5;\n        var attempts = [];\n        // Use defaults if times not passed\n        if (typeof times === 'function') {\n            callback = task;\n            task = times;\n            times = DEFAULT_TIMES;\n        }\n        // Make sure times is a number\n        times = parseInt(times, 10) || DEFAULT_TIMES;\n        var wrappedTask = function(wrappedCallback, wrappedResults) {\n            var retryAttempt = function(task, finalAttempt) {\n                return function(seriesCallback) {\n                    task(function(err, result){\n                        seriesCallback(!err || finalAttempt, {err: err, result: result});\n                    }, wrappedResults);\n                };\n            };\n            while (times) {\n                attempts.push(retryAttempt(task, !(times-=1)));\n            }\n            async.series(attempts, function(done, data){\n                data = data[data.length - 1];\n                (wrappedCallback || callback)(data.err, data.result);\n            });\n        }\n        // If a callback is passed, run this as a controll flow\n        return callback ? wrappedTask() : wrappedTask\n    };\n\n    async.waterfall = function (tasks, callback) {\n        callback = callback || function () {};\n        if (!_isArray(tasks)) {\n          var err = new Error('First argument to waterfall must be an array of functions');\n          return callback(err);\n        }\n        if (!tasks.length) {\n            return callback();\n        }\n        var wrapIterator = function (iterator) {\n            return function (err) {\n                if (err) {\n                    callback.apply(null, arguments);\n                    callback = function () {};\n                }\n                else {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    var next = iterator.next();\n                    if (next) {\n                        args.push(wrapIterator(next));\n                    }\n                    else {\n                        args.push(callback);\n                    }\n                    async.setImmediate(function () {\n                        iterator.apply(null, args);\n                    });\n                }\n            };\n        };\n        wrapIterator(async.iterator(tasks))();\n    };\n\n    var _parallel = function(eachfn, tasks, callback) {\n        callback = callback || function () {};\n        if (_isArray(tasks)) {\n            eachfn.map(tasks, function (fn, callback) {\n                if (fn) {\n                    fn(function (err) {\n                        var args = Array.prototype.slice.call(arguments, 1);\n                        if (args.length <= 1) {\n                            args = args[0];\n                        }\n                        callback.call(null, err, args);\n                    });\n                }\n            }, callback);\n        }\n        else {\n            var results = {};\n            eachfn.each(_keys(tasks), function (k, callback) {\n                tasks[k](function (err) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n\n    async.parallel = function (tasks, callback) {\n        _parallel({ map: async.map, each: async.each }, tasks, callback);\n    };\n\n    async.parallelLimit = function(tasks, limit, callback) {\n        _parallel({ map: _mapLimit(limit), each: _eachLimit(limit) }, tasks, callback);\n    };\n\n    async.series = function (tasks, callback) {\n        callback = callback || function () {};\n        if (_isArray(tasks)) {\n            async.mapSeries(tasks, function (fn, callback) {\n                if (fn) {\n                    fn(function (err) {\n                        var args = Array.prototype.slice.call(arguments, 1);\n                        if (args.length <= 1) {\n                            args = args[0];\n                        }\n                        callback.call(null, err, args);\n                    });\n                }\n            }, callback);\n        }\n        else {\n            var results = {};\n            async.eachSeries(_keys(tasks), function (k, callback) {\n                tasks[k](function (err) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n\n    async.iterator = function (tasks) {\n        var makeCallback = function (index) {\n            var fn = function () {\n                if (tasks.length) {\n                    tasks[index].apply(null, arguments);\n                }\n                return fn.next();\n            };\n            fn.next = function () {\n                return (index < tasks.length - 1) ? makeCallback(index + 1): null;\n            };\n            return fn;\n        };\n        return makeCallback(0);\n    };\n\n    async.apply = function (fn) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return function () {\n            return fn.apply(\n                null, args.concat(Array.prototype.slice.call(arguments))\n            );\n        };\n    };\n\n    var _concat = function (eachfn, arr, fn, callback) {\n        var r = [];\n        eachfn(arr, function (x, cb) {\n            fn(x, function (err, y) {\n                r = r.concat(y || []);\n                cb(err);\n            });\n        }, function (err) {\n            callback(err, r);\n        });\n    };\n    async.concat = doParallel(_concat);\n    async.concatSeries = doSeries(_concat);\n\n    async.whilst = function (test, iterator, callback) {\n        if (test()) {\n            iterator(function (err) {\n                if (err) {\n                    return callback(err);\n                }\n                async.whilst(test, iterator, callback);\n            });\n        }\n        else {\n            callback();\n        }\n    };\n\n    async.doWhilst = function (iterator, test, callback) {\n        iterator(function (err) {\n            if (err) {\n                return callback(err);\n            }\n            var args = Array.prototype.slice.call(arguments, 1);\n            if (test.apply(null, args)) {\n                async.doWhilst(iterator, test, callback);\n            }\n            else {\n                callback();\n            }\n        });\n    };\n\n    async.until = function (test, iterator, callback) {\n        if (!test()) {\n            iterator(function (err) {\n                if (err) {\n                    return callback(err);\n                }\n                async.until(test, iterator, callback);\n            });\n        }\n        else {\n            callback();\n        }\n    };\n\n    async.doUntil = function (iterator, test, callback) {\n        iterator(function (err) {\n            if (err) {\n                return callback(err);\n            }\n            var args = Array.prototype.slice.call(arguments, 1);\n            if (!test.apply(null, args)) {\n                async.doUntil(iterator, test, callback);\n            }\n            else {\n                callback();\n            }\n        });\n    };\n\n    async.queue = function (worker, concurrency) {\n        if (concurrency === undefined) {\n            concurrency = 1;\n        }\n        function _insert(q, data, pos, callback) {\n          if (!q.started){\n            q.started = true;\n          }\n          if (!_isArray(data)) {\n              data = [data];\n          }\n          if(data.length == 0) {\n             // call drain immediately if there are no tasks\n             return async.setImmediate(function() {\n                 if (q.drain) {\n                     q.drain();\n                 }\n             });\n          }\n          _each(data, function(task) {\n              var item = {\n                  data: task,\n                  callback: typeof callback === 'function' ? callback : null\n              };\n\n              if (pos) {\n                q.tasks.unshift(item);\n              } else {\n                q.tasks.push(item);\n              }\n\n              if (q.saturated && q.tasks.length === q.concurrency) {\n                  q.saturated();\n              }\n              async.setImmediate(q.process);\n          });\n        }\n\n        var workers = 0;\n        var q = {\n            tasks: [],\n            concurrency: concurrency,\n            saturated: null,\n            empty: null,\n            drain: null,\n            started: false,\n            paused: false,\n            push: function (data, callback) {\n              _insert(q, data, false, callback);\n            },\n            kill: function () {\n              q.drain = null;\n              q.tasks = [];\n            },\n            unshift: function (data, callback) {\n              _insert(q, data, true, callback);\n            },\n            process: function () {\n                if (!q.paused && workers < q.concurrency && q.tasks.length) {\n                    var task = q.tasks.shift();\n                    if (q.empty && q.tasks.length === 0) {\n                        q.empty();\n                    }\n                    workers += 1;\n                    var next = function () {\n                        workers -= 1;\n                        if (task.callback) {\n                            task.callback.apply(task, arguments);\n                        }\n                        if (q.drain && q.tasks.length + workers === 0) {\n                            q.drain();\n                        }\n                        q.process();\n                    };\n                    var cb = only_once(next);\n                    worker(task.data, cb);\n                }\n            },\n            length: function () {\n                return q.tasks.length;\n            },\n            running: function () {\n                return workers;\n            },\n            idle: function() {\n                return q.tasks.length + workers === 0;\n            },\n            pause: function () {\n                if (q.paused === true) { return; }\n                q.paused = true;\n                q.process();\n            },\n            resume: function () {\n                if (q.paused === false) { return; }\n                q.paused = false;\n                q.process();\n            }\n        };\n        return q;\n    };\n    \n    async.priorityQueue = function (worker, concurrency) {\n        \n        function _compareTasks(a, b){\n          return a.priority - b.priority;\n        };\n        \n        function _binarySearch(sequence, item, compare) {\n          var beg = -1,\n              end = sequence.length - 1;\n          while (beg < end) {\n            var mid = beg + ((end - beg + 1) >>> 1);\n            if (compare(item, sequence[mid]) >= 0) {\n              beg = mid;\n            } else {\n              end = mid - 1;\n            }\n          }\n          return beg;\n        }\n        \n        function _insert(q, data, priority, callback) {\n          if (!q.started){\n            q.started = true;\n          }\n          if (!_isArray(data)) {\n              data = [data];\n          }\n          if(data.length == 0) {\n             // call drain immediately if there are no tasks\n             return async.setImmediate(function() {\n                 if (q.drain) {\n                     q.drain();\n                 }\n             });\n          }\n          _each(data, function(task) {\n              var item = {\n                  data: task,\n                  priority: priority,\n                  callback: typeof callback === 'function' ? callback : null\n              };\n              \n              q.tasks.splice(_binarySearch(q.tasks, item, _compareTasks) + 1, 0, item);\n\n              if (q.saturated && q.tasks.length === q.concurrency) {\n                  q.saturated();\n              }\n              async.setImmediate(q.process);\n          });\n        }\n        \n        // Start with a normal queue\n        var q = async.queue(worker, concurrency);\n        \n        // Override push to accept second parameter representing priority\n        q.push = function (data, priority, callback) {\n          _insert(q, data, priority, callback);\n        };\n        \n        // Remove unshift function\n        delete q.unshift;\n\n        return q;\n    };\n\n    async.cargo = function (worker, payload) {\n        var working     = false,\n            tasks       = [];\n\n        var cargo = {\n            tasks: tasks,\n            payload: payload,\n            saturated: null,\n            empty: null,\n            drain: null,\n            drained: true,\n            push: function (data, callback) {\n                if (!_isArray(data)) {\n                    data = [data];\n                }\n                _each(data, function(task) {\n                    tasks.push({\n                        data: task,\n                        callback: typeof callback === 'function' ? callback : null\n                    });\n                    cargo.drained = false;\n                    if (cargo.saturated && tasks.length === payload) {\n                        cargo.saturated();\n                    }\n                });\n                async.setImmediate(cargo.process);\n            },\n            process: function process() {\n                if (working) return;\n                if (tasks.length === 0) {\n                    if(cargo.drain && !cargo.drained) cargo.drain();\n                    cargo.drained = true;\n                    return;\n                }\n\n                var ts = typeof payload === 'number'\n                            ? tasks.splice(0, payload)\n                            : tasks.splice(0, tasks.length);\n\n                var ds = _map(ts, function (task) {\n                    return task.data;\n                });\n\n                if(cargo.empty) cargo.empty();\n                working = true;\n                worker(ds, function () {\n                    working = false;\n\n                    var args = arguments;\n                    _each(ts, function (data) {\n                        if (data.callback) {\n                            data.callback.apply(null, args);\n                        }\n                    });\n\n                    process();\n                });\n            },\n            length: function () {\n                return tasks.length;\n            },\n            running: function () {\n                return working;\n            }\n        };\n        return cargo;\n    };\n\n    var _console_fn = function (name) {\n        return function (fn) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            fn.apply(null, args.concat([function (err) {\n                var args = Array.prototype.slice.call(arguments, 1);\n                if (typeof console !== 'undefined') {\n                    if (err) {\n                        if (console.error) {\n                            console.error(err);\n                        }\n                    }\n                    else if (console[name]) {\n                        _each(args, function (x) {\n                            console[name](x);\n                        });\n                    }\n                }\n            }]));\n        };\n    };\n    async.log = _console_fn('log');\n    async.dir = _console_fn('dir');\n    /*async.info = _console_fn('info');\n    async.warn = _console_fn('warn');\n    async.error = _console_fn('error');*/\n\n    async.memoize = function (fn, hasher) {\n        var memo = {};\n        var queues = {};\n        hasher = hasher || function (x) {\n            return x;\n        };\n        var memoized = function () {\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            var key = hasher.apply(null, args);\n            if (key in memo) {\n                async.nextTick(function () {\n                    callback.apply(null, memo[key]);\n                });\n            }\n            else if (key in queues) {\n                queues[key].push(callback);\n            }\n            else {\n                queues[key] = [callback];\n                fn.apply(null, args.concat([function () {\n                    memo[key] = arguments;\n                    var q = queues[key];\n                    delete queues[key];\n                    for (var i = 0, l = q.length; i < l; i++) {\n                      q[i].apply(null, arguments);\n                    }\n                }]));\n            }\n        };\n        memoized.memo = memo;\n        memoized.unmemoized = fn;\n        return memoized;\n    };\n\n    async.unmemoize = function (fn) {\n      return function () {\n        return (fn.unmemoized || fn).apply(null, arguments);\n      };\n    };\n\n    async.times = function (count, iterator, callback) {\n        var counter = [];\n        for (var i = 0; i < count; i++) {\n            counter.push(i);\n        }\n        return async.map(counter, iterator, callback);\n    };\n\n    async.timesSeries = function (count, iterator, callback) {\n        var counter = [];\n        for (var i = 0; i < count; i++) {\n            counter.push(i);\n        }\n        return async.mapSeries(counter, iterator, callback);\n    };\n\n    async.seq = function (/* functions... */) {\n        var fns = arguments;\n        return function () {\n            var that = this;\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            async.reduce(fns, args, function (newargs, fn, cb) {\n                fn.apply(that, newargs.concat([function () {\n                    var err = arguments[0];\n                    var nextargs = Array.prototype.slice.call(arguments, 1);\n                    cb(err, nextargs);\n                }]))\n            },\n            function (err, results) {\n                callback.apply(that, [err].concat(results));\n            });\n        };\n    };\n\n    async.compose = function (/* functions... */) {\n      return async.seq.apply(null, Array.prototype.reverse.call(arguments));\n    };\n\n    var _applyEach = function (eachfn, fns /*args...*/) {\n        var go = function () {\n            var that = this;\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            return eachfn(fns, function (fn, cb) {\n                fn.apply(that, args.concat([cb]));\n            },\n            callback);\n        };\n        if (arguments.length > 2) {\n            var args = Array.prototype.slice.call(arguments, 2);\n            return go.apply(this, args);\n        }\n        else {\n            return go;\n        }\n    };\n    async.applyEach = doParallel(_applyEach);\n    async.applyEachSeries = doSeries(_applyEach);\n\n    async.forever = function (fn, callback) {\n        function next(err) {\n            if (err) {\n                if (callback) {\n                    return callback(err);\n                }\n                throw err;\n            }\n            fn(next);\n        }\n        next();\n    };\n\n    // Node.js\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = async;\n    }\n    // AMD / RequireJS\n    else if (typeof define !== 'undefined' && define.amd) {\n        define([], function () {\n            return async;\n        });\n    }\n    // included directly via <script> tag\n    else {\n        root.async = async;\n    }\n\n}());\n","// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// when used in node, this will actually load the util module we depend on\n// versus loading the builtin util module as happens otherwise\n// this is a bug in node module loading as far as I am concerned\nvar util = require('util/');\n\nvar pSlice = Array.prototype.slice;\nvar hasOwn = Object.prototype.hasOwnProperty;\n\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  }\n  else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = stackStartFunction.name;\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction replacer(key, value) {\n  if (util.isUndefined(value)) {\n    return '' + value;\n  }\n  if (util.isNumber(value) && !isFinite(value)) {\n    return value.toString();\n  }\n  if (util.isFunction(value) || util.isRegExp(value)) {\n    return value.toString();\n  }\n  return value;\n}\n\nfunction truncate(s, n) {\n  if (util.isString(s)) {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\n\nfunction getMessage(self) {\n  return truncate(JSON.stringify(self.actual, replacer), 128) + ' ' +\n         self.operator + ' ' +\n         truncate(JSON.stringify(self.expected, replacer), 128);\n}\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (util.isBuffer(actual) && util.isBuffer(expected)) {\n    if (actual.length != expected.length) return false;\n\n    for (var i = 0; i < actual.length; i++) {\n      if (actual[i] !== expected[i]) return false;\n    }\n\n    return true;\n\n  // 7.2. If the expected value is a Date object, the actual value is\n  // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3 If the expected value is a RegExp object, the actual value is\n  // equivalent if it is also a RegExp object with the same source and\n  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n           actual.global === expected.global &&\n           actual.multiline === expected.multiline &&\n           actual.lastIndex === expected.lastIndex &&\n           actual.ignoreCase === expected.ignoreCase;\n\n  // 7.4. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!util.isObject(actual) && !util.isObject(expected)) {\n    return actual == expected;\n\n  // 7.5 For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b) {\n  if (util.isNullOrUndefined(a) || util.isNullOrUndefined(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b)) {\n    return a === b;\n  }\n  var aIsArgs = isArguments(a),\n      bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b);\n  }\n  var ka = objectKeys(a),\n      kb = objectKeys(b),\n      key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key])) return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  } else if (actual instanceof expected) {\n    return true;\n  } else if (expected.call({}, actual) === true) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (util.isString(expected)) {\n    message = expected;\n    expected = null;\n  }\n\n  try {\n    block();\n  } catch (e) {\n    actual = e;\n  }\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n            (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  if (!shouldThrow && expectedException(actual, expected)) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n      !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws.apply(this, [true].concat(pSlice.call(arguments)));\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/message) {\n  _throws.apply(this, [false].concat(pSlice.call(arguments)));\n};\n\nassert.ifError = function(err) { if (err) {throw err;}};\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n  return keys;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    draining = true;\n    var currentQueue;\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        var i = -1;\n        while (++i < len) {\n            currentQueue[i]();\n        }\n        len = queue.length;\n    }\n    draining = false;\n}\nprocess.nextTick = function (fun) {\n    queue.push(fun);\n    if (!draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n","// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.3.6\nvar LZString = {\n  \n  \n  // private property\n  _keyStr : \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n  _f : String.fromCharCode,\n  \n  compressToBase64 : function (input) {\n    if (input == null) return \"\";\n    var output = \"\";\n    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n    var i = 0;\n    \n    input = LZString.compress(input);\n    \n    while (i < input.length*2) {\n      \n      if (i%2==0) {\n        chr1 = input.charCodeAt(i/2) >> 8;\n        chr2 = input.charCodeAt(i/2) & 255;\n        if (i/2+1 < input.length) \n          chr3 = input.charCodeAt(i/2+1) >> 8;\n        else \n          chr3 = NaN;\n      } else {\n        chr1 = input.charCodeAt((i-1)/2) & 255;\n        if ((i+1)/2 < input.length) {\n          chr2 = input.charCodeAt((i+1)/2) >> 8;\n          chr3 = input.charCodeAt((i+1)/2) & 255;\n        } else \n          chr2=chr3=NaN;\n      }\n      i+=3;\n      \n      enc1 = chr1 >> 2;\n      enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n      enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n      enc4 = chr3 & 63;\n      \n      if (isNaN(chr2)) {\n        enc3 = enc4 = 64;\n      } else if (isNaN(chr3)) {\n        enc4 = 64;\n      }\n      \n      output = output +\n        LZString._keyStr.charAt(enc1) + LZString._keyStr.charAt(enc2) +\n          LZString._keyStr.charAt(enc3) + LZString._keyStr.charAt(enc4);\n      \n    }\n    \n    return output;\n  },\n  \n  decompressFromBase64 : function (input) {\n    if (input == null) return \"\";\n    var output = \"\",\n        ol = 0, \n        output_,\n        chr1, chr2, chr3,\n        enc1, enc2, enc3, enc4,\n        i = 0, f=LZString._f;\n    \n    input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n    \n    while (i < input.length) {\n      \n      enc1 = LZString._keyStr.indexOf(input.charAt(i++));\n      enc2 = LZString._keyStr.indexOf(input.charAt(i++));\n      enc3 = LZString._keyStr.indexOf(input.charAt(i++));\n      enc4 = LZString._keyStr.indexOf(input.charAt(i++));\n      \n      chr1 = (enc1 << 2) | (enc2 >> 4);\n      chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n      chr3 = ((enc3 & 3) << 6) | enc4;\n      \n      if (ol%2==0) {\n        output_ = chr1 << 8;\n        \n        if (enc3 != 64) {\n          output += f(output_ | chr2);\n        }\n        if (enc4 != 64) {\n          output_ = chr3 << 8;\n        }\n      } else {\n        output = output + f(output_ | chr1);\n        \n        if (enc3 != 64) {\n          output_ = chr2 << 8;\n        }\n        if (enc4 != 64) {\n          output += f(output_ | chr3);\n        }\n      }\n      ol+=3;\n    }\n    \n    return LZString.decompress(output);\n    \n  },\n\n  compressToUTF16 : function (input) {\n    if (input == null) return \"\";\n    var output = \"\",\n        i,c,\n        current,\n        status = 0,\n        f = LZString._f;\n    \n    input = LZString.compress(input);\n    \n    for (i=0 ; i<input.length ; i++) {\n      c = input.charCodeAt(i);\n      switch (status++) {\n        case 0:\n          output += f((c >> 1)+32);\n          current = (c & 1) << 14;\n          break;\n        case 1:\n          output += f((current + (c >> 2))+32);\n          current = (c & 3) << 13;\n          break;\n        case 2:\n          output += f((current + (c >> 3))+32);\n          current = (c & 7) << 12;\n          break;\n        case 3:\n          output += f((current + (c >> 4))+32);\n          current = (c & 15) << 11;\n          break;\n        case 4:\n          output += f((current + (c >> 5))+32);\n          current = (c & 31) << 10;\n          break;\n        case 5:\n          output += f((current + (c >> 6))+32);\n          current = (c & 63) << 9;\n          break;\n        case 6:\n          output += f((current + (c >> 7))+32);\n          current = (c & 127) << 8;\n          break;\n        case 7:\n          output += f((current + (c >> 8))+32);\n          current = (c & 255) << 7;\n          break;\n        case 8:\n          output += f((current + (c >> 9))+32);\n          current = (c & 511) << 6;\n          break;\n        case 9:\n          output += f((current + (c >> 10))+32);\n          current = (c & 1023) << 5;\n          break;\n        case 10:\n          output += f((current + (c >> 11))+32);\n          current = (c & 2047) << 4;\n          break;\n        case 11:\n          output += f((current + (c >> 12))+32);\n          current = (c & 4095) << 3;\n          break;\n        case 12:\n          output += f((current + (c >> 13))+32);\n          current = (c & 8191) << 2;\n          break;\n        case 13:\n          output += f((current + (c >> 14))+32);\n          current = (c & 16383) << 1;\n          break;\n        case 14:\n          output += f((current + (c >> 15))+32, (c & 32767)+32);\n          status = 0;\n          break;\n      }\n    }\n    \n    return output + f(current + 32);\n  },\n  \n\n  decompressFromUTF16 : function (input) {\n    if (input == null) return \"\";\n    var output = \"\",\n        current,c,\n        status=0,\n        i = 0,\n        f = LZString._f;\n    \n    while (i < input.length) {\n      c = input.charCodeAt(i) - 32;\n      \n      switch (status++) {\n        case 0:\n          current = c << 1;\n          break;\n        case 1:\n          output += f(current | (c >> 14));\n          current = (c&16383) << 2;\n          break;\n        case 2:\n          output += f(current | (c >> 13));\n          current = (c&8191) << 3;\n          break;\n        case 3:\n          output += f(current | (c >> 12));\n          current = (c&4095) << 4;\n          break;\n        case 4:\n          output += f(current | (c >> 11));\n          current = (c&2047) << 5;\n          break;\n        case 5:\n          output += f(current | (c >> 10));\n          current = (c&1023) << 6;\n          break;\n        case 6:\n          output += f(current | (c >> 9));\n          current = (c&511) << 7;\n          break;\n        case 7:\n          output += f(current | (c >> 8));\n          current = (c&255) << 8;\n          break;\n        case 8:\n          output += f(current | (c >> 7));\n          current = (c&127) << 9;\n          break;\n        case 9:\n          output += f(current | (c >> 6));\n          current = (c&63) << 10;\n          break;\n        case 10:\n          output += f(current | (c >> 5));\n          current = (c&31) << 11;\n          break;\n        case 11:\n          output += f(current | (c >> 4));\n          current = (c&15) << 12;\n          break;\n        case 12:\n          output += f(current | (c >> 3));\n          current = (c&7) << 13;\n          break;\n        case 13:\n          output += f(current | (c >> 2));\n          current = (c&3) << 14;\n          break;\n        case 14:\n          output += f(current | (c >> 1));\n          current = (c&1) << 15;\n          break;\n        case 15:\n          output += f(current | c);\n          status=0;\n          break;\n      }\n      \n      \n      i++;\n    }\n    \n    return LZString.decompress(output);\n    //return output;\n    \n  },\n\n\n  //compress into uint8array (UCS-2 big endian format)\n  compressToUint8Array: function (uncompressed) {\n\n    var compressed = LZString.compress(uncompressed);\n    var buf=new Uint8Array(compressed.length*2); // 2 bytes per character\n\n    for (var i=0, TotalLen=compressed.length; i<TotalLen; i++) {\n      var current_value = compressed.charCodeAt(i);\n      buf[i*2] = current_value >>> 8;\n      buf[i*2+1] = current_value % 256;\n    }\n    return buf;\n\n  },\n\n  //decompress from uint8array (UCS-2 big endian format)\n  decompressFromUint8Array:function (compressed) {\n\n    if (compressed===null || compressed===undefined){\n        return LZString.decompress(compressed);\n    } else {\n\n        var buf=new Array(compressed.length/2); // 2 bytes per character\n\n        for (var i=0, TotalLen=buf.length; i<TotalLen; i++) {\n          buf[i]=compressed[i*2]*256+compressed[i*2+1];\n        }\n\n        return LZString.decompress(String.fromCharCode.apply(null, buf));\n\n    }\n\n  },\n\n  //compress into a string that is already URI encoded\n  compressToEncodedURIComponent: function (uncompressed) {\n    return LZString.compressToBase64(uncompressed).replace(/=/g,\"$\").replace(/\\//g,\"-\");\n  },\n\n  //decompress from an output of compressToEncodedURIComponent\n  decompressFromEncodedURIComponent:function (compressed) {\n    if (compressed) compressed = compressed.replace(/$/g,\"=\").replace(/-/g,\"/\");\n    return LZString.decompressFromBase64(compressed);\n  },\n\n\n  compress: function (uncompressed) {\n    if (uncompressed == null) return \"\";\n    var i, value,\n        context_dictionary= {},\n        context_dictionaryToCreate= {},\n        context_c=\"\",\n        context_wc=\"\",\n        context_w=\"\",\n        context_enlargeIn= 2, // Compensate for the first entry which should not count\n        context_dictSize= 3,\n        context_numBits= 2,\n        context_data_string=\"\", \n        context_data_val=0, \n        context_data_position=0,\n        ii,\n        f=LZString._f;\n    \n    for (ii = 0; ii < uncompressed.length; ii += 1) {\n      context_c = uncompressed.charAt(ii);\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)) {\n        context_dictionary[context_c] = context_dictSize++;\n        context_dictionaryToCreate[context_c] = true;\n      }\n      \n      context_wc = context_w + context_c;\n      if (Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)) {\n        context_w = context_wc;\n      } else {\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n          if (context_w.charCodeAt(0)<256) {\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1);\n              if (context_data_position == 15) {\n                context_data_position = 0;\n                context_data_string += f(context_data_val);\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<8 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == 15) {\n                context_data_position = 0;\n                context_data_string += f(context_data_val);\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          } else {\n            value = 1;\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1) | value;\n              if (context_data_position == 15) {\n                context_data_position = 0;\n                context_data_string += f(context_data_val);\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = 0;\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<16 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == 15) {\n                context_data_position = 0;\n                context_data_string += f(context_data_val);\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          }\n          context_enlargeIn--;\n          if (context_enlargeIn == 0) {\n            context_enlargeIn = Math.pow(2, context_numBits);\n            context_numBits++;\n          }\n          delete context_dictionaryToCreate[context_w];\n        } else {\n          value = context_dictionary[context_w];\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == 15) {\n              context_data_position = 0;\n              context_data_string += f(context_data_val);\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n          \n          \n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        // Add wc to the dictionary.\n        context_dictionary[context_wc] = context_dictSize++;\n        context_w = String(context_c);\n      }\n    }\n    \n    // Output the code for w.\n    if (context_w !== \"\") {\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n        if (context_w.charCodeAt(0)<256) {\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1);\n            if (context_data_position == 15) {\n              context_data_position = 0;\n              context_data_string += f(context_data_val);\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<8 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == 15) {\n              context_data_position = 0;\n              context_data_string += f(context_data_val);\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        } else {\n          value = 1;\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | value;\n            if (context_data_position == 15) {\n              context_data_position = 0;\n              context_data_string += f(context_data_val);\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = 0;\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<16 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == 15) {\n              context_data_position = 0;\n              context_data_string += f(context_data_val);\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        delete context_dictionaryToCreate[context_w];\n      } else {\n        value = context_dictionary[context_w];\n        for (i=0 ; i<context_numBits ; i++) {\n          context_data_val = (context_data_val << 1) | (value&1);\n          if (context_data_position == 15) {\n            context_data_position = 0;\n            context_data_string += f(context_data_val);\n            context_data_val = 0;\n          } else {\n            context_data_position++;\n          }\n          value = value >> 1;\n        }\n        \n        \n      }\n      context_enlargeIn--;\n      if (context_enlargeIn == 0) {\n        context_enlargeIn = Math.pow(2, context_numBits);\n        context_numBits++;\n      }\n    }\n    \n    // Mark the end of the stream\n    value = 2;\n    for (i=0 ; i<context_numBits ; i++) {\n      context_data_val = (context_data_val << 1) | (value&1);\n      if (context_data_position == 15) {\n        context_data_position = 0;\n        context_data_string += f(context_data_val);\n        context_data_val = 0;\n      } else {\n        context_data_position++;\n      }\n      value = value >> 1;\n    }\n    \n    // Flush the last char\n    while (true) {\n      context_data_val = (context_data_val << 1);\n      if (context_data_position == 15) {\n        context_data_string += f(context_data_val);\n        break;\n      }\n      else context_data_position++;\n    }\n    return context_data_string;\n  },\n  \n  decompress: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    var dictionary = [],\n        next,\n        enlargeIn = 4,\n        dictSize = 4,\n        numBits = 3,\n        entry = \"\",\n        result = \"\",\n        i,\n        w,\n        bits, resb, maxpower, power,\n        c,\n        f = LZString._f,\n        data = {string:compressed, val:compressed.charCodeAt(0), position:32768, index:1};\n    \n    for (i = 0; i < 3; i += 1) {\n      dictionary[i] = i;\n    }\n    \n    bits = 0;\n    maxpower = Math.pow(2,2);\n    power=1;\n    while (power!=maxpower) {\n      resb = data.val & data.position;\n      data.position >>= 1;\n      if (data.position == 0) {\n        data.position = 32768;\n        data.val = data.string.charCodeAt(data.index++);\n      }\n      bits |= (resb>0 ? 1 : 0) * power;\n      power <<= 1;\n    }\n    \n    switch (next = bits) {\n      case 0: \n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = 32768;\n              data.val = data.string.charCodeAt(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 1: \n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = 32768;\n              data.val = data.string.charCodeAt(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 2: \n        return \"\";\n    }\n    dictionary[3] = c;\n    w = result = c;\n    while (true) {\n      if (data.index > data.string.length) {\n        return \"\";\n      }\n      \n      bits = 0;\n      maxpower = Math.pow(2,numBits);\n      power=1;\n      while (power!=maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position == 0) {\n          data.position = 32768;\n          data.val = data.string.charCodeAt(data.index++);\n        }\n        bits |= (resb>0 ? 1 : 0) * power;\n        power <<= 1;\n      }\n\n      switch (c = bits) {\n        case 0: \n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = 32768;\n              data.val = data.string.charCodeAt(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 1: \n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = 32768;\n              data.val = data.string.charCodeAt(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 2: \n          return result;\n      }\n      \n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n      \n      if (dictionary[c]) {\n        entry = dictionary[c];\n      } else {\n        if (c === dictSize) {\n          entry = w + w.charAt(0);\n        } else {\n          return null;\n        }\n      }\n      result += entry;\n      \n      // Add w+entry[0] to the dictionary.\n      dictionary[dictSize++] = w + entry.charAt(0);\n      enlargeIn--;\n      \n      w = entry;\n      \n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n      \n    }\n  }\n};\n\nif( typeof module !== 'undefined' && module != null ) {\n  module.exports = LZString\n}\n","//! moment.js\n//! version : 2.9.0\n//! authors : Tim Wood, Iskren Chernev, Moment.js contributors\n//! license : MIT\n//! momentjs.com\n\n(function (undefined) {\n    /************************************\n        Constants\n    ************************************/\n\n    var moment,\n        VERSION = '2.9.0',\n        // the global-scope this is NOT the global object in Node.js\n        globalScope = (typeof global !== 'undefined' && (typeof window === 'undefined' || window === global.window)) ? global : this,\n        oldGlobalMoment,\n        round = Math.round,\n        hasOwnProperty = Object.prototype.hasOwnProperty,\n        i,\n\n        YEAR = 0,\n        MONTH = 1,\n        DATE = 2,\n        HOUR = 3,\n        MINUTE = 4,\n        SECOND = 5,\n        MILLISECOND = 6,\n\n        // internal storage for locale config files\n        locales = {},\n\n        // extra moment internal properties (plugins register props here)\n        momentProperties = [],\n\n        // check for nodeJS\n        hasModule = (typeof module !== 'undefined' && module && module.exports),\n\n        // ASP.NET json date format regex\n        aspNetJsonRegex = /^\\/?Date\\((\\-?\\d+)/i,\n        aspNetTimeSpanJsonRegex = /(\\-)?(?:(\\d*)\\.)?(\\d+)\\:(\\d+)(?:\\:(\\d+)\\.?(\\d{3})?)?/,\n\n        // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\n        // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\n        isoDurationRegex = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,\n\n        // format tokens\n        formattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,\n        localFormattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g,\n\n        // parsing token regexes\n        parseTokenOneOrTwoDigits = /\\d\\d?/, // 0 - 99\n        parseTokenOneToThreeDigits = /\\d{1,3}/, // 0 - 999\n        parseTokenOneToFourDigits = /\\d{1,4}/, // 0 - 9999\n        parseTokenOneToSixDigits = /[+\\-]?\\d{1,6}/, // -999,999 - 999,999\n        parseTokenDigits = /\\d+/, // nonzero number of digits\n        parseTokenWord = /[0-9]*['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+|[\\u0600-\\u06FF\\/]+(\\s*?[\\u0600-\\u06FF]+){1,2}/i, // any word (or two) characters or numbers including two/three word month in arabic.\n        parseTokenTimezone = /Z|[\\+\\-]\\d\\d:?\\d\\d/gi, // +00:00 -00:00 +0000 -0000 or Z\n        parseTokenT = /T/i, // T (ISO separator)\n        parseTokenOffsetMs = /[\\+\\-]?\\d+/, // 1234567890123\n        parseTokenTimestampMs = /[\\+\\-]?\\d+(\\.\\d{1,3})?/, // 123456789 123456789.123\n\n        //strict parsing regexes\n        parseTokenOneDigit = /\\d/, // 0 - 9\n        parseTokenTwoDigits = /\\d\\d/, // 00 - 99\n        parseTokenThreeDigits = /\\d{3}/, // 000 - 999\n        parseTokenFourDigits = /\\d{4}/, // 0000 - 9999\n        parseTokenSixDigits = /[+-]?\\d{6}/, // -999,999 - 999,999\n        parseTokenSignedNumber = /[+-]?\\d+/, // -inf - inf\n\n        // iso 8601 regex\n        // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)\n        isoRegex = /^\\s*(?:[+-]\\d{6}|\\d{4})-(?:(\\d\\d-\\d\\d)|(W\\d\\d$)|(W\\d\\d-\\d)|(\\d\\d\\d))((T| )(\\d\\d(:\\d\\d(:\\d\\d(\\.\\d+)?)?)?)?([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,\n\n        isoFormat = 'YYYY-MM-DDTHH:mm:ssZ',\n\n        isoDates = [\n            ['YYYYYY-MM-DD', /[+-]\\d{6}-\\d{2}-\\d{2}/],\n            ['YYYY-MM-DD', /\\d{4}-\\d{2}-\\d{2}/],\n            ['GGGG-[W]WW-E', /\\d{4}-W\\d{2}-\\d/],\n            ['GGGG-[W]WW', /\\d{4}-W\\d{2}/],\n            ['YYYY-DDD', /\\d{4}-\\d{3}/]\n        ],\n\n        // iso time formats and regexes\n        isoTimes = [\n            ['HH:mm:ss.SSSS', /(T| )\\d\\d:\\d\\d:\\d\\d\\.\\d+/],\n            ['HH:mm:ss', /(T| )\\d\\d:\\d\\d:\\d\\d/],\n            ['HH:mm', /(T| )\\d\\d:\\d\\d/],\n            ['HH', /(T| )\\d\\d/]\n        ],\n\n        // timezone chunker '+10:00' > ['10', '00'] or '-1530' > ['-', '15', '30']\n        parseTimezoneChunker = /([\\+\\-]|\\d\\d)/gi,\n\n        // getter and setter names\n        proxyGettersAndSetters = 'Date|Hours|Minutes|Seconds|Milliseconds'.split('|'),\n        unitMillisecondFactors = {\n            'Milliseconds' : 1,\n            'Seconds' : 1e3,\n            'Minutes' : 6e4,\n            'Hours' : 36e5,\n            'Days' : 864e5,\n            'Months' : 2592e6,\n            'Years' : 31536e6\n        },\n\n        unitAliases = {\n            ms : 'millisecond',\n            s : 'second',\n            m : 'minute',\n            h : 'hour',\n            d : 'day',\n            D : 'date',\n            w : 'week',\n            W : 'isoWeek',\n            M : 'month',\n            Q : 'quarter',\n            y : 'year',\n            DDD : 'dayOfYear',\n            e : 'weekday',\n            E : 'isoWeekday',\n            gg: 'weekYear',\n            GG: 'isoWeekYear'\n        },\n\n        camelFunctions = {\n            dayofyear : 'dayOfYear',\n            isoweekday : 'isoWeekday',\n            isoweek : 'isoWeek',\n            weekyear : 'weekYear',\n            isoweekyear : 'isoWeekYear'\n        },\n\n        // format function strings\n        formatFunctions = {},\n\n        // default relative time thresholds\n        relativeTimeThresholds = {\n            s: 45,  // seconds to minute\n            m: 45,  // minutes to hour\n            h: 22,  // hours to day\n            d: 26,  // days to month\n            M: 11   // months to year\n        },\n\n        // tokens to ordinalize and pad\n        ordinalizeTokens = 'DDD w W M D d'.split(' '),\n        paddedTokens = 'M D H h m s w W'.split(' '),\n\n        formatTokenFunctions = {\n            M    : function () {\n                return this.month() + 1;\n            },\n            MMM  : function (format) {\n                return this.localeData().monthsShort(this, format);\n            },\n            MMMM : function (format) {\n                return this.localeData().months(this, format);\n            },\n            D    : function () {\n                return this.date();\n            },\n            DDD  : function () {\n                return this.dayOfYear();\n            },\n            d    : function () {\n                return this.day();\n            },\n            dd   : function (format) {\n                return this.localeData().weekdaysMin(this, format);\n            },\n            ddd  : function (format) {\n                return this.localeData().weekdaysShort(this, format);\n            },\n            dddd : function (format) {\n                return this.localeData().weekdays(this, format);\n            },\n            w    : function () {\n                return this.week();\n            },\n            W    : function () {\n                return this.isoWeek();\n            },\n            YY   : function () {\n                return leftZeroFill(this.year() % 100, 2);\n            },\n            YYYY : function () {\n                return leftZeroFill(this.year(), 4);\n            },\n            YYYYY : function () {\n                return leftZeroFill(this.year(), 5);\n            },\n            YYYYYY : function () {\n                var y = this.year(), sign = y >= 0 ? '+' : '-';\n                return sign + leftZeroFill(Math.abs(y), 6);\n            },\n            gg   : function () {\n                return leftZeroFill(this.weekYear() % 100, 2);\n            },\n            gggg : function () {\n                return leftZeroFill(this.weekYear(), 4);\n            },\n            ggggg : function () {\n                return leftZeroFill(this.weekYear(), 5);\n            },\n            GG   : function () {\n                return leftZeroFill(this.isoWeekYear() % 100, 2);\n            },\n            GGGG : function () {\n                return leftZeroFill(this.isoWeekYear(), 4);\n            },\n            GGGGG : function () {\n                return leftZeroFill(this.isoWeekYear(), 5);\n            },\n            e : function () {\n                return this.weekday();\n            },\n            E : function () {\n                return this.isoWeekday();\n            },\n            a    : function () {\n                return this.localeData().meridiem(this.hours(), this.minutes(), true);\n            },\n            A    : function () {\n                return this.localeData().meridiem(this.hours(), this.minutes(), false);\n            },\n            H    : function () {\n                return this.hours();\n            },\n            h    : function () {\n                return this.hours() % 12 || 12;\n            },\n            m    : function () {\n                return this.minutes();\n            },\n            s    : function () {\n                return this.seconds();\n            },\n            S    : function () {\n                return toInt(this.milliseconds() / 100);\n            },\n            SS   : function () {\n                return leftZeroFill(toInt(this.milliseconds() / 10), 2);\n            },\n            SSS  : function () {\n                return leftZeroFill(this.milliseconds(), 3);\n            },\n            SSSS : function () {\n                return leftZeroFill(this.milliseconds(), 3);\n            },\n            Z    : function () {\n                var a = this.utcOffset(),\n                    b = '+';\n                if (a < 0) {\n                    a = -a;\n                    b = '-';\n                }\n                return b + leftZeroFill(toInt(a / 60), 2) + ':' + leftZeroFill(toInt(a) % 60, 2);\n            },\n            ZZ   : function () {\n                var a = this.utcOffset(),\n                    b = '+';\n                if (a < 0) {\n                    a = -a;\n                    b = '-';\n                }\n                return b + leftZeroFill(toInt(a / 60), 2) + leftZeroFill(toInt(a) % 60, 2);\n            },\n            z : function () {\n                return this.zoneAbbr();\n            },\n            zz : function () {\n                return this.zoneName();\n            },\n            x    : function () {\n                return this.valueOf();\n            },\n            X    : function () {\n                return this.unix();\n            },\n            Q : function () {\n                return this.quarter();\n            }\n        },\n\n        deprecations = {},\n\n        lists = ['months', 'monthsShort', 'weekdays', 'weekdaysShort', 'weekdaysMin'],\n\n        updateInProgress = false;\n\n    // Pick the first defined of two or three arguments. dfl comes from\n    // default.\n    function dfl(a, b, c) {\n        switch (arguments.length) {\n            case 2: return a != null ? a : b;\n            case 3: return a != null ? a : b != null ? b : c;\n            default: throw new Error('Implement me');\n        }\n    }\n\n    function hasOwnProp(a, b) {\n        return hasOwnProperty.call(a, b);\n    }\n\n    function defaultParsingFlags() {\n        // We need to deep clone this object, and es5 standard is not very\n        // helpful.\n        return {\n            empty : false,\n            unusedTokens : [],\n            unusedInput : [],\n            overflow : -2,\n            charsLeftOver : 0,\n            nullInput : false,\n            invalidMonth : null,\n            invalidFormat : false,\n            userInvalidated : false,\n            iso: false\n        };\n    }\n\n    function printMsg(msg) {\n        if (moment.suppressDeprecationWarnings === false &&\n                typeof console !== 'undefined' && console.warn) {\n            console.warn('Deprecation warning: ' + msg);\n        }\n    }\n\n    function deprecate(msg, fn) {\n        var firstTime = true;\n        return extend(function () {\n            if (firstTime) {\n                printMsg(msg);\n                firstTime = false;\n            }\n            return fn.apply(this, arguments);\n        }, fn);\n    }\n\n    function deprecateSimple(name, msg) {\n        if (!deprecations[name]) {\n            printMsg(msg);\n            deprecations[name] = true;\n        }\n    }\n\n    function padToken(func, count) {\n        return function (a) {\n            return leftZeroFill(func.call(this, a), count);\n        };\n    }\n    function ordinalizeToken(func, period) {\n        return function (a) {\n            return this.localeData().ordinal(func.call(this, a), period);\n        };\n    }\n\n    function monthDiff(a, b) {\n        // difference in months\n        var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),\n            // b is in (anchor - 1 month, anchor + 1 month)\n            anchor = a.clone().add(wholeMonthDiff, 'months'),\n            anchor2, adjust;\n\n        if (b - anchor < 0) {\n            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor - anchor2);\n        } else {\n            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor2 - anchor);\n        }\n\n        return -(wholeMonthDiff + adjust);\n    }\n\n    while (ordinalizeTokens.length) {\n        i = ordinalizeTokens.pop();\n        formatTokenFunctions[i + 'o'] = ordinalizeToken(formatTokenFunctions[i], i);\n    }\n    while (paddedTokens.length) {\n        i = paddedTokens.pop();\n        formatTokenFunctions[i + i] = padToken(formatTokenFunctions[i], 2);\n    }\n    formatTokenFunctions.DDDD = padToken(formatTokenFunctions.DDD, 3);\n\n\n    function meridiemFixWrap(locale, hour, meridiem) {\n        var isPm;\n\n        if (meridiem == null) {\n            // nothing to do\n            return hour;\n        }\n        if (locale.meridiemHour != null) {\n            return locale.meridiemHour(hour, meridiem);\n        } else if (locale.isPM != null) {\n            // Fallback\n            isPm = locale.isPM(meridiem);\n            if (isPm && hour < 12) {\n                hour += 12;\n            }\n            if (!isPm && hour === 12) {\n                hour = 0;\n            }\n            return hour;\n        } else {\n            // thie is not supposed to happen\n            return hour;\n        }\n    }\n\n    /************************************\n        Constructors\n    ************************************/\n\n    function Locale() {\n    }\n\n    // Moment prototype object\n    function Moment(config, skipOverflow) {\n        if (skipOverflow !== false) {\n            checkOverflow(config);\n        }\n        copyConfig(this, config);\n        this._d = new Date(+config._d);\n        // Prevent infinite loop in case updateOffset creates new moment\n        // objects.\n        if (updateInProgress === false) {\n            updateInProgress = true;\n            moment.updateOffset(this);\n            updateInProgress = false;\n        }\n    }\n\n    // Duration Constructor\n    function Duration(duration) {\n        var normalizedInput = normalizeObjectUnits(duration),\n            years = normalizedInput.year || 0,\n            quarters = normalizedInput.quarter || 0,\n            months = normalizedInput.month || 0,\n            weeks = normalizedInput.week || 0,\n            days = normalizedInput.day || 0,\n            hours = normalizedInput.hour || 0,\n            minutes = normalizedInput.minute || 0,\n            seconds = normalizedInput.second || 0,\n            milliseconds = normalizedInput.millisecond || 0;\n\n        // representation for dateAddRemove\n        this._milliseconds = +milliseconds +\n            seconds * 1e3 + // 1000\n            minutes * 6e4 + // 1000 * 60\n            hours * 36e5; // 1000 * 60 * 60\n        // Because of dateAddRemove treats 24 hours as different from a\n        // day when working around DST, we need to store them separately\n        this._days = +days +\n            weeks * 7;\n        // It is impossible translate months into days without knowing\n        // which months you are are talking about, so we have to store\n        // it separately.\n        this._months = +months +\n            quarters * 3 +\n            years * 12;\n\n        this._data = {};\n\n        this._locale = moment.localeData();\n\n        this._bubble();\n    }\n\n    /************************************\n        Helpers\n    ************************************/\n\n\n    function extend(a, b) {\n        for (var i in b) {\n            if (hasOwnProp(b, i)) {\n                a[i] = b[i];\n            }\n        }\n\n        if (hasOwnProp(b, 'toString')) {\n            a.toString = b.toString;\n        }\n\n        if (hasOwnProp(b, 'valueOf')) {\n            a.valueOf = b.valueOf;\n        }\n\n        return a;\n    }\n\n    function copyConfig(to, from) {\n        var i, prop, val;\n\n        if (typeof from._isAMomentObject !== 'undefined') {\n            to._isAMomentObject = from._isAMomentObject;\n        }\n        if (typeof from._i !== 'undefined') {\n            to._i = from._i;\n        }\n        if (typeof from._f !== 'undefined') {\n            to._f = from._f;\n        }\n        if (typeof from._l !== 'undefined') {\n            to._l = from._l;\n        }\n        if (typeof from._strict !== 'undefined') {\n            to._strict = from._strict;\n        }\n        if (typeof from._tzm !== 'undefined') {\n            to._tzm = from._tzm;\n        }\n        if (typeof from._isUTC !== 'undefined') {\n            to._isUTC = from._isUTC;\n        }\n        if (typeof from._offset !== 'undefined') {\n            to._offset = from._offset;\n        }\n        if (typeof from._pf !== 'undefined') {\n            to._pf = from._pf;\n        }\n        if (typeof from._locale !== 'undefined') {\n            to._locale = from._locale;\n        }\n\n        if (momentProperties.length > 0) {\n            for (i in momentProperties) {\n                prop = momentProperties[i];\n                val = from[prop];\n                if (typeof val !== 'undefined') {\n                    to[prop] = val;\n                }\n            }\n        }\n\n        return to;\n    }\n\n    function absRound(number) {\n        if (number < 0) {\n            return Math.ceil(number);\n        } else {\n            return Math.floor(number);\n        }\n    }\n\n    // left zero fill a number\n    // see http://jsperf.com/left-zero-filling for performance comparison\n    function leftZeroFill(number, targetLength, forceSign) {\n        var output = '' + Math.abs(number),\n            sign = number >= 0;\n\n        while (output.length < targetLength) {\n            output = '0' + output;\n        }\n        return (sign ? (forceSign ? '+' : '') : '-') + output;\n    }\n\n    function positiveMomentsDifference(base, other) {\n        var res = {milliseconds: 0, months: 0};\n\n        res.months = other.month() - base.month() +\n            (other.year() - base.year()) * 12;\n        if (base.clone().add(res.months, 'M').isAfter(other)) {\n            --res.months;\n        }\n\n        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));\n\n        return res;\n    }\n\n    function momentsDifference(base, other) {\n        var res;\n        other = makeAs(other, base);\n        if (base.isBefore(other)) {\n            res = positiveMomentsDifference(base, other);\n        } else {\n            res = positiveMomentsDifference(other, base);\n            res.milliseconds = -res.milliseconds;\n            res.months = -res.months;\n        }\n\n        return res;\n    }\n\n    // TODO: remove 'name' arg after deprecation is removed\n    function createAdder(direction, name) {\n        return function (val, period) {\n            var dur, tmp;\n            //invert the arguments, but complain about it\n            if (period !== null && !isNaN(+period)) {\n                deprecateSimple(name, 'moment().' + name  + '(period, number) is deprecated. Please use moment().' + name + '(number, period).');\n                tmp = val; val = period; period = tmp;\n            }\n\n            val = typeof val === 'string' ? +val : val;\n            dur = moment.duration(val, period);\n            addOrSubtractDurationFromMoment(this, dur, direction);\n            return this;\n        };\n    }\n\n    function addOrSubtractDurationFromMoment(mom, duration, isAdding, updateOffset) {\n        var milliseconds = duration._milliseconds,\n            days = duration._days,\n            months = duration._months;\n        updateOffset = updateOffset == null ? true : updateOffset;\n\n        if (milliseconds) {\n            mom._d.setTime(+mom._d + milliseconds * isAdding);\n        }\n        if (days) {\n            rawSetter(mom, 'Date', rawGetter(mom, 'Date') + days * isAdding);\n        }\n        if (months) {\n            rawMonthSetter(mom, rawGetter(mom, 'Month') + months * isAdding);\n        }\n        if (updateOffset) {\n            moment.updateOffset(mom, days || months);\n        }\n    }\n\n    // check if is an array\n    function isArray(input) {\n        return Object.prototype.toString.call(input) === '[object Array]';\n    }\n\n    function isDate(input) {\n        return Object.prototype.toString.call(input) === '[object Date]' ||\n            input instanceof Date;\n    }\n\n    // compare two arrays, return the number of differences\n    function compareArrays(array1, array2, dontConvert) {\n        var len = Math.min(array1.length, array2.length),\n            lengthDiff = Math.abs(array1.length - array2.length),\n            diffs = 0,\n            i;\n        for (i = 0; i < len; i++) {\n            if ((dontConvert && array1[i] !== array2[i]) ||\n                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {\n                diffs++;\n            }\n        }\n        return diffs + lengthDiff;\n    }\n\n    function normalizeUnits(units) {\n        if (units) {\n            var lowered = units.toLowerCase().replace(/(.)s$/, '$1');\n            units = unitAliases[units] || camelFunctions[lowered] || lowered;\n        }\n        return units;\n    }\n\n    function normalizeObjectUnits(inputObject) {\n        var normalizedInput = {},\n            normalizedProp,\n            prop;\n\n        for (prop in inputObject) {\n            if (hasOwnProp(inputObject, prop)) {\n                normalizedProp = normalizeUnits(prop);\n                if (normalizedProp) {\n                    normalizedInput[normalizedProp] = inputObject[prop];\n                }\n            }\n        }\n\n        return normalizedInput;\n    }\n\n    function makeList(field) {\n        var count, setter;\n\n        if (field.indexOf('week') === 0) {\n            count = 7;\n            setter = 'day';\n        }\n        else if (field.indexOf('month') === 0) {\n            count = 12;\n            setter = 'month';\n        }\n        else {\n            return;\n        }\n\n        moment[field] = function (format, index) {\n            var i, getter,\n                method = moment._locale[field],\n                results = [];\n\n            if (typeof format === 'number') {\n                index = format;\n                format = undefined;\n            }\n\n            getter = function (i) {\n                var m = moment().utc().set(setter, i);\n                return method.call(moment._locale, m, format || '');\n            };\n\n            if (index != null) {\n                return getter(index);\n            }\n            else {\n                for (i = 0; i < count; i++) {\n                    results.push(getter(i));\n                }\n                return results;\n            }\n        };\n    }\n\n    function toInt(argumentForCoercion) {\n        var coercedNumber = +argumentForCoercion,\n            value = 0;\n\n        if (coercedNumber !== 0 && isFinite(coercedNumber)) {\n            if (coercedNumber >= 0) {\n                value = Math.floor(coercedNumber);\n            } else {\n                value = Math.ceil(coercedNumber);\n            }\n        }\n\n        return value;\n    }\n\n    function daysInMonth(year, month) {\n        return new Date(Date.UTC(year, month + 1, 0)).getUTCDate();\n    }\n\n    function weeksInYear(year, dow, doy) {\n        return weekOfYear(moment([year, 11, 31 + dow - doy]), dow, doy).week;\n    }\n\n    function daysInYear(year) {\n        return isLeapYear(year) ? 366 : 365;\n    }\n\n    function isLeapYear(year) {\n        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n    }\n\n    function checkOverflow(m) {\n        var overflow;\n        if (m._a && m._pf.overflow === -2) {\n            overflow =\n                m._a[MONTH] < 0 || m._a[MONTH] > 11 ? MONTH :\n                m._a[DATE] < 1 || m._a[DATE] > daysInMonth(m._a[YEAR], m._a[MONTH]) ? DATE :\n                m._a[HOUR] < 0 || m._a[HOUR] > 24 ||\n                    (m._a[HOUR] === 24 && (m._a[MINUTE] !== 0 ||\n                                           m._a[SECOND] !== 0 ||\n                                           m._a[MILLISECOND] !== 0)) ? HOUR :\n                m._a[MINUTE] < 0 || m._a[MINUTE] > 59 ? MINUTE :\n                m._a[SECOND] < 0 || m._a[SECOND] > 59 ? SECOND :\n                m._a[MILLISECOND] < 0 || m._a[MILLISECOND] > 999 ? MILLISECOND :\n                -1;\n\n            if (m._pf._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {\n                overflow = DATE;\n            }\n\n            m._pf.overflow = overflow;\n        }\n    }\n\n    function isValid(m) {\n        if (m._isValid == null) {\n            m._isValid = !isNaN(m._d.getTime()) &&\n                m._pf.overflow < 0 &&\n                !m._pf.empty &&\n                !m._pf.invalidMonth &&\n                !m._pf.nullInput &&\n                !m._pf.invalidFormat &&\n                !m._pf.userInvalidated;\n\n            if (m._strict) {\n                m._isValid = m._isValid &&\n                    m._pf.charsLeftOver === 0 &&\n                    m._pf.unusedTokens.length === 0 &&\n                    m._pf.bigHour === undefined;\n            }\n        }\n        return m._isValid;\n    }\n\n    function normalizeLocale(key) {\n        return key ? key.toLowerCase().replace('_', '-') : key;\n    }\n\n    // pick the locale from the array\n    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\n    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\n    function chooseLocale(names) {\n        var i = 0, j, next, locale, split;\n\n        while (i < names.length) {\n            split = normalizeLocale(names[i]).split('-');\n            j = split.length;\n            next = normalizeLocale(names[i + 1]);\n            next = next ? next.split('-') : null;\n            while (j > 0) {\n                locale = loadLocale(split.slice(0, j).join('-'));\n                if (locale) {\n                    return locale;\n                }\n                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {\n                    //the next array item is better than a shallower substring of this one\n                    break;\n                }\n                j--;\n            }\n            i++;\n        }\n        return null;\n    }\n\n    function loadLocale(name) {\n        var oldLocale = null;\n        if (!locales[name] && hasModule) {\n            try {\n                oldLocale = moment.locale();\n                require('./locale/' + name);\n                // because defineLocale currently also sets the global locale, we want to undo that for lazy loaded locales\n                moment.locale(oldLocale);\n            } catch (e) { }\n        }\n        return locales[name];\n    }\n\n    // Return a moment from input, that is local/utc/utcOffset equivalent to\n    // model.\n    function makeAs(input, model) {\n        var res, diff;\n        if (model._isUTC) {\n            res = model.clone();\n            diff = (moment.isMoment(input) || isDate(input) ?\n                    +input : +moment(input)) - (+res);\n            // Use low-level api, because this fn is low-level api.\n            res._d.setTime(+res._d + diff);\n            moment.updateOffset(res, false);\n            return res;\n        } else {\n            return moment(input).local();\n        }\n    }\n\n    /************************************\n        Locale\n    ************************************/\n\n\n    extend(Locale.prototype, {\n\n        set : function (config) {\n            var prop, i;\n            for (i in config) {\n                prop = config[i];\n                if (typeof prop === 'function') {\n                    this[i] = prop;\n                } else {\n                    this['_' + i] = prop;\n                }\n            }\n            // Lenient ordinal parsing accepts just a number in addition to\n            // number + (possibly) stuff coming from _ordinalParseLenient.\n            this._ordinalParseLenient = new RegExp(this._ordinalParse.source + '|' + /\\d{1,2}/.source);\n        },\n\n        _months : 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),\n        months : function (m) {\n            return this._months[m.month()];\n        },\n\n        _monthsShort : 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),\n        monthsShort : function (m) {\n            return this._monthsShort[m.month()];\n        },\n\n        monthsParse : function (monthName, format, strict) {\n            var i, mom, regex;\n\n            if (!this._monthsParse) {\n                this._monthsParse = [];\n                this._longMonthsParse = [];\n                this._shortMonthsParse = [];\n            }\n\n            for (i = 0; i < 12; i++) {\n                // make the regex if we don't have it already\n                mom = moment.utc([2000, i]);\n                if (strict && !this._longMonthsParse[i]) {\n                    this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');\n                    this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');\n                }\n                if (!strict && !this._monthsParse[i]) {\n                    regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');\n                    this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');\n                }\n                // test the regex\n                if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {\n                    return i;\n                } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {\n                    return i;\n                } else if (!strict && this._monthsParse[i].test(monthName)) {\n                    return i;\n                }\n            }\n        },\n\n        _weekdays : 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),\n        weekdays : function (m) {\n            return this._weekdays[m.day()];\n        },\n\n        _weekdaysShort : 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),\n        weekdaysShort : function (m) {\n            return this._weekdaysShort[m.day()];\n        },\n\n        _weekdaysMin : 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),\n        weekdaysMin : function (m) {\n            return this._weekdaysMin[m.day()];\n        },\n\n        weekdaysParse : function (weekdayName) {\n            var i, mom, regex;\n\n            if (!this._weekdaysParse) {\n                this._weekdaysParse = [];\n            }\n\n            for (i = 0; i < 7; i++) {\n                // make the regex if we don't have it already\n                if (!this._weekdaysParse[i]) {\n                    mom = moment([2000, 1]).day(i);\n                    regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');\n                    this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');\n                }\n                // test the regex\n                if (this._weekdaysParse[i].test(weekdayName)) {\n                    return i;\n                }\n            }\n        },\n\n        _longDateFormat : {\n            LTS : 'h:mm:ss A',\n            LT : 'h:mm A',\n            L : 'MM/DD/YYYY',\n            LL : 'MMMM D, YYYY',\n            LLL : 'MMMM D, YYYY LT',\n            LLLL : 'dddd, MMMM D, YYYY LT'\n        },\n        longDateFormat : function (key) {\n            var output = this._longDateFormat[key];\n            if (!output && this._longDateFormat[key.toUpperCase()]) {\n                output = this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g, function (val) {\n                    return val.slice(1);\n                });\n                this._longDateFormat[key] = output;\n            }\n            return output;\n        },\n\n        isPM : function (input) {\n            // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\n            // Using charAt should be more compatible.\n            return ((input + '').toLowerCase().charAt(0) === 'p');\n        },\n\n        _meridiemParse : /[ap]\\.?m?\\.?/i,\n        meridiem : function (hours, minutes, isLower) {\n            if (hours > 11) {\n                return isLower ? 'pm' : 'PM';\n            } else {\n                return isLower ? 'am' : 'AM';\n            }\n        },\n\n\n        _calendar : {\n            sameDay : '[Today at] LT',\n            nextDay : '[Tomorrow at] LT',\n            nextWeek : 'dddd [at] LT',\n            lastDay : '[Yesterday at] LT',\n            lastWeek : '[Last] dddd [at] LT',\n            sameElse : 'L'\n        },\n        calendar : function (key, mom, now) {\n            var output = this._calendar[key];\n            return typeof output === 'function' ? output.apply(mom, [now]) : output;\n        },\n\n        _relativeTime : {\n            future : 'in %s',\n            past : '%s ago',\n            s : 'a few seconds',\n            m : 'a minute',\n            mm : '%d minutes',\n            h : 'an hour',\n            hh : '%d hours',\n            d : 'a day',\n            dd : '%d days',\n            M : 'a month',\n            MM : '%d months',\n            y : 'a year',\n            yy : '%d years'\n        },\n\n        relativeTime : function (number, withoutSuffix, string, isFuture) {\n            var output = this._relativeTime[string];\n            return (typeof output === 'function') ?\n                output(number, withoutSuffix, string, isFuture) :\n                output.replace(/%d/i, number);\n        },\n\n        pastFuture : function (diff, output) {\n            var format = this._relativeTime[diff > 0 ? 'future' : 'past'];\n            return typeof format === 'function' ? format(output) : format.replace(/%s/i, output);\n        },\n\n        ordinal : function (number) {\n            return this._ordinal.replace('%d', number);\n        },\n        _ordinal : '%d',\n        _ordinalParse : /\\d{1,2}/,\n\n        preparse : function (string) {\n            return string;\n        },\n\n        postformat : function (string) {\n            return string;\n        },\n\n        week : function (mom) {\n            return weekOfYear(mom, this._week.dow, this._week.doy).week;\n        },\n\n        _week : {\n            dow : 0, // Sunday is the first day of the week.\n            doy : 6  // The week that contains Jan 1st is the first week of the year.\n        },\n\n        firstDayOfWeek : function () {\n            return this._week.dow;\n        },\n\n        firstDayOfYear : function () {\n            return this._week.doy;\n        },\n\n        _invalidDate: 'Invalid date',\n        invalidDate: function () {\n            return this._invalidDate;\n        }\n    });\n\n    /************************************\n        Formatting\n    ************************************/\n\n\n    function removeFormattingTokens(input) {\n        if (input.match(/\\[[\\s\\S]/)) {\n            return input.replace(/^\\[|\\]$/g, '');\n        }\n        return input.replace(/\\\\/g, '');\n    }\n\n    function makeFormatFunction(format) {\n        var array = format.match(formattingTokens), i, length;\n\n        for (i = 0, length = array.length; i < length; i++) {\n            if (formatTokenFunctions[array[i]]) {\n                array[i] = formatTokenFunctions[array[i]];\n            } else {\n                array[i] = removeFormattingTokens(array[i]);\n            }\n        }\n\n        return function (mom) {\n            var output = '';\n            for (i = 0; i < length; i++) {\n                output += array[i] instanceof Function ? array[i].call(mom, format) : array[i];\n            }\n            return output;\n        };\n    }\n\n    // format date using native date object\n    function formatMoment(m, format) {\n        if (!m.isValid()) {\n            return m.localeData().invalidDate();\n        }\n\n        format = expandFormat(format, m.localeData());\n\n        if (!formatFunctions[format]) {\n            formatFunctions[format] = makeFormatFunction(format);\n        }\n\n        return formatFunctions[format](m);\n    }\n\n    function expandFormat(format, locale) {\n        var i = 5;\n\n        function replaceLongDateFormatTokens(input) {\n            return locale.longDateFormat(input) || input;\n        }\n\n        localFormattingTokens.lastIndex = 0;\n        while (i >= 0 && localFormattingTokens.test(format)) {\n            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);\n            localFormattingTokens.lastIndex = 0;\n            i -= 1;\n        }\n\n        return format;\n    }\n\n\n    /************************************\n        Parsing\n    ************************************/\n\n\n    // get the regex to find the next token\n    function getParseRegexForToken(token, config) {\n        var a, strict = config._strict;\n        switch (token) {\n        case 'Q':\n            return parseTokenOneDigit;\n        case 'DDDD':\n            return parseTokenThreeDigits;\n        case 'YYYY':\n        case 'GGGG':\n        case 'gggg':\n            return strict ? parseTokenFourDigits : parseTokenOneToFourDigits;\n        case 'Y':\n        case 'G':\n        case 'g':\n            return parseTokenSignedNumber;\n        case 'YYYYYY':\n        case 'YYYYY':\n        case 'GGGGG':\n        case 'ggggg':\n            return strict ? parseTokenSixDigits : parseTokenOneToSixDigits;\n        case 'S':\n            if (strict) {\n                return parseTokenOneDigit;\n            }\n            /* falls through */\n        case 'SS':\n            if (strict) {\n                return parseTokenTwoDigits;\n            }\n            /* falls through */\n        case 'SSS':\n            if (strict) {\n                return parseTokenThreeDigits;\n            }\n            /* falls through */\n        case 'DDD':\n            return parseTokenOneToThreeDigits;\n        case 'MMM':\n        case 'MMMM':\n        case 'dd':\n        case 'ddd':\n        case 'dddd':\n            return parseTokenWord;\n        case 'a':\n        case 'A':\n            return config._locale._meridiemParse;\n        case 'x':\n            return parseTokenOffsetMs;\n        case 'X':\n            return parseTokenTimestampMs;\n        case 'Z':\n        case 'ZZ':\n            return parseTokenTimezone;\n        case 'T':\n            return parseTokenT;\n        case 'SSSS':\n            return parseTokenDigits;\n        case 'MM':\n        case 'DD':\n        case 'YY':\n        case 'GG':\n        case 'gg':\n        case 'HH':\n        case 'hh':\n        case 'mm':\n        case 'ss':\n        case 'ww':\n        case 'WW':\n            return strict ? parseTokenTwoDigits : parseTokenOneOrTwoDigits;\n        case 'M':\n        case 'D':\n        case 'd':\n        case 'H':\n        case 'h':\n        case 'm':\n        case 's':\n        case 'w':\n        case 'W':\n        case 'e':\n        case 'E':\n            return parseTokenOneOrTwoDigits;\n        case 'Do':\n            return strict ? config._locale._ordinalParse : config._locale._ordinalParseLenient;\n        default :\n            a = new RegExp(regexpEscape(unescapeFormat(token.replace('\\\\', '')), 'i'));\n            return a;\n        }\n    }\n\n    function utcOffsetFromString(string) {\n        string = string || '';\n        var possibleTzMatches = (string.match(parseTokenTimezone) || []),\n            tzChunk = possibleTzMatches[possibleTzMatches.length - 1] || [],\n            parts = (tzChunk + '').match(parseTimezoneChunker) || ['-', 0, 0],\n            minutes = +(parts[1] * 60) + toInt(parts[2]);\n\n        return parts[0] === '+' ? minutes : -minutes;\n    }\n\n    // function to convert string input to date\n    function addTimeToArrayFromToken(token, input, config) {\n        var a, datePartArray = config._a;\n\n        switch (token) {\n        // QUARTER\n        case 'Q':\n            if (input != null) {\n                datePartArray[MONTH] = (toInt(input) - 1) * 3;\n            }\n            break;\n        // MONTH\n        case 'M' : // fall through to MM\n        case 'MM' :\n            if (input != null) {\n                datePartArray[MONTH] = toInt(input) - 1;\n            }\n            break;\n        case 'MMM' : // fall through to MMMM\n        case 'MMMM' :\n            a = config._locale.monthsParse(input, token, config._strict);\n            // if we didn't find a month name, mark the date as invalid.\n            if (a != null) {\n                datePartArray[MONTH] = a;\n            } else {\n                config._pf.invalidMonth = input;\n            }\n            break;\n        // DAY OF MONTH\n        case 'D' : // fall through to DD\n        case 'DD' :\n            if (input != null) {\n                datePartArray[DATE] = toInt(input);\n            }\n            break;\n        case 'Do' :\n            if (input != null) {\n                datePartArray[DATE] = toInt(parseInt(\n                            input.match(/\\d{1,2}/)[0], 10));\n            }\n            break;\n        // DAY OF YEAR\n        case 'DDD' : // fall through to DDDD\n        case 'DDDD' :\n            if (input != null) {\n                config._dayOfYear = toInt(input);\n            }\n\n            break;\n        // YEAR\n        case 'YY' :\n            datePartArray[YEAR] = moment.parseTwoDigitYear(input);\n            break;\n        case 'YYYY' :\n        case 'YYYYY' :\n        case 'YYYYYY' :\n            datePartArray[YEAR] = toInt(input);\n            break;\n        // AM / PM\n        case 'a' : // fall through to A\n        case 'A' :\n            config._meridiem = input;\n            // config._isPm = config._locale.isPM(input);\n            break;\n        // HOUR\n        case 'h' : // fall through to hh\n        case 'hh' :\n            config._pf.bigHour = true;\n            /* falls through */\n        case 'H' : // fall through to HH\n        case 'HH' :\n            datePartArray[HOUR] = toInt(input);\n            break;\n        // MINUTE\n        case 'm' : // fall through to mm\n        case 'mm' :\n            datePartArray[MINUTE] = toInt(input);\n            break;\n        // SECOND\n        case 's' : // fall through to ss\n        case 'ss' :\n            datePartArray[SECOND] = toInt(input);\n            break;\n        // MILLISECOND\n        case 'S' :\n        case 'SS' :\n        case 'SSS' :\n        case 'SSSS' :\n            datePartArray[MILLISECOND] = toInt(('0.' + input) * 1000);\n            break;\n        // UNIX OFFSET (MILLISECONDS)\n        case 'x':\n            config._d = new Date(toInt(input));\n            break;\n        // UNIX TIMESTAMP WITH MS\n        case 'X':\n            config._d = new Date(parseFloat(input) * 1000);\n            break;\n        // TIMEZONE\n        case 'Z' : // fall through to ZZ\n        case 'ZZ' :\n            config._useUTC = true;\n            config._tzm = utcOffsetFromString(input);\n            break;\n        // WEEKDAY - human\n        case 'dd':\n        case 'ddd':\n        case 'dddd':\n            a = config._locale.weekdaysParse(input);\n            // if we didn't get a weekday name, mark the date as invalid\n            if (a != null) {\n                config._w = config._w || {};\n                config._w['d'] = a;\n            } else {\n                config._pf.invalidWeekday = input;\n            }\n            break;\n        // WEEK, WEEK DAY - numeric\n        case 'w':\n        case 'ww':\n        case 'W':\n        case 'WW':\n        case 'd':\n        case 'e':\n        case 'E':\n            token = token.substr(0, 1);\n            /* falls through */\n        case 'gggg':\n        case 'GGGG':\n        case 'GGGGG':\n            token = token.substr(0, 2);\n            if (input) {\n                config._w = config._w || {};\n                config._w[token] = toInt(input);\n            }\n            break;\n        case 'gg':\n        case 'GG':\n            config._w = config._w || {};\n            config._w[token] = moment.parseTwoDigitYear(input);\n        }\n    }\n\n    function dayOfYearFromWeekInfo(config) {\n        var w, weekYear, week, weekday, dow, doy, temp;\n\n        w = config._w;\n        if (w.GG != null || w.W != null || w.E != null) {\n            dow = 1;\n            doy = 4;\n\n            // TODO: We need to take the current isoWeekYear, but that depends on\n            // how we interpret now (local, utc, fixed offset). So create\n            // a now version of current config (take local/utc/offset flags, and\n            // create now).\n            weekYear = dfl(w.GG, config._a[YEAR], weekOfYear(moment(), 1, 4).year);\n            week = dfl(w.W, 1);\n            weekday = dfl(w.E, 1);\n        } else {\n            dow = config._locale._week.dow;\n            doy = config._locale._week.doy;\n\n            weekYear = dfl(w.gg, config._a[YEAR], weekOfYear(moment(), dow, doy).year);\n            week = dfl(w.w, 1);\n\n            if (w.d != null) {\n                // weekday -- low day numbers are considered next week\n                weekday = w.d;\n                if (weekday < dow) {\n                    ++week;\n                }\n            } else if (w.e != null) {\n                // local weekday -- counting starts from begining of week\n                weekday = w.e + dow;\n            } else {\n                // default to begining of week\n                weekday = dow;\n            }\n        }\n        temp = dayOfYearFromWeeks(weekYear, week, weekday, doy, dow);\n\n        config._a[YEAR] = temp.year;\n        config._dayOfYear = temp.dayOfYear;\n    }\n\n    // convert an array to a date.\n    // the array should mirror the parameters below\n    // note: all values past the year are optional and will default to the lowest possible value.\n    // [year, month, day , hour, minute, second, millisecond]\n    function dateFromConfig(config) {\n        var i, date, input = [], currentDate, yearToUse;\n\n        if (config._d) {\n            return;\n        }\n\n        currentDate = currentDateArray(config);\n\n        //compute day of the year from weeks and weekdays\n        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {\n            dayOfYearFromWeekInfo(config);\n        }\n\n        //if the day of the year is set, figure out what it is\n        if (config._dayOfYear) {\n            yearToUse = dfl(config._a[YEAR], currentDate[YEAR]);\n\n            if (config._dayOfYear > daysInYear(yearToUse)) {\n                config._pf._overflowDayOfYear = true;\n            }\n\n            date = makeUTCDate(yearToUse, 0, config._dayOfYear);\n            config._a[MONTH] = date.getUTCMonth();\n            config._a[DATE] = date.getUTCDate();\n        }\n\n        // Default to current date.\n        // * if no year, month, day of month are given, default to today\n        // * if day of month is given, default month and year\n        // * if month is given, default only year\n        // * if year is given, don't default anything\n        for (i = 0; i < 3 && config._a[i] == null; ++i) {\n            config._a[i] = input[i] = currentDate[i];\n        }\n\n        // Zero out whatever was not defaulted, including time\n        for (; i < 7; i++) {\n            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];\n        }\n\n        // Check for 24:00:00.000\n        if (config._a[HOUR] === 24 &&\n                config._a[MINUTE] === 0 &&\n                config._a[SECOND] === 0 &&\n                config._a[MILLISECOND] === 0) {\n            config._nextDay = true;\n            config._a[HOUR] = 0;\n        }\n\n        config._d = (config._useUTC ? makeUTCDate : makeDate).apply(null, input);\n        // Apply timezone offset from input. The actual utcOffset can be changed\n        // with parseZone.\n        if (config._tzm != null) {\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n        }\n\n        if (config._nextDay) {\n            config._a[HOUR] = 24;\n        }\n    }\n\n    function dateFromObject(config) {\n        var normalizedInput;\n\n        if (config._d) {\n            return;\n        }\n\n        normalizedInput = normalizeObjectUnits(config._i);\n        config._a = [\n            normalizedInput.year,\n            normalizedInput.month,\n            normalizedInput.day || normalizedInput.date,\n            normalizedInput.hour,\n            normalizedInput.minute,\n            normalizedInput.second,\n            normalizedInput.millisecond\n        ];\n\n        dateFromConfig(config);\n    }\n\n    function currentDateArray(config) {\n        var now = new Date();\n        if (config._useUTC) {\n            return [\n                now.getUTCFullYear(),\n                now.getUTCMonth(),\n                now.getUTCDate()\n            ];\n        } else {\n            return [now.getFullYear(), now.getMonth(), now.getDate()];\n        }\n    }\n\n    // date from string and format string\n    function makeDateFromStringAndFormat(config) {\n        if (config._f === moment.ISO_8601) {\n            parseISO(config);\n            return;\n        }\n\n        config._a = [];\n        config._pf.empty = true;\n\n        // This array is used to make a Date, either with `new Date` or `Date.UTC`\n        var string = '' + config._i,\n            i, parsedInput, tokens, token, skipped,\n            stringLength = string.length,\n            totalParsedInputLength = 0;\n\n        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];\n\n        for (i = 0; i < tokens.length; i++) {\n            token = tokens[i];\n            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];\n            if (parsedInput) {\n                skipped = string.substr(0, string.indexOf(parsedInput));\n                if (skipped.length > 0) {\n                    config._pf.unusedInput.push(skipped);\n                }\n                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);\n                totalParsedInputLength += parsedInput.length;\n            }\n            // don't parse if it's not a known token\n            if (formatTokenFunctions[token]) {\n                if (parsedInput) {\n                    config._pf.empty = false;\n                }\n                else {\n                    config._pf.unusedTokens.push(token);\n                }\n                addTimeToArrayFromToken(token, parsedInput, config);\n            }\n            else if (config._strict && !parsedInput) {\n                config._pf.unusedTokens.push(token);\n            }\n        }\n\n        // add remaining unparsed input length to the string\n        config._pf.charsLeftOver = stringLength - totalParsedInputLength;\n        if (string.length > 0) {\n            config._pf.unusedInput.push(string);\n        }\n\n        // clear _12h flag if hour is <= 12\n        if (config._pf.bigHour === true && config._a[HOUR] <= 12) {\n            config._pf.bigHour = undefined;\n        }\n        // handle meridiem\n        config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR],\n                config._meridiem);\n        dateFromConfig(config);\n        checkOverflow(config);\n    }\n\n    function unescapeFormat(s) {\n        return s.replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g, function (matched, p1, p2, p3, p4) {\n            return p1 || p2 || p3 || p4;\n        });\n    }\n\n    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\n    function regexpEscape(s) {\n        return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n    }\n\n    // date from string and array of format strings\n    function makeDateFromStringAndArray(config) {\n        var tempConfig,\n            bestMoment,\n\n            scoreToBeat,\n            i,\n            currentScore;\n\n        if (config._f.length === 0) {\n            config._pf.invalidFormat = true;\n            config._d = new Date(NaN);\n            return;\n        }\n\n        for (i = 0; i < config._f.length; i++) {\n            currentScore = 0;\n            tempConfig = copyConfig({}, config);\n            if (config._useUTC != null) {\n                tempConfig._useUTC = config._useUTC;\n            }\n            tempConfig._pf = defaultParsingFlags();\n            tempConfig._f = config._f[i];\n            makeDateFromStringAndFormat(tempConfig);\n\n            if (!isValid(tempConfig)) {\n                continue;\n            }\n\n            // if there is any input that was not parsed add a penalty for that format\n            currentScore += tempConfig._pf.charsLeftOver;\n\n            //or tokens\n            currentScore += tempConfig._pf.unusedTokens.length * 10;\n\n            tempConfig._pf.score = currentScore;\n\n            if (scoreToBeat == null || currentScore < scoreToBeat) {\n                scoreToBeat = currentScore;\n                bestMoment = tempConfig;\n            }\n        }\n\n        extend(config, bestMoment || tempConfig);\n    }\n\n    // date from iso format\n    function parseISO(config) {\n        var i, l,\n            string = config._i,\n            match = isoRegex.exec(string);\n\n        if (match) {\n            config._pf.iso = true;\n            for (i = 0, l = isoDates.length; i < l; i++) {\n                if (isoDates[i][1].exec(string)) {\n                    // match[5] should be 'T' or undefined\n                    config._f = isoDates[i][0] + (match[6] || ' ');\n                    break;\n                }\n            }\n            for (i = 0, l = isoTimes.length; i < l; i++) {\n                if (isoTimes[i][1].exec(string)) {\n                    config._f += isoTimes[i][0];\n                    break;\n                }\n            }\n            if (string.match(parseTokenTimezone)) {\n                config._f += 'Z';\n            }\n            makeDateFromStringAndFormat(config);\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    // date from iso format or fallback\n    function makeDateFromString(config) {\n        parseISO(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n            moment.createFromInputFallback(config);\n        }\n    }\n\n    function map(arr, fn) {\n        var res = [], i;\n        for (i = 0; i < arr.length; ++i) {\n            res.push(fn(arr[i], i));\n        }\n        return res;\n    }\n\n    function makeDateFromInput(config) {\n        var input = config._i, matched;\n        if (input === undefined) {\n            config._d = new Date();\n        } else if (isDate(input)) {\n            config._d = new Date(+input);\n        } else if ((matched = aspNetJsonRegex.exec(input)) !== null) {\n            config._d = new Date(+matched[1]);\n        } else if (typeof input === 'string') {\n            makeDateFromString(config);\n        } else if (isArray(input)) {\n            config._a = map(input.slice(0), function (obj) {\n                return parseInt(obj, 10);\n            });\n            dateFromConfig(config);\n        } else if (typeof(input) === 'object') {\n            dateFromObject(config);\n        } else if (typeof(input) === 'number') {\n            // from milliseconds\n            config._d = new Date(input);\n        } else {\n            moment.createFromInputFallback(config);\n        }\n    }\n\n    function makeDate(y, m, d, h, M, s, ms) {\n        //can't just apply() to create a date:\n        //http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply\n        var date = new Date(y, m, d, h, M, s, ms);\n\n        //the date constructor doesn't accept years < 1970\n        if (y < 1970) {\n            date.setFullYear(y);\n        }\n        return date;\n    }\n\n    function makeUTCDate(y) {\n        var date = new Date(Date.UTC.apply(null, arguments));\n        if (y < 1970) {\n            date.setUTCFullYear(y);\n        }\n        return date;\n    }\n\n    function parseWeekday(input, locale) {\n        if (typeof input === 'string') {\n            if (!isNaN(input)) {\n                input = parseInt(input, 10);\n            }\n            else {\n                input = locale.weekdaysParse(input);\n                if (typeof input !== 'number') {\n                    return null;\n                }\n            }\n        }\n        return input;\n    }\n\n    /************************************\n        Relative Time\n    ************************************/\n\n\n    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\n    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {\n        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);\n    }\n\n    function relativeTime(posNegDuration, withoutSuffix, locale) {\n        var duration = moment.duration(posNegDuration).abs(),\n            seconds = round(duration.as('s')),\n            minutes = round(duration.as('m')),\n            hours = round(duration.as('h')),\n            days = round(duration.as('d')),\n            months = round(duration.as('M')),\n            years = round(duration.as('y')),\n\n            args = seconds < relativeTimeThresholds.s && ['s', seconds] ||\n                minutes === 1 && ['m'] ||\n                minutes < relativeTimeThresholds.m && ['mm', minutes] ||\n                hours === 1 && ['h'] ||\n                hours < relativeTimeThresholds.h && ['hh', hours] ||\n                days === 1 && ['d'] ||\n                days < relativeTimeThresholds.d && ['dd', days] ||\n                months === 1 && ['M'] ||\n                months < relativeTimeThresholds.M && ['MM', months] ||\n                years === 1 && ['y'] || ['yy', years];\n\n        args[2] = withoutSuffix;\n        args[3] = +posNegDuration > 0;\n        args[4] = locale;\n        return substituteTimeAgo.apply({}, args);\n    }\n\n\n    /************************************\n        Week of Year\n    ************************************/\n\n\n    // firstDayOfWeek       0 = sun, 6 = sat\n    //                      the day of the week that starts the week\n    //                      (usually sunday or monday)\n    // firstDayOfWeekOfYear 0 = sun, 6 = sat\n    //                      the first week is the week that contains the first\n    //                      of this day of the week\n    //                      (eg. ISO weeks use thursday (4))\n    function weekOfYear(mom, firstDayOfWeek, firstDayOfWeekOfYear) {\n        var end = firstDayOfWeekOfYear - firstDayOfWeek,\n            daysToDayOfWeek = firstDayOfWeekOfYear - mom.day(),\n            adjustedMoment;\n\n\n        if (daysToDayOfWeek > end) {\n            daysToDayOfWeek -= 7;\n        }\n\n        if (daysToDayOfWeek < end - 7) {\n            daysToDayOfWeek += 7;\n        }\n\n        adjustedMoment = moment(mom).add(daysToDayOfWeek, 'd');\n        return {\n            week: Math.ceil(adjustedMoment.dayOfYear() / 7),\n            year: adjustedMoment.year()\n        };\n    }\n\n    //http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\n    function dayOfYearFromWeeks(year, week, weekday, firstDayOfWeekOfYear, firstDayOfWeek) {\n        var d = makeUTCDate(year, 0, 1).getUTCDay(), daysToAdd, dayOfYear;\n\n        d = d === 0 ? 7 : d;\n        weekday = weekday != null ? weekday : firstDayOfWeek;\n        daysToAdd = firstDayOfWeek - d + (d > firstDayOfWeekOfYear ? 7 : 0) - (d < firstDayOfWeek ? 7 : 0);\n        dayOfYear = 7 * (week - 1) + (weekday - firstDayOfWeek) + daysToAdd + 1;\n\n        return {\n            year: dayOfYear > 0 ? year : year - 1,\n            dayOfYear: dayOfYear > 0 ?  dayOfYear : daysInYear(year - 1) + dayOfYear\n        };\n    }\n\n    /************************************\n        Top Level Functions\n    ************************************/\n\n    function makeMoment(config) {\n        var input = config._i,\n            format = config._f,\n            res;\n\n        config._locale = config._locale || moment.localeData(config._l);\n\n        if (input === null || (format === undefined && input === '')) {\n            return moment.invalid({nullInput: true});\n        }\n\n        if (typeof input === 'string') {\n            config._i = input = config._locale.preparse(input);\n        }\n\n        if (moment.isMoment(input)) {\n            return new Moment(input, true);\n        } else if (format) {\n            if (isArray(format)) {\n                makeDateFromStringAndArray(config);\n            } else {\n                makeDateFromStringAndFormat(config);\n            }\n        } else {\n            makeDateFromInput(config);\n        }\n\n        res = new Moment(config);\n        if (res._nextDay) {\n            // Adding is smart enough around DST\n            res.add(1, 'd');\n            res._nextDay = undefined;\n        }\n\n        return res;\n    }\n\n    moment = function (input, format, locale, strict) {\n        var c;\n\n        if (typeof(locale) === 'boolean') {\n            strict = locale;\n            locale = undefined;\n        }\n        // object construction must be done this way.\n        // https://github.com/moment/moment/issues/1423\n        c = {};\n        c._isAMomentObject = true;\n        c._i = input;\n        c._f = format;\n        c._l = locale;\n        c._strict = strict;\n        c._isUTC = false;\n        c._pf = defaultParsingFlags();\n\n        return makeMoment(c);\n    };\n\n    moment.suppressDeprecationWarnings = false;\n\n    moment.createFromInputFallback = deprecate(\n        'moment construction falls back to js Date. This is ' +\n        'discouraged and will be removed in upcoming major ' +\n        'release. Please refer to ' +\n        'https://github.com/moment/moment/issues/1407 for more info.',\n        function (config) {\n            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));\n        }\n    );\n\n    // Pick a moment m from moments so that m[fn](other) is true for all\n    // other. This relies on the function fn to be transitive.\n    //\n    // moments should either be an array of moment objects or an array, whose\n    // first element is an array of moment objects.\n    function pickBy(fn, moments) {\n        var res, i;\n        if (moments.length === 1 && isArray(moments[0])) {\n            moments = moments[0];\n        }\n        if (!moments.length) {\n            return moment();\n        }\n        res = moments[0];\n        for (i = 1; i < moments.length; ++i) {\n            if (moments[i][fn](res)) {\n                res = moments[i];\n            }\n        }\n        return res;\n    }\n\n    moment.min = function () {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isBefore', args);\n    };\n\n    moment.max = function () {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isAfter', args);\n    };\n\n    // creating with utc\n    moment.utc = function (input, format, locale, strict) {\n        var c;\n\n        if (typeof(locale) === 'boolean') {\n            strict = locale;\n            locale = undefined;\n        }\n        // object construction must be done this way.\n        // https://github.com/moment/moment/issues/1423\n        c = {};\n        c._isAMomentObject = true;\n        c._useUTC = true;\n        c._isUTC = true;\n        c._l = locale;\n        c._i = input;\n        c._f = format;\n        c._strict = strict;\n        c._pf = defaultParsingFlags();\n\n        return makeMoment(c).utc();\n    };\n\n    // creating with unix timestamp (in seconds)\n    moment.unix = function (input) {\n        return moment(input * 1000);\n    };\n\n    // duration\n    moment.duration = function (input, key) {\n        var duration = input,\n            // matching against regexp is expensive, do it on demand\n            match = null,\n            sign,\n            ret,\n            parseIso,\n            diffRes;\n\n        if (moment.isDuration(input)) {\n            duration = {\n                ms: input._milliseconds,\n                d: input._days,\n                M: input._months\n            };\n        } else if (typeof input === 'number') {\n            duration = {};\n            if (key) {\n                duration[key] = input;\n            } else {\n                duration.milliseconds = input;\n            }\n        } else if (!!(match = aspNetTimeSpanJsonRegex.exec(input))) {\n            sign = (match[1] === '-') ? -1 : 1;\n            duration = {\n                y: 0,\n                d: toInt(match[DATE]) * sign,\n                h: toInt(match[HOUR]) * sign,\n                m: toInt(match[MINUTE]) * sign,\n                s: toInt(match[SECOND]) * sign,\n                ms: toInt(match[MILLISECOND]) * sign\n            };\n        } else if (!!(match = isoDurationRegex.exec(input))) {\n            sign = (match[1] === '-') ? -1 : 1;\n            parseIso = function (inp) {\n                // We'd normally use ~~inp for this, but unfortunately it also\n                // converts floats to ints.\n                // inp may be undefined, so careful calling replace on it.\n                var res = inp && parseFloat(inp.replace(',', '.'));\n                // apply sign while we're at it\n                return (isNaN(res) ? 0 : res) * sign;\n            };\n            duration = {\n                y: parseIso(match[2]),\n                M: parseIso(match[3]),\n                d: parseIso(match[4]),\n                h: parseIso(match[5]),\n                m: parseIso(match[6]),\n                s: parseIso(match[7]),\n                w: parseIso(match[8])\n            };\n        } else if (duration == null) {// checks for null or undefined\n            duration = {};\n        } else if (typeof duration === 'object' &&\n                ('from' in duration || 'to' in duration)) {\n            diffRes = momentsDifference(moment(duration.from), moment(duration.to));\n\n            duration = {};\n            duration.ms = diffRes.milliseconds;\n            duration.M = diffRes.months;\n        }\n\n        ret = new Duration(duration);\n\n        if (moment.isDuration(input) && hasOwnProp(input, '_locale')) {\n            ret._locale = input._locale;\n        }\n\n        return ret;\n    };\n\n    // version number\n    moment.version = VERSION;\n\n    // default format\n    moment.defaultFormat = isoFormat;\n\n    // constant that refers to the ISO standard\n    moment.ISO_8601 = function () {};\n\n    // Plugins that add properties should also add the key here (null value),\n    // so we can properly clone ourselves.\n    moment.momentProperties = momentProperties;\n\n    // This function will be called whenever a moment is mutated.\n    // It is intended to keep the offset in sync with the timezone.\n    moment.updateOffset = function () {};\n\n    // This function allows you to set a threshold for relative time strings\n    moment.relativeTimeThreshold = function (threshold, limit) {\n        if (relativeTimeThresholds[threshold] === undefined) {\n            return false;\n        }\n        if (limit === undefined) {\n            return relativeTimeThresholds[threshold];\n        }\n        relativeTimeThresholds[threshold] = limit;\n        return true;\n    };\n\n    moment.lang = deprecate(\n        'moment.lang is deprecated. Use moment.locale instead.',\n        function (key, value) {\n            return moment.locale(key, value);\n        }\n    );\n\n    // This function will load locale and then set the global locale.  If\n    // no arguments are passed in, it will simply return the current global\n    // locale key.\n    moment.locale = function (key, values) {\n        var data;\n        if (key) {\n            if (typeof(values) !== 'undefined') {\n                data = moment.defineLocale(key, values);\n            }\n            else {\n                data = moment.localeData(key);\n            }\n\n            if (data) {\n                moment.duration._locale = moment._locale = data;\n            }\n        }\n\n        return moment._locale._abbr;\n    };\n\n    moment.defineLocale = function (name, values) {\n        if (values !== null) {\n            values.abbr = name;\n            if (!locales[name]) {\n                locales[name] = new Locale();\n            }\n            locales[name].set(values);\n\n            // backwards compat for now: also set the locale\n            moment.locale(name);\n\n            return locales[name];\n        } else {\n            // useful for testing\n            delete locales[name];\n            return null;\n        }\n    };\n\n    moment.langData = deprecate(\n        'moment.langData is deprecated. Use moment.localeData instead.',\n        function (key) {\n            return moment.localeData(key);\n        }\n    );\n\n    // returns locale data\n    moment.localeData = function (key) {\n        var locale;\n\n        if (key && key._locale && key._locale._abbr) {\n            key = key._locale._abbr;\n        }\n\n        if (!key) {\n            return moment._locale;\n        }\n\n        if (!isArray(key)) {\n            //short-circuit everything else\n            locale = loadLocale(key);\n            if (locale) {\n                return locale;\n            }\n            key = [key];\n        }\n\n        return chooseLocale(key);\n    };\n\n    // compare moment object\n    moment.isMoment = function (obj) {\n        return obj instanceof Moment ||\n            (obj != null && hasOwnProp(obj, '_isAMomentObject'));\n    };\n\n    // for typechecking Duration objects\n    moment.isDuration = function (obj) {\n        return obj instanceof Duration;\n    };\n\n    for (i = lists.length - 1; i >= 0; --i) {\n        makeList(lists[i]);\n    }\n\n    moment.normalizeUnits = function (units) {\n        return normalizeUnits(units);\n    };\n\n    moment.invalid = function (flags) {\n        var m = moment.utc(NaN);\n        if (flags != null) {\n            extend(m._pf, flags);\n        }\n        else {\n            m._pf.userInvalidated = true;\n        }\n\n        return m;\n    };\n\n    moment.parseZone = function () {\n        return moment.apply(null, arguments).parseZone();\n    };\n\n    moment.parseTwoDigitYear = function (input) {\n        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);\n    };\n\n    moment.isDate = isDate;\n\n    /************************************\n        Moment Prototype\n    ************************************/\n\n\n    extend(moment.fn = Moment.prototype, {\n\n        clone : function () {\n            return moment(this);\n        },\n\n        valueOf : function () {\n            return +this._d - ((this._offset || 0) * 60000);\n        },\n\n        unix : function () {\n            return Math.floor(+this / 1000);\n        },\n\n        toString : function () {\n            return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');\n        },\n\n        toDate : function () {\n            return this._offset ? new Date(+this) : this._d;\n        },\n\n        toISOString : function () {\n            var m = moment(this).utc();\n            if (0 < m.year() && m.year() <= 9999) {\n                if ('function' === typeof Date.prototype.toISOString) {\n                    // native implementation is ~50x faster, use it when we can\n                    return this.toDate().toISOString();\n                } else {\n                    return formatMoment(m, 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');\n                }\n            } else {\n                return formatMoment(m, 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');\n            }\n        },\n\n        toArray : function () {\n            var m = this;\n            return [\n                m.year(),\n                m.month(),\n                m.date(),\n                m.hours(),\n                m.minutes(),\n                m.seconds(),\n                m.milliseconds()\n            ];\n        },\n\n        isValid : function () {\n            return isValid(this);\n        },\n\n        isDSTShifted : function () {\n            if (this._a) {\n                return this.isValid() && compareArrays(this._a, (this._isUTC ? moment.utc(this._a) : moment(this._a)).toArray()) > 0;\n            }\n\n            return false;\n        },\n\n        parsingFlags : function () {\n            return extend({}, this._pf);\n        },\n\n        invalidAt: function () {\n            return this._pf.overflow;\n        },\n\n        utc : function (keepLocalTime) {\n            return this.utcOffset(0, keepLocalTime);\n        },\n\n        local : function (keepLocalTime) {\n            if (this._isUTC) {\n                this.utcOffset(0, keepLocalTime);\n                this._isUTC = false;\n\n                if (keepLocalTime) {\n                    this.subtract(this._dateUtcOffset(), 'm');\n                }\n            }\n            return this;\n        },\n\n        format : function (inputString) {\n            var output = formatMoment(this, inputString || moment.defaultFormat);\n            return this.localeData().postformat(output);\n        },\n\n        add : createAdder(1, 'add'),\n\n        subtract : createAdder(-1, 'subtract'),\n\n        diff : function (input, units, asFloat) {\n            var that = makeAs(input, this),\n                zoneDiff = (that.utcOffset() - this.utcOffset()) * 6e4,\n                anchor, diff, output, daysAdjust;\n\n            units = normalizeUnits(units);\n\n            if (units === 'year' || units === 'month' || units === 'quarter') {\n                output = monthDiff(this, that);\n                if (units === 'quarter') {\n                    output = output / 3;\n                } else if (units === 'year') {\n                    output = output / 12;\n                }\n            } else {\n                diff = this - that;\n                output = units === 'second' ? diff / 1e3 : // 1000\n                    units === 'minute' ? diff / 6e4 : // 1000 * 60\n                    units === 'hour' ? diff / 36e5 : // 1000 * 60 * 60\n                    units === 'day' ? (diff - zoneDiff) / 864e5 : // 1000 * 60 * 60 * 24, negate dst\n                    units === 'week' ? (diff - zoneDiff) / 6048e5 : // 1000 * 60 * 60 * 24 * 7, negate dst\n                    diff;\n            }\n            return asFloat ? output : absRound(output);\n        },\n\n        from : function (time, withoutSuffix) {\n            return moment.duration({to: this, from: time}).locale(this.locale()).humanize(!withoutSuffix);\n        },\n\n        fromNow : function (withoutSuffix) {\n            return this.from(moment(), withoutSuffix);\n        },\n\n        calendar : function (time) {\n            // We want to compare the start of today, vs this.\n            // Getting start-of-today depends on whether we're locat/utc/offset\n            // or not.\n            var now = time || moment(),\n                sod = makeAs(now, this).startOf('day'),\n                diff = this.diff(sod, 'days', true),\n                format = diff < -6 ? 'sameElse' :\n                    diff < -1 ? 'lastWeek' :\n                    diff < 0 ? 'lastDay' :\n                    diff < 1 ? 'sameDay' :\n                    diff < 2 ? 'nextDay' :\n                    diff < 7 ? 'nextWeek' : 'sameElse';\n            return this.format(this.localeData().calendar(format, this, moment(now)));\n        },\n\n        isLeapYear : function () {\n            return isLeapYear(this.year());\n        },\n\n        isDST : function () {\n            return (this.utcOffset() > this.clone().month(0).utcOffset() ||\n                this.utcOffset() > this.clone().month(5).utcOffset());\n        },\n\n        day : function (input) {\n            var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();\n            if (input != null) {\n                input = parseWeekday(input, this.localeData());\n                return this.add(input - day, 'd');\n            } else {\n                return day;\n            }\n        },\n\n        month : makeAccessor('Month', true),\n\n        startOf : function (units) {\n            units = normalizeUnits(units);\n            // the following switch intentionally omits break keywords\n            // to utilize falling through the cases.\n            switch (units) {\n            case 'year':\n                this.month(0);\n                /* falls through */\n            case 'quarter':\n            case 'month':\n                this.date(1);\n                /* falls through */\n            case 'week':\n            case 'isoWeek':\n            case 'day':\n                this.hours(0);\n                /* falls through */\n            case 'hour':\n                this.minutes(0);\n                /* falls through */\n            case 'minute':\n                this.seconds(0);\n                /* falls through */\n            case 'second':\n                this.milliseconds(0);\n                /* falls through */\n            }\n\n            // weeks are a special case\n            if (units === 'week') {\n                this.weekday(0);\n            } else if (units === 'isoWeek') {\n                this.isoWeekday(1);\n            }\n\n            // quarters are also special\n            if (units === 'quarter') {\n                this.month(Math.floor(this.month() / 3) * 3);\n            }\n\n            return this;\n        },\n\n        endOf: function (units) {\n            units = normalizeUnits(units);\n            if (units === undefined || units === 'millisecond') {\n                return this;\n            }\n            return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');\n        },\n\n        isAfter: function (input, units) {\n            var inputMs;\n            units = normalizeUnits(typeof units !== 'undefined' ? units : 'millisecond');\n            if (units === 'millisecond') {\n                input = moment.isMoment(input) ? input : moment(input);\n                return +this > +input;\n            } else {\n                inputMs = moment.isMoment(input) ? +input : +moment(input);\n                return inputMs < +this.clone().startOf(units);\n            }\n        },\n\n        isBefore: function (input, units) {\n            var inputMs;\n            units = normalizeUnits(typeof units !== 'undefined' ? units : 'millisecond');\n            if (units === 'millisecond') {\n                input = moment.isMoment(input) ? input : moment(input);\n                return +this < +input;\n            } else {\n                inputMs = moment.isMoment(input) ? +input : +moment(input);\n                return +this.clone().endOf(units) < inputMs;\n            }\n        },\n\n        isBetween: function (from, to, units) {\n            return this.isAfter(from, units) && this.isBefore(to, units);\n        },\n\n        isSame: function (input, units) {\n            var inputMs;\n            units = normalizeUnits(units || 'millisecond');\n            if (units === 'millisecond') {\n                input = moment.isMoment(input) ? input : moment(input);\n                return +this === +input;\n            } else {\n                inputMs = +moment(input);\n                return +(this.clone().startOf(units)) <= inputMs && inputMs <= +(this.clone().endOf(units));\n            }\n        },\n\n        min: deprecate(\n                 'moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',\n                 function (other) {\n                     other = moment.apply(null, arguments);\n                     return other < this ? this : other;\n                 }\n         ),\n\n        max: deprecate(\n                'moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',\n                function (other) {\n                    other = moment.apply(null, arguments);\n                    return other > this ? this : other;\n                }\n        ),\n\n        zone : deprecate(\n                'moment().zone is deprecated, use moment().utcOffset instead. ' +\n                'https://github.com/moment/moment/issues/1779',\n                function (input, keepLocalTime) {\n                    if (input != null) {\n                        if (typeof input !== 'string') {\n                            input = -input;\n                        }\n\n                        this.utcOffset(input, keepLocalTime);\n\n                        return this;\n                    } else {\n                        return -this.utcOffset();\n                    }\n                }\n        ),\n\n        // keepLocalTime = true means only change the timezone, without\n        // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\n        // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\n        // +0200, so we adjust the time as needed, to be valid.\n        //\n        // Keeping the time actually adds/subtracts (one hour)\n        // from the actual represented time. That is why we call updateOffset\n        // a second time. In case it wants us to change the offset again\n        // _changeInProgress == true case, then we have to adjust, because\n        // there is no such time in the given timezone.\n        utcOffset : function (input, keepLocalTime) {\n            var offset = this._offset || 0,\n                localAdjust;\n            if (input != null) {\n                if (typeof input === 'string') {\n                    input = utcOffsetFromString(input);\n                }\n                if (Math.abs(input) < 16) {\n                    input = input * 60;\n                }\n                if (!this._isUTC && keepLocalTime) {\n                    localAdjust = this._dateUtcOffset();\n                }\n                this._offset = input;\n                this._isUTC = true;\n                if (localAdjust != null) {\n                    this.add(localAdjust, 'm');\n                }\n                if (offset !== input) {\n                    if (!keepLocalTime || this._changeInProgress) {\n                        addOrSubtractDurationFromMoment(this,\n                                moment.duration(input - offset, 'm'), 1, false);\n                    } else if (!this._changeInProgress) {\n                        this._changeInProgress = true;\n                        moment.updateOffset(this, true);\n                        this._changeInProgress = null;\n                    }\n                }\n\n                return this;\n            } else {\n                return this._isUTC ? offset : this._dateUtcOffset();\n            }\n        },\n\n        isLocal : function () {\n            return !this._isUTC;\n        },\n\n        isUtcOffset : function () {\n            return this._isUTC;\n        },\n\n        isUtc : function () {\n            return this._isUTC && this._offset === 0;\n        },\n\n        zoneAbbr : function () {\n            return this._isUTC ? 'UTC' : '';\n        },\n\n        zoneName : function () {\n            return this._isUTC ? 'Coordinated Universal Time' : '';\n        },\n\n        parseZone : function () {\n            if (this._tzm) {\n                this.utcOffset(this._tzm);\n            } else if (typeof this._i === 'string') {\n                this.utcOffset(utcOffsetFromString(this._i));\n            }\n            return this;\n        },\n\n        hasAlignedHourOffset : function (input) {\n            if (!input) {\n                input = 0;\n            }\n            else {\n                input = moment(input).utcOffset();\n            }\n\n            return (this.utcOffset() - input) % 60 === 0;\n        },\n\n        daysInMonth : function () {\n            return daysInMonth(this.year(), this.month());\n        },\n\n        dayOfYear : function (input) {\n            var dayOfYear = round((moment(this).startOf('day') - moment(this).startOf('year')) / 864e5) + 1;\n            return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');\n        },\n\n        quarter : function (input) {\n            return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);\n        },\n\n        weekYear : function (input) {\n            var year = weekOfYear(this, this.localeData()._week.dow, this.localeData()._week.doy).year;\n            return input == null ? year : this.add((input - year), 'y');\n        },\n\n        isoWeekYear : function (input) {\n            var year = weekOfYear(this, 1, 4).year;\n            return input == null ? year : this.add((input - year), 'y');\n        },\n\n        week : function (input) {\n            var week = this.localeData().week(this);\n            return input == null ? week : this.add((input - week) * 7, 'd');\n        },\n\n        isoWeek : function (input) {\n            var week = weekOfYear(this, 1, 4).week;\n            return input == null ? week : this.add((input - week) * 7, 'd');\n        },\n\n        weekday : function (input) {\n            var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;\n            return input == null ? weekday : this.add(input - weekday, 'd');\n        },\n\n        isoWeekday : function (input) {\n            // behaves the same as moment#day except\n            // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\n            // as a setter, sunday should belong to the previous week.\n            return input == null ? this.day() || 7 : this.day(this.day() % 7 ? input : input - 7);\n        },\n\n        isoWeeksInYear : function () {\n            return weeksInYear(this.year(), 1, 4);\n        },\n\n        weeksInYear : function () {\n            var weekInfo = this.localeData()._week;\n            return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);\n        },\n\n        get : function (units) {\n            units = normalizeUnits(units);\n            return this[units]();\n        },\n\n        set : function (units, value) {\n            var unit;\n            if (typeof units === 'object') {\n                for (unit in units) {\n                    this.set(unit, units[unit]);\n                }\n            }\n            else {\n                units = normalizeUnits(units);\n                if (typeof this[units] === 'function') {\n                    this[units](value);\n                }\n            }\n            return this;\n        },\n\n        // If passed a locale key, it will set the locale for this\n        // instance.  Otherwise, it will return the locale configuration\n        // variables for this instance.\n        locale : function (key) {\n            var newLocaleData;\n\n            if (key === undefined) {\n                return this._locale._abbr;\n            } else {\n                newLocaleData = moment.localeData(key);\n                if (newLocaleData != null) {\n                    this._locale = newLocaleData;\n                }\n                return this;\n            }\n        },\n\n        lang : deprecate(\n            'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',\n            function (key) {\n                if (key === undefined) {\n                    return this.localeData();\n                } else {\n                    return this.locale(key);\n                }\n            }\n        ),\n\n        localeData : function () {\n            return this._locale;\n        },\n\n        _dateUtcOffset : function () {\n            // On Firefox.24 Date#getTimezoneOffset returns a floating point.\n            // https://github.com/moment/moment/pull/1871\n            return -Math.round(this._d.getTimezoneOffset() / 15) * 15;\n        }\n\n    });\n\n    function rawMonthSetter(mom, value) {\n        var dayOfMonth;\n\n        // TODO: Move this out of here!\n        if (typeof value === 'string') {\n            value = mom.localeData().monthsParse(value);\n            // TODO: Another silent failure?\n            if (typeof value !== 'number') {\n                return mom;\n            }\n        }\n\n        dayOfMonth = Math.min(mom.date(),\n                daysInMonth(mom.year(), value));\n        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);\n        return mom;\n    }\n\n    function rawGetter(mom, unit) {\n        return mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]();\n    }\n\n    function rawSetter(mom, unit, value) {\n        if (unit === 'Month') {\n            return rawMonthSetter(mom, value);\n        } else {\n            return mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);\n        }\n    }\n\n    function makeAccessor(unit, keepTime) {\n        return function (value) {\n            if (value != null) {\n                rawSetter(this, unit, value);\n                moment.updateOffset(this, keepTime);\n                return this;\n            } else {\n                return rawGetter(this, unit);\n            }\n        };\n    }\n\n    moment.fn.millisecond = moment.fn.milliseconds = makeAccessor('Milliseconds', false);\n    moment.fn.second = moment.fn.seconds = makeAccessor('Seconds', false);\n    moment.fn.minute = moment.fn.minutes = makeAccessor('Minutes', false);\n    // Setting the hour should keep the time, because the user explicitly\n    // specified which hour he wants. So trying to maintain the same hour (in\n    // a new timezone) makes sense. Adding/subtracting hours does not follow\n    // this rule.\n    moment.fn.hour = moment.fn.hours = makeAccessor('Hours', true);\n    // moment.fn.month is defined separately\n    moment.fn.date = makeAccessor('Date', true);\n    moment.fn.dates = deprecate('dates accessor is deprecated. Use date instead.', makeAccessor('Date', true));\n    moment.fn.year = makeAccessor('FullYear', true);\n    moment.fn.years = deprecate('years accessor is deprecated. Use year instead.', makeAccessor('FullYear', true));\n\n    // add plural methods\n    moment.fn.days = moment.fn.day;\n    moment.fn.months = moment.fn.month;\n    moment.fn.weeks = moment.fn.week;\n    moment.fn.isoWeeks = moment.fn.isoWeek;\n    moment.fn.quarters = moment.fn.quarter;\n\n    // add aliased format methods\n    moment.fn.toJSON = moment.fn.toISOString;\n\n    // alias isUtc for dev-friendliness\n    moment.fn.isUTC = moment.fn.isUtc;\n\n    /************************************\n        Duration Prototype\n    ************************************/\n\n\n    function daysToYears (days) {\n        // 400 years have 146097 days (taking into account leap year rules)\n        return days * 400 / 146097;\n    }\n\n    function yearsToDays (years) {\n        // years * 365 + absRound(years / 4) -\n        //     absRound(years / 100) + absRound(years / 400);\n        return years * 146097 / 400;\n    }\n\n    extend(moment.duration.fn = Duration.prototype, {\n\n        _bubble : function () {\n            var milliseconds = this._milliseconds,\n                days = this._days,\n                months = this._months,\n                data = this._data,\n                seconds, minutes, hours, years = 0;\n\n            // The following code bubbles up values, see the tests for\n            // examples of what that means.\n            data.milliseconds = milliseconds % 1000;\n\n            seconds = absRound(milliseconds / 1000);\n            data.seconds = seconds % 60;\n\n            minutes = absRound(seconds / 60);\n            data.minutes = minutes % 60;\n\n            hours = absRound(minutes / 60);\n            data.hours = hours % 24;\n\n            days += absRound(hours / 24);\n\n            // Accurately convert days to years, assume start from year 0.\n            years = absRound(daysToYears(days));\n            days -= absRound(yearsToDays(years));\n\n            // 30 days to a month\n            // TODO (iskren): Use anchor date (like 1st Jan) to compute this.\n            months += absRound(days / 30);\n            days %= 30;\n\n            // 12 months -> 1 year\n            years += absRound(months / 12);\n            months %= 12;\n\n            data.days = days;\n            data.months = months;\n            data.years = years;\n        },\n\n        abs : function () {\n            this._milliseconds = Math.abs(this._milliseconds);\n            this._days = Math.abs(this._days);\n            this._months = Math.abs(this._months);\n\n            this._data.milliseconds = Math.abs(this._data.milliseconds);\n            this._data.seconds = Math.abs(this._data.seconds);\n            this._data.minutes = Math.abs(this._data.minutes);\n            this._data.hours = Math.abs(this._data.hours);\n            this._data.months = Math.abs(this._data.months);\n            this._data.years = Math.abs(this._data.years);\n\n            return this;\n        },\n\n        weeks : function () {\n            return absRound(this.days() / 7);\n        },\n\n        valueOf : function () {\n            return this._milliseconds +\n              this._days * 864e5 +\n              (this._months % 12) * 2592e6 +\n              toInt(this._months / 12) * 31536e6;\n        },\n\n        humanize : function (withSuffix) {\n            var output = relativeTime(this, !withSuffix, this.localeData());\n\n            if (withSuffix) {\n                output = this.localeData().pastFuture(+this, output);\n            }\n\n            return this.localeData().postformat(output);\n        },\n\n        add : function (input, val) {\n            // supports only 2.0-style add(1, 's') or add(moment)\n            var dur = moment.duration(input, val);\n\n            this._milliseconds += dur._milliseconds;\n            this._days += dur._days;\n            this._months += dur._months;\n\n            this._bubble();\n\n            return this;\n        },\n\n        subtract : function (input, val) {\n            var dur = moment.duration(input, val);\n\n            this._milliseconds -= dur._milliseconds;\n            this._days -= dur._days;\n            this._months -= dur._months;\n\n            this._bubble();\n\n            return this;\n        },\n\n        get : function (units) {\n            units = normalizeUnits(units);\n            return this[units.toLowerCase() + 's']();\n        },\n\n        as : function (units) {\n            var days, months;\n            units = normalizeUnits(units);\n\n            if (units === 'month' || units === 'year') {\n                days = this._days + this._milliseconds / 864e5;\n                months = this._months + daysToYears(days) * 12;\n                return units === 'month' ? months : months / 12;\n            } else {\n                // handle milliseconds separately because of floating point math errors (issue #1867)\n                days = this._days + Math.round(yearsToDays(this._months / 12));\n                switch (units) {\n                    case 'week': return days / 7 + this._milliseconds / 6048e5;\n                    case 'day': return days + this._milliseconds / 864e5;\n                    case 'hour': return days * 24 + this._milliseconds / 36e5;\n                    case 'minute': return days * 24 * 60 + this._milliseconds / 6e4;\n                    case 'second': return days * 24 * 60 * 60 + this._milliseconds / 1000;\n                    // Math.floor prevents floating point math errors here\n                    case 'millisecond': return Math.floor(days * 24 * 60 * 60 * 1000) + this._milliseconds;\n                    default: throw new Error('Unknown unit ' + units);\n                }\n            }\n        },\n\n        lang : moment.fn.lang,\n        locale : moment.fn.locale,\n\n        toIsoString : deprecate(\n            'toIsoString() is deprecated. Please use toISOString() instead ' +\n            '(notice the capitals)',\n            function () {\n                return this.toISOString();\n            }\n        ),\n\n        toISOString : function () {\n            // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\n            var years = Math.abs(this.years()),\n                months = Math.abs(this.months()),\n                days = Math.abs(this.days()),\n                hours = Math.abs(this.hours()),\n                minutes = Math.abs(this.minutes()),\n                seconds = Math.abs(this.seconds() + this.milliseconds() / 1000);\n\n            if (!this.asSeconds()) {\n                // this is the same as C#'s (Noda) and python (isodate)...\n                // but not other JS (goog.date)\n                return 'P0D';\n            }\n\n            return (this.asSeconds() < 0 ? '-' : '') +\n                'P' +\n                (years ? years + 'Y' : '') +\n                (months ? months + 'M' : '') +\n                (days ? days + 'D' : '') +\n                ((hours || minutes || seconds) ? 'T' : '') +\n                (hours ? hours + 'H' : '') +\n                (minutes ? minutes + 'M' : '') +\n                (seconds ? seconds + 'S' : '');\n        },\n\n        localeData : function () {\n            return this._locale;\n        },\n\n        toJSON : function () {\n            return this.toISOString();\n        }\n    });\n\n    moment.duration.fn.toString = moment.duration.fn.toISOString;\n\n    function makeDurationGetter(name) {\n        moment.duration.fn[name] = function () {\n            return this._data[name];\n        };\n    }\n\n    for (i in unitMillisecondFactors) {\n        if (hasOwnProp(unitMillisecondFactors, i)) {\n            makeDurationGetter(i.toLowerCase());\n        }\n    }\n\n    moment.duration.fn.asMilliseconds = function () {\n        return this.as('ms');\n    };\n    moment.duration.fn.asSeconds = function () {\n        return this.as('s');\n    };\n    moment.duration.fn.asMinutes = function () {\n        return this.as('m');\n    };\n    moment.duration.fn.asHours = function () {\n        return this.as('h');\n    };\n    moment.duration.fn.asDays = function () {\n        return this.as('d');\n    };\n    moment.duration.fn.asWeeks = function () {\n        return this.as('weeks');\n    };\n    moment.duration.fn.asMonths = function () {\n        return this.as('M');\n    };\n    moment.duration.fn.asYears = function () {\n        return this.as('y');\n    };\n\n    /************************************\n        Default Locale\n    ************************************/\n\n\n    // Set default locale, other locale will inherit from English.\n    moment.locale('en', {\n        ordinalParse: /\\d{1,2}(th|st|nd|rd)/,\n        ordinal : function (number) {\n            var b = number % 10,\n                output = (toInt(number % 100 / 10) === 1) ? 'th' :\n                (b === 1) ? 'st' :\n                (b === 2) ? 'nd' :\n                (b === 3) ? 'rd' : 'th';\n            return number + output;\n        }\n    });\n\n    /* EMBED_LOCALES */\n\n    /************************************\n        Exposing Moment\n    ************************************/\n\n    function makeGlobal(shouldDeprecate) {\n        /*global ender:false */\n        if (typeof ender !== 'undefined') {\n            return;\n        }\n        oldGlobalMoment = globalScope.moment;\n        if (shouldDeprecate) {\n            globalScope.moment = deprecate(\n                    'Accessing Moment through the global scope is ' +\n                    'deprecated, and will be removed in an upcoming ' +\n                    'release.',\n                    moment);\n        } else {\n            globalScope.moment = moment;\n        }\n    }\n\n    // CommonJS module is defined\n    if (hasModule) {\n        module.exports = moment;\n    } else if (typeof define === 'function' && define.amd) {\n        define(function (require, exports, module) {\n            if (module.config && module.config() && module.config().noGlobal === true) {\n                // release the global variable\n                globalScope.moment = oldGlobalMoment;\n            }\n\n            return moment;\n        });\n        makeGlobal(true);\n    } else {\n        makeGlobal();\n    }\n}).call(this);\n","\"use strict\";\n\n/**\n * Represents a cancellation caused by navigating away\n * before the previous transition has fully resolved.\n */\nfunction Cancellation() {}\n\nmodule.exports = Cancellation;","\"use strict\";\n\nvar warning = require(\"react/lib/warning\");\nvar invariant = require(\"react/lib/invariant\");\n\nfunction checkPropTypes(componentName, propTypes, props) {\n  for (var propName in propTypes) {\n    if (propTypes.hasOwnProperty(propName)) {\n      var error = propTypes[propName](props, propName, componentName);\n\n      if (error instanceof Error) warning(false, error.message);\n    }\n  }\n}\n\nvar Configuration = {\n\n  statics: {\n\n    validateProps: function validateProps(props) {\n      checkPropTypes(this.displayName, this.propTypes, props);\n    }\n\n  },\n\n  render: function render() {\n    invariant(false, \"%s elements are for router configuration only and should not be rendered\", this.constructor.displayName);\n  }\n\n};\n\nmodule.exports = Configuration;","\"use strict\";\n\nvar invariant = require(\"react/lib/invariant\");\nvar canUseDOM = require(\"react/lib/ExecutionEnvironment\").canUseDOM;\n\nvar History = {\n\n  /**\n   * The current number of entries in the history.\n   *\n   * Note: This property is read-only.\n   */\n  length: 1,\n\n  /**\n   * Sends the browser back one entry in the history.\n   */\n  back: function back() {\n    invariant(canUseDOM, \"Cannot use History.back without a DOM\");\n\n    // Do this first so that History.length will\n    // be accurate in location change listeners.\n    History.length -= 1;\n\n    window.history.back();\n  }\n\n};\n\nmodule.exports = History;","\"use strict\";\n\nvar _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };\n\nvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\n/* jshint -W084 */\nvar PathUtils = require(\"./PathUtils\");\n\nfunction deepSearch(route, pathname, query) {\n  // Check the subtree first to find the most deeply-nested match.\n  var childRoutes = route.childRoutes;\n  if (childRoutes) {\n    var match, childRoute;\n    for (var i = 0, len = childRoutes.length; i < len; ++i) {\n      childRoute = childRoutes[i];\n\n      if (childRoute.isDefault || childRoute.isNotFound) continue; // Check these in order later.\n\n      if (match = deepSearch(childRoute, pathname, query)) {\n        // A route in the subtree matched! Add this route and we're done.\n        match.routes.unshift(route);\n        return match;\n      }\n    }\n  }\n\n  // No child routes matched; try the default route.\n  var defaultRoute = route.defaultRoute;\n  if (defaultRoute && (params = PathUtils.extractParams(defaultRoute.path, pathname))) {\n    return new Match(pathname, params, query, [route, defaultRoute]);\n  } // Does the \"not found\" route match?\n  var notFoundRoute = route.notFoundRoute;\n  if (notFoundRoute && (params = PathUtils.extractParams(notFoundRoute.path, pathname))) {\n    return new Match(pathname, params, query, [route, notFoundRoute]);\n  } // Last attempt: check this route.\n  var params = PathUtils.extractParams(route.path, pathname);\n  if (params) {\n    return new Match(pathname, params, query, [route]);\n  }return null;\n}\n\nvar Match = (function () {\n  function Match(pathname, params, query, routes) {\n    _classCallCheck(this, Match);\n\n    this.pathname = pathname;\n    this.params = params;\n    this.query = query;\n    this.routes = routes;\n  }\n\n  _prototypeProperties(Match, {\n    findMatch: {\n\n      /**\n       * Attempts to match depth-first a route in the given route's\n       * subtree against the given path and returns the match if it\n       * succeeds, null if no match can be made.\n       */\n\n      value: function findMatch(routes, path) {\n        var pathname = PathUtils.withoutQuery(path);\n        var query = PathUtils.extractQuery(path);\n        var match = null;\n\n        for (var i = 0, len = routes.length; match == null && i < len; ++i) match = deepSearch(routes[i], pathname, query);\n\n        return match;\n      },\n      writable: true,\n      configurable: true\n    }\n  });\n\n  return Match;\n})();\n\nmodule.exports = Match;","\"use strict\";\n\nvar PropTypes = require(\"./PropTypes\");\n\n/**\n * A mixin for components that modify the URL.\n *\n * Example:\n *\n *   var MyLink = React.createClass({\n *     mixins: [ Router.Navigation ],\n *     handleClick: function (event) {\n *       event.preventDefault();\n *       this.transitionTo('aRoute', { the: 'params' }, { the: 'query' });\n *     },\n *     render: function () {\n *       return (\n *         <a onClick={this.handleClick}>Click me!</a>\n *       );\n *     }\n *   });\n */\nvar Navigation = {\n\n  contextTypes: {\n    makePath: PropTypes.func.isRequired,\n    makeHref: PropTypes.func.isRequired,\n    transitionTo: PropTypes.func.isRequired,\n    replaceWith: PropTypes.func.isRequired,\n    goBack: PropTypes.func.isRequired\n  },\n\n  /**\n   * Returns an absolute URL path created from the given route\n   * name, URL parameters, and query values.\n   */\n  makePath: function makePath(to, params, query) {\n    return this.context.makePath(to, params, query);\n  },\n\n  /**\n   * Returns a string that may safely be used as the href of a\n   * link to the route with the given name.\n   */\n  makeHref: function makeHref(to, params, query) {\n    return this.context.makeHref(to, params, query);\n  },\n\n  /**\n   * Transitions to the URL specified in the arguments by pushing\n   * a new URL onto the history stack.\n   */\n  transitionTo: function transitionTo(to, params, query) {\n    this.context.transitionTo(to, params, query);\n  },\n\n  /**\n   * Transitions to the URL specified in the arguments by replacing\n   * the current URL in the history stack.\n   */\n  replaceWith: function replaceWith(to, params, query) {\n    this.context.replaceWith(to, params, query);\n  },\n\n  /**\n   * Transitions to the previous URL.\n   */\n  goBack: function goBack() {\n    return this.context.goBack();\n  }\n\n};\n\nmodule.exports = Navigation;","\"use strict\";\n\nvar PropTypes = require(\"./PropTypes\");\n\n/**\n * Provides the router with context for Router.Navigation.\n */\nvar NavigationContext = {\n\n  childContextTypes: {\n    makePath: PropTypes.func.isRequired,\n    makeHref: PropTypes.func.isRequired,\n    transitionTo: PropTypes.func.isRequired,\n    replaceWith: PropTypes.func.isRequired,\n    goBack: PropTypes.func.isRequired\n  },\n\n  getChildContext: function getChildContext() {\n    return {\n      makePath: this.constructor.makePath.bind(this.constructor),\n      makeHref: this.constructor.makeHref.bind(this.constructor),\n      transitionTo: this.constructor.transitionTo.bind(this.constructor),\n      replaceWith: this.constructor.replaceWith.bind(this.constructor),\n      goBack: this.constructor.goBack.bind(this.constructor)\n    };\n  }\n\n};\n\nmodule.exports = NavigationContext;","\"use strict\";\n\nvar invariant = require(\"react/lib/invariant\");\nvar merge = require(\"qs/lib/utils\").merge;\nvar qs = require(\"qs\");\n\nvar paramCompileMatcher = /:([a-zA-Z_$][a-zA-Z0-9_$]*)|[*.()\\[\\]\\\\+|{}^$]/g;\nvar paramInjectMatcher = /:([a-zA-Z_$][a-zA-Z0-9_$?]*[?]?)|[*]/g;\nvar paramInjectTrailingSlashMatcher = /\\/\\/\\?|\\/\\?\\/|\\/\\?/g;\nvar queryMatcher = /\\?(.+)/;\n\nvar _compiledPatterns = {};\n\nfunction compilePattern(pattern) {\n  if (!(pattern in _compiledPatterns)) {\n    var paramNames = [];\n    var source = pattern.replace(paramCompileMatcher, function (match, paramName) {\n      if (paramName) {\n        paramNames.push(paramName);\n        return \"([^/?#]+)\";\n      } else if (match === \"*\") {\n        paramNames.push(\"splat\");\n        return \"(.*?)\";\n      } else {\n        return \"\\\\\" + match;\n      }\n    });\n\n    _compiledPatterns[pattern] = {\n      matcher: new RegExp(\"^\" + source + \"$\", \"i\"),\n      paramNames: paramNames\n    };\n  }\n\n  return _compiledPatterns[pattern];\n}\n\nvar PathUtils = {\n\n  /**\n   * Returns true if the given path is absolute.\n   */\n  isAbsolute: function isAbsolute(path) {\n    return path.charAt(0) === \"/\";\n  },\n\n  /**\n   * Joins two URL paths together.\n   */\n  join: function join(a, b) {\n    return a.replace(/\\/*$/, \"/\") + b;\n  },\n\n  /**\n   * Returns an array of the names of all parameters in the given pattern.\n   */\n  extractParamNames: function extractParamNames(pattern) {\n    return compilePattern(pattern).paramNames;\n  },\n\n  /**\n   * Extracts the portions of the given URL path that match the given pattern\n   * and returns an object of param name => value pairs. Returns null if the\n   * pattern does not match the given path.\n   */\n  extractParams: function extractParams(pattern, path) {\n    var _compilePattern = compilePattern(pattern);\n\n    var matcher = _compilePattern.matcher;\n    var paramNames = _compilePattern.paramNames;\n\n    var match = path.match(matcher);\n\n    if (!match) {\n      return null;\n    }var params = {};\n\n    paramNames.forEach(function (paramName, index) {\n      params[paramName] = match[index + 1];\n    });\n\n    return params;\n  },\n\n  /**\n   * Returns a version of the given route path with params interpolated. Throws\n   * if there is a dynamic segment of the route path for which there is no param.\n   */\n  injectParams: function injectParams(pattern, params) {\n    params = params || {};\n\n    var splatIndex = 0;\n\n    return pattern.replace(paramInjectMatcher, function (match, paramName) {\n      paramName = paramName || \"splat\";\n\n      // If param is optional don't check for existence\n      if (paramName.slice(-1) === \"?\") {\n        paramName = paramName.slice(0, -1);\n\n        if (params[paramName] == null) return \"\";\n      } else {\n        invariant(params[paramName] != null, \"Missing \\\"%s\\\" parameter for path \\\"%s\\\"\", paramName, pattern);\n      }\n\n      var segment;\n      if (paramName === \"splat\" && Array.isArray(params[paramName])) {\n        segment = params[paramName][splatIndex++];\n\n        invariant(segment != null, \"Missing splat # %s for path \\\"%s\\\"\", splatIndex, pattern);\n      } else {\n        segment = params[paramName];\n      }\n\n      return segment;\n    }).replace(paramInjectTrailingSlashMatcher, \"/\");\n  },\n\n  /**\n   * Returns an object that is the result of parsing any query string contained\n   * in the given path, null if the path contains no query string.\n   */\n  extractQuery: function extractQuery(path) {\n    var match = path.match(queryMatcher);\n    return match && qs.parse(match[1]);\n  },\n\n  /**\n   * Returns a version of the given path without the query string.\n   */\n  withoutQuery: function withoutQuery(path) {\n    return path.replace(queryMatcher, \"\");\n  },\n\n  /**\n   * Returns a version of the given path with the parameters in the given\n   * query merged into the query string.\n   */\n  withQuery: function withQuery(path, query) {\n    var existingQuery = PathUtils.extractQuery(path);\n\n    if (existingQuery) query = query ? merge(existingQuery, query) : existingQuery;\n\n    var queryString = qs.stringify(query, { indices: false });\n\n    if (queryString) {\n      return PathUtils.withoutQuery(path) + \"?\" + queryString;\n    }return path;\n  }\n\n};\n\nmodule.exports = PathUtils;","\"use strict\";\n\nvar assign = require(\"react/lib/Object.assign\");\nvar ReactPropTypes = (window.React).PropTypes;\n\nvar PropTypes = assign({\n\n  /**\n   * Requires that the value of a prop be falsy.\n   */\n  falsy: function falsy(props, propName, componentName) {\n    if (props[propName]) {\n      return new Error(\"<\" + componentName + \"> may not have a \\\"\" + propName + \"\\\" prop\");\n    }\n  }\n\n}, ReactPropTypes);\n\nmodule.exports = PropTypes;","\"use strict\";\n\n/**\n * Encapsulates a redirect to the given route.\n */\nfunction Redirect(to, params, query) {\n  this.to = to;\n  this.params = params;\n  this.query = query;\n}\n\nmodule.exports = Redirect;","\"use strict\";\n\nvar _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };\n\nvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\nvar assign = require(\"react/lib/Object.assign\");\nvar invariant = require(\"react/lib/invariant\");\nvar warning = require(\"react/lib/warning\");\nvar PathUtils = require(\"./PathUtils\");\n\nvar _currentRoute;\n\nvar Route = (function () {\n  function Route(name, path, ignoreScrollBehavior, isDefault, isNotFound, onEnter, onLeave, handler) {\n    _classCallCheck(this, Route);\n\n    this.name = name;\n    this.path = path;\n    this.paramNames = PathUtils.extractParamNames(this.path);\n    this.ignoreScrollBehavior = !!ignoreScrollBehavior;\n    this.isDefault = !!isDefault;\n    this.isNotFound = !!isNotFound;\n    this.onEnter = onEnter;\n    this.onLeave = onLeave;\n    this.handler = handler;\n  }\n\n  _prototypeProperties(Route, {\n    createRoute: {\n\n      /**\n       * Creates and returns a new route. Options may be a URL pathname string\n       * with placeholders for named params or an object with any of the following\n       * properties:\n       *\n       * - name                     The name of the route. This is used to lookup a\n       *                            route relative to its parent route and should be\n       *                            unique among all child routes of the same parent\n       * - path                     A URL pathname string with optional placeholders\n       *                            that specify the names of params to extract from\n       *                            the URL when the path matches. Defaults to `/${name}`\n       *                            when there is a name given, or the path of the parent\n       *                            route, or /\n       * - ignoreScrollBehavior     True to make this route (and all descendants) ignore\n       *                            the scroll behavior of the router\n       * - isDefault                True to make this route the default route among all\n       *                            its siblings\n       * - isNotFound               True to make this route the \"not found\" route among\n       *                            all its siblings\n       * - onEnter                  A transition hook that will be called when the\n       *                            router is going to enter this route\n       * - onLeave                  A transition hook that will be called when the\n       *                            router is going to leave this route\n       * - handler                  A React component that will be rendered when\n       *                            this route is active\n       * - parentRoute              The parent route to use for this route. This option\n       *                            is automatically supplied when creating routes inside\n       *                            the callback to another invocation of createRoute. You\n       *                            only ever need to use this when declaring routes\n       *                            independently of one another to manually piece together\n       *                            the route hierarchy\n       *\n       * The callback may be used to structure your route hierarchy. Any call to\n       * createRoute, createDefaultRoute, createNotFoundRoute, or createRedirect\n       * inside the callback automatically uses this route as its parent.\n       */\n\n      value: function createRoute(options, callback) {\n        options = options || {};\n\n        if (typeof options === \"string\") options = { path: options };\n\n        var parentRoute = _currentRoute;\n\n        if (parentRoute) {\n          warning(options.parentRoute == null || options.parentRoute === parentRoute, \"You should not use parentRoute with createRoute inside another route's child callback; it is ignored\");\n        } else {\n          parentRoute = options.parentRoute;\n        }\n\n        var name = options.name;\n        var path = options.path || name;\n\n        if (path && !(options.isDefault || options.isNotFound)) {\n          if (PathUtils.isAbsolute(path)) {\n            if (parentRoute) {\n              invariant(parentRoute.paramNames.length === 0, \"You cannot nest path \\\"%s\\\" inside \\\"%s\\\"; the parent requires URL parameters\", path, parentRoute.path);\n            }\n          } else if (parentRoute) {\n            // Relative paths extend their parent.\n            path = PathUtils.join(parentRoute.path, path);\n          } else {\n            path = \"/\" + path;\n          }\n        } else {\n          path = parentRoute ? parentRoute.path : \"/\";\n        }\n\n        if (options.isNotFound && !/\\*$/.test(path)) path += \"*\"; // Auto-append * to the path of not found routes.\n\n        var route = new Route(name, path, options.ignoreScrollBehavior, options.isDefault, options.isNotFound, options.onEnter, options.onLeave, options.handler);\n\n        if (parentRoute) {\n          if (route.isDefault) {\n            invariant(parentRoute.defaultRoute == null, \"%s may not have more than one default route\", parentRoute);\n\n            parentRoute.defaultRoute = route;\n          } else if (route.isNotFound) {\n            invariant(parentRoute.notFoundRoute == null, \"%s may not have more than one not found route\", parentRoute);\n\n            parentRoute.notFoundRoute = route;\n          }\n\n          parentRoute.appendChild(route);\n        }\n\n        // Any routes created in the callback\n        // use this route as their parent.\n        if (typeof callback === \"function\") {\n          var currentRoute = _currentRoute;\n          _currentRoute = route;\n          callback.call(route, route);\n          _currentRoute = currentRoute;\n        }\n\n        return route;\n      },\n      writable: true,\n      configurable: true\n    },\n    createDefaultRoute: {\n\n      /**\n       * Creates and returns a route that is rendered when its parent matches\n       * the current URL.\n       */\n\n      value: function createDefaultRoute(options) {\n        return Route.createRoute(assign({}, options, { isDefault: true }));\n      },\n      writable: true,\n      configurable: true\n    },\n    createNotFoundRoute: {\n\n      /**\n       * Creates and returns a route that is rendered when its parent matches\n       * the current URL but none of its siblings do.\n       */\n\n      value: function createNotFoundRoute(options) {\n        return Route.createRoute(assign({}, options, { isNotFound: true }));\n      },\n      writable: true,\n      configurable: true\n    },\n    createRedirect: {\n\n      /**\n       * Creates and returns a route that automatically redirects the transition\n       * to another route. In addition to the normal options to createRoute, this\n       * function accepts the following options:\n       *\n       * - from         An alias for the `path` option. Defaults to *\n       * - to           The path/route/route name to redirect to\n       * - params       The params to use in the redirect URL. Defaults\n       *                to using the current params\n       * - query        The query to use in the redirect URL. Defaults\n       *                to using the current query\n       */\n\n      value: function createRedirect(options) {\n        return Route.createRoute(assign({}, options, {\n          path: options.path || options.from || \"*\",\n          onEnter: function onEnter(transition, params, query) {\n            transition.redirect(options.to, options.params || params, options.query || query);\n          }\n        }));\n      },\n      writable: true,\n      configurable: true\n    }\n  }, {\n    appendChild: {\n\n      /**\n       * Appends the given route to this route's child routes.\n       */\n\n      value: function appendChild(route) {\n        invariant(route instanceof Route, \"route.appendChild must use a valid Route\");\n\n        if (!this.childRoutes) this.childRoutes = [];\n\n        this.childRoutes.push(route);\n      },\n      writable: true,\n      configurable: true\n    },\n    toString: {\n      value: function toString() {\n        var string = \"<Route\";\n\n        if (this.name) string += \" name=\\\"\" + this.name + \"\\\"\";\n\n        string += \" path=\\\"\" + this.path + \"\\\">\";\n\n        return string;\n      },\n      writable: true,\n      configurable: true\n    }\n  });\n\n  return Route;\n})();\n\nmodule.exports = Route;","\"use strict\";\n\nvar React = (window.React);\nvar assign = require(\"react/lib/Object.assign\");\nvar PropTypes = require(\"./PropTypes\");\n\nvar REF_NAME = \"__routeHandler__\";\n\nvar RouteHandlerMixin = {\n\n  contextTypes: {\n    getRouteAtDepth: PropTypes.func.isRequired,\n    setRouteComponentAtDepth: PropTypes.func.isRequired,\n    routeHandlers: PropTypes.array.isRequired\n  },\n\n  childContextTypes: {\n    routeHandlers: PropTypes.array.isRequired\n  },\n\n  getChildContext: function getChildContext() {\n    return {\n      routeHandlers: this.context.routeHandlers.concat([this])\n    };\n  },\n\n  componentDidMount: function componentDidMount() {\n    this._updateRouteComponent(this.refs[REF_NAME]);\n  },\n\n  componentDidUpdate: function componentDidUpdate() {\n    this._updateRouteComponent(this.refs[REF_NAME]);\n  },\n\n  componentWillUnmount: function componentWillUnmount() {\n    this._updateRouteComponent(null);\n  },\n\n  _updateRouteComponent: function _updateRouteComponent(component) {\n    this.context.setRouteComponentAtDepth(this.getRouteDepth(), component);\n  },\n\n  getRouteDepth: function getRouteDepth() {\n    return this.context.routeHandlers.length;\n  },\n\n  createChildRouteHandler: function createChildRouteHandler(props) {\n    var route = this.context.getRouteAtDepth(this.getRouteDepth());\n    return route ? React.createElement(route.handler, assign({}, props || this.props, { ref: REF_NAME })) : null;\n  }\n\n};\n\nmodule.exports = RouteHandlerMixin;","\"use strict\";\n\nvar invariant = require(\"react/lib/invariant\");\nvar canUseDOM = require(\"react/lib/ExecutionEnvironment\").canUseDOM;\nvar getWindowScrollPosition = require(\"./getWindowScrollPosition\");\n\nfunction shouldUpdateScroll(state, prevState) {\n  if (!prevState) {\n    return true;\n  } // Don't update scroll position when only the query has changed.\n  if (state.pathname === prevState.pathname) {\n    return false;\n  }var routes = state.routes;\n  var prevRoutes = prevState.routes;\n\n  var sharedAncestorRoutes = routes.filter(function (route) {\n    return prevRoutes.indexOf(route) !== -1;\n  });\n\n  return !sharedAncestorRoutes.some(function (route) {\n    return route.ignoreScrollBehavior;\n  });\n}\n\n/**\n * Provides the router with the ability to manage window scroll position\n * according to its scroll behavior.\n */\nvar ScrollHistory = {\n\n  statics: {\n\n    /**\n     * Records curent scroll position as the last known position for the given URL path.\n     */\n    recordScrollPosition: function recordScrollPosition(path) {\n      if (!this.scrollHistory) this.scrollHistory = {};\n\n      this.scrollHistory[path] = getWindowScrollPosition();\n    },\n\n    /**\n     * Returns the last known scroll position for the given URL path.\n     */\n    getScrollPosition: function getScrollPosition(path) {\n      if (!this.scrollHistory) this.scrollHistory = {};\n\n      return this.scrollHistory[path] || null;\n    }\n\n  },\n\n  componentWillMount: function componentWillMount() {\n    invariant(this.constructor.getScrollBehavior() == null || canUseDOM, \"Cannot use scroll behavior without a DOM\");\n  },\n\n  componentDidMount: function componentDidMount() {\n    this._updateScroll();\n  },\n\n  componentDidUpdate: function componentDidUpdate(prevProps, prevState) {\n    this._updateScroll(prevState);\n  },\n\n  _updateScroll: function _updateScroll(prevState) {\n    if (!shouldUpdateScroll(this.state, prevState)) {\n      return;\n    }var scrollBehavior = this.constructor.getScrollBehavior();\n\n    if (scrollBehavior) scrollBehavior.updateScrollPosition(this.constructor.getScrollPosition(this.state.path), this.state.action);\n  }\n\n};\n\nmodule.exports = ScrollHistory;","\"use strict\";\n\nvar PropTypes = require(\"./PropTypes\");\n\n/**\n * A mixin for components that need to know the path, routes, URL\n * params and query that are currently active.\n *\n * Example:\n *\n *   var AboutLink = React.createClass({\n *     mixins: [ Router.State ],\n *     render: function () {\n *       var className = this.props.className;\n *   \n *       if (this.isActive('about'))\n *         className += ' is-active';\n *   \n *       return React.DOM.a({ className: className }, this.props.children);\n *     }\n *   });\n */\nvar State = {\n\n  contextTypes: {\n    getCurrentPath: PropTypes.func.isRequired,\n    getCurrentRoutes: PropTypes.func.isRequired,\n    getCurrentPathname: PropTypes.func.isRequired,\n    getCurrentParams: PropTypes.func.isRequired,\n    getCurrentQuery: PropTypes.func.isRequired,\n    isActive: PropTypes.func.isRequired\n  },\n\n  /**\n   * Returns the current URL path.\n   */\n  getPath: function getPath() {\n    return this.context.getCurrentPath();\n  },\n\n  /**\n   * Returns an array of the routes that are currently active.\n   */\n  getRoutes: function getRoutes() {\n    return this.context.getCurrentRoutes();\n  },\n\n  /**\n   * Returns the current URL path without the query string.\n   */\n  getPathname: function getPathname() {\n    return this.context.getCurrentPathname();\n  },\n\n  /**\n   * Returns an object of the URL params that are currently active.\n   */\n  getParams: function getParams() {\n    return this.context.getCurrentParams();\n  },\n\n  /**\n   * Returns an object of the query params that are currently active.\n   */\n  getQuery: function getQuery() {\n    return this.context.getCurrentQuery();\n  },\n\n  /**\n   * A helper method to determine if a given route, params, and query\n   * are active.\n   */\n  isActive: function isActive(to, params, query) {\n    return this.context.isActive(to, params, query);\n  }\n\n};\n\nmodule.exports = State;","\"use strict\";\n\nvar assign = require(\"react/lib/Object.assign\");\nvar PropTypes = require(\"./PropTypes\");\nvar PathUtils = require(\"./PathUtils\");\n\nfunction routeIsActive(activeRoutes, routeName) {\n  return activeRoutes.some(function (route) {\n    return route.name === routeName;\n  });\n}\n\nfunction paramsAreActive(activeParams, params) {\n  for (var property in params) if (String(activeParams[property]) !== String(params[property])) {\n    return false;\n  }return true;\n}\n\nfunction queryIsActive(activeQuery, query) {\n  for (var property in query) if (String(activeQuery[property]) !== String(query[property])) {\n    return false;\n  }return true;\n}\n\n/**\n * Provides the router with context for Router.State.\n */\nvar StateContext = {\n\n  /**\n   * Returns the current URL path + query string.\n   */\n  getCurrentPath: function getCurrentPath() {\n    return this.state.path;\n  },\n\n  /**\n   * Returns a read-only array of the currently active routes.\n   */\n  getCurrentRoutes: function getCurrentRoutes() {\n    return this.state.routes.slice(0);\n  },\n\n  /**\n   * Returns the current URL path without the query string.\n   */\n  getCurrentPathname: function getCurrentPathname() {\n    return this.state.pathname;\n  },\n\n  /**\n   * Returns a read-only object of the currently active URL parameters.\n   */\n  getCurrentParams: function getCurrentParams() {\n    return assign({}, this.state.params);\n  },\n\n  /**\n   * Returns a read-only object of the currently active query parameters.\n   */\n  getCurrentQuery: function getCurrentQuery() {\n    return assign({}, this.state.query);\n  },\n\n  /**\n   * Returns true if the given route, params, and query are active.\n   */\n  isActive: function isActive(to, params, query) {\n    if (PathUtils.isAbsolute(to)) {\n      return to === this.state.path;\n    }return routeIsActive(this.state.routes, to) && paramsAreActive(this.state.params, params) && (query == null || queryIsActive(this.state.query, query));\n  },\n\n  childContextTypes: {\n    getCurrentPath: PropTypes.func.isRequired,\n    getCurrentRoutes: PropTypes.func.isRequired,\n    getCurrentPathname: PropTypes.func.isRequired,\n    getCurrentParams: PropTypes.func.isRequired,\n    getCurrentQuery: PropTypes.func.isRequired,\n    isActive: PropTypes.func.isRequired\n  },\n\n  getChildContext: function getChildContext() {\n    return {\n      getCurrentPath: this.getCurrentPath,\n      getCurrentRoutes: this.getCurrentRoutes,\n      getCurrentPathname: this.getCurrentPathname,\n      getCurrentParams: this.getCurrentParams,\n      getCurrentQuery: this.getCurrentQuery,\n      isActive: this.isActive\n    };\n  }\n\n};\n\nmodule.exports = StateContext;","\"use strict\";\n\n/* jshint -W058 */\n\nvar Cancellation = require(\"./Cancellation\");\nvar Redirect = require(\"./Redirect\");\n\n/**\n * Encapsulates a transition to a given path.\n *\n * The willTransitionTo and willTransitionFrom handlers receive\n * an instance of this class as their first argument.\n */\nfunction Transition(path, retry) {\n  this.path = path;\n  this.abortReason = null;\n  // TODO: Change this to router.retryTransition(transition)\n  this.retry = retry.bind(this);\n}\n\nTransition.prototype.abort = function (reason) {\n  if (this.abortReason == null) this.abortReason = reason || \"ABORT\";\n};\n\nTransition.prototype.redirect = function (to, params, query) {\n  this.abort(new Redirect(to, params, query));\n};\n\nTransition.prototype.cancel = function () {\n  this.abort(new Cancellation());\n};\n\nTransition.from = function (transition, routes, components, callback) {\n  routes.reduce(function (callback, route, index) {\n    return function (error) {\n      if (error || transition.abortReason) {\n        callback(error);\n      } else if (route.onLeave) {\n        try {\n          route.onLeave(transition, components[index], callback);\n\n          // If there is no callback in the argument list, call it automatically.\n          if (route.onLeave.length < 3) callback();\n        } catch (e) {\n          callback(e);\n        }\n      } else {\n        callback();\n      }\n    };\n  }, callback)();\n};\n\nTransition.to = function (transition, routes, params, query, callback) {\n  routes.reduceRight(function (callback, route) {\n    return function (error) {\n      if (error || transition.abortReason) {\n        callback(error);\n      } else if (route.onEnter) {\n        try {\n          route.onEnter(transition, params, query, callback);\n\n          // If there is no callback in the argument list, call it automatically.\n          if (route.onEnter.length < 4) callback();\n        } catch (e) {\n          callback(e);\n        }\n      } else {\n        callback();\n      }\n    };\n  }, callback)();\n};\n\nmodule.exports = Transition;","\"use strict\";\n\n/**\n * Actions that modify the URL.\n */\nvar LocationActions = {\n\n  /**\n   * Indicates a new location is being pushed to the history stack.\n   */\n  PUSH: \"push\",\n\n  /**\n   * Indicates the current location should be replaced.\n   */\n  REPLACE: \"replace\",\n\n  /**\n   * Indicates the most recent entry should be removed from the history stack.\n   */\n  POP: \"pop\"\n\n};\n\nmodule.exports = LocationActions;","\"use strict\";\n\nvar LocationActions = require(\"../actions/LocationActions\");\n\n/**\n * A scroll behavior that attempts to imitate the default behavior\n * of modern browsers.\n */\nvar ImitateBrowserBehavior = {\n\n  updateScrollPosition: function updateScrollPosition(position, actionType) {\n    switch (actionType) {\n      case LocationActions.PUSH:\n      case LocationActions.REPLACE:\n        window.scrollTo(0, 0);\n        break;\n      case LocationActions.POP:\n        if (position) {\n          window.scrollTo(position.x, position.y);\n        } else {\n          window.scrollTo(0, 0);\n        }\n        break;\n    }\n  }\n\n};\n\nmodule.exports = ImitateBrowserBehavior;","\"use strict\";\n\n/**\n * A scroll behavior that always scrolls to the top of the page\n * after a transition.\n */\nvar ScrollToTopBehavior = {\n\n  updateScrollPosition: function updateScrollPosition() {\n    window.scrollTo(0, 0);\n  }\n\n};\n\nmodule.exports = ScrollToTopBehavior;","\"use strict\";\n\nvar React = (window.React);\nvar Configuration = require(\"../Configuration\");\nvar PropTypes = require(\"../PropTypes\");\n\n/**\n * A <DefaultRoute> component is a special kind of <Route> that\n * renders when its parent matches but none of its siblings do.\n * Only one such route may be used at any given level in the\n * route hierarchy.\n */\nvar DefaultRoute = React.createClass({\n\n  displayName: \"DefaultRoute\",\n\n  mixins: [Configuration],\n\n  propTypes: {\n    name: PropTypes.string,\n    path: PropTypes.falsy,\n    children: PropTypes.falsy,\n    handler: PropTypes.func.isRequired\n  }\n\n});\n\nmodule.exports = DefaultRoute;","\"use strict\";\n\nvar React = (window.React);\nvar classSet = require(\"react/lib/cx\");\nvar assign = require(\"react/lib/Object.assign\");\nvar Navigation = require(\"../Navigation\");\nvar State = require(\"../State\");\nvar PropTypes = require(\"../PropTypes\");\nvar Route = require(\"../Route\");\n\nfunction isLeftClickEvent(event) {\n  return event.button === 0;\n}\n\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\n/**\n * <Link> components are used to create an <a> element that links to a route.\n * When that route is active, the link gets an \"active\" class name (or the\n * value of its `activeClassName` prop).\n *\n * For example, assuming you have the following route:\n *\n *   <Route name=\"showPost\" path=\"/posts/:postID\" handler={Post}/>\n *\n * You could use the following component to link to that route:\n *\n *   <Link to=\"showPost\" params={{ postID: \"123\" }} />\n *\n * In addition to params, links may pass along query string parameters\n * using the `query` prop.\n *\n *   <Link to=\"showPost\" params={{ postID: \"123\" }} query={{ show:true }}/>\n */\nvar Link = React.createClass({\n\n  displayName: \"Link\",\n\n  mixins: [Navigation, State],\n\n  propTypes: {\n    activeClassName: PropTypes.string.isRequired,\n    to: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Route)]),\n    params: PropTypes.object,\n    query: PropTypes.object,\n    activeStyle: PropTypes.object,\n    onClick: PropTypes.func\n  },\n\n  getDefaultProps: function getDefaultProps() {\n    return {\n      activeClassName: \"active\"\n    };\n  },\n\n  handleClick: function handleClick(event) {\n    var allowTransition = true;\n    var clickResult;\n\n    if (this.props.onClick) clickResult = this.props.onClick(event);\n\n    if (isModifiedEvent(event) || !isLeftClickEvent(event)) {\n      return;\n    }if (clickResult === false || event.defaultPrevented === true) allowTransition = false;\n\n    event.preventDefault();\n\n    if (allowTransition) this.transitionTo(this.props.to, this.props.params, this.props.query);\n  },\n\n  /**\n   * Returns the value of the \"href\" attribute to use on the DOM element.\n   */\n  getHref: function getHref() {\n    return this.makeHref(this.props.to, this.props.params, this.props.query);\n  },\n\n  /**\n   * Returns the value of the \"class\" attribute to use on the DOM element, which contains\n   * the value of the activeClassName property when this <Link> is active.\n   */\n  getClassName: function getClassName() {\n    var classNames = {};\n\n    if (this.props.className) classNames[this.props.className] = true;\n\n    if (this.getActiveState()) classNames[this.props.activeClassName] = true;\n\n    return classSet(classNames);\n  },\n\n  getActiveState: function getActiveState() {\n    return this.isActive(this.props.to, this.props.params, this.props.query);\n  },\n\n  render: function render() {\n    var props = assign({}, this.props, {\n      href: this.getHref(),\n      className: this.getClassName(),\n      onClick: this.handleClick\n    });\n\n    if (props.activeStyle && this.getActiveState()) props.style = props.activeStyle;\n\n    return React.DOM.a(props, this.props.children);\n  }\n\n});\n\nmodule.exports = Link;","\"use strict\";\n\nvar React = (window.React);\nvar Configuration = require(\"../Configuration\");\nvar PropTypes = require(\"../PropTypes\");\n\n/**\n * A <NotFoundRoute> is a special kind of <Route> that\n * renders when the beginning of its parent's path matches\n * but none of its siblings do, including any <DefaultRoute>.\n * Only one such route may be used at any given level in the\n * route hierarchy.\n */\nvar NotFoundRoute = React.createClass({\n\n  displayName: \"NotFoundRoute\",\n\n  mixins: [Configuration],\n\n  propTypes: {\n    name: PropTypes.string,\n    path: PropTypes.falsy,\n    children: PropTypes.falsy,\n    handler: PropTypes.func.isRequired\n  }\n\n});\n\nmodule.exports = NotFoundRoute;","\"use strict\";\n\nvar React = (window.React);\nvar Configuration = require(\"../Configuration\");\nvar PropTypes = require(\"../PropTypes\");\n\n/**\n * A <Redirect> component is a special kind of <Route> that always\n * redirects to another route when it matches.\n */\nvar Redirect = React.createClass({\n\n  displayName: \"Redirect\",\n\n  mixins: [Configuration],\n\n  propTypes: {\n    path: PropTypes.string,\n    from: PropTypes.string, // Alias for path.\n    to: PropTypes.string,\n    handler: PropTypes.falsy\n  }\n\n});\n\nmodule.exports = Redirect;","\"use strict\";\n\nvar React = (window.React);\nvar Configuration = require(\"../Configuration\");\nvar PropTypes = require(\"../PropTypes\");\nvar RouteHandler = require(\"./RouteHandler\");\n/**\n * <Route> components specify components that are rendered to the page when the\n * URL matches a given pattern.\n *\n * Routes are arranged in a nested tree structure. When a new URL is requested,\n * the tree is searched depth-first to find a route whose path matches the URL.\n * When one is found, all routes in the tree that lead to it are considered\n * \"active\" and their components are rendered into the DOM, nested in the same\n * order as they are in the tree.\n *\n * The preferred way to configure a router is using JSX. The XML-like syntax is\n * a great way to visualize how routes are laid out in an application.\n *\n *   var routes = [\n *     <Route handler={App}>\n *       <Route name=\"login\" handler={Login}/>\n *       <Route name=\"logout\" handler={Logout}/>\n *       <Route name=\"about\" handler={About}/>\n *     </Route>\n *   ];\n *   \n *   Router.run(routes, function (Handler) {\n *     React.render(<Handler/>, document.body);\n *   });\n *\n * Handlers for Route components that contain children can render their active\n * child route using a <RouteHandler> element.\n *\n *   var App = React.createClass({\n *     render: function () {\n *       return (\n *         <div class=\"application\">\n *           <RouteHandler/>\n *         </div>\n *       );\n *     }\n *   });\n *\n * If no handler is provided for the route, it will render a matched child route.\n */\nvar Route = React.createClass({\n\n  displayName: \"Route\",\n\n  mixins: [Configuration],\n\n  propTypes: {\n    name: PropTypes.string,\n    path: PropTypes.string,\n    handler: PropTypes.func,\n    ignoreScrollBehavior: PropTypes.bool\n  },\n\n  getDefaultProps: function getDefaultProps() {\n    return {\n      handler: RouteHandler\n    };\n  }\n\n});\n\nmodule.exports = Route;","\"use strict\";\n\nvar React = (window.React);\nvar RouteHandlerMixin = require(\"../RouteHandlerMixin\");\n\n/**\n * A <RouteHandler> component renders the active child route handler\n * when routes are nested.\n */\nvar RouteHandler = React.createClass({\n\n  displayName: \"RouteHandler\",\n\n  mixins: [RouteHandlerMixin],\n\n  render: function render() {\n    return this.createChildRouteHandler();\n  }\n\n});\n\nmodule.exports = RouteHandler;","\"use strict\";\n\n/* jshint -W058 */\nvar React = (window.React);\nvar warning = require(\"react/lib/warning\");\nvar invariant = require(\"react/lib/invariant\");\nvar canUseDOM = require(\"react/lib/ExecutionEnvironment\").canUseDOM;\nvar LocationActions = require(\"./actions/LocationActions\");\nvar ImitateBrowserBehavior = require(\"./behaviors/ImitateBrowserBehavior\");\nvar HashLocation = require(\"./locations/HashLocation\");\nvar HistoryLocation = require(\"./locations/HistoryLocation\");\nvar RefreshLocation = require(\"./locations/RefreshLocation\");\nvar StaticLocation = require(\"./locations/StaticLocation\");\nvar NavigationContext = require(\"./NavigationContext\");\nvar ScrollHistory = require(\"./ScrollHistory\");\nvar StateContext = require(\"./StateContext\");\nvar createRoutesFromReactChildren = require(\"./createRoutesFromReactChildren\");\nvar isReactChildren = require(\"./isReactChildren\");\nvar Transition = require(\"./Transition\");\nvar PropTypes = require(\"./PropTypes\");\nvar Redirect = require(\"./Redirect\");\nvar History = require(\"./History\");\nvar Cancellation = require(\"./Cancellation\");\nvar Match = require(\"./Match\");\nvar Route = require(\"./Route\");\nvar supportsHistory = require(\"./supportsHistory\");\nvar PathUtils = require(\"./PathUtils\");\n\n/**\n * The default location for new routers.\n */\nvar DEFAULT_LOCATION = canUseDOM ? HashLocation : \"/\";\n\n/**\n * The default scroll behavior for new routers.\n */\nvar DEFAULT_SCROLL_BEHAVIOR = canUseDOM ? ImitateBrowserBehavior : null;\n\nfunction hasProperties(object, properties) {\n  for (var propertyName in properties) if (properties.hasOwnProperty(propertyName) && object[propertyName] !== properties[propertyName]) {\n    return false;\n  }return true;\n}\n\nfunction hasMatch(routes, route, prevParams, nextParams, prevQuery, nextQuery) {\n  return routes.some(function (r) {\n    if (r !== route) return false;\n\n    var paramNames = route.paramNames;\n    var paramName;\n\n    // Ensure that all params the route cares about did not change.\n    for (var i = 0, len = paramNames.length; i < len; ++i) {\n      paramName = paramNames[i];\n\n      if (nextParams[paramName] !== prevParams[paramName]) return false;\n    }\n\n    // Ensure the query hasn't changed.\n    return hasProperties(prevQuery, nextQuery) && hasProperties(nextQuery, prevQuery);\n  });\n}\n\nfunction addRoutesToNamedRoutes(routes, namedRoutes) {\n  var route;\n  for (var i = 0, len = routes.length; i < len; ++i) {\n    route = routes[i];\n\n    if (route.name) {\n      invariant(namedRoutes[route.name] == null, \"You may not have more than one route named \\\"%s\\\"\", route.name);\n\n      namedRoutes[route.name] = route;\n    }\n\n    if (route.childRoutes) addRoutesToNamedRoutes(route.childRoutes, namedRoutes);\n  }\n}\n\n/**\n * Creates and returns a new router using the given options. A router\n * is a ReactComponent class that knows how to react to changes in the\n * URL and keep the contents of the page in sync.\n *\n * Options may be any of the following:\n *\n * - routes           (required) The route config\n * - location         The location to use. Defaults to HashLocation when\n *                    the DOM is available, \"/\" otherwise\n * - scrollBehavior   The scroll behavior to use. Defaults to ImitateBrowserBehavior\n *                    when the DOM is available, null otherwise\n * - onError          A function that is used to handle errors\n * - onAbort          A function that is used to handle aborted transitions\n *\n * When rendering in a server-side environment, the location should simply\n * be the URL path that was used in the request, including the query string.\n */\nfunction createRouter(options) {\n  options = options || {};\n\n  if (isReactChildren(options)) options = { routes: options };\n\n  var mountedComponents = [];\n  var location = options.location || DEFAULT_LOCATION;\n  var scrollBehavior = options.scrollBehavior || DEFAULT_SCROLL_BEHAVIOR;\n  var state = {};\n  var nextState = {};\n  var pendingTransition = null;\n  var dispatchHandler = null;\n\n  if (typeof location === \"string\") location = new StaticLocation(location);\n\n  if (location instanceof StaticLocation) {\n    warning(!canUseDOM || process.env.NODE_ENV === \"test\", \"You should not use a static location in a DOM environment because \" + \"the router will not be kept in sync with the current URL\");\n  } else {\n    invariant(canUseDOM || location.needsDOM === false, \"You cannot use %s without a DOM\", location);\n  }\n\n  // Automatically fall back to full page refreshes in\n  // browsers that don't support the HTML history API.\n  if (location === HistoryLocation && !supportsHistory()) location = RefreshLocation;\n\n  var Router = React.createClass({\n\n    displayName: \"Router\",\n\n    statics: {\n\n      isRunning: false,\n\n      cancelPendingTransition: function cancelPendingTransition() {\n        if (pendingTransition) {\n          pendingTransition.cancel();\n          pendingTransition = null;\n        }\n      },\n\n      clearAllRoutes: function clearAllRoutes() {\n        this.cancelPendingTransition();\n        this.namedRoutes = {};\n        this.routes = [];\n      },\n\n      /**\n       * Adds routes to this router from the given children object (see ReactChildren).\n       */\n      addRoutes: function addRoutes(routes) {\n        if (isReactChildren(routes)) routes = createRoutesFromReactChildren(routes);\n\n        addRoutesToNamedRoutes(routes, this.namedRoutes);\n\n        this.routes.push.apply(this.routes, routes);\n      },\n\n      /**\n       * Replaces routes of this router from the given children object (see ReactChildren).\n       */\n      replaceRoutes: function replaceRoutes(routes) {\n        this.clearAllRoutes();\n        this.addRoutes(routes);\n        this.refresh();\n      },\n\n      /**\n       * Performs a match of the given path against this router and returns an object\n       * with the { routes, params, pathname, query } that match. Returns null if no\n       * match can be made.\n       */\n      match: function match(path) {\n        return Match.findMatch(this.routes, path);\n      },\n\n      /**\n       * Returns an absolute URL path created from the given route\n       * name, URL parameters, and query.\n       */\n      makePath: function makePath(to, params, query) {\n        var path;\n        if (PathUtils.isAbsolute(to)) {\n          path = to;\n        } else {\n          var route = to instanceof Route ? to : this.namedRoutes[to];\n\n          invariant(route instanceof Route, \"Cannot find a route named \\\"%s\\\"\", to);\n\n          path = route.path;\n        }\n\n        return PathUtils.withQuery(PathUtils.injectParams(path, params), query);\n      },\n\n      /**\n       * Returns a string that may safely be used as the href of a link\n       * to the route with the given name, URL parameters, and query.\n       */\n      makeHref: function makeHref(to, params, query) {\n        var path = this.makePath(to, params, query);\n        return location === HashLocation ? \"#\" + path : path;\n      },\n\n      /**\n       * Transitions to the URL specified in the arguments by pushing\n       * a new URL onto the history stack.\n       */\n      transitionTo: function transitionTo(to, params, query) {\n        var path = this.makePath(to, params, query);\n\n        if (pendingTransition) {\n          // Replace so pending location does not stay in history.\n          location.replace(path);\n        } else {\n          location.push(path);\n        }\n      },\n\n      /**\n       * Transitions to the URL specified in the arguments by replacing\n       * the current URL in the history stack.\n       */\n      replaceWith: function replaceWith(to, params, query) {\n        location.replace(this.makePath(to, params, query));\n      },\n\n      /**\n       * Transitions to the previous URL if one is available. Returns true if the\n       * router was able to go back, false otherwise.\n       *\n       * Note: The router only tracks history entries in your application, not the\n       * current browser session, so you can safely call this function without guarding\n       * against sending the user back to some other site. However, when using\n       * RefreshLocation (which is the fallback for HistoryLocation in browsers that\n       * don't support HTML5 history) this method will *always* send the client back\n       * because we cannot reliably track history length.\n       */\n      goBack: function goBack() {\n        if (History.length > 1 || location === RefreshLocation) {\n          location.pop();\n          return true;\n        }\n\n        warning(false, \"goBack() was ignored because there is no router history\");\n\n        return false;\n      },\n\n      handleAbort: options.onAbort || function (abortReason) {\n        if (location instanceof StaticLocation) throw new Error(\"Unhandled aborted transition! Reason: \" + abortReason);\n\n        if (abortReason instanceof Cancellation) {\n          return;\n        } else if (abortReason instanceof Redirect) {\n          location.replace(this.makePath(abortReason.to, abortReason.params, abortReason.query));\n        } else {\n          location.pop();\n        }\n      },\n\n      handleError: options.onError || function (error) {\n        // Throw so we don't silently swallow async errors.\n        throw error; // This error probably originated in a transition hook.\n      },\n\n      handleLocationChange: function handleLocationChange(change) {\n        this.dispatch(change.path, change.type);\n      },\n\n      /**\n       * Performs a transition to the given path and calls callback(error, abortReason)\n       * when the transition is finished. If both arguments are null the router's state\n       * was updated. Otherwise the transition did not complete.\n       *\n       * In a transition, a router first determines which routes are involved by beginning\n       * with the current route, up the route tree to the first parent route that is shared\n       * with the destination route, and back down the tree to the destination route. The\n       * willTransitionFrom hook is invoked on all route handlers we're transitioning away\n       * from, in reverse nesting order. Likewise, the willTransitionTo hook is invoked on\n       * all route handlers we're transitioning to.\n       *\n       * Both willTransitionFrom and willTransitionTo hooks may either abort or redirect the\n       * transition. To resolve asynchronously, they may use the callback argument. If no\n       * hooks wait, the transition is fully synchronous.\n       */\n      dispatch: function dispatch(path, action) {\n        this.cancelPendingTransition();\n\n        var prevPath = state.path;\n        var isRefreshing = action == null;\n\n        if (prevPath === path && !isRefreshing) {\n          return;\n        } // Nothing to do!\n\n        // Record the scroll position as early as possible to\n        // get it before browsers try update it automatically.\n        if (prevPath && action === LocationActions.PUSH) this.recordScrollPosition(prevPath);\n\n        var match = this.match(path);\n\n        warning(match != null, \"No route matches path \\\"%s\\\". Make sure you have <Route path=\\\"%s\\\"> somewhere in your routes\", path, path);\n\n        if (match == null) match = {};\n\n        var prevRoutes = state.routes || [];\n        var prevParams = state.params || {};\n        var prevQuery = state.query || {};\n\n        var nextRoutes = match.routes || [];\n        var nextParams = match.params || {};\n        var nextQuery = match.query || {};\n\n        var fromRoutes, toRoutes;\n        if (prevRoutes.length) {\n          fromRoutes = prevRoutes.filter(function (route) {\n            return !hasMatch(nextRoutes, route, prevParams, nextParams, prevQuery, nextQuery);\n          });\n\n          toRoutes = nextRoutes.filter(function (route) {\n            return !hasMatch(prevRoutes, route, prevParams, nextParams, prevQuery, nextQuery);\n          });\n        } else {\n          fromRoutes = [];\n          toRoutes = nextRoutes;\n        }\n\n        var transition = new Transition(path, this.replaceWith.bind(this, path));\n        pendingTransition = transition;\n\n        var fromComponents = mountedComponents.slice(prevRoutes.length - fromRoutes.length);\n\n        Transition.from(transition, fromRoutes, fromComponents, function (error) {\n          if (error || transition.abortReason) return dispatchHandler.call(Router, error, transition); // No need to continue.\n\n          Transition.to(transition, toRoutes, nextParams, nextQuery, function (error) {\n            dispatchHandler.call(Router, error, transition, {\n              path: path,\n              action: action,\n              pathname: match.pathname,\n              routes: nextRoutes,\n              params: nextParams,\n              query: nextQuery\n            });\n          });\n        });\n      },\n\n      /**\n       * Starts this router and calls callback(router, state) when the route changes.\n       *\n       * If the router's location is static (i.e. a URL path in a server environment)\n       * the callback is called only once. Otherwise, the location should be one of the\n       * Router.*Location objects (e.g. Router.HashLocation or Router.HistoryLocation).\n       */\n      run: function run(callback) {\n        invariant(!this.isRunning, \"Router is already running\");\n\n        dispatchHandler = function (error, transition, newState) {\n          if (error) Router.handleError(error);\n\n          if (pendingTransition !== transition) return;\n\n          pendingTransition = null;\n\n          if (transition.abortReason) {\n            Router.handleAbort(transition.abortReason);\n          } else {\n            callback.call(this, this, nextState = newState);\n          }\n        };\n\n        if (!(location instanceof StaticLocation)) {\n          if (location.addChangeListener) location.addChangeListener(Router.handleLocationChange);\n\n          this.isRunning = true;\n        }\n\n        // Bootstrap using the current path.\n        this.refresh();\n      },\n\n      refresh: function refresh() {\n        Router.dispatch(location.getCurrentPath(), null);\n      },\n\n      stop: function stop() {\n        this.cancelPendingTransition();\n\n        if (location.removeChangeListener) location.removeChangeListener(Router.handleLocationChange);\n\n        this.isRunning = false;\n      },\n\n      getScrollBehavior: function getScrollBehavior() {\n        return scrollBehavior;\n      }\n\n    },\n\n    mixins: [NavigationContext, StateContext, ScrollHistory],\n\n    propTypes: {\n      children: PropTypes.falsy\n    },\n\n    childContextTypes: {\n      getRouteAtDepth: React.PropTypes.func.isRequired,\n      setRouteComponentAtDepth: React.PropTypes.func.isRequired,\n      routeHandlers: React.PropTypes.array.isRequired\n    },\n\n    getChildContext: function getChildContext() {\n      return {\n        getRouteAtDepth: this.getRouteAtDepth,\n        setRouteComponentAtDepth: this.setRouteComponentAtDepth,\n        routeHandlers: [this]\n      };\n    },\n\n    getInitialState: function getInitialState() {\n      return state = nextState;\n    },\n\n    componentWillReceiveProps: function componentWillReceiveProps() {\n      this.setState(state = nextState);\n    },\n\n    componentWillUnmount: function componentWillUnmount() {\n      Router.stop();\n    },\n\n    getLocation: function getLocation() {\n      return location;\n    },\n\n    getRouteAtDepth: function getRouteAtDepth(depth) {\n      var routes = this.state.routes;\n      return routes && routes[depth];\n    },\n\n    setRouteComponentAtDepth: function setRouteComponentAtDepth(depth, component) {\n      mountedComponents[depth] = component;\n    },\n\n    render: function render() {\n      var route = this.getRouteAtDepth(0);\n      return route ? React.createElement(route.handler, this.props) : null;\n    }\n\n  });\n\n  Router.clearAllRoutes();\n\n  if (options.routes) Router.addRoutes(options.routes);\n\n  return Router;\n}\n\nmodule.exports = createRouter;","\"use strict\";\n\n/* jshint -W084 */\n\nvar React = (window.React);\nvar assign = require(\"react/lib/Object.assign\");\nvar warning = require(\"react/lib/warning\");\nvar DefaultRouteType = require(\"./components/DefaultRoute\").type;\nvar NotFoundRouteType = require(\"./components/NotFoundRoute\").type;\nvar RedirectType = require(\"./components/Redirect\").type;\nvar Route = require(\"./Route\");\n\nfunction checkPropTypes(componentName, propTypes, props) {\n  componentName = componentName || \"UnknownComponent\";\n\n  for (var propName in propTypes) {\n    if (propTypes.hasOwnProperty(propName)) {\n      var error = propTypes[propName](props, propName, componentName);\n\n      if (error instanceof Error) warning(false, error.message);\n    }\n  }\n}\n\nfunction createRouteOptions(props) {\n  var options = assign({}, props);\n  var handler = options.handler;\n\n  if (handler) {\n    options.onEnter = handler.willTransitionTo;\n    options.onLeave = handler.willTransitionFrom;\n  }\n\n  return options;\n}\n\nfunction createRouteFromReactElement(element) {\n  if (!React.isValidElement(element)) {\n    return;\n  }var type = element.type;\n  var props = element.props;\n\n  if (type.propTypes) checkPropTypes(type.displayName, type.propTypes, props);\n\n  if (type === DefaultRouteType) {\n    return Route.createDefaultRoute(createRouteOptions(props));\n  }if (type === NotFoundRouteType) {\n    return Route.createNotFoundRoute(createRouteOptions(props));\n  }if (type === RedirectType) {\n    return Route.createRedirect(createRouteOptions(props));\n  }return Route.createRoute(createRouteOptions(props), function () {\n    if (props.children) createRoutesFromReactChildren(props.children);\n  });\n}\n\n/**\n * Creates and returns an array of routes created from the given\n * ReactChildren, all of which should be one of <Route>, <DefaultRoute>,\n * <NotFoundRoute>, or <Redirect>, e.g.:\n *\n *   var { createRoutesFromReactChildren, Route, Redirect } = require('react-router');\n *\n *   var routes = createRoutesFromReactChildren(\n *     <Route path=\"/\" handler={App}>\n *       <Route name=\"user\" path=\"/user/:userId\" handler={User}>\n *         <Route name=\"task\" path=\"tasks/:taskId\" handler={Task}/>\n *         <Redirect from=\"todos/:taskId\" to=\"task\"/>\n *       </Route>\n *     </Route>\n *   );\n */\nfunction createRoutesFromReactChildren(children) {\n  var routes = [];\n\n  React.Children.forEach(children, function (child) {\n    if (child = createRouteFromReactElement(child)) routes.push(child);\n  });\n\n  return routes;\n}\n\nmodule.exports = createRoutesFromReactChildren;","\"use strict\";\n\nvar invariant = require(\"react/lib/invariant\");\nvar canUseDOM = require(\"react/lib/ExecutionEnvironment\").canUseDOM;\n\n/**\n * Returns the current scroll position of the window as { x, y }.\n */\nfunction getWindowScrollPosition() {\n  invariant(canUseDOM, \"Cannot get current scroll position without a DOM\");\n\n  return {\n    x: window.pageXOffset || document.documentElement.scrollLeft,\n    y: window.pageYOffset || document.documentElement.scrollTop\n  };\n}\n\nmodule.exports = getWindowScrollPosition;","\"use strict\";\n\nexports.DefaultRoute = require(\"./components/DefaultRoute\");\nexports.Link = require(\"./components/Link\");\nexports.NotFoundRoute = require(\"./components/NotFoundRoute\");\nexports.Redirect = require(\"./components/Redirect\");\nexports.Route = require(\"./components/Route\");\nexports.RouteHandler = require(\"./components/RouteHandler\");\n\nexports.HashLocation = require(\"./locations/HashLocation\");\nexports.HistoryLocation = require(\"./locations/HistoryLocation\");\nexports.RefreshLocation = require(\"./locations/RefreshLocation\");\nexports.StaticLocation = require(\"./locations/StaticLocation\");\n\nexports.ImitateBrowserBehavior = require(\"./behaviors/ImitateBrowserBehavior\");\nexports.ScrollToTopBehavior = require(\"./behaviors/ScrollToTopBehavior\");\n\nexports.History = require(\"./History\");\nexports.Navigation = require(\"./Navigation\");\nexports.RouteHandlerMixin = require(\"./RouteHandlerMixin\");\nexports.State = require(\"./State\");\n\nexports.createRoute = require(\"./Route\").createRoute;\nexports.createDefaultRoute = require(\"./Route\").createDefaultRoute;\nexports.createNotFoundRoute = require(\"./Route\").createNotFoundRoute;\nexports.createRedirect = require(\"./Route\").createRedirect;\nexports.createRoutesFromReactChildren = require(\"./createRoutesFromReactChildren\");\nexports.create = require(\"./createRouter\");\nexports.run = require(\"./runRouter\");","\"use strict\";\n\nvar React = (window.React);\n\nfunction isValidChild(object) {\n  return object == null || React.isValidElement(object);\n}\n\nfunction isReactChildren(object) {\n  return isValidChild(object) || Array.isArray(object) && object.every(isValidChild);\n}\n\nmodule.exports = isReactChildren;","\"use strict\";\n\nvar LocationActions = require(\"../actions/LocationActions\");\nvar History = require(\"../History\");\n\n/**\n * Returns the current URL path from the `hash` portion of the URL, including\n * query string.\n */\nfunction getHashPath() {\n  return decodeURI(\n  // We can't use window.location.hash here because it's not\n  // consistent across browsers - Firefox will pre-decode it!\n  window.location.href.split(\"#\")[1] || \"\");\n}\n\nvar _actionType;\n\nfunction ensureSlash() {\n  var path = getHashPath();\n\n  if (path.charAt(0) === \"/\") {\n    return true;\n  }HashLocation.replace(\"/\" + path);\n\n  return false;\n}\n\nvar _changeListeners = [];\n\nfunction notifyChange(type) {\n  if (type === LocationActions.PUSH) History.length += 1;\n\n  var change = {\n    path: getHashPath(),\n    type: type\n  };\n\n  _changeListeners.forEach(function (listener) {\n    listener(change);\n  });\n}\n\nvar _isListening = false;\n\nfunction onHashChange() {\n  if (ensureSlash()) {\n    // If we don't have an _actionType then all we know is the hash\n    // changed. It was probably caused by the user clicking the Back\n    // button, but may have also been the Forward button or manual\n    // manipulation. So just guess 'pop'.\n    notifyChange(_actionType || LocationActions.POP);\n    _actionType = null;\n  }\n}\n\n/**\n * A Location that uses `window.location.hash`.\n */\nvar HashLocation = {\n\n  addChangeListener: function addChangeListener(listener) {\n    _changeListeners.push(listener);\n\n    // Do this BEFORE listening for hashchange.\n    ensureSlash();\n\n    if (!_isListening) {\n      if (window.addEventListener) {\n        window.addEventListener(\"hashchange\", onHashChange, false);\n      } else {\n        window.attachEvent(\"onhashchange\", onHashChange);\n      }\n\n      _isListening = true;\n    }\n  },\n\n  removeChangeListener: function removeChangeListener(listener) {\n    _changeListeners = _changeListeners.filter(function (l) {\n      return l !== listener;\n    });\n\n    if (_changeListeners.length === 0) {\n      if (window.removeEventListener) {\n        window.removeEventListener(\"hashchange\", onHashChange, false);\n      } else {\n        window.removeEvent(\"onhashchange\", onHashChange);\n      }\n\n      _isListening = false;\n    }\n  },\n\n  push: function push(path) {\n    _actionType = LocationActions.PUSH;\n    window.location.hash = path;\n  },\n\n  replace: function replace(path) {\n    _actionType = LocationActions.REPLACE;\n    window.location.replace(window.location.pathname + window.location.search + \"#\" + path);\n  },\n\n  pop: function pop() {\n    _actionType = LocationActions.POP;\n    History.back();\n  },\n\n  getCurrentPath: getHashPath,\n\n  toString: function toString() {\n    return \"<HashLocation>\";\n  }\n\n};\n\nmodule.exports = HashLocation;","\"use strict\";\n\nvar LocationActions = require(\"../actions/LocationActions\");\nvar History = require(\"../History\");\n\n/**\n * Returns the current URL path from `window.location`, including query string.\n */\nfunction getWindowPath() {\n  return decodeURI(window.location.pathname + window.location.search);\n}\n\nvar _changeListeners = [];\n\nfunction notifyChange(type) {\n  var change = {\n    path: getWindowPath(),\n    type: type\n  };\n\n  _changeListeners.forEach(function (listener) {\n    listener(change);\n  });\n}\n\nvar _isListening = false;\n\nfunction onPopState(event) {\n  if (event.state === undefined) {\n    return;\n  } // Ignore extraneous popstate events in WebKit.\n\n  notifyChange(LocationActions.POP);\n}\n\n/**\n * A Location that uses HTML5 history.\n */\nvar HistoryLocation = {\n\n  addChangeListener: function addChangeListener(listener) {\n    _changeListeners.push(listener);\n\n    if (!_isListening) {\n      if (window.addEventListener) {\n        window.addEventListener(\"popstate\", onPopState, false);\n      } else {\n        window.attachEvent(\"onpopstate\", onPopState);\n      }\n\n      _isListening = true;\n    }\n  },\n\n  removeChangeListener: function removeChangeListener(listener) {\n    _changeListeners = _changeListeners.filter(function (l) {\n      return l !== listener;\n    });\n\n    if (_changeListeners.length === 0) {\n      if (window.addEventListener) {\n        window.removeEventListener(\"popstate\", onPopState, false);\n      } else {\n        window.removeEvent(\"onpopstate\", onPopState);\n      }\n\n      _isListening = false;\n    }\n  },\n\n  push: function push(path) {\n    window.history.pushState({ path: path }, \"\", path);\n    History.length += 1;\n    notifyChange(LocationActions.PUSH);\n  },\n\n  replace: function replace(path) {\n    window.history.replaceState({ path: path }, \"\", path);\n    notifyChange(LocationActions.REPLACE);\n  },\n\n  pop: History.back,\n\n  getCurrentPath: getWindowPath,\n\n  toString: function toString() {\n    return \"<HistoryLocation>\";\n  }\n\n};\n\nmodule.exports = HistoryLocation;","\"use strict\";\n\nvar HistoryLocation = require(\"./HistoryLocation\");\nvar History = require(\"../History\");\n\n/**\n * A Location that uses full page refreshes. This is used as\n * the fallback for HistoryLocation in browsers that do not\n * support the HTML5 history API.\n */\nvar RefreshLocation = {\n\n  push: function push(path) {\n    window.location = path;\n  },\n\n  replace: function replace(path) {\n    window.location.replace(path);\n  },\n\n  pop: History.back,\n\n  getCurrentPath: HistoryLocation.getCurrentPath,\n\n  toString: function toString() {\n    return \"<RefreshLocation>\";\n  }\n\n};\n\nmodule.exports = RefreshLocation;","\"use strict\";\n\nvar _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };\n\nvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\nvar invariant = require(\"react/lib/invariant\");\n\nfunction throwCannotModify() {\n  invariant(false, \"You cannot modify a static location\");\n}\n\n/**\n * A location that only ever contains a single path. Useful in\n * stateless environments like servers where there is no path history,\n * only the path that was used in the request.\n */\n\nvar StaticLocation = (function () {\n  function StaticLocation(path) {\n    _classCallCheck(this, StaticLocation);\n\n    this.path = path;\n  }\n\n  _prototypeProperties(StaticLocation, null, {\n    getCurrentPath: {\n      value: function getCurrentPath() {\n        return this.path;\n      },\n      writable: true,\n      configurable: true\n    },\n    toString: {\n      value: function toString() {\n        return \"<StaticLocation path=\\\"\" + this.path + \"\\\">\";\n      },\n      writable: true,\n      configurable: true\n    }\n  });\n\n  return StaticLocation;\n})();\n\n// TODO: Include these in the above class definition\n// once we can use ES7 property initializers.\nStaticLocation.prototype.push = throwCannotModify;\nStaticLocation.prototype.replace = throwCannotModify;\nStaticLocation.prototype.pop = throwCannotModify;\n\nmodule.exports = StaticLocation;","\"use strict\";\n\nvar createRouter = require(\"./createRouter\");\n\n/**\n * A high-level convenience method that creates, configures, and\n * runs a router in one shot. The method signature is:\n *\n *   Router.run(routes[, location ], callback);\n *\n * Using `window.location.hash` to manage the URL, you could do:\n *\n *   Router.run(routes, function (Handler) {\n *     React.render(<Handler/>, document.body);\n *   });\n * \n * Using HTML5 history and a custom \"cursor\" prop:\n * \n *   Router.run(routes, Router.HistoryLocation, function (Handler) {\n *     React.render(<Handler cursor={cursor}/>, document.body);\n *   });\n *\n * Returns the newly created router.\n *\n * Note: If you need to specify further options for your router such\n * as error/abort handling or custom scroll behavior, use Router.create\n * instead.\n *\n *   var router = Router.create(options);\n *   router.run(function (Handler) {\n *     // ...\n *   });\n */\nfunction runRouter(routes, location, callback) {\n  if (typeof location === \"function\") {\n    callback = location;\n    location = null;\n  }\n\n  var router = createRouter({\n    routes: routes,\n    location: location\n  });\n\n  router.run(callback);\n\n  return router;\n}\n\nmodule.exports = runRouter;","\"use strict\";\n\nfunction supportsHistory() {\n  /*! taken from modernizr\n   * https://github.com/Modernizr/Modernizr/blob/master/LICENSE\n   * https://github.com/Modernizr/Modernizr/blob/master/feature-detects/history.js\n   * changed to avoid false negatives for Windows Phones: https://github.com/rackt/react-router/issues/586\n   */\n  var ua = navigator.userAgent;\n  if ((ua.indexOf(\"Android 2.\") !== -1 || ua.indexOf(\"Android 4.0\") !== -1) && ua.indexOf(\"Mobile Safari\") !== -1 && ua.indexOf(\"Chrome\") === -1 && ua.indexOf(\"Windows Phone\") === -1) {\n    return false;\n  }\n  return window.history && \"pushState\" in window.history;\n}\n\nmodule.exports = supportsHistory;","module.exports = require('./lib/');\n","// Load modules\n\nvar Stringify = require('./stringify');\nvar Parse = require('./parse');\n\n\n// Declare internals\n\nvar internals = {};\n\n\nmodule.exports = {\n    stringify: Stringify,\n    parse: Parse\n};\n","// Load modules\n\nvar Utils = require('./utils');\n\n\n// Declare internals\n\nvar internals = {\n    delimiter: '&',\n    depth: 5,\n    arrayLimit: 20,\n    parameterLimit: 1000\n};\n\n\ninternals.parseValues = function (str, options) {\n\n    var obj = {};\n    var parts = str.split(options.delimiter, options.parameterLimit === Infinity ? undefined : options.parameterLimit);\n\n    for (var i = 0, il = parts.length; i < il; ++i) {\n        var part = parts[i];\n        var pos = part.indexOf(']=') === -1 ? part.indexOf('=') : part.indexOf(']=') + 1;\n\n        if (pos === -1) {\n            obj[Utils.decode(part)] = '';\n        }\n        else {\n            var key = Utils.decode(part.slice(0, pos));\n            var val = Utils.decode(part.slice(pos + 1));\n\n            if (!obj.hasOwnProperty(key)) {\n                obj[key] = val;\n            }\n            else {\n                obj[key] = [].concat(obj[key]).concat(val);\n            }\n        }\n    }\n\n    return obj;\n};\n\n\ninternals.parseObject = function (chain, val, options) {\n\n    if (!chain.length) {\n        return val;\n    }\n\n    var root = chain.shift();\n\n    var obj = {};\n    if (root === '[]') {\n        obj = [];\n        obj = obj.concat(internals.parseObject(chain, val, options));\n    }\n    else {\n        var cleanRoot = root[0] === '[' && root[root.length - 1] === ']' ? root.slice(1, root.length - 1) : root;\n        var index = parseInt(cleanRoot, 10);\n        var indexString = '' + index;\n        if (!isNaN(index) &&\n            root !== cleanRoot &&\n            indexString === cleanRoot &&\n            index >= 0 &&\n            index <= options.arrayLimit) {\n\n            obj = [];\n            obj[index] = internals.parseObject(chain, val, options);\n        }\n        else {\n            obj[cleanRoot] = internals.parseObject(chain, val, options);\n        }\n    }\n\n    return obj;\n};\n\n\ninternals.parseKeys = function (key, val, options) {\n\n    if (!key) {\n        return;\n    }\n\n    // The regex chunks\n\n    var parent = /^([^\\[\\]]*)/;\n    var child = /(\\[[^\\[\\]]*\\])/g;\n\n    // Get the parent\n\n    var segment = parent.exec(key);\n\n    // Don't allow them to overwrite object prototype properties\n\n    if (Object.prototype.hasOwnProperty(segment[1])) {\n        return;\n    }\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (segment[1]) {\n        keys.push(segment[1]);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while ((segment = child.exec(key)) !== null && i < options.depth) {\n\n        ++i;\n        if (!Object.prototype.hasOwnProperty(segment[1].replace(/\\[|\\]/g, ''))) {\n            keys.push(segment[1]);\n        }\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return internals.parseObject(keys, val, options);\n};\n\n\nmodule.exports = function (str, options) {\n\n    if (str === '' ||\n        str === null ||\n        typeof str === 'undefined') {\n\n        return {};\n    }\n\n    options = options || {};\n    options.delimiter = typeof options.delimiter === 'string' || Utils.isRegExp(options.delimiter) ? options.delimiter : internals.delimiter;\n    options.depth = typeof options.depth === 'number' ? options.depth : internals.depth;\n    options.arrayLimit = typeof options.arrayLimit === 'number' ? options.arrayLimit : internals.arrayLimit;\n    options.parameterLimit = typeof options.parameterLimit === 'number' ? options.parameterLimit : internals.parameterLimit;\n\n    var tempObj = typeof str === 'string' ? internals.parseValues(str, options) : str;\n    var obj = {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0, il = keys.length; i < il; ++i) {\n        var key = keys[i];\n        var newObj = internals.parseKeys(key, tempObj[key], options);\n        obj = Utils.merge(obj, newObj);\n    }\n\n    return Utils.compact(obj);\n};\n","// Load modules\n\nvar Utils = require('./utils');\n\n\n// Declare internals\n\nvar internals = {\n    delimiter: '&',\n    indices: true\n};\n\n\ninternals.stringify = function (obj, prefix, options) {\n\n    if (Utils.isBuffer(obj)) {\n        obj = obj.toString();\n    }\n    else if (obj instanceof Date) {\n        obj = obj.toISOString();\n    }\n    else if (obj === null) {\n        obj = '';\n    }\n\n    if (typeof obj === 'string' ||\n        typeof obj === 'number' ||\n        typeof obj === 'boolean') {\n\n        return [encodeURIComponent(prefix) + '=' + encodeURIComponent(obj)];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys = Object.keys(obj);\n    for (var i = 0, il = objKeys.length; i < il; ++i) {\n        var key = objKeys[i];\n        if (!options.indices &&\n            Array.isArray(obj)) {\n\n            values = values.concat(internals.stringify(obj[key], prefix, options));\n        }\n        else {\n            values = values.concat(internals.stringify(obj[key], prefix + '[' + key + ']', options));\n        }\n    }\n\n    return values;\n};\n\n\nmodule.exports = function (obj, options) {\n\n    options = options || {};\n    var delimiter = typeof options.delimiter === 'undefined' ? internals.delimiter : options.delimiter;\n    options.indices = typeof options.indices === 'boolean' ? options.indices : internals.indices;\n\n    var keys = [];\n\n    if (typeof obj !== 'object' ||\n        obj === null) {\n\n        return '';\n    }\n\n    var objKeys = Object.keys(obj);\n    for (var i = 0, il = objKeys.length; i < il; ++i) {\n        var key = objKeys[i];\n        keys = keys.concat(internals.stringify(obj[key], key, options));\n    }\n\n    return keys.join(delimiter);\n};\n","// Load modules\n\n\n// Declare internals\n\nvar internals = {};\n\n\nexports.arrayToObject = function (source) {\n\n    var obj = {};\n    for (var i = 0, il = source.length; i < il; ++i) {\n        if (typeof source[i] !== 'undefined') {\n\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\n\nexports.merge = function (target, source) {\n\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (Array.isArray(target)) {\n            target.push(source);\n        }\n        else {\n            target[source] = true;\n        }\n\n        return target;\n    }\n\n    if (typeof target !== 'object') {\n        target = [target].concat(source);\n        return target;\n    }\n\n    if (Array.isArray(target) &&\n        !Array.isArray(source)) {\n\n        target = exports.arrayToObject(target);\n    }\n\n    var keys = Object.keys(source);\n    for (var k = 0, kl = keys.length; k < kl; ++k) {\n        var key = keys[k];\n        var value = source[key];\n\n        if (!target[key]) {\n            target[key] = value;\n        }\n        else {\n            target[key] = exports.merge(target[key], value);\n        }\n    }\n\n    return target;\n};\n\n\nexports.decode = function (str) {\n\n    try {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    } catch (e) {\n        return str;\n    }\n};\n\n\nexports.compact = function (obj, refs) {\n\n    if (typeof obj !== 'object' ||\n        obj === null) {\n\n        return obj;\n    }\n\n    refs = refs || [];\n    var lookup = refs.indexOf(obj);\n    if (lookup !== -1) {\n        return refs[lookup];\n    }\n\n    refs.push(obj);\n\n    if (Array.isArray(obj)) {\n        var compacted = [];\n\n        for (var i = 0, il = obj.length; i < il; ++i) {\n            if (typeof obj[i] !== 'undefined') {\n                compacted.push(obj[i]);\n            }\n        }\n\n        return compacted;\n    }\n\n    var keys = Object.keys(obj);\n    for (i = 0, il = keys.length; i < il; ++i) {\n        var key = keys[i];\n        obj[key] = exports.compact(obj[key], refs);\n    }\n\n    return obj;\n};\n\n\nexports.isRegExp = function (obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\n\nexports.isBuffer = function (obj) {\n\n    if (obj === null ||\n        typeof obj === 'undefined') {\n\n        return false;\n    }\n\n    return !!(obj.constructor &&\n        obj.constructor.isBuffer &&\n        obj.constructor.isBuffer(obj));\n};\n","/**\n * Copyright 2013-2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule ExecutionEnvironment\n */\n\n/*jslint evil: true */\n\n\"use strict\";\n\nvar canUseDOM = !!(\n  typeof window !== 'undefined' &&\n  window.document &&\n  window.document.createElement\n);\n\n/**\n * Simple, lightweight module assisting with the detection and context of\n * Worker. Helps avoid circular dependencies and allows code to reason about\n * whether or not they are in a Worker, even if they never include the main\n * `ReactWorker` dependency.\n */\nvar ExecutionEnvironment = {\n\n  canUseDOM: canUseDOM,\n\n  canUseWorkers: typeof Worker !== 'undefined',\n\n  canUseEventListeners:\n    canUseDOM && !!(window.addEventListener || window.attachEvent),\n\n  canUseViewport: canUseDOM && !!window.screen,\n\n  isInWorker: !canUseDOM // For now, this is true - might change in the future.\n\n};\n\nmodule.exports = ExecutionEnvironment;\n","/**\n * Copyright 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule Object.assign\n */\n\n// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.assign\n\nfunction assign(target, sources) {\n  if (target == null) {\n    throw new TypeError('Object.assign target cannot be null or undefined');\n  }\n\n  var to = Object(target);\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  for (var nextIndex = 1; nextIndex < arguments.length; nextIndex++) {\n    var nextSource = arguments[nextIndex];\n    if (nextSource == null) {\n      continue;\n    }\n\n    var from = Object(nextSource);\n\n    // We don't currently support accessors nor proxies. Therefore this\n    // copy cannot throw. If we ever supported this then we must handle\n    // exceptions and side-effects. We don't support symbols so they won't\n    // be transferred.\n\n    for (var key in from) {\n      if (hasOwnProperty.call(from, key)) {\n        to[key] = from[key];\n      }\n    }\n  }\n\n  return to;\n};\n\nmodule.exports = assign;\n","/**\n * Copyright 2013-2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule cx\n */\n\n/**\n * This function is used to mark string literals representing CSS class names\n * so that they can be transformed statically. This allows for modularization\n * and minification of CSS class names.\n *\n * In static_upstream, this function is actually implemented, but it should\n * eventually be replaced with something more descriptive, and the transform\n * that is used in the main stack should be ported for use elsewhere.\n *\n * @param string|object className to modularize, or an object of key/values.\n *                      In the object case, the values are conditions that\n *                      determine if the className keys should be included.\n * @param [string ...]  Variable list of classNames in the string case.\n * @return string       Renderable space-separated CSS className.\n */\nfunction cx(classNames) {\n  if (typeof classNames == 'object') {\n    return Object.keys(classNames).filter(function(className) {\n      return classNames[className];\n    }).join(' ');\n  } else {\n    return Array.prototype.join.call(arguments, ' ');\n  }\n}\n\nmodule.exports = cx;\n","/**\n * Copyright 2013-2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule emptyFunction\n */\n\nfunction makeEmptyFunction(arg) {\n  return function() {\n    return arg;\n  };\n}\n\n/**\n * This function accepts and discards inputs; it has no side effects. This is\n * primarily useful idiomatically for overridable function endpoints which\n * always need to be callable, since JS lacks a null-call idiom ala Cocoa.\n */\nfunction emptyFunction() {}\n\nemptyFunction.thatReturns = makeEmptyFunction;\nemptyFunction.thatReturnsFalse = makeEmptyFunction(false);\nemptyFunction.thatReturnsTrue = makeEmptyFunction(true);\nemptyFunction.thatReturnsNull = makeEmptyFunction(null);\nemptyFunction.thatReturnsThis = function() { return this; };\nemptyFunction.thatReturnsArgument = function(arg) { return arg; };\n\nmodule.exports = emptyFunction;\n","/**\n * Copyright 2013-2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule invariant\n */\n\n\"use strict\";\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function(condition, format, a, b, c, d, e, f) {\n  if (\"production\" !== process.env.NODE_ENV) {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error(\n        'Minified exception occurred; use the non-minified dev environment ' +\n        'for the full error message and additional helpful warnings.'\n      );\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(\n        'Invariant Violation: ' +\n        format.replace(/%s/g, function() { return args[argIndex++]; })\n      );\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;\n","/**\n * Copyright 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule warning\n */\n\n\"use strict\";\n\nvar emptyFunction = require(\"./emptyFunction\");\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar warning = emptyFunction;\n\nif (\"production\" !== process.env.NODE_ENV) {\n  warning = function(condition, format ) {for (var args=[],$__0=2,$__1=arguments.length;$__0<$__1;$__0++) args.push(arguments[$__0]);\n    if (format === undefined) {\n      throw new Error(\n        '`warning(condition, format, ...args)` requires a warning ' +\n        'message argument'\n      );\n    }\n\n    if (!condition) {\n      var argIndex = 0;\n      console.warn('Warning: ' + format.replace(/%s/g, function()  {return args[argIndex++];}));\n    }\n  };\n}\n\nmodule.exports = warning;\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var setImmediate;\n\n    function addFromSetImmediateArguments(args) {\n        tasksByHandle[nextHandle] = partiallyApplied.apply(undefined, args);\n        return nextHandle++;\n    }\n\n    // This function accepts the same arguments as setImmediate, but\n    // returns a function that requires no arguments.\n    function partiallyApplied(handler) {\n        var args = [].slice.call(arguments, 1);\n        return function() {\n            if (typeof handler === \"function\") {\n                handler.apply(undefined, args);\n            } else {\n                (new Function(\"\" + handler))();\n            }\n        };\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(partiallyApplied(runIfPresent, handle), 0);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    task();\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function installNextTickImplementation() {\n        setImmediate = function() {\n            var handle = addFromSetImmediateArguments(arguments);\n            process.nextTick(partiallyApplied(runIfPresent, handle));\n            return handle;\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        setImmediate = function() {\n            var handle = addFromSetImmediateArguments(arguments);\n            global.postMessage(messagePrefix + handle, \"*\");\n            return handle;\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        setImmediate = function() {\n            var handle = addFromSetImmediateArguments(arguments);\n            channel.port2.postMessage(handle);\n            return handle;\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        setImmediate = function() {\n            var handle = addFromSetImmediateArguments(arguments);\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n            return handle;\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        setImmediate = function() {\n            var handle = addFromSetImmediateArguments(arguments);\n            setTimeout(partiallyApplied(runIfPresent, handle), 0);\n            return handle;\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(new Function(\"return this\")()));\n","\nvar rng;\n\nif (global.crypto && crypto.getRandomValues) {\n  // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n  // Moderately fast, high quality\n  var _rnds8 = new Uint8Array(16);\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(_rnds8);\n    return _rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var  _rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return _rnds;\n  };\n}\n\nmodule.exports = rng;\n\n","//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n// Unique ID creation requires a high quality random # generator.  We feature\n// detect to determine the best RNG source, normalizing to a function that\n// returns 128-bits of randomness, since that's what's usually required\nvar _rng = require('./rng');\n\n// Maps for number <-> hex string conversion\nvar _byteToHex = [];\nvar _hexToByte = {};\nfor (var i = 0; i < 256; i++) {\n  _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n  _hexToByte[_byteToHex[i]] = i;\n}\n\n// **`parse()` - Parse a UUID into it's component bytes**\nfunction parse(s, buf, offset) {\n  var i = (buf && offset) || 0, ii = 0;\n\n  buf = buf || [];\n  s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n    if (ii < 16) { // Don't overflow!\n      buf[i + ii++] = _hexToByte[oct];\n    }\n  });\n\n  // Zero out remaining bytes if string was short\n  while (ii < 16) {\n    buf[i + ii++] = 0;\n  }\n\n  return buf;\n}\n\n// **`unparse()` - Convert UUID byte array (ala parse()) into a string**\nfunction unparse(buf, offset) {\n  var i = offset || 0, bth = _byteToHex;\n  return  bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = _rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; n++) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : unparse(b);\n}\n\n// **`v4()` - Generate random UUID**\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v4(options, buf, offset) {\n  // Deprecated - 'format' argument, as supported in v1.2\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || _rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ii++) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || unparse(rnds);\n}\n\n// Export public API\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\nuuid.parse = parse;\nuuid.unparse = unparse;\n\nmodule.exports = uuid;\n"],"sourceRoot":"/source/"}