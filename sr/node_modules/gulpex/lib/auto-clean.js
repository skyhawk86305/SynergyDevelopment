'use strict';

var assert = require('assert'),
    del = require('del');

function makeCleaner(paths) {
    assert(paths instanceof Object && !(paths instanceof Array),
           'need paths object mapping keys to strings or arrays of strings');

    var targets = [ ];

    for (var key in paths) {
        var target = paths[key];
        if (target instanceof Array) {
            targets = targets.concat(target);
        } else {
            targets.push(target);
        }
    }

    return function cleaner(done) {
        del(targets, done);
    };
}

module.exports = makeCleaner;
