'use strict';

var gutil = require('gulp-util');

function addWarnings(gulp) {
    var warnings;

    function logWarning(warning) {
        gutil.log(gutil.colors.red('WARNING:') + ' ' + warning);
    }

    function logWarningsOnExit() {
        warnings.forEach(logWarning);
    }

    return function warn(warning) {
        if (!warnings) {
            warnings = [];
            gulp.on('stop', logWarningsOnExit);
        }

        warnings.push(warning);
    };
}

module.exports = addWarnings;
