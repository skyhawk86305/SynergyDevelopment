'use strict';

var gulp = require('gulp'),
    gulpex = require('./')(gulp);

var paths = {
        output: {
            'coverage': [ 'coverage.html' ],
            'jsdoc': [ 'doc/**' ],
            'pack': [ '*.tgz' ]
        }
    };

gulp.task('default', [ 'test', 'posttest', 'coverage' ]);

gulp.task('posttest', [ 'lint', 'doc', 'check-stale', 'check-dep-links' ]);

gulp.task('test', gulpex.run('lab'));

gulp.task('coverage', gulpex.run('lab -c -o coverage.html -r html'));

gulp.task('lint', gulpex.run('jshint lib test gulpfile.js'));

gulp.task('doc', gulpex.run('jsdoc -d doc -r lib'));

gulp.task('clean', gulpex.clean(paths.output));

gulp.task('check-deps', gulpex.run('david --warn404'));

gulp.task('check-stale', gulpex.checkStale);

gulp.task('check-dep-links', gulpex.checkDepLinks);

gulp.task('watch', function () {
    gulp.watch([ 'index.js', 'lib/**', 'gulpfile.js', 'test/**' ], [ 'default' ]);
});
