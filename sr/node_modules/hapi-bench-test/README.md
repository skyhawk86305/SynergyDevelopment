# hapi-bench-test

Goal:

* Run your [Hapi] server from its `manifest.json`
* Make up a `manifest.json` if you don't have one
* Make it easy to inject a request and see the logs and response

## Usage

### As a Developer-Mode Dependency

Install the module from the tarball:

    npm install --save-dev http://EXAMPLE.COM/hapi-bench-test.tgz

Use it to build a project-specific bench tester, e.g. `bin/benchtest.js`:

    #!/usr/bin/env node
    var BenchTest = require('hapi-bench-test');
    var options = {};
    (new BenchTest(options)).main();

Options include:

* `fixpath`: takes the injected `path` and returns a fixed path, e.g. to
  prepend an obviously-missing URL suffix you don't want to have to type
  over and over again

To run your bench server:

    bin/benchtest.js

To run it just for long enough to inject a request:

    bin/benchtest.js /whatever/path/you/like

### While Experimenting

Install the module from the tarball *without* updating `devDependencies`:

    npm install http://EXAMPLE.COM/hapi-bench-test.tgz

To run your bench server:

    node_modules/.bin/hapi-bench-test

To run it just for long enough to inject a request:

    node_modules/.bin/hapi-bench-test /whatever/path/you/like

## Limitations

* Locks you in to one version of [Hapi]
* That lock-in makes `npm install -g` very difficult
* Behaviour undefined if you define two or more servers and inject requests
* Behaviour undefined if you set `pack.requirePath` in `manifest.json`

[Hapi]: https://npmjs.org/package/hapi